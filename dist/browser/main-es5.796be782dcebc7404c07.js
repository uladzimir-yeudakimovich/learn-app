function _toArray(t){return _arrayWithHoles(t)||_iterableToArray(t)||_nonIterableRest()}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _construct(t,e,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=_superPropBase(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("XNiG"),i=n("9ppp"),o=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._value=t,n}return _inherits(e,t),_createClass(e,[{key:"_subscribe",value:function(t){var n=_get(_getPrototypeOf(e.prototype),"_subscribe",this).call(this,t);return n&&!n.closed&&t.next(this._value),n}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}},{key:"next",value:function(t){_get(_getPrototypeOf(e.prototype),"next",this).call(this,this._value=t)}},{key:"value",get:function(){return this.getValue()}}]),e}(r.a)},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3Kre":function(t,e,n){"use strict";n.r(e),n.d(e,"factory",(function(){return C})),n.d(e,"registerAnalytics",(function(){return k})),n.d(e,"resetGlobalVars",(function(){return b})),n.d(e,"settings",(function(){return w}));var r,i,o,a=n("wj3C"),s=n.n(a),u=(n("fSjL"),n("mrSG")),c=n("zVF4"),l=n("S+S0"),h="https://www.googletagmanager.com/gtag/js",f=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),d=function(t){return t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),p=((r={})["no-ga-id"]='"measurementId" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',r["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",r["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",r["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",r),v=new c.ErrorFactory("analytics","Analytics",p),y={},g="dataLayer",m="gtag",_=!1;function b(t,e){void 0===t&&(t=!1),void 0===e&&(e={}),_=t,y=e,g="dataLayer",m="gtag"}function w(t){if(_)throw v.create("already-initialized");t.dataLayerName&&(g=t.dataLayerName),t.gtagName&&(m=t.gtagName)}function C(t,e){var n=t.options.measurementId;if(!n)throw v.create("no-ga-id");if(null!=y[n])throw v.create("already-exists",{id:n});if(!_){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(h))return r}return null})()||function(t){var e=document.createElement("script");e.src=h+"?l="+t,e.async=!0,document.head.appendChild(e)}(g),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(g);var r=function(t,e,n){var r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window[e].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(t,e){return function(n,r,i){if(n===f.EVENT){var o=[];if(i&&i.send_to){var a=i.send_to;Array.isArray(a)||(a=[a]);for(var s=0,u=a;s<u.length;s++){var c=e[u[s]];if(!c){o=[];break}o.push(c)}}if(0===o.length)for(var l=0,h=Object.values(e);l<h.length;l++)o.push(h[l]);Promise.all(o).then((function(){return t(f.EVENT,r,i||{})})).catch((function(t){return console.error(t)}))}else n===f.CONFIG?(e[r]||Promise.resolve()).then((function(){t(f.CONFIG,r,i)})).catch((function(t){return console.error(t)})):t(f.SET,r)}}(r,t),{gtagCore:r,wrappedGtag:window[n]}}(y,g,m);o=r.wrappedGtag,i=r.gtagCore,_=!0}return y[n]=function(t,e,n){return Object(u.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(u.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.getId()];case 1:return r=o.sent(),n("js",new Date),n(f.CONFIG,t.options.measurementId,((i={}).firebase_id=r,i.origin="firebase",i.update=!0,i)),[2]}}))}))}(t,e,i),{app:t,logEvent:function(t,e,r){return function(t,e,n,r,i){var o=r||{};i&&i.global||(o=Object(u.__assign)(Object(u.__assign)({},r),{send_to:e})),t(f.EVENT,n,o||{})}(o,n,t,e,r)},setCurrentScreen:function(t,e){return function(t,e,n,r){r&&r.global?t(f.SET,{screen_name:n}):t(f.CONFIG,e,{update:!0,screen_name:n})}(o,n,t,e)},setUserId:function(t,e){return function(t,e,n,r){r&&r.global?t(f.SET,{user_id:n}):t(f.CONFIG,e,{update:!0,user_id:n})}(o,n,t,e)},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i["user_properties."+s]=n[s]}t(f.SET,i)}else t(f.CONFIG,e,{update:!0,user_properties:n})}(o,n,t,e)},setAnalyticsCollectionEnabled:function(t){return function(t,e){window["ga-disable-"+t]=!e}(n,t)}}}function k(t){t.INTERNAL.registerComponent(new l.Component("analytics",(function(t){return C(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:w,EventName:d})),t.INTERNAL.registerComponent(new l.Component("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(e){throw v.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.2.15")}k(s.a)},"3V6w":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){_classCallCheck(this,t),this.isOpen=!1}return _createClass(t,[{key:"toggleOpen",value:function(){this.isOpen=!this.isOpen}}]),t}()},"4I5i":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);var i=r},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),a=n("lJxs"),s=n("Cfvw");function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(r){return r.pipe(u((function(n,r){return Object(s.a)(t(n,r)).pipe(Object(a.a)((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new c(t,n))})}var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,t),this.project=e,this.concurrent=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}]),t}(),l=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var i=new o.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,t,e,n,i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyComplete",value:function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),e}(i.a)},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),e}(n("7o/Q").a)},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,a=n("mrSG"),s=n("q/0M"),u=n("zVF4"),c=n("S+S0"),l=n("x7I3"),h=o.SDK_VERSION,f=new s.Logger("@firebase/firestore");function d(){return f.logLevel===s.LogLevel.DEBUG?i.DEBUG:f.logLevel===s.LogLevel.SILENT?i.SILENT:i.ERROR}function p(t){switch(t){case i.DEBUG:f.logLevel=s.LogLevel.DEBUG;break;case i.ERROR:f.logLevel=s.LogLevel.ERROR;break;case i.SILENT:f.logLevel=s.LogLevel.SILENT;break;default:f.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function v(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(f.logLevel<=s.LogLevel.DEBUG){var i=n.map(g);f.debug.apply(f,a.__spreadArrays(["Firestore ("+h+") ["+t+"]: "+e],i))}}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=s.LogLevel.ERROR){var r=e.map(g);f.error.apply(f,a.__spreadArrays(["Firestore ("+h+"): "+t],r))}}function g(t){if("string"==typeof t)return t;var e=An.t();try{return e.i(t)}catch(e){return t}}function m(t){var e="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+t;throw y(e),new Error(e)}function _(t,e){t||m(e)}!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(i||(i={}));var b=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return _(20===e.length,"Invalid auto ID: "+e),e},t}();function w(t,e){return t<e?-1:t>e?1:0}function C(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function k(t){return t+"\0"}var E=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},I="(default)",T=function(){function t(t,e){this.projectId=t,this.database=e||I}return Object.defineProperty(t.prototype,"o",{get:function(){return this.database===I},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.h=function(t){return w(this.projectId,t.projectId)||w(this.database,t.database)},t}(),S=function(){function t(t){this.uid=t}return t.prototype.l=function(){return null!=this.uid},t.prototype.v=function(){return this.l()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.m=new t("google-credentials-uid"),t.p=new t("first-party-uid"),t}(),A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},N=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(e,t),e}(Error),O=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},R=function(){function t(){this._=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.I=function(){},t.prototype.T=function(t){_(!this._,"Can only call setChangeListener() once."),this._=t,t(S.UNAUTHENTICATED)},t.prototype.R=function(){_(null!==this._,"removeChangeListener() when no listener registered"),this._=null},t}(),x=function(){function t(t){var e=this;this.A=null,this.currentUser=S.UNAUTHENTICATED,this.D=!1,this.P=0,this._=null,this.forceRefresh=!1,this.A=function(){e.P++,e.currentUser=e.S(),e.D=!0,e._&&e._(e.currentUser)},this.P=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.A):(this.A(null),t.get().then((function(t){e.auth=t,e.A&&e.auth.addAuthTokenListener(e.A)}),(function(){})))}return t.prototype.getToken=function(){var t=this;_(null!=this.A,"getToken cannot be called after listener removed.");var e=this.P,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.P!==e)throw new N(A.ABORTED,"getToken aborted due to token change.");return n?(_("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new O(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.I=function(){this.forceRefresh=!0},t.prototype.T=function(t){_(!this._,"Can only call setChangeListener() once."),this._=t,this.D&&t(this.currentUser)},t.prototype.R=function(){_(null!=this.A,"removeChangeListener() called twice"),_(null!==this._,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.A),this.A=null,this._=null},t.prototype.S=function(){var t=this.auth&&this.auth.getUid();return _(null===t||"string"==typeof t,"Received invalid UID: "+t),new S(t)},t}(),P=function(){function t(t,e){this.C=t,this.k=e,this.type="FirstParty",this.user=S.p}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.C.auth.V([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),D=function(){function t(t,e){this.C=t,this.k=e}return t.prototype.getToken=function(){return Promise.resolve(new P(this.C,this.k))},t.prototype.T=function(t){t(S.p)},t.prototype.R=function(){},t.prototype.I=function(){},t}();function L(t){if(!t)return new R;switch(t.type){case"gapi":var e=t.N;return _(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new D(e,t.k||"0");case"provider":return t.N;default:throw new N(A.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function j(t,e){return void 0!==t?t:e}function U(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function F(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function V(t){for(var e in _(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function q(t,e){if(0!==e.length)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ot(e.length,"argument")+".")}function H(t,e,n){if(e.length!==n)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires "+ot(n,"argument")+", but was called with "+ot(e.length,"argument")+".")}function z(t,e,n){if(e.length<n)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ot(n,"argument")+", but was called with "+ot(e.length,"argument")+".")}function B(t,e,n,r){if(e.length<n||e.length>r)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+ot(e.length,"argument")+".")}function G(t,e,n,r){X(t,e,it(n)+" argument",r)}function W(t,e,n,r){void 0!==r&&G(t,e,n,r)}function K(t,e,n,r){X(t,e,n+" option",r)}function Q(t,e,n,r){void 0!==r&&K(t,e,n,r)}function Y(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(Z(u))}var c=Z(r);throw new N(A.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function J(t,e,n,r){if(!e.some((function(t){return t===r})))throw new N(A.INVALID_ARGUMENT,"Invalid value "+Z(r)+" provided to function "+t+"() for its "+it(n)+" argument. Acceptable values: "+e.join(", "))}function X(t,e,n,r){if(!("object"===e?$(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Z(r);throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function $(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Z(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":m("Unknown wrong type: "+typeof t)}function tt(t,e,n){if(void 0===n)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+it(e)+" argument, but it was undefined.")}function et(t,e,n){F(e,(function(e,r){if(n.indexOf(e)<0)throw new N(A.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function nt(t,e,n,r){var i=Z(r);return new N(A.INVALID_ARGUMENT,"Function "+t+"() requires its "+it(n)+" argument to be a "+e+", but it was: "+i)}function rt(t,e,n){if(n<=0)throw new N(A.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+it(e)+" argument to be a positive number, but it was: "+n+".")}function it(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ot(t,e){return t+" "+e+(1===t?"":"s")}var at=function(){function t(t,e){if(H("GeoPoint",arguments,2),G("GeoPoint","number",1,t),G("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new N(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new N(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.O=t,this.F=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.O},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.F},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.O===t.O&&this.F===t.F},t.prototype.U=function(t){return w(this.O,t.O)||w(this.F,t.F)},t}(),st=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new N(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new N(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new N(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new N(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?w(this.nanoseconds,t.nanoseconds):w(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),ut=function(){function t(t){this.timestamp=t}return t.j=function(e){var n=Math.floor(e/1e6);return new t(new st(n,e%1e6*1e3))},t.L=function(e){return new t(e)},t.B=function(){return t.MIN},t.prototype.h=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.M=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.q=function(){return this.timestamp},t.MIN=new t(new st(0,0)),t}(),ct=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&m("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&m("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.G(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.W(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.K=function(t){return _(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.W(this.segments,this.offset+t,this.length-t)},t.prototype.H=function(){return _(!this.J(),"Can't call popLast() on empty path"),this.W(this.segments,this.offset,this.length-1)},t.prototype.Y=function(){return _(!this.J(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.X=function(){return this.get(this.length-1)},t.prototype.get=function(t){return _(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.J=function(){return 0===this.length},t.prototype.$=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.Z=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.tt=function(){return this.segments.slice(this.offset,this.limit())},t.G=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.W=function(t,n,r){return new e(t,n,r)},e.prototype.nt=function(){return this.tt().join("/")},e.prototype.toString=function(){return this.nt()},e.it=function(t){if(t.indexOf("//")>=0)throw new N(A.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.et=new e([]),e}(ct),ht=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.W=function(t,n,r){return new e(t,n,r)},e.rt=function(t){return ht.test(t)},e.prototype.nt=function(){return this.tt().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.rt(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.nt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.st=function(){return new e(["__name__"])},e.ot=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new N(A.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new N(A.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new N(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new N(A.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.et=new e([]),e}(ct),dt=function(){function t(e){this.path=e,_(t.ht(e),"Invalid DocumentKey with an odd number of segments: "+e.tt().join("/"))}return t.prototype.ct=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===lt.G(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.G=function(t,e){return lt.G(t.path,e.path)},t.ht=function(t){return t.length%2==0},t.at=function(e){return new t(new lt(e.slice()))},t.ft=function(e){return new t(lt.it(e))},t.EMPTY=new t(new lt([])),t}(),pt=function(){function t(t,e){this.G=t,this.root=e||yt.EMPTY}return t.prototype.lt=function(e,n){return new t(this.G,this.root.lt(e,n,this.G).copy(null,null,yt.dt,null,null))},t.prototype.remove=function(e){return new t(this.G,this.root.remove(e,this.G).copy(null,null,yt.dt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.J();){var n=this.G(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.J();){var r=this.G(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.J=function(){return this.root.J()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.vt=function(){return this.root.vt()},t.prototype.wt=function(){return this.root.wt()},t.prototype.pt=function(t){return this.root.pt(t)},t.prototype.forEach=function(t){this.pt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.pt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.bt=function(){return new vt(this.root,null,this.G,!1)},t.prototype.yt=function(t){return new vt(this.root,t,this.G,!1)},t.prototype._t=function(){return new vt(this.root,null,this.G,!0)},t.prototype.It=function(t){return new vt(this.root,t,this.G,!0)},t}(),vt=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.J();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.Rt=function(){_(this.Et.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.J();)this.Et.push(t),t=t.right;else for(t=t.right;!t.J();)this.Et.push(t),t=t.left;return e},t.prototype.At=function(){return this.Et.length>0},t.prototype.Dt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),yt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.J=function(){return!1},t.prototype.pt=function(t){return this.left.pt(t)||t(this.key,this.value)||this.right.pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.J()?this:this.left.min()},t.prototype.vt=function(){return this.min().key},t.prototype.wt=function(){return this.right.J()?this.key:this.right.wt()},t.prototype.lt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.lt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.lt(t,e,n))).Pt()},t.prototype.St=function(){if(this.left.J())return t.EMPTY;var e=this;return e.left.Ct()||e.left.left.Ct()||(e=e.kt()),(e=e.copy(null,null,null,e.left.St(),null)).Pt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.J()||i.left.Ct()||i.left.left.Ct()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Ct()&&(i=i.Vt()),i.right.J()||i.right.Ct()||i.right.left.Ct()||(i=i.Nt()),0===n(e,i.key)){if(i.right.J())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.St())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Pt()},t.prototype.Ct=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.Ct()&&!t.left.Ct()&&(t=t.Ot()),t.left.Ct()&&t.left.left.Ct()&&(t=t.Vt()),t.left.Ct()&&t.right.Ct()&&(t=t.Ft()),t},t.prototype.kt=function(){var t=this.Ft();return t.right.left.Ct()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Vt())).Ot()).Ft()),t},t.prototype.Nt=function(){var t=this.Ft();return t.left.left.Ct()&&(t=(t=t.Vt()).Ft()),t},t.prototype.Ot=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Vt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ft=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.xt();return Math.pow(2,t)<=this.size+1},t.prototype.xt=function(){if(this.Ct()&&this.left.Ct())throw m("Red node has red child("+this.key+","+this.value+")");if(this.right.Ct())throw m("Right child of ("+this.key+","+this.value+") is red");var t=this.left.xt();if(t!==this.right.xt())throw m("Black depths differ");return t+(this.Ct()?0:1)},t.EMPTY=null,t.RED=!0,t.dt=!1,t}(),gt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw m("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw m("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw m("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw m("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw m("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.lt=function(t,e,n){return new yt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.J=function(){return!0},t.prototype.pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.vt=function(){return null},t.prototype.wt=function(){return null},t.prototype.Ct=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.xt=function(){return 0},t}();yt.EMPTY=new gt;var mt=function(){function t(t){this.G=t,this.data=new pt(this.G)}return t.jt=function(e){var n=new t(e.G);return e.forEach((function(t){n=n.add(t)})),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.vt()},t.prototype.last=function(){return this.data.wt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.pt((function(e,n){return t(e),!1}))},t.prototype.Lt=function(t,e){for(var n=this.data.yt(t[0]);n.At();){var r=n.Rt();if(this.G(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Bt=function(t,e){var n;for(n=void 0!==e?this.data.yt(e):this.data.bt();n.At();)if(!t(n.Rt().key))return},t.prototype.Mt=function(t){var e=this.data.yt(t);return e.At()?e.Rt().key:null},t.prototype.bt=function(){return new _t(this.data.bt())},t.prototype.yt=function(t){return new _t(this.data.yt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).lt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.J=function(){return this.data.J()},t.prototype.qt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.bt(),r=e.data.bt();n.At();){var i=n.Rt().key,o=r.Rt().key;if(0!==this.G(i,o))return!1}return!0},t.prototype.tt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.G);return n.data=e,n},t}(),_t=function(){function t(t){this.Qt=t}return t.prototype.Rt=function(){return this.Qt.Rt().key},t.prototype.At=function(){return this.Qt.At()},t}(),bt=function(){function t(){}return t.prototype.Gt=function(t,e){return new Xt(e,t)},t.prototype.Wt=function(t,e){return e},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),wt=function(){function t(t){this.elements=t}return t.prototype.Gt=function(t,e){return this.apply(t)},t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=Et(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new re(e)},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&C(e.elements,this.elements)},t}(),Ct=function(){function t(t){this.elements=t}return t.prototype.Gt=function(t,e){return this.apply(t)},t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=Et(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new re(e)},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&C(e.elements,this.elements)},t}(),kt=function(){function t(t){this.Kt=t}return t.prototype.Gt=function(t,e){var n=this.zt(t);if(n instanceof Kt&&this.Kt instanceof Kt){var r=n.Ht+this.Kt.Ht;return new Kt(r)}return new Qt(r=n.Ht+this.Kt.Ht)},t.prototype.Wt=function(t,e){return _(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.zt=function(t){return t instanceof Gt?t:new Kt(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.Kt.isEqual(e.Kt)},t}();function Et(t){return t instanceof re?t.Ht.slice():[]}var It,Tt,St=function(){function t(t){this.fields=t}return t.Jt=function(e){return new t(e)},t.Yt=function(e){var n=new mt(ft.G);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.Xt=function(t){var e=!1;return this.fields.forEach((function(n){n.$(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),At=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Nt=function(t,e){this.version=t,this.transformResults=e};(Tt=It||(It={}))[Tt.Set=0]="Set",Tt[Tt.$t=1]="__PRIVATE_Patch",Tt[Tt.Transform=2]="Transform",Tt[Tt.Zt=3]="__PRIVATE_Delete",Tt[Tt.Verify=4]="Verify";var Ot,Rt,xt,Pt,Dt=function(){function t(t,e){this.updateTime=t,this.exists=e,_(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"tn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.nn=function(t){return void 0!==this.updateTime?t instanceof oe&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof oe:(_(this.tn,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),Lt=function(){function t(){}return t.prototype.in=function(t){null!=t&&_(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.en=function(t){return t instanceof oe?t.version:ut.MIN},t}(),Mt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.rn=r,i.type=It.Set,i}return a.__extends(e,t),e.prototype.Wt=function(t,e){return this.in(t),_(null==e.transformResults,"Transform results received by SetMutation."),new oe(this.key,e.version,{hasCommittedMutations:!0},this.value)},e.prototype.Gt=function(t,e,n){if(this.in(t),!this.rn.nn(t))return t;var r=Lt.en(t);return new oe(this.key,r,{un:!0},this.value)},e.prototype.sn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.rn.isEqual(t.rn)},e}(Lt),jt=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.on=r,o.rn=i,o.type=It.$t,o}return a.__extends(e,t),e.prototype.Wt=function(t,e){if(this.in(t),_(null==e.transformResults,"Transform results received by PatchMutation."),!this.rn.nn(t))return new se(this.key,e.version);var n=this.hn(t);return new oe(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.Gt=function(t,e,n){if(this.in(t),!this.rn.nn(t))return t;var r=Lt.en(t),i=this.hn(t);return new oe(this.key,r,{un:!0},i)},e.prototype.sn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.on.isEqual(t.on)&&this.rn.isEqual(t.rn)},e.prototype.hn=function(t){var e;return e=t instanceof oe?t.data():ee.EMPTY,this.cn(e)},e.prototype.cn=function(t){var e=this,n=t.an();return this.on.fields.forEach((function(t){if(!t.J()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.fn()},e}(Lt),Ut=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=It.Transform,r.rn=Dt.exists(!0),r}return a.__extends(e,t),e.prototype.Wt=function(t,e){if(this.in(t),_(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.rn.nn(t))return new se(this.key,e.version);var n=this.ln(t),r=this.dn(t,e.transformResults),i=e.version,o=this.vn(n.data(),r);return new oe(this.key,i,{hasCommittedMutations:!0},o)},e.prototype.Gt=function(t,e,n){if(this.in(t),!this.rn.nn(t))return t;var r=this.ln(t),i=this.wn(n,t,e),o=this.vn(r.data(),i);return new oe(this.key,r.version,{un:!0},o)},e.prototype.sn=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof oe?t.field(i.field):void 0,a=i.transform.zt(o||null);null!=a&&(e=null==e?ee.mn().set(i.field,a):e.set(i.field,a))}return e?e.fn():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&C(this.fieldTransforms,t.fieldTransforms)&&this.rn.isEqual(t.rn)},e.prototype.ln=function(t){return _(t instanceof oe,"Unknown MaybeDocument type "+t),_(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.dn=function(t,e){var n=[];_(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof oe&&(a=t.field(i.field)),n.push(o.Wt(a,e[r]))}return n},e.prototype.wn=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;e instanceof oe&&(u=e.field(a.field)),null===u&&n instanceof oe&&(u=n.field(a.field)),r.push(s.Gt(u,t))}return r},e.prototype.vn=function(t,e){_(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=t.an(),r=0;r<this.fieldTransforms.length;r++)n.set(this.fieldTransforms[r].field,e[r]);return n.fn()},e}(Lt),Ft=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.rn=n,r.type=It.Zt,r}return a.__extends(e,t),e.prototype.Wt=function(t,e){return this.in(t),_(null==e.transformResults,"Transform results received by DeleteMutation."),new ae(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.Gt=function(t,e,n){return this.in(t),this.rn.nn(t)?(t&&_(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ae(this.key,ut.B())):t},e.prototype.sn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.rn.isEqual(t.rn)},e}(Lt),Vt=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.rn=n,r.type=It.Verify,r}return a.__extends(e,t),e.prototype.Wt=function(t,e){m("VerifyMutation should only be used in Transactions.")},e.prototype.Gt=function(t,e,n){m("VerifyMutation should only be used in Transactions.")},e.prototype.sn=function(t){m("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.rn.isEqual(t.rn)},e}(Lt);(Rt=Ot||(Ot={}))[Rt.pn=0]="__PRIVATE_NullValue",Rt[Rt.gn=1]="__PRIVATE_BooleanValue",Rt[Rt.bn=2]="__PRIVATE_NumberValue",Rt[Rt.yn=3]="__PRIVATE_TimestampValue",Rt[Rt._n=4]="__PRIVATE_StringValue",Rt[Rt.In=5]="__PRIVATE_BlobValue",Rt[Rt.Tn=6]="__PRIVATE_RefValue",Rt[Rt.En=7]="__PRIVATE_GeoPointValue",Rt[Rt.ArrayValue=8]="ArrayValue",Rt[Rt.Rn=9]="__PRIVATE_ObjectValue",(Pt=xt||(xt={}))[Pt.An=0]="__PRIVATE_Default",Pt[Pt.Dn=1]="__PRIVATE_Estimate",Pt[Pt.Pn=2]="__PRIVATE_Previous";var qt=function(){function t(t,e){this.Sn=t,this.timestampsInSnapshots=e}return t.Cn=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(xt.Dn,n);case"previous":return new t(xt.Pn,n);case"none":case void 0:return new t(xt.An,n);default:return m("fromSnapshotOptions() called with invalid options.")}},t}(),Ht=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.kn=function(t){return _(this.Vn!==t.Vn,"Default compareTo should not be used for values of same type."),w(this.Vn,t.Vn)},t}(),zt=function(t){function e(){var e=t.call(this)||this;return e.Vn=Ot.pn,e.Ht=null,e}return a.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.h=function(t){return t instanceof e?0:this.kn(t)},e.prototype.Nn=function(){return 4},e.On=new e,e}(Ht),Bt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.Vn=Ot.gn,n}return a.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht===t.Ht},e.prototype.h=function(t){return t instanceof e?w(this.Ht,t.Ht):this.kn(t)},e.prototype.Nn=function(){return 4},e.of=function(t){return t?e.Fn:e.Un},e.Fn=new e(!0),e.Un=new e(!1),e}(Ht),Gt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.Vn=Ot.bn,n}return a.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.h=function(t){return t instanceof e?(n=this.Ht)<(r=t.Ht)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.kn(t);var n,r},e.prototype.Nn=function(){return 8},e}(Ht);function Wt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Wt(this.Ht,t.Ht)},e}(Gt),Qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Wt(this.Ht,t.Ht)},e.xn=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Gt),Yt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.Vn=Ot._n,n}return a.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht===t.Ht},e.prototype.h=function(t){return t instanceof e?w(this.Ht,t.Ht):this.kn(t)},e.prototype.Nn=function(){return 2*this.Ht.length},e}(Ht),Jt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.Vn=Ot.yn,n}return a.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Ht:this.Ht.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):t instanceof Xt?-1:this.kn(t)},e.prototype.Nn=function(){return 16},e}(Ht),Xt=function(t){function e(e,n){var r=t.call(this)||this;return r.jn=e,r.previousValue=n,r.Vn=Ot.yn,r}return a.__extends(e,t),e.prototype.value=function(t){return t&&t.Sn===xt.Dn?new Jt(this.jn).value(t):t&&t.Sn===xt.Pn&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.jn.isEqual(t.jn)},e.prototype.h=function(t){return t instanceof e?this.jn.U(t.jn):t instanceof Jt?1:this.kn(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.jn.toString()+">"},e.prototype.Nn=function(){return 16+(this.previousValue?this.previousValue.Nn():0)},e}(Ht),$t=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.Vn=Ot.In,n}return a.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):this.kn(t)},e.prototype.Nn=function(){return this.Ht.Ln()},e}(Ht),Zt=function(t){function e(e,n){var r=t.call(this)||this;return r.s=e,r.key=n,r.Vn=Ot.Tn,r}return a.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.s.isEqual(t.s)},e.prototype.h=function(t){if(t instanceof e){var n=this.s.h(t.s);return 0!==n?n:dt.G(this.key,t.key)}return this.kn(t)},e.prototype.Nn=function(){return this.s.projectId.length+this.s.database.length+this.key.toString().length},e}(Ht),te=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.Vn=Ot.En,n}return a.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):this.kn(t)},e.prototype.Nn=function(){return 16},e}(Ht),ee=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.Vn=Ot.Rn,n}return a.__extends(e,t),e.mn=function(){return new ne(e.EMPTY.Ht)},e.prototype.value=function(t){var e={};return this.Ht.pt((function(n,r){e[n]=r.value(t)})),e},e.prototype.forEach=function(t){this.Ht.pt(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.Ht.bt(),r=t.Ht.bt();n.At()&&r.At();){var i=n.Rt(),o=r.Rt();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.At()&&!r.At()}return!1},e.prototype.h=function(t){if(t instanceof e){for(var n=this.Ht.bt(),r=t.Ht.bt();n.At()&&r.At();){var i=n.Rt(),o=r.Rt(),a=w(i.key,o.key)||i.value.h(o.value);if(a)return a}return w(n.At(),r.At())}return this.kn(t)},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){_(!t.J(),"Can't get field of empty path");var n=this;return t.forEach((function(t){n=n instanceof e?n.Ht.get(t):null})),n},e.prototype.on=function(){var t=new mt(ft.G);return this.Ht.forEach((function(n,r){var i=new ft([n]);if(r instanceof e){var o=r.on().fields;o.J()?t=t.add(i):o.forEach((function(e){t=t.add(i.child(e))}))}else t=t.add(i)})),St.Jt(t)},e.prototype.Nn=function(){var t=0;return this.Ht.pt((function(e,n){t+=e.length+n.Nn()})),t},e.prototype.toString=function(){return this.Ht.toString()},e.prototype.an=function(){return new ne(this.Ht)},e.EMPTY=new e(new pt(w)),e}(Ht),ne=function(){function t(t){this.Ht=t}return t.prototype.set=function(t,e){_(!t.J(),"Cannot set field for empty path on ObjectValue");var n=t.Y();if(1===t.length)this.Ht=this.Ht.lt(n,e);else{var r=this.Ht.get(n),i=(r instanceof ee?r:ee.EMPTY).an().set(t.K(),e).fn();this.Ht=this.Ht.lt(n,i)}return this},t.prototype.delete=function(t){_(!t.J(),"Cannot delete field for empty path on ObjectValue");var e=t.Y();if(1===t.length)this.Ht=this.Ht.remove(e);else{var n=this.Ht.get(e);if(n instanceof ee){var r=n.an().delete(t.K()).fn();this.Ht=this.Ht.lt(t.Y(),r)}}return this},t.prototype.fn=function(){return new ee(this.Ht)},t}(),re=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.Vn=Ot.ArrayValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.Ht.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.Ht;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.Ht.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.Ht.length!==t.Ht.length)return!1;for(var n=0;n<this.Ht.length;n++)if(!this.Ht[n].isEqual(t.Ht[n]))return!1;return!0}return!1},e.prototype.h=function(t){if(t instanceof e){for(var n=Math.min(this.Ht.length,t.Ht.length),r=0;r<n;r++){var i=this.Ht[r].h(t.Ht[r]);if(i)return i}return w(this.Ht.length,t.Ht.length)}return this.kn(t)},e.prototype.Nn=function(){return this.Ht.reduce((function(t,e){return t+e.Nn()}),0)},e.prototype.toString=function(){return"["+this.Ht.map((function(t){return t.toString()})).join(",")+"]"},e}(Ht),ie=function(){function t(t,e){this.key=t,this.version=e}return t.Bn=function(t,e){return dt.G(t.key,e.key)},t}(),oe=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n)||this;return s.Mn=i,s.proto=o,s.converter=a,_(void 0!==s.Mn||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.un=!!r.un,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(e,t),e.prototype.field=function(t){if(this.Mn)return this.Mn.field(t);this.qn||(this.qn=new Map);var e=t.nt(),n=this.qn.get(e);if(void 0===n){var r=this.Qn(t);n=void 0===r?null:this.converter(r),this.qn.set(e,n)}return n},e.prototype.data=function(){var t=this;if(!this.Mn){var e=ee.mn();F(this.proto.fields||{},(function(n,r){e.set(new ft([n]),t.converter(r))})),this.Mn=e.fn(),this.qn=void 0}return this.Mn},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.un===t.un&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.un+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.un||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.Qn=function(t){_(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.Y()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},e.Gn=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.h(i):m("Trying to compare documents on fields that don't exist")},e}(ie),ae=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ie),se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ie),ue=Number,ce=ue.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),le=ue.MAX_SAFE_INTEGER||Math.pow(2,53)-1,he=ue.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function fe(t){return null==t}function de(t){return he(t)&&t<=le&&t>=ce}var pe,ve,ye=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Wn=null}return t.prototype.canonicalId=function(){if(null===this.Wn){var t=this.path.nt();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";fe(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.Wn=t}return this.Wn},t.prototype.toString=function(){var t=this.path.nt();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),fe(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.zn=function(){return dt.ht(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}();(ve=pe||(pe={})).Kn="F",ve.Hn="L";var ge,me,_e=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=pe.Kn),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.Jn=n,this.filters=r,this.limit=i,this.Yn=o,this.startAt=a,this.endAt=s,this.Xn=null,this.$n=null,this.startAt&&this.Zn(this.startAt),this.endAt&&this.Zn(this.endAt)}return t.ti=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.Xn){var t=this.ni(),e=this.ii();if(null!==t&&null===e)this.Xn=t.ut()?[Oe]:[new Ne(t),Oe];else{_(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.Xn=[];for(var n=!1,r=0,i=this.Jn;r<i.length;r++){var o=i[r];this.Xn.push(o),o.field.ut()&&(n=!0)}n||this.Xn.push((this.Jn.length>0?this.Jn[this.Jn.length-1].dir:Se.ASCENDING)===Se.ASCENDING?Oe:Re)}}return this.Xn},enumerable:!0,configurable:!0}),t.prototype.ei=function(e){_(null==this.ni()||!(e instanceof we)||!e.ri()||e.field.isEqual(this.ni()),"Query must only have one inequality field."),_(!this.zn(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.Jn.slice(),n,this.limit,this.Yn,this.startAt,this.endAt)},t.prototype.ui=function(e){_(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.Jn.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.Yn,this.startAt,this.endAt)},t.prototype.si=function(e){return new t(this.path,this.collectionGroup,this.Jn.slice(),this.filters.slice(),e,pe.Kn,this.startAt,this.endAt)},t.prototype.oi=function(e){return new t(this.path,this.collectionGroup,this.Jn.slice(),this.filters.slice(),e,pe.Hn,this.startAt,this.endAt)},t.prototype.hi=function(e){return new t(this.path,this.collectionGroup,this.Jn.slice(),this.filters.slice(),this.limit,this.Yn,e,this.endAt)},t.prototype.ci=function(e){return new t(this.path,this.collectionGroup,this.Jn.slice(),this.filters.slice(),this.limit,this.Yn,this.startAt,e)},t.prototype.ai=function(e){return new t(e,null,this.Jn.slice(),this.filters.slice(),this.limit,this.Yn,this.startAt,this.endAt)},t.prototype.fi=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Jn.length||1===this.Jn.length&&this.Jn[0].field.ut())},t.prototype.canonicalId=function(){return this.li().canonicalId()+"|lt:"+this.Yn},t.prototype.toString=function(){return"Query(target="+this.li().toString()+"; limitType="+this.Yn+")"},t.prototype.isEqual=function(t){return this.li().isEqual(t.li())&&this.Yn===t.Yn},t.prototype.di=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.ut()}return _(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.vi(t)&&this.wi(t)&&this.mi(t)&&this.pi(t)},t.prototype.gi=function(){return!fe(this.limit)&&this.Yn===pe.Kn},t.prototype.bi=function(){return!fe(this.limit)&&this.Yn===pe.Hn},t.prototype.ii=function(){return this.Jn.length>0?this.Jn[0].field:null},t.prototype.ni=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof we&&n.ri())return n.field}return null},t.prototype.yi=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof we&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.zn=function(){return this.li().zn()},t.prototype._i=function(){return null!==this.collectionGroup},t.prototype.li=function(){if(!this.$n)if(this.Yn===pe.Kn)this.$n=new ye(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e];t.push(new Ne(r.field,r.dir===Se.DESCENDING?Se.ASCENDING:Se.DESCENDING))}var i=this.endAt?new Ae(this.endAt.position,!this.endAt.before):null,o=this.startAt?new Ae(this.startAt.position,!this.startAt.before):null;this.$n=new ye(this.path,this.collectionGroup,t,this.filters,this.limit,i,o)}return this.$n},t.prototype.vi=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.ct(this.collectionGroup)&&this.path.$(e):dt.ht(this.path)?this.path.isEqual(e):this.path.Z(e)},t.prototype.wi=function(t){for(var e=0,n=this.Jn;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return!1}return!0},t.prototype.mi=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.pi=function(t){return!(this.startAt&&!this.startAt.Ii(this.orderBy,t)||this.endAt&&this.endAt.Ii(this.orderBy,t))},t.prototype.Zn=function(t){_(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),be=function(){function t(t){this.name=t}return t.it=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return m("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),we=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return a.__extends(e,t),e.create=function(t,n,r){if(t.ut())return n===be.IN?(_(r instanceof re,"Comparing on key with IN, but filter value not an ArrayValue"),_(r.Ht.every((function(t){return t instanceof Zt})),"Comparing on key with IN, but an array value was not a RefValue"),new ke(t,r)):(_(r instanceof Zt,"Comparing on key, but filter value not a RefValue"),_(n!==be.ARRAY_CONTAINS&&n!==be.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Ce(t,n,r));if(r.isEqual(zt.On)){if(n!==be.EQUAL)throw new N(A.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Qt.xn)){if(n!==be.EQUAL)throw new N(A.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===be.ARRAY_CONTAINS?new Ee(t,r):n===be.IN?(_(r instanceof re,"IN filter has invalid value: "+r.toString()),new Ie(t,r)):n===be.ARRAY_CONTAINS_ANY?(_(r instanceof re,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Te(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.Vn===e.Vn&&this.Ti(e.h(this.value))},e.prototype.Ti=function(t){switch(this.op){case be.LESS_THAN:return t<0;case be.LESS_THAN_OR_EQUAL:return t<=0;case be.EQUAL:return 0===t;case be.GREATER_THAN:return t>0;case be.GREATER_THAN_OR_EQUAL:return t>=0;default:return m("Unknown FieldFilter operator: "+this.op)}},e.prototype.ri=function(){return[be.LESS_THAN,be.LESS_THAN_OR_EQUAL,be.GREATER_THAN,be.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.nt()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.nt()+" "+this.op+" "+this.value.value()},e}((function(){})),Ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.matches=function(t){var e=dt.G(t.key,this.value.key);return this.Ti(e)},e}(we),ke=function(t){function e(e,n){var r=t.call(this,e,be.IN,n)||this;return r.value=n,r}return a.__extends(e,t),e.prototype.matches=function(t){return this.value.Ht.some((function(e){return t.key.isEqual(e.key)}))},e}(we),Ee=function(t){function e(e,n){return t.call(this,e,be.ARRAY_CONTAINS,n)||this}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof re&&e.contains(this.value)},e}(we),Ie=function(t){function e(e,n){var r=t.call(this,e,be.IN,n)||this;return r.value=n,r}return a.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(we),Te=function(t){function e(e,n){var r=t.call(this,e,be.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof re&&n.Ht.some((function(t){return e.value.contains(t)}))},e}(we),Se=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Ae=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.Ii=function(t,e){_(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.ut())_(o instanceof Zt,"Bound has a non-key value where the key path is being used."),n=dt.G(o.key,e.key);else{var a=e.field(i.field);_(null!==a,"Field should exist since document matched the orderBy already."),n=o.h(a)}if(i.dir===Se.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!this.position[e].isEqual(t.position[e]))return!1;return!0},t}(),Ne=function(){function t(t,e){this.field=t,void 0===e&&(e=Se.ASCENDING),this.dir=e,this.Ei=t.ut()}return t.prototype.compare=function(t,e){var n=this.Ei?oe.Bn(t,e):oe.Gn(this.field,t,e);switch(this.dir){case Se.ASCENDING:return n;case Se.DESCENDING:return-1*n;default:return m("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.nt()+this.dir.toString()},t.prototype.toString=function(){return this.field.nt()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Oe=new Ne(ft.st(),Se.ASCENDING),Re=new Ne(ft.st(),Se.DESCENDING);(me=ge||(ge={}))[me.Ri=0]="__PRIVATE_RemoteStore",me[me.Ai=1]="__PRIVATE_SharedClientState";var xe,Pe,De=function(){function t(t){this.Di=t}return t.fromBase64String=function(e){return new t(An.t().atob(e))},t.fromUint8Array=function(e){return new t(Le(e))},t.prototype.toBase64=function(){return An.t().btoa(this.Di)},t.prototype.toUint8Array=function(){return Me(this.Di)},t.prototype.Nn=function(){return 2*this.Di.length},t.prototype.isEqual=function(t){return this.Di===t.Di},t.Pi=new t(""),t}();function Le(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function Me(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(Pe=xe||(xe={}))[Pe.Si=0]="__PRIVATE_Listen",Pe[Pe.Ci=1]="__PRIVATE_ExistenceFilterMismatch",Pe[Pe.ki=2]="__PRIVATE_LimboResolution";var je,Ue,Fe=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=ut.MIN),void 0===o&&(o=ut.MIN),void 0===a&&(a=De.Pi),this.target=t,this.targetId=e,this.Vi=n,this.sequenceNumber=r,this.Ni=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.Oi=function(e){return new t(this.target,this.targetId,this.Vi,e,this.Ni,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Fi=function(e,n){return new t(this.target,this.targetId,this.Vi,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Ui=function(e){return new t(this.target,this.targetId,this.Vi,this.sequenceNumber,this.Ni,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.Vi===t.Vi&&this.sequenceNumber===t.sequenceNumber&&this.Ni.isEqual(t.Ni)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},t}(),Ve=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function qe(t){switch(t){case A.OK:return m("Treated status OK as error");case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return m("Unknown status code: "+t)}}function He(t){if(void 0===t)return y("GRPC error has no .code"),A.UNKNOWN;switch(t){case je.OK:return A.OK;case je.CANCELLED:return A.CANCELLED;case je.UNKNOWN:return A.UNKNOWN;case je.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case je.INTERNAL:return A.INTERNAL;case je.UNAVAILABLE:return A.UNAVAILABLE;case je.UNAUTHENTICATED:return A.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case je.NOT_FOUND:return A.NOT_FOUND;case je.ALREADY_EXISTS:return A.ALREADY_EXISTS;case je.PERMISSION_DENIED:return A.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case je.ABORTED:return A.ABORTED;case je.OUT_OF_RANGE:return A.OUT_OF_RANGE;case je.UNIMPLEMENTED:return A.UNIMPLEMENTED;case je.DATA_LOSS:return A.DATA_LOSS;default:return m("Unknown status code: "+t)}}function ze(t){if(void 0===t)return je.OK;switch(t){case A.OK:return je.OK;case A.CANCELLED:return je.CANCELLED;case A.UNKNOWN:return je.UNKNOWN;case A.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case A.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case A.INTERNAL:return je.INTERNAL;case A.UNAVAILABLE:return je.UNAVAILABLE;case A.UNAUTHENTICATED:return je.UNAUTHENTICATED;case A.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case A.NOT_FOUND:return je.NOT_FOUND;case A.ALREADY_EXISTS:return je.ALREADY_EXISTS;case A.PERMISSION_DENIED:return je.PERMISSION_DENIED;case A.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case A.ABORTED:return je.ABORTED;case A.OUT_OF_RANGE:return je.OUT_OF_RANGE;case A.UNIMPLEMENTED:return je.UNIMPLEMENTED;case A.DATA_LOSS:return je.DATA_LOSS;default:return m("Unknown status code: "+t)}}(Ue=je||(je={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";var Be=new pt(dt.G);function Ge(){return Be}function We(){return Ge()}var Ke=new pt(dt.G);function Qe(){return Ke}var Ye=new pt(dt.G);function Je(){return Ye}var Xe=new mt(dt.G);function $e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Xe,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ze=new mt(w);function tn(){return Ze}var en,nn,rn,on,an=function(){function t(t){this.G=t?function(e,n){return t(e,n)||dt.G(e.key,n.key)}:function(t,e){return dt.G(t.key,e.key)},this.xi=Qe(),this.ji=new pt(this.G)}return t.Li=function(e){return new t(e.G)},t.prototype.has=function(t){return null!=this.xi.get(t)},t.prototype.get=function(t){return this.xi.get(t)},t.prototype.first=function(){return this.ji.vt()},t.prototype.last=function(){return this.ji.wt()},t.prototype.J=function(){return this.ji.J()},t.prototype.indexOf=function(t){var e=this.xi.get(t);return e?this.ji.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.ji.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.ji.pt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.xi.lt(t.key,t),e.ji.lt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.xi.remove(t),this.ji.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.ji.bt(),r=e.ji.bt();n.At();){var i=n.Rt().key,o=r.Rt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.G=this.G,r.xi=e,r.ji=n,r},t}();(nn=en||(en={}))[nn.Bi=0]="__PRIVATE_Added",nn[nn.Mi=1]="__PRIVATE_Removed",nn[nn.qi=2]="__PRIVATE_Modified",nn[nn.Qi=3]="__PRIVATE_Metadata",(on=rn||(rn={}))[on.Gi=0]="__PRIVATE_Local",on[on.Wi=1]="__PRIVATE_Synced";var sn,un,cn=function(){function t(){this.zi=new pt(dt.G)}return t.prototype.track=function(t){var e=t.doc.key,n=this.zi.get(e);n?t.type!==en.Bi&&n.type===en.Qi?this.zi=this.zi.lt(e,t):t.type===en.Qi&&n.type!==en.Mi?this.zi=this.zi.lt(e,{type:n.type,doc:t.doc}):t.type===en.qi&&n.type===en.qi?this.zi=this.zi.lt(e,{type:en.qi,doc:t.doc}):t.type===en.qi&&n.type===en.Bi?this.zi=this.zi.lt(e,{type:en.Bi,doc:t.doc}):t.type===en.Mi&&n.type===en.Bi?this.zi=this.zi.remove(e):t.type===en.Mi&&n.type===en.qi?this.zi=this.zi.lt(e,{type:en.Mi,doc:n.doc}):t.type===en.Bi&&n.type===en.Mi?this.zi=this.zi.lt(e,{type:en.qi,doc:t.doc}):m("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.zi=this.zi.lt(e,t)},t.prototype.Ki=function(){var t=[];return this.zi.pt((function(e,n){t.push(n)})),t},t}(),ln=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Hi=n,this.docChanges=r,this.Ji=i,this.fromCache=o,this.Yi=a,this.Xi=s}return t.$i=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:en.Bi,doc:t})})),new t(e,n,an.Li(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ji.J()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Yi===t.Yi&&this.Ji.isEqual(t.Ji)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.Hi.isEqual(t.Hi)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),hn=function(){function t(t,e,n,r,i){this.Ni=t,this.Zi=e,this.te=n,this.ne=r,this.ie=i}return t.ee=function(e,n){var r,i=((r={})[e]=fn.re(e,n),r);return new t(ut.MIN,i,tn(),Ge(),$e())},t}(),fn=function(){function t(t,e,n,r,i){this.resumeToken=t,this.ue=e,this.se=n,this.oe=r,this.he=i}return t.re=function(e,n){return new t(De.Pi,n,$e(),$e(),$e())},t}(),dn=function(t,e,n,r){this.ce=t,this.removedTargetIds=e,this.key=n,this.ae=r},pn=function(t,e){this.targetId=t,this.fe=e};(un=sn||(sn={}))[un.le=0]="__PRIVATE_NoChange",un[un.Bi=1]="__PRIVATE_Added",un[un.Mi=2]="__PRIVATE_Removed",un[un.de=3]="__PRIVATE_Current",un[un.ve=4]="__PRIVATE_Reset";var vn=function(t,e,n,r){void 0===n&&(n=De.Pi),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},yn=function(){function t(){this.we=0,this.me=_n(),this.pe=De.Pi,this.ge=!1,this.be=!0}return Object.defineProperty(t.prototype,"ue",{get:function(){return this.ge},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.pe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return 0!==this.we},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return this.be},enumerable:!0,configurable:!0}),t.prototype.Ie=function(t){t.Nn()>0&&(this.be=!0,this.pe=t)},t.prototype.Te=function(){var t=$e(),e=$e(),n=$e();return this.me.forEach((function(r,i){switch(i){case en.Bi:t=t.add(r);break;case en.qi:e=e.add(r);break;case en.Mi:n=n.add(r);break;default:m("Encountered invalid change type: "+i)}})),new fn(this.pe,this.ge,t,e,n)},t.prototype.Ee=function(){this.be=!1,this.me=_n()},t.prototype.Re=function(t,e){this.be=!0,this.me=this.me.lt(t,e)},t.prototype.Ae=function(t){this.be=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.we+=1},t.prototype.Pe=function(){this.we-=1},t.prototype.Se=function(){this.be=!0,this.ge=!0},t}(),gn=function(){function t(t){this.Ce=t,this.ke={},this.Ve=Ge(),this.Ne=mn(),this.Oe=new mt(w)}return t.prototype.Fe=function(t){for(var e=0,n=t.ce;e<n.length;e++){var r=n[e];t.ae instanceof oe?this.Ue(r,t.ae):t.ae instanceof ae&&this.xe(r,t.key,t.ae)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.xe(r=o[i],t.key,t.ae)},t.prototype.je=function(t){var e=this;this.Le(t,(function(n){var r=e.Be(n);switch(t.state){case sn.le:e.Me(n)&&r.Ie(t.resumeToken);break;case sn.Bi:r.Pe(),r.ye||r.Ee(),r.Ie(t.resumeToken);break;case sn.Mi:r.Pe(),r.ye||e.removeTarget(n),_(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case sn.de:e.Me(n)&&(r.Se(),r.Ie(t.resumeToken));break;case sn.ve:e.Me(n)&&(e.qe(n),r.Ie(t.resumeToken));break;default:m("Unknown target watch change state: "+t.state)}}))},t.prototype.Le=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):U(this.ke,e)},t.prototype.Qe=function(t){var e=t.targetId,n=t.fe.count,r=this.Ge(e);if(r){var i=r.target;if(i.zn())if(0===n){var o=new dt(i.path);this.xe(e,o,new ae(o,ut.B()))}else _(1===n,"Single document existence filter with count: "+n);else this.We(e)!==n&&(this.qe(e),this.Oe=this.Oe.add(e))}},t.prototype.ze=function(t){var e=this,n={};U(this.ke,(function(r,i){var o=e.Ge(r);if(o){if(i.ue&&o.target.zn()){var a=new dt(o.target.path);null!==e.Ve.get(a)||e.Ke(r,a)||e.xe(r,a,new ae(a,t))}i._e&&(n[r]=i.Te(),i.Ee())}}));var r=$e();this.Ne.forEach((function(t,n){var i=!0;n.Bt((function(t){var n=e.Ge(t);return!n||n.Vi===xe.ki||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new hn(t,n,this.Oe,this.Ve,r);return this.Ve=Ge(),this.Ne=mn(),this.Oe=new mt(w),i},t.prototype.Ue=function(t,e){if(this.Me(t)){var n=this.Ke(t,e.key)?en.qi:en.Bi;this.Be(t).Re(e.key,n),this.Ve=this.Ve.lt(e.key,e),this.Ne=this.Ne.lt(e.key,this.He(e.key).add(t))}},t.prototype.xe=function(t,e,n){if(this.Me(t)){var r=this.Be(t);this.Ke(t,e)?r.Re(e,en.Mi):r.Ae(e),this.Ne=this.Ne.lt(e,this.He(e).delete(t)),n&&(this.Ve=this.Ve.lt(e,n))}},t.prototype.removeTarget=function(t){delete this.ke[t]},t.prototype.We=function(t){var e=this.Be(t).Te();return this.Ce.Je(t).size+e.se.size-e.he.size},t.prototype.De=function(t){this.Be(t).De()},t.prototype.Be=function(t){return this.ke[t]||(this.ke[t]=new yn),this.ke[t]},t.prototype.He=function(t){var e=this.Ne.get(t);return e||(e=new mt(w),this.Ne=this.Ne.lt(t,e)),e},t.prototype.Me=function(t){var e=null!==this.Ge(t);return e||v("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.ke[t];return e&&e.ye?null:this.Ce.Ye(t)},t.prototype.qe=function(t){var e=this;_(!this.ke[t].ye,"Should only reset active targets"),this.ke[t]=new yn,this.Ce.Je(t).forEach((function(n){e.xe(t,n,null)}))},t.prototype.Ke=function(t,e){return this.Ce.Je(t).has(e)},t}();function mn(){return new pt(dt.G)}function _n(){return new pt(dt.G)}var bn,wn,Cn=((bn={})[Se.ASCENDING.name]="ASCENDING",bn[Se.DESCENDING.name]="DESCENDING",bn),kn=((wn={})[be.LESS_THAN.name]="LESS_THAN",wn[be.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",wn[be.GREATER_THAN.name]="GREATER_THAN",wn[be.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",wn[be.EQUAL.name]="EQUAL",wn[be.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",wn[be.IN.name]="IN",wn[be.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",wn),En=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function In(t,e){_(!fe(t),e+" is missing")}function Tn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):m("can't parse "+t)}var Sn=function(){function t(t,e){this.s=t,this.options=e}return t.prototype.Xe=function(t){var e=void 0===t.code?A.UNKNOWN:He(t.code);return new N(e,t.message||"")},t.prototype.$e=function(t){return this.options.Ze||fe(t)?t:{value:t}},t.prototype.tr=function(t){var e;return fe(e="object"==typeof t?t.value:t)?null:e},t.prototype.q=function(t){return this.options.Ze?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.L=function(t){if("string"==typeof t)return this.nr(t);_(!!t,"Cannot deserialize null or undefined timestamp.");var e=Tn(t.seconds||"0");return new st(e,t.nanos||0)},t.prototype.nr=function(t){var e=0,n=En.exec(t);if(_(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new st(o,e)},t.prototype.ir=function(t){return this.options.Ze?t.toBase64():t.toUint8Array()},t.prototype.er=function(t){return this.options.Ze?(_(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),De.fromBase64String(t||"")):(_(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),De.fromUint8Array(t||new Uint8Array))},t.prototype.rr=function(t){return"string"==typeof t?(_(this.options.Ze,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Dn.fromBase64String(t)):(_(!this.options.Ze,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Dn.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.q(t.q())},t.prototype.fromVersion=function(t){return _(!!t,"Trying to deserialize version that isn't set"),ut.L(this.L(t))},t.prototype.ur=function(t,e){return this.sr(t).child("documents").child(e).nt()},t.prototype.or=function(t){var e=lt.it(t);return _(this.hr(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.cr=function(t){return this.ur(this.s,t.path)},t.prototype.ar=function(t){var e=this.or(t);return _(e.get(1)===this.s.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.s.projectId),_(!e.get(3)&&!this.s.database||e.get(3)===this.s.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.s.database),new dt(this.lr(e))},t.prototype.dr=function(t){return this.ur(this.s,t)},t.prototype.vr=function(t){var e=this.or(t);return 4===e.length?lt.et:this.lr(e)},Object.defineProperty(t.prototype,"wr",{get:function(){return new lt(["projects",this.s.projectId,"databases",this.s.database]).nt()},enumerable:!0,configurable:!0}),t.prototype.sr=function(t){return new lt(["projects",t.projectId,"databases",t.database])},t.prototype.lr=function(t){return _(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.K(5)},t.prototype.hr=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.mr=function(t){if(t instanceof zt)return{nullValue:"NULL_VALUE"};if(t instanceof Bt)return{booleanValue:t.value()};if(t instanceof Kt)return{integerValue:""+t.value()};if(t instanceof Qt){var e=t.value();if(this.options.Ze){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Yt?{stringValue:t.value()}:t instanceof ee?{mapValue:this.pr(t)}:t instanceof re?{arrayValue:this.gr(t)}:t instanceof Jt?{timestampValue:this.q(t.Ht)}:t instanceof te?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof $t?{bytesValue:this.ir(t.value())}:t instanceof Zt?{referenceValue:this.ur(t.s,t.key.path)}:m("Unknown FieldValue "+JSON.stringify(t))},t.prototype.br=function(t){var e=this;if("nullValue"in t)return zt.On;if("booleanValue"in t)return Bt.of(t.booleanValue);if("integerValue"in t)return new Kt(Tn(t.integerValue));if("doubleValue"in t){if(this.options.Ze){if("NaN"===t.doubleValue)return Qt.xn;if("Infinity"===t.doubleValue)return Qt.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Qt.NEGATIVE_INFINITY}return new Qt(t.doubleValue)}if("stringValue"in t)return new Yt(t.stringValue);if("mapValue"in t)return this.yr(t.mapValue.fields||{});if("arrayValue"in t)return In(t.arrayValue,"arrayValue"),new re((t.arrayValue.values||[]).map((function(t){return e.br(t)})));if("timestampValue"in t)return In(t.timestampValue,"timestampValue"),new Jt(this.L(t.timestampValue));if("geoPointValue"in t)return In(t.geoPointValue,"geoPointValue"),new te(new at(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){In(t.bytesValue,"bytesValue");var n=this.rr(t.bytesValue);return new $t(n)}if("referenceValue"in t){In(t.referenceValue,"referenceValue");var r=this.or(t.referenceValue),i=new T(r.get(1),r.get(3)),o=new dt(this.lr(r));return new Zt(i,o)}return m("Unknown Value proto "+JSON.stringify(t))},t.prototype._r=function(t,e){return{name:this.cr(t),fields:this.Ir(e)}},t.prototype.Tr=function(t){return _(!t.un,"Can't serialize documents with mutations."),{name:this.cr(t.key),fields:this.Ir(t.data()),updateTime:this.q(t.version.q())}},t.prototype.Er=function(t,e){var n=this,r=this.ar(t.name),i=this.fromVersion(t.updateTime);return new oe(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.br(t)}))},t.prototype.Ir=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.mr(r)})),n},t.prototype.yr=function(t){var e=this,n=t,r=ee.mn();return F(n,(function(t,n){r.set(new ft([t]),e.br(n))})),r.fn()},t.prototype.pr=function(t){return{fields:this.Ir(t)}},t.prototype.gr=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.mr(t))})),{values:n}},t.prototype.Rr=function(t){var e=this;_(!!t.found,"Tried to deserialize a found document from a missing document."),In(t.found.name,"doc.found.name"),In(t.found.updateTime,"doc.found.updateTime");var n=this.ar(t.found.name),r=this.fromVersion(t.found.updateTime);return new oe(n,r,{},void 0,t.found,(function(t){return e.br(t)}))},t.prototype.Ar=function(t){_(!!t.missing,"Tried to deserialize a missing document from a found document."),_(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.ar(t.missing),n=this.fromVersion(t.readTime);return new ae(e,n)},t.prototype.Dr=function(t){return"found"in t?this.Rr(t):"missing"in t?this.Ar(t):m("invalid batch get response: "+JSON.stringify(t))},t.prototype.Pr=function(t){switch(t){case sn.Bi:return"ADD";case sn.de:return"CURRENT";case sn.le:return"NO_CHANGE";case sn.Mi:return"REMOVE";case sn.ve:return"RESET";default:return m("Unknown WatchTargetChangeState: "+t)}},t.prototype.Sr=function(t){if(t instanceof pn)return{filter:{count:t.fe.count,targetId:t.targetId}};if(t instanceof dn){if(t.ae instanceof oe){var e=t.ae;return{documentChange:{document:{name:this.cr(e.key),fields:this.Ir(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.ce,removedTargetIds:t.removedTargetIds}}}if(t.ae instanceof ae)return{documentDelete:{document:this.cr((e=t.ae).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.ae)return{documentRemove:{document:this.cr(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof vn){var n=void 0;return t.cause&&(n={code:ze(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Pr(t.state),targetIds:t.targetIds,resumeToken:this.ir(t.resumeToken),cause:n}}}return m("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.Cr=function(t){var e,n=this;if("targetChange"in t){In(t.targetChange,"targetChange");var r=this.kr(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=this.er(t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&this.Xe(a);e=new vn(r,i,o,s||null)}else if("documentChange"in t){In(t.documentChange,"documentChange");var u=t.documentChange;In(u.document,"documentChange.name"),In(u.document.name,"documentChange.document.name"),In(u.document.updateTime,"documentChange.document.updateTime");var c=this.ar(u.document.name),l=this.fromVersion(u.document.updateTime),h=new oe(c,l,{},void 0,u.document,(function(t){return n.br(t)})),f=u.removedTargetIds||[];e=new dn(u.targetIds||[],f,h.key,h)}else if("documentDelete"in t){In(t.documentDelete,"documentDelete");var d=t.documentDelete;In(d.document,"documentDelete.document"),c=this.ar(d.document),l=d.readTime?this.fromVersion(d.readTime):ut.B(),h=new ae(c,l),e=new dn([],f=d.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){In(t.documentRemove,"documentRemove");var p=t.documentRemove;In(p.document,"documentRemove"),c=this.ar(p.document),e=new dn([],f=p.removedTargetIds||[],c,null)}else{if(!("filter"in t))return m("Unknown change type "+JSON.stringify(t));In(t.filter,"filter");var v=t.filter;In(v.targetId,"filter.targetId");var y=new Ve(v.count||0);e=new pn(v.targetId,y)}return e},t.prototype.kr=function(t){return"NO_CHANGE"===t?sn.le:"ADD"===t?sn.Bi:"REMOVE"===t?sn.Mi:"CURRENT"===t?sn.de:"RESET"===t?sn.ve:m("Got unexpected TargetChange.state: "+t)},t.prototype.Vr=function(t){if(!("targetChange"in t))return ut.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?ut.MIN:e.readTime?this.fromVersion(e.readTime):ut.MIN},t.prototype.Nr=function(t){var e,n=this;if(t instanceof Mt)e={update:this._r(t.key,t.value)};else if(t instanceof Ft)e={delete:this.cr(t.key)};else if(t instanceof jt)e={update:this._r(t.key,t.data),updateMask:this.Or(t.on)};else if(t instanceof Ut)e={transform:{document:this.cr(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.Fr(t)}))}};else{if(!(t instanceof Vt))return m("Unknown mutation type "+t.type);e={verify:this.cr(t.key)}}return t.rn.tn||(e.currentDocument=this.Ur(t.rn)),e},t.prototype.xr=function(t){var e=this,n=t.currentDocument?this.jr(t.currentDocument):Dt.NONE;if(t.update){In(t.update.name,"name");var r=this.ar(t.update.name),i=this.yr(t.update.fields||{});if(t.updateMask){var o=this.Lr(t.updateMask);return new jt(r,i,o,n)}return new Mt(r,i,n)}if(t.delete)return r=this.ar(t.delete),new Ft(r,n);if(t.transform){r=this.ar(t.transform.document);var a=t.transform.fieldTransforms.map((function(t){return e.Br(t)}));return _(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ut(r,a)}return t.verify?(r=this.ar(t.verify),new Vt(r,n)):m("unknown mutation proto: "+JSON.stringify(t))},t.prototype.Ur=function(t){return _(!t.tn,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:m("Unknown precondition")},t.prototype.jr=function(t){return void 0!==t.updateTime?Dt.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Dt.exists(t.exists):Dt.NONE},t.prototype.Mr=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e);r.isEqual(ut.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map((function(t){return n.br(t)}))),new Nt(r,i)},t.prototype.qr=function(t,e){var n=this;return t&&t.length>0?(_(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.Mr(t,e)}))):[]},t.prototype.Fr=function(t){var e=this,n=t.transform;if(n instanceof bt)return{fieldPath:t.field.nt(),setToServerValue:"REQUEST_TIME"};if(n instanceof wt)return{fieldPath:t.field.nt(),appendMissingElements:{values:n.elements.map((function(t){return e.mr(t)}))}};if(n instanceof Ct)return{fieldPath:t.field.nt(),removeAllFromArray:{values:n.elements.map((function(t){return e.mr(t)}))}};if(n instanceof kt)return{fieldPath:t.field.nt(),increment:this.mr(n.Kt)};throw m("Unknown transform: "+t.transform)},t.prototype.Br=function(t){var e=this,n=null;if("setToServerValue"in t)_("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=bt.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new wt(r.map((function(t){return e.br(t)})))}else if("removeAllFromArray"in t)n=new Ct((r=t.removeAllFromArray.values||[]).map((function(t){return e.br(t)})));else if("increment"in t){var i=this.br(t.increment);_(i instanceof Gt,"NUMERIC_ADD transform requires a NumberValue"),n=new kt(i)}else m("Unknown transform proto: "+JSON.stringify(t));var o=ft.ot(t.fieldPath);return new At(o,n)},t.prototype.Qr=function(t){return{documents:[this.dr(t.path)]}},t.prototype.Gr=function(t){var e=t.documents.length;return _(1===e,"DocumentsTarget contained other than 1 document: "+e),_e.ti(this.vr(t.documents[0])).li()},t.prototype.Wr=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(_(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.dr(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(_(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.dr(n.H()),e.structuredQuery.from=[{collectionId:n.X()}]);var r=this.zr(t.filters);r&&(e.structuredQuery.where=r);var i=this.Kr(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.$e(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Hr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Hr(t.endAt)),e},t.prototype.Jr=function(t){var e=this.vr(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.Yr(n.where));var s=[];n.orderBy&&(s=this.Xr(n.orderBy));var u=null;n.limit&&(u=this.tr(n.limit));var c=null;n.startAt&&(c=this.$r(n.startAt));var l=null;return n.endAt&&(l=this.$r(n.endAt)),new _e(e,i,s,a,u,pe.Kn,c,l).li()},t.prototype.Zr=function(t){var e=this.tu(t.Vi);return null==e?null:{"goog-listen-tags":e}},t.prototype.tu=function(t){switch(t){case xe.Si:return null;case xe.Ci:return"existence-filter-mismatch";case xe.ki:return"limbo-document";default:return m("Unrecognized query purpose: "+t)}},t.prototype.li=function(t){var e,n=t.target;return(e=n.zn()?{documents:this.Qr(n)}:{query:this.Wr(n)}).targetId=t.targetId,t.resumeToken.Nn()>0&&(e.resumeToken=this.ir(t.resumeToken)),e},t.prototype.zr=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof we?e.nu(t):m("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.Yr=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.iu(t)]:void 0!==t.fieldFilter?[this.eu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.Yr(t)})).reduce((function(t,e){return t.concat(e)})):m("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.Kr=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.ru(t)}))},t.prototype.Xr=function(t){var e=this;return t.map((function(t){return e.uu(t)}))},t.prototype.Hr=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.mr(t)}))}},t.prototype.$r=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.br(t)}));return new Ae(r,n)},t.prototype.su=function(t){return Cn[t.name]},t.prototype.ou=function(t){switch(t){case"ASCENDING":return Se.ASCENDING;case"DESCENDING":return Se.DESCENDING;default:return}},t.prototype.hu=function(t){return kn[t.name]},t.prototype.cu=function(t){switch(t){case"EQUAL":return be.EQUAL;case"GREATER_THAN":return be.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return be.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return be.LESS_THAN;case"LESS_THAN_OR_EQUAL":return be.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return be.ARRAY_CONTAINS;case"IN":return be.IN;case"ARRAY_CONTAINS_ANY":return be.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return m("Unspecified operator");default:return m("Unknown operator")}},t.prototype.au=function(t){return{fieldPath:t.nt()}},t.prototype.fu=function(t){return ft.ot(t.fieldPath)},t.prototype.ru=function(t){return{field:this.au(t.field),direction:this.su(t.dir)}},t.prototype.uu=function(t){return new Ne(this.fu(t.field),this.ou(t.direction))},t.prototype.eu=function(t){return we.create(this.fu(t.fieldFilter.field),this.cu(t.fieldFilter.op),this.br(t.fieldFilter.value))},t.prototype.nu=function(t){if(t.op===be.EQUAL){if(t.value.isEqual(Qt.xn))return{unaryFilter:{field:this.au(t.field),op:"IS_NAN"}};if(t.value.isEqual(zt.On))return{unaryFilter:{field:this.au(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.au(t.field),op:this.hu(t.op),value:this.mr(t.value)}}},t.prototype.iu=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fu(t.unaryFilter.field);return we.create(e,be.EQUAL,Qt.xn);case"IS_NULL":var n=this.fu(t.unaryFilter.field);return we.create(n,be.EQUAL,zt.On);case"OPERATOR_UNSPECIFIED":return m("Unspecified filter");default:return m("Unknown filter")}},t.prototype.Or=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.nt())})),{fieldPaths:e}},t.prototype.Lr=function(t){var e=(t.fieldPaths||[]).map((function(t){return ft.ot(t)}));return St.Yt(e)},t}(),An=function(){function t(){}return t.lu=function(e){t.platform&&m("Platform already defined"),t.platform=e},t.t=function(){return t.platform||m("Platform not set"),t.platform},t}();function Nn(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new N(A.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function On(){if("undefined"==typeof Uint8Array)throw new N(A.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Rn(){if(!An.t().du)throw new N(A.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var xn,Pn,Dn=function(){function t(t){Rn(),this.Di=t}return t.fromBase64String=function(e){H("Blob.fromBase64String",arguments,1),G("Blob.fromBase64String","string",1,e),Rn();try{var n=An.t().atob(e);return new t(n)}catch(t){throw new N(A.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(H("Blob.fromUint8Array",arguments,1),On(),!(e instanceof Uint8Array))throw nt("Blob.fromUint8Array","Uint8Array",1,e);var n=Le(e);return new t(n)},t.prototype.toBase64=function(){return H("Blob.toBase64",arguments,0),Rn(),An.t().btoa(this.Di)},t.prototype.toUint8Array=function(){H("Blob.toUint8Array",arguments,0),On();var t=Me(this.Di);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.Di===t.Di},t.prototype.Ln=function(){return 2*this.Di.length},t.prototype.U=function(t){return w(this.Di,t.Di)},t}(),Ln=Nn(Dn,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Mn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.vu=function(t){return n.wu(t)},this.mu=function(t){return e.pu(t)})}return t.prototype.wu=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.mu&&this.mu(t),t},t.gu=-1,t}(),jn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};(Pn=xn||(xn={})).bu="all",Pn.yu="listen_stream_idle",Pn._u="listen_stream_connection_backoff",Pn.Iu="write_stream_idle",Pn.Tu="write_stream_connection_backoff",Pn.Eu="online_state_timeout",Pn.Ru="client_metadata_refresh",Pn.Au="lru_garbage_collection",Pn.Du="retry_transaction";var Un=function(){function t(t,e,n,r,i){this.Pu=t,this.Su=e,this.Cu=n,this.op=r,this.ku=i,this.Vu=new jn,this.then=this.Vu.promise.then.bind(this.Vu.promise),this.catch=this.Vu.promise.catch.bind(this.Vu.promise),this.Vu.promise.catch((function(t){}))}return t.Nu=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.Ou=setTimeout((function(){return e.Fu()}),t)},t.prototype.Uu=function(){return this.Fu()},t.prototype.cancel=function(t){null!==this.Ou&&(this.clearTimeout(),this.Vu.reject(new N(A.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Fu=function(){var t=this;this.Pu.xu((function(){return null!==t.Ou?(t.clearTimeout(),t.op().then((function(e){return t.Vu.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Ou&&(this.ku(this),clearTimeout(this.Ou),this.Ou=null)},t}(),Fn=function(){function t(){this.ju=Promise.resolve(),this.Lu=!1,this.Bu=[],this.Mu=null,this.qu=!1,this.Qu=[]}return Object.defineProperty(t.prototype,"Gu",{get:function(){return this.Lu},enumerable:!0,configurable:!0}),t.prototype.xu=function(t){this.enqueue(t)},t.prototype.Wu=function(t){this.zu(),this.Ku(t)},t.prototype.Hu=function(t){return this.zu(),this.Ku(t)},t.prototype.Ju=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.zu(),this.Lu?[3,2]:(this.Lu=!0,[4,this.Hu(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.zu(),this.Lu?new Promise((function(t){})):this.Ku(t)},t.prototype.Ku=function(t){var e=this,n=this.ju.then((function(){return e.qu=!0,t().catch((function(t){e.Mu=t,e.qu=!1;var n=t.stack||t.message||"";throw y("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.qu=!1,t}))}));return this.ju=n,n},t.prototype.Yu=function(t,e,n){var r=this;this.zu(),_(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.Qu.indexOf(t)>-1&&(e=0);var i=Un.Nu(this,t,e,n,(function(t){return r.Xu(t)}));return this.Bu.push(i),i},t.prototype.zu=function(){this.Mu&&m("AsyncQueue is already failed: "+(this.Mu.stack||this.Mu.message))},t.prototype.$u=function(){_(this.qu,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.Zu=function(){return this.Hu((function(){return Promise.resolve()}))},t.prototype.ts=function(t){for(var e=0,n=this.Bu;e<n.length;e++)if(n[e].Su===t)return!0;return!1},t.prototype.ns=function(t){var e=this;return this.Zu().then((function(){_(t===xn.bu||e.ts(t),"Attempted to drain to missing operation "+t),e.Bu.sort((function(t,e){return t.Cu-e.Cu}));for(var n=0,r=e.Bu;n<r.length;n++){var i=r[n];if(i.Uu(),t!==xn.bu&&i.Su===t)break}return e.Zu()}))},t.prototype.es=function(t){this.Qu.push(t)},t.prototype.Xu=function(t){var e=this.Bu.indexOf(t);_(e>=0,"Delayed operation not found."),this.Bu.splice(e,1)},t}();function Vn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Hn(e)),e=qn(t.get(n),e);return Hn(e)}function qn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Hn(t){return t+"\x01\x01"}function zn(t){var e=t.length;if(_(e>=2,"Invalid path "+t),2===e)return _("\x01"===t.charAt(0)&&"\x01"===t.charAt(1),"Non-empty path "+t+" had length 2"),lt.et;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&m('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:m('Invalid encoded resource path: "'+t+'"')}o=a+2}return new lt(r)}var Bn=function(){function t(t,e,n,r){this.batchId=t,this.jn=e,this.baseMutations=n,this.mutations=r,_(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.Wt=function(t,e,n){e&&_(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.rs;_(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.Wt(e,r[i]))}return e},t.prototype.Gt=function(t,e){e&&_(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=s.Gt(e,e,this.jn));for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.Gt(e,i,this.jn))}return e},t.prototype.us=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Gt(r.key,t.get(r.key));i&&(n=n.lt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),$e())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&C(this.mutations,t.mutations)&&C(this.baseMutations,t.baseMutations)},t}(),Gn=function(){function t(t,e,n,r,i){this.batch=t,this.ss=e,this.rs=n,this.streamToken=r,this.os=i}return t.from=function(e,n,r,i){_(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Je(),a=e.mutations,s=0;s<a.length;s++)o=o.lt(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),Wn=function(){function t(){this.hs=new mt(Kn.Bn),this.cs=new mt(Kn.as)}return t.prototype.J=function(){return this.hs.J()},t.prototype.fs=function(t,e){var n=new Kn(t,e);this.hs=this.hs.add(n),this.cs=this.cs.add(n)},t.prototype.ls=function(t,e){var n=this;t.forEach((function(t){return n.fs(t,e)}))},t.prototype.ds=function(t,e){this.vs(new Kn(t,e))},t.prototype.ws=function(t,e){var n=this;t.forEach((function(t){return n.ds(t,e)}))},t.prototype.ms=function(t){var e=this,n=dt.EMPTY,r=new Kn(n,t),i=new Kn(n,t+1),o=[];return this.cs.Lt([r,i],(function(t){e.vs(t),o.push(t.key)})),o},t.prototype.ps=function(){var t=this;this.hs.forEach((function(e){return t.vs(e)}))},t.prototype.vs=function(t){this.hs=this.hs.delete(t),this.cs=this.cs.delete(t)},t.prototype.gs=function(t){var e=dt.EMPTY,n=new Kn(e,t),r=new Kn(e,t+1),i=$e();return this.cs.Lt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.bs=function(t){var e=new Kn(t,0),n=this.hs.Mt(e);return null!==n&&t.isEqual(n.key)},t}(),Kn=function(){function t(t,e){this.key=t,this.ys=e}return t.Bn=function(t,e){return dt.G(t.key,e.key)||w(t.ys,e.ys)},t.as=function(t,e){return w(t.ys,e.ys)||dt.G(t.key,e.key)},t}(),Qn=function(){function t(t){this._s=t,this.Is={}}return t.prototype.get=function(t){var e=this._s(t),n=this.Is[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this._s(t),r=this.Is[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Is[n]=[[t,e]]},t.prototype.delete=function(t){var e=this._s(t),n=this.Is[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Is[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){F(this.Is,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.J=function(){return V(this.Is)},t}(),Yn=function(){function t(t){var e=this;this.Ts=null,this.Es=null,this.result=void 0,this.error=void 0,this.Rs=!1,this.As=!1,t((function(t){e.Rs=!0,e.result=t,e.Ts&&e.Ts(t)}),(function(t){e.Rs=!0,e.error=t,e.Es&&e.Es(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.As&&m("Called next() or catch() twice for PersistencePromise"),this.As=!0,this.Rs?this.error?this.Ds(n,this.error):this.Ps(e,this.result):new t((function(t,i){r.Ts=function(n){r.Ps(e,n).next(t,i)},r.Es=function(e){r.Ds(n,e).next(t,i)}}))},t.prototype.Ss=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Cs=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Ps=function(e,n){return e?this.Cs((function(){return e(n)})):t.resolve(n)},t.prototype.Ds=function(e,n){return e?this.Cs((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.ks=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Vs=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.ks(r)},t}(),Jn=function(){function t(){this.Ns=new Qn((function(t){return t.toString()})),this.Os=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return _(void 0!==this.Fs,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.Fs},set:function(t){_(void 0===this.Fs||this.Fs.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.Fs=t},enumerable:!0,configurable:!0}),t.prototype.Us=function(t,e){this.xs(),this.readTime=e,this.Ns.set(t.key,t)},t.prototype.js=function(t,e){this.xs(),e&&(this.readTime=e),this.Ns.set(t,null)},t.prototype.Ls=function(t,e){this.xs();var n=this.Ns.get(e);return void 0!==n?Yn.resolve(n):this.Bs(t,e)},t.prototype.getEntries=function(t,e){return this.Ms(t,e)},t.prototype.apply=function(t){return this.xs(),this.Os=!0,this.qs(t)},t.prototype.xs=function(){_(!this.Os,"Changes have already been applied.")},t}(),Xn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$n=function(){function t(){this.Qs=[]}return t.prototype.Gs=function(t){this.Qs.push(t)},t.prototype.Ws=function(){this.Qs.forEach((function(t){return t()}))},t}(),Zn=function(){function t(e){this.db=e,12.2===t.zs(u.getUA())&&y("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Ks=function(e,n,r){return _(t.Hs(),"IndexedDB not supported in current environment."),v("SimpleDb","Opening database:",e),new Yn((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){i(new t(e.target.result))},a.onblocked=function(){o(new N(A.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new N(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},a.onupgradeneeded=function(t){v("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion),r.createOrUpgrade(t.target.result,a.transaction,t.oldVersion,Ur).next((function(){v("SimpleDb","Database upgrade to version "+Ur+" complete")}))}})).Ss()},t.delete=function(t){return v("SimpleDb","Removing database:",t),rr(window.indexedDB.deleteDatabase(t)).Ss()},t.Hs=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.Js())return!0;if(void 0===window.navigator)return!1;var e=u.getUA(),n=t.zs(e),r=0<n&&n<10,i=t.Ys(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Js=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Xs)},t.$s=function(t,e){return t.store(e)},t.zs=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ys=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Zs=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a.__generator(this,(function(l){switch(l.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),o=0,s=function(){var t,s,c,l;return a.__generator(this,(function(a){switch(a.label){case 0:++o,t=er.open(u.db,r?"readonly":"readwrite",e),a.label=1;case 1:return a.trys.push([1,3,,4]),(s=n(t).catch((function(e){return t.abort(e),Yn.reject(e)})).Ss()).catch((function(){})),[4,t.to];case 2:return a.sent(),[2,{value:s}];case 3:return v("SimpleDb","Transaction failed with error: %s. Retrying: %s.",(c=a.sent()).message,l=i&&"FirebaseError"!==c.name&&o<3),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),tr=function(){function t(t){this.no=t,this.io=!1,this.eo=null}return Object.defineProperty(t.prototype,"Rs",{get:function(){return this.io},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ro",{get:function(){return this.eo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.no=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.io=!0},t.prototype.uo=function(t){this.eo=t},t.prototype.delete=function(){return rr(this.no.delete())},t}(),er=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.so=new jn,this.transaction.oncomplete=function(){e.so.resolve()},this.transaction.onabort=function(){t.error?e.so.reject(t.error):e.so.resolve()},this.transaction.onerror=function(t){var n=or(t.target.error);e.so.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"to",{get:function(){return this.so.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.so.reject(t),this.aborted||(v("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return _(!!e,"Object store not part of transaction: "+t),new nr(e)},t}(),nr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(v("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(v("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),rr(n)},t.prototype.add=function(t){return v("SimpleDb","ADD",this.store.name,t,t),rr(this.store.add(t))},t.prototype.get=function(t){var e=this;return rr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),v("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return v("SimpleDb","DELETE",this.store.name,t),rr(this.store.delete(t))},t.prototype.count=function(){return v("SimpleDb","COUNT",this.store.name),rr(this.store.count())},t.prototype.oo=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ho(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.co=function(t,e){v("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ao=!1;var r=this.cursor(n);return this.ho(r,(function(t,e,n){return n.delete()}))},t.prototype.fo=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ho(r,e)},t.prototype.lo=function(t){var e=this.cursor({});return new Yn((function(n,r){e.onerror=function(t){var e=or(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.ho=function(t,e){var n=[];return new Yn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new tr(i),a=e(i.primaryKey,i.value,o);if(a instanceof Yn){var s=a.catch((function(t){return o.done(),Yn.reject(t)}));n.push(s)}o.Rs?r():null===o.ro?i.continue():i.continue(o.ro)}else r()}})).next((function(){return Yn.ks(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(_(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ao?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function rr(t){return new Yn((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=or(t.target.error);n(e)}}))}var ir=!1;function or(t){var e=Zn.zs(u.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new N("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ir||(ir=!0,setTimeout((function(){throw r}),0)),r}}return t}var ar,sr,ur=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.do=n,this.vo=r,this.wo={}}return t.mo=function(e,n,r,i){return _(""!==e.uid,"UserID must not be an empty string."),new t(e.l()?e.uid:"",n,r,i)},t.prototype.po=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hr(t).fo({index:zr.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.bo=function(t,e,n){return this.yo(t).next((function(e){return e.lastStreamToken=n.toBase64(),dr(t).put(e)}))},t.prototype._o=function(t){return this.yo(t).next((function(t){return De.fromBase64String(t.lastStreamToken)}))},t.prototype.Io=function(t,e){return this.yo(t).next((function(n){return n.lastStreamToken=e.toBase64(),dr(t).put(n)}))},t.prototype.To=function(t,e,n,r){var i=this,o=fr(t),a=hr(t);return a.add({}).next((function(s){_("number"==typeof s,"Auto-generated key is not a number");for(var u=new Bn(s,e,n,r),c=i.serializer.Eo(i.userId,u),l=[],h=new mt((function(t,e){return w(t.nt(),e.nt())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Br.key(i.userId,p.key.path,s);h=h.add(p.key.path.H()),l.push(a.put(c)),l.push(o.put(v,Br.PLACEHOLDER))}return h.forEach((function(e){l.push(i.do.Ro(t,e))})),t.Gs((function(){i.wo[s]=u.keys()})),Yn.ks(l).next((function(){return u}))}))},t.prototype.Ao=function(t,e){var n=this;return hr(t).get(e).next((function(t){return t?(_(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.Do(t)):null}))},t.prototype.Po=function(t,e){var n=this;return this.wo[e]?Yn.resolve(this.wo[e]):this.Ao(t,e).next((function(t){if(t){var r=t.keys();return n.wo[e]=r,r}return null}))},t.prototype.So=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hr(t).fo({index:zr.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(_(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.Do(e)),i.done()})).next((function(){return o}))},t.prototype.Co=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hr(t).fo({index:zr.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.ko=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hr(t).oo(zr.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.Do(t)}))}))},t.prototype.Vo=function(t,e){var n=this,r=Br.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return fr(t).fo({range:i},(function(r,i,a){var s=r[0],u=r[2],c=zn(r[1]);if(s===n.userId&&e.path.isEqual(c))return hr(t).get(u).next((function(t){if(!t)throw m("Dangling document-mutation reference found: "+r+" which points to "+u);_(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.Do(t))}));a.done()})).next((function(){return o}))},t.prototype.No=function(t,e){var n=this,r=new mt(w),i=[];return e.forEach((function(e){var o=Br.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=fr(t).fo({range:a},(function(t,i,o){var a=t[0],s=t[2],u=zn(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()}));i.push(s)})),Yn.ks(i).next((function(){return n.Oo(t,r)}))},t.prototype.Fo=function(t,e){var n=this;_(!e.zn(),"Document queries shouldn't go down this path"),_(!e._i(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=Br.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new mt(w);return fr(t).fo({range:a},(function(t,e,o){var a=t[0],u=t[2],c=zn(t[1]);a===n.userId&&r.$(c)?c.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.Oo(t,s)}))},t.prototype.Oo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(hr(t).get(e).next((function(t){if(null===t)throw m("Dangling document-mutation reference found, which points to "+e);_(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.Do(t))})))})),Yn.ks(i).next((function(){return r}))},t.prototype.Uo=function(t,e){var n=this;return lr(t.xo,this.userId,e).next((function(r){return t.Gs((function(){n.jo(e.batchId)})),Yn.forEach(r,(function(e){return n.vo.Lo(t,e)}))}))},t.prototype.jo=function(t){delete this.wo[t]},t.prototype.Bo=function(t){var e=this;return this.po(t).next((function(n){if(!n)return Yn.resolve();var r=IDBKeyRange.lowerBound(Br.prefixForUser(e.userId)),i=[];return fr(t).fo({range:r},(function(t,n,r){if(t[0]===e.userId){var o=zn(t[1]);i.push(o)}else r.done()})).next((function(){_(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.nt()})))}))}))},t.prototype.bs=function(t,e){return cr(t,this.userId,e)},t.prototype.yo=function(t){var e=this;return dr(t).get(this.userId).next((function(t){return t||new Hr(e.userId,-1,"")}))},t}();function cr(t,e,n){var r=Br.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return fr(t).fo({range:o,ao:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()})).next((function(){return a}))}function lr(t,e,n){var r=t.store(zr.store),i=t.store(Br.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.fo({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){_(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Br.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Yn.ks(o).next((function(){return c}))}function hr(t){return ci.$s(t,zr.store)}function fr(t){return ci.$s(t,Br.store)}function dr(t){return ci.$s(t,Hr.store)}(sr=ar||(ar={}))[sr.Mo=0]="__PRIVATE_QueryCache",sr[sr.qo=1]="__PRIVATE_SyncEngine";var pr=function(){function t(t,e){this.Qo=t,_((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.Go(void 0!==e?e:this.Qo)}return t.prototype.next=function(){var t=this.Wo;return this.Wo+=2,t},t.prototype.after=function(t){return this.Go(t+2),this.next()},t.prototype.Go=function(t){_((1&t)===this.Qo,"Cannot supply target ID from different generator ID"),this.Wo=t},t.zo=function(){return new t(ar.Mo,2)},t.Ko=function(){return new t(ar.qo)},t}(),vr=function(){function t(t,e,n){this.Ho=t,this.Jo=e,this.do=n}return t.prototype.Yo=function(t,e){var n=this;return this.Jo.Vo(t,e).next((function(r){return n.Xo(t,e,r)}))},t.prototype.Xo=function(t,e,n){return this.Ho.Ls(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Gt(e,t);return t}))},t.prototype.$o=function(t,e,n){var r=We();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Gt(t,e);r=r.lt(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.Ho.getEntries(t,e).next((function(e){return n.th(t,e)}))},t.prototype.th=function(t,e){var n=this;return this.Jo.No(t,e).next((function(r){var i=n.$o(t,e,r),o=Ge();return i.forEach((function(t,e){e||(e=new ae(t,ut.B())),o=o.lt(t,e)})),o}))},t.prototype.nh=function(t,e,n){return e.zn()?this.ih(t,e.path):e._i()?this.eh(t,e,n):this.rh(t,e,n)},t.prototype.ih=function(t,e){return this.Yo(t,new dt(e)).next((function(t){var e=Qe();return t instanceof oe&&(e=e.lt(t.key,t)),e}))},t.prototype.eh=function(t,e,n){var r=this;_(e.path.J(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=Qe();return this.do.uh(t,i).next((function(a){return Yn.forEach(a,(function(a){var s=e.ai(a.child(i));return r.rh(t,s,n).next((function(t){t.forEach((function(t,e){o=o.lt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.rh=function(t,e,n){var r,i,o=this;return this.Ho.nh(t,e,n).next((function(n){return r=n,o.Jo.Fo(t,e)})).next((function(e){return o.sh(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.Gt(l,l,o.jn);r=h instanceof oe?r.lt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.sh=function(t,e,n){for(var r=$e(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof jt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ho.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof oe&&(c=c.lt(t,e))})),c}))},t}(),yr=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.oh=n,this.hh=r}return t.ah=function(e,n){for(var r=$e(),i=$e(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case en.Bi:r=r.add(s.doc.key);break;case en.Mi:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),gr="LocalStore",mr=function(){function t(t,e,n){this.persistence=t,this.fh=e,this.lh=new Wn,this.dh=new pt(w),this.vh=new Qn((function(t){return t.canonicalId()})),this.wh=ut.MIN,_(t.mh,"LocalStore was passed an unstarted persistence implementation"),this.persistence.vo.ph(this.lh),this.Jo=t.gh(n),this.bh=t.yh(),this._h=t.Ih(),this.Th=new vr(this.bh,this.Jo,this.persistence.Eh()),this.fh.Rh(this.Th)}return t.prototype.start=function(){return this.Ah()},t.prototype.Dh=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i=this;return a.__generator(this,(function(o){switch(o.label){case 0:return e=this.Jo,n=this.Th,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.Jo.ko(r).next((function(a){return o=a,e=i.persistence.gh(t),n=new vr(i.bh,e,i.persistence.Eh()),e.ko(r)})).next((function(t){for(var e=[],i=[],a=$e(),s=0,u=o;s<u.length;s++){var c=u[s];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){i.push((c=p[d]).batchId);for(var v=0,y=c.mutations;v<y.length;v++)a=a.add((f=y[v]).key)}return n.Zo(r,a).next((function(t){return{Ph:t,Sh:e,Ch:i}}))}))}))];case 1:return r=o.sent(),this.Jo=e,this.Th=n,this.fh.Rh(this.Th),[2,r]}}))}))},t.prototype.kh=function(t){var e,n=this,r=st.now(),i=t.reduce((function(t,e){return t.add(e.key)}),$e());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.Th.Zo(o,i).next((function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=c.sn(e.get(c.key));null!=l&&a.push(new jt(c.key,l,l.on(),Dt.exists(!0)))}return n.Jo.To(o,r,a,t)}))})).then((function(t){var n=t.us(e);return{batchId:t.batchId,Ns:n}}))},t.prototype.Vh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.Jo.Po(n,t).next((function(t){return t?e.Th.Zo(n,t):Yn.resolve(null)}))}))},t.prototype.bo=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),i=e.bh.Nh({Oh:!0});return e.Jo.bo(n,t.batch,t.streamToken).next((function(){return e.Fh(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.Jo.Bo(n)})).next((function(){return e.Th.Zo(n,r)}))}))},t.prototype.Uh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.Jo.Ao(n,t).next((function(t){return _(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.Jo.Uo(n,t)})).next((function(){return e.Jo.Bo(n)})).next((function(){return e.Th.Zo(n,r)}))}))},t.prototype.Co=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.Jo.Co(e)}))},t.prototype._o=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.Jo._o(e)}))},t.prototype.Io=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.Jo.Io(n,t)}))},t.prototype.xh=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t._h.xh(e)}))},t.prototype.jh=function(e){var n=this,r=e.Ni,i=this.dh;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.bh.Nh({Oh:!0});i=n.dh;var s=[];U(e.Zi,(function(e,a){var u=i.get(e);if(u){s.push(n._h.Lh(o,a.he,e).next((function(){return n._h.Bh(o,a.se,e)})));var c=a.resumeToken;if(c.Nn()>0){var l=u.Fi(c,r).Oi(o.Mh);i=i.lt(e,l),t.qh(u,l,a)&&s.push(n._h.Qh(o,l))}}}));var u=Ge(),c=$e();if(e.ne.forEach((function(t,e){c=c.add(t)})),s.push(a.getEntries(o,c).next((function(t){e.ne.forEach((function(i,c){var l=t.get(i);c instanceof ae&&c.version.isEqual(ut.MIN)?(a.js(i,r),u=u.lt(i,c)):null==l||c.version.h(l.version)>0||0===c.version.h(l.version)&&l.hasPendingWrites?(_(!ut.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.Us(c,r),u=u.lt(i,c)):v(gr,"Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e.ie.has(i)&&s.push(n.persistence.vo.Gh(o,i))}))}))),!r.isEqual(ut.MIN)){var l=n._h.xh(o).next((function(t){return _(r.h(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n._h.Wh(o,o.Mh,r)}));s.push(l)}return Yn.ks(s).next((function(){return a.apply(o)})).next((function(){return n.Th.th(o,u)}))})).then((function(t){return n.dh=i,t}))},t.qh=function(t,e,n){return _(e.resumeToken.Nn()>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.Nn()||e.Ni.M()-t.Ni.M()>=this.zh||n.se.size+n.oe.size+n.he.size>0},t.prototype.Kh=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.lh.ls(i.oh,o),this.lh.ws(i.hh,o),!i.fromCache){var a=this.dh.get(o);_(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.Ui(a.Ni);this.dh=this.dh.lt(o,s)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Yn.forEach(t,(function(t){return Yn.forEach(t.hh,(function(t){return e.persistence.vo.ds(n,t)}))}))}))},t.prototype.Hh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.Jo.So(n,t)}))},t.prototype.Jh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.Th.Yo(n,t)}))},t.prototype.Yh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return e._h.Xh(n,t).next((function(i){return i?Yn.resolve(r=i):e._h.$h(n).next((function(i){return r=new Fe(t,i,xe.Si,n.Mh),e._h.Zh(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.dh.get(n.targetId)&&(e.dh=e.dh.lt(n.targetId,n),e.vh.set(t,n.targetId)),n}))},t.prototype.Xh=function(t,e){var n=this.vh.get(e);return void 0!==n?Yn.resolve(this.dh.get(n)):this._h.Xh(t,e)},t.prototype.tc=function(t,e){var n=this,r=this.dh.get(t);return _(null!==r,"Tried to release nonexistent target: "+t),this.persistence.runTransaction("Release target",e?"readwrite-idempotent":"readwrite-primary-idempotent",(function(i){var o=n.lh.ms(t);return e?Yn.resolve():Yn.forEach(o,(function(t){return n.persistence.vo.ds(i,t)})).next((function(){n.persistence.vo.removeTarget(i,r)}))})).then((function(){n.dh=n.dh.remove(t),n.vh.delete(r.target)}))},t.prototype.nc=function(t,e){var n=this,r=ut.MIN,i=$e();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.Xh(o,t.li()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n._h.ic(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.fh.nh(o,t,e?r:ut.MIN,e?i:$e())})).next((function(t){return{documents:t,ec:i}}))}))},t.prototype.rc=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e._h.ic(n,t)}))},t.prototype.uc=function(){return this.persistence.uc()},t.prototype.sc=function(t){this.Jo.jo(t)},t.prototype.oc=function(t){this.persistence.oc(t)},t.prototype.Fh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Yn.resolve();return o.forEach((function(r){a=a.next((function(){return n.Ls(t,r)})).next((function(t){var o=t,a=e.os.get(r);_(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.h(a)<0)&&((o=i.Wt(r,o,e))?n.Us(o,e.ss):_(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),a.next((function(){return r.Jo.Uo(t,i)}))},t.prototype.hc=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.cc(n,e.dh)}))},t.prototype.ac=function(t){var e=this,n=this.dh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e._h.Ye(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.fc=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.bh.fc(e,t.wh)})).then((function(e){var n=e.lc;return t.wh=e.readTime,n}))},t.prototype.Ah=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e=this;return a.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.bh.dc(t)}))];case 1:return t.wh=n.sent(),[2]}}))}))},t.zh=3e8,t}();function _r(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){if(t.code!==A.FAILED_PRECONDITION||t.message!==Xn)throw t;return v(gr,"Unexpectedly lost primary lease"),[2]}))}))}function br(t,e){var n=t[1],r=e[1],i=w(t[0],e[0]);return 0===i?w(n,r):i}var wr=function(){function t(t){this.vc=t,this.buffer=new mt(br),this.wc=0}return t.prototype.mc=function(){return++this.wc},t.prototype.pc=function(t){var e=[t,this.mc()];if(this.buffer.size<this.vc)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();br(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Cr={gc:!1,bc:0,yc:0,_c:0},kr=function(){function t(t,e,n){this.Ic=t,this.Tc=e,this.Ec=n}return t.Rc=function(e){return new t(e,t.Ac,t.Dc)},t.Pc=-1,t.Sc=1048576,t.kc=new t(t.Cc=41943040,t.Ac=10,t.Dc=1e3),t.DISABLED=new t(t.Pc,0,0),t}(),Er=function(){function t(t,e,n){this.Vc=t,this.Pu=e,this.Nc=n,this.Oc=!1,this.Fc=null}return t.prototype.start=function(){_(null===this.Fc,"Cannot start an already started LruScheduler"),this.Vc.params.Ic!==kr.Pc&&this.Uc()},t.prototype.stop=function(){this.Fc&&(this.Fc.cancel(),this.Fc=null)},Object.defineProperty(t.prototype,"mh",{get:function(){return null!==this.Fc},enumerable:!0,configurable:!0}),t.prototype.Uc=function(){var t=this;_(null===this.Fc,"Cannot schedule GC while a task is pending");var e=this.Oc?3e5:6e4;v("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Fc=this.Pu.Yu(xn.Au,e,(function(){return t.Fc=null,t.Oc=!0,t.Nc.hc(t.Vc).then((function(){return t.Uc()})).catch(_r)}))},t}(),Ir=function(){function t(t,e){this.xc=t,this.params=e}return t.prototype.jc=function(t,e){return this.xc.Lc(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Bc=function(t,e){var n=this;if(0===e)return Yn.resolve(Mn.gu);var r=new wr(e);return this.xc.Le(t,(function(t){return r.pc(t.sequenceNumber)})).next((function(){return n.xc.Mc(t,(function(t){return r.pc(t)}))})).next((function(){return r.maxValue}))},t.prototype.qc=function(t,e,n){return this.xc.qc(t,e,n)},t.prototype.Qc=function(t,e){return this.xc.Qc(t,e)},t.prototype.cc=function(t,e){var n=this;return this.params.Ic===kr.Pc?(v("LruGarbageCollector","Garbage collection skipped; disabled"),Yn.resolve(Cr)):this.Gc(t).next((function(r){return r<n.params.Ic?(v("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Ic),Cr):n.Wc(t,e)}))},t.prototype.Gc=function(t){return this.xc.Gc(t)},t.prototype.Wc=function(t,e){var n,r,o,a,s,u,c,l=this,h=Date.now();return this.jc(t,this.params.Tc).next((function(e){return e>l.params.Ec?(v("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.Ec+" from "+e),r=l.params.Ec):r=e,a=Date.now(),l.Bc(t,r)})).next((function(r){return n=r,s=Date.now(),l.qc(t,n,e)})).next((function(e){return o=e,u=Date.now(),l.Qc(t,n)})).next((function(t){return c=Date.now(),d()<=i.DEBUG&&v("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),Yn.resolve({gc:!0,bc:r,yc:o,_c:t})}))},t}(),Tr=function(){function t(t,e){this.vo=t,this.serializer=e,this.zc=pr.zo()}return t.prototype.$h=function(t){var e=this;return this.Kc(t).next((function(n){return n.highestTargetId=e.zc.after(n.highestTargetId),e.Hc(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.xh=function(t){return this.Kc(t).next((function(t){return ut.L(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Jc=function(t){return Nr(t.xo)},t.prototype.Wh=function(t,e,n){var r=this;return this.Kc(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.q()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Hc(t,i)}))},t.prototype.Zh=function(t,e){var n=this;return this.Yc(t,e).next((function(){return n.Kc(t).next((function(r){return r.targetCount+=1,n.Xc(e,r),n.Hc(t,r)}))}))},t.prototype.Qh=function(t,e){return this.Yc(t,e)},t.prototype.$c=function(t,e){var n=this;return this.Zc(t,e.targetId).next((function(){return Sr(t).delete(e.targetId)})).next((function(){return n.Kc(t)})).next((function(e){return _(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.Hc(t,e)}))},t.prototype.qc=function(t,e,n){var r=this,i=0,o=[];return Sr(t).fo((function(a,s){var u=r.serializer.ta(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.$c(t,u)))})).next((function(){return Yn.ks(o)})).next((function(){return i}))},t.prototype.Le=function(t,e){var n=this;return Sr(t).fo((function(t,r){var i=n.serializer.ta(r);e(i)}))},t.prototype.Kc=function(t){return Ar(t.xo)},t.prototype.Hc=function(t,e){return(n=t,ci.$s(n,Xr.store)).put(Xr.key,e);var n},t.prototype.Yc=function(t,e){return Sr(t).put(this.serializer.na(e))},t.prototype.Xc=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ia=function(t){return this.Kc(t).next((function(t){return t.targetCount}))},t.prototype.Xh=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Sr(t).fo({range:i,index:Yr.queryTargetsIndexName},(function(t,r,i){var a=n.serializer.ta(r);e.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},t.prototype.Bh=function(t,e,n){var r=this,i=[],o=Or(t);return e.forEach((function(e){var a=Vn(e.path);i.push(o.put(new Jr(n,a))),i.push(r.vo.fs(t,e))})),Yn.ks(i)},t.prototype.Lh=function(t,e,n){var r=this,i=Or(t);return Yn.forEach(e,(function(e){var o=Vn(e.path);return Yn.ks([i.delete([n,o]),r.vo.ds(t,e)])}))},t.prototype.Zc=function(t,e){var n=Or(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ic=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Or(t),i=$e();return r.fo({range:n,ao:!0},(function(t,e,n){var r=zn(t[1]),o=new dt(r);i=i.add(o)})).next((function(){return i}))},t.prototype.bs=function(t,e){var n=Vn(e.path),r=IDBKeyRange.bound([n],[k(n)],!1,!0),i=0;return Or(t).fo({index:Jr.documentTargetsIndex,ao:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ye=function(t,e){var n=this;return Sr(t).get(e).next((function(t){return t?n.serializer.ta(t):null}))},t}();function Sr(t){return ci.$s(t,Yr.store)}function Ar(t){return Zn.$s(t,Xr.store).get(Xr.key).next((function(t){return _(null!==t,"Missing metadata row."),t}))}function Nr(t){return Ar(t).next((function(t){return t.highestListenSequenceNumber}))}function Or(t){return ci.$s(t,Jr.store)}var Rr=function(){function t(t,e){this.serializer=t,this.do=e}return t.prototype.Us=function(t,e,n){return Pr(t).put(Dr(e),n)},t.prototype.js=function(t,e){var n=Pr(t),r=Dr(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ea(t,r)}))},t.prototype.Ls=function(t,e){var n=this;return Pr(t).get(Dr(e)).next((function(t){return n.ra(t)}))},t.prototype.ua=function(t,e){var n=this;return Pr(t).get(Dr(e)).next((function(t){var e=n.ra(t);return e?{sa:e,size:Lr(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=We();return this.oa(t,e,(function(t,e){var i=n.ra(e);r=r.lt(t,i)})).next((function(){return r}))},t.prototype.ha=function(t,e){var n=this,r=We(),i=new pt(dt.G);return this.oa(t,e,(function(t,e){var o=n.ra(e);o?(r=r.lt(t,o),i=i.lt(t,Lr(e))):(r=r.lt(t,null),i=i.lt(t,0))})).next((function(){return{ca:r,aa:i}}))},t.prototype.oa=function(t,e,n){if(e.J())return Yn.resolve();var r=IDBKeyRange.bound(e.first().path.tt(),e.last().path.tt()),i=e.bt(),o=i.Rt();return Pr(t).fo({range:r},(function(t,e,r){for(var a=dt.at(t);o&&dt.G(o,a)<0;)n(o,null),o=i.Rt();o&&o.isEqual(a)&&(n(o,e),o=i.At()?i.Rt():null),o?r.uo(o.path.tt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.Rt():null}))},t.prototype.nh=function(t,e,n){var r=this;_(!e._i(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Qe(),o=e.path.length+1,a={};if(n.isEqual(ut.MIN)){var s=e.path.tt();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.tt(),c=this.serializer.fa(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Kr.collectionReadTimeIndex}return Pr(t).fo(a,(function(t,n,a){if(t.length===o){var s=r.serializer.la(n);e.path.$(s.key.path)?s instanceof oe&&e.matches(s)&&(i=i.lt(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.fc=function(t,e){var n=this,r=Ge(),i=this.serializer.fa(e),o=Pr(t),a=IDBKeyRange.lowerBound(i,!0);return o.fo({index:Kr.readTimeIndex,range:a},(function(t,e){var o=n.serializer.la(e);r=r.lt(o.key,o),i=e.readTime})).next((function(){return{lc:r,readTime:n.serializer.da(i)}}))},t.prototype.dc=function(t){var e=this,n=Pr(t),r=ut.MIN;return n.fo({index:Kr.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.da(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.Nh=function(e){return new t.va(this,!!e&&e.Oh)},t.prototype.wa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return xr(t).get(Qr.key).next((function(t){return _(!!t,"Missing document cache metadata"),t}))},t.prototype.ea=function(t,e){return xr(t).put(Qr.key,e)},t.prototype.ra=function(t){if(t){var e=this.serializer.la(t);return e instanceof ae&&e.version.isEqual(ut.B())?null:e}return null},t.va=function(t){function e(e,n){var r=t.call(this)||this;return r.ma=e,r.Oh=n,r.pa=new Qn((function(t){return t.toString()})),r}return a.__extends(e,t),e.prototype.qs=function(t){var e=this,n=[],r=0,i=new mt((function(t,e){return w(t.nt(),e.nt())}));return this.Ns.forEach((function(o,a){var s=e.pa.get(o);if(_(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){_(!e.readTime.isEqual(ut.MIN),"Cannot add a document with a read time of zero");var u=e.ma.serializer.ga(a,e.readTime);i=i.add(o.path.H());var c=Lr(u);r+=c-s,n.push(e.ma.Us(t,o,u))}else if(r-=s,e.Oh){var l=e.ma.serializer.ga(new ae(o,ut.B()),e.readTime);n.push(e.ma.Us(t,o,l))}else n.push(e.ma.js(t,o))})),i.forEach((function(r){n.push(e.ma.do.Ro(t,r))})),n.push(this.ma.updateMetadata(t,r)),Yn.ks(n)},e.prototype.Bs=function(t,e){var n=this;return this.ma.ua(t,e).next((function(t){return null===t?(n.pa.set(e,0),null):(n.pa.set(e,t.size),t.sa)}))},e.prototype.Ms=function(t,e){var n=this;return this.ma.ha(t,e).next((function(t){var e=t.ca;return t.aa.forEach((function(t,e){n.pa.set(t,e)})),e}))},e}(Jn),t}();function xr(t){return ci.$s(t,Qr.store)}function Pr(t){return ci.$s(t,Kr.store)}function Dr(t){return t.path.tt()}function Lr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Mr=function(){function t(){this.ba=new jr}return t.prototype.Ro=function(t,e){return this.ba.add(e),Yn.resolve()},t.prototype.uh=function(t,e){return Yn.resolve(this.ba.getEntries(e))},t}(),jr=function(){function t(){this.index={}}return t.prototype.add=function(t){_(t.length%2==1,"Expected a collection path.");var e=t.X(),n=t.H(),r=this.index[e]||new mt(lt.G),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.X(),n=t.H(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new mt(lt.G)).tt()},t}(),Ur=9,Fr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;_(n<r&&n>=0&&r<=Ur,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new er(e);n<1&&r>=1&&(function(t){t.createObjectStore(qr.store)}(t),function(t){t.createObjectStore(Hr.store,{keyPath:Hr.keyPath}),t.createObjectStore(zr.store,{keyPath:zr.keyPath,autoIncrement:!0}).createIndex(zr.userMutationsIndex,zr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Br.store)}(t),Zr(t),function(t){t.createObjectStore(Kr.store)}(t));var a=Yn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Jr.store),t.deleteObjectStore(Yr.store),t.deleteObjectStore(Xr.store)}(t),Zr(t)),a=a.next((function(){return function(t){var e=t.store(Xr.store),n=new Xr(0,0,ut.MIN.q(),0);return e.put(Xr.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(zr.store).oo().next((function(n){t.deleteObjectStore(zr.store),t.createObjectStore(zr.store,{keyPath:zr.keyPath,autoIncrement:!0}).createIndex(zr.userMutationsIndex,zr.userMutationsKeyPath,{unique:!0});var r=e.store(zr.store),i=n.map((function(t){return r.put(t)}));return Yn.ks(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(ti.store,{keyPath:ti.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Qr.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Kr.store);e.createIndex(Kr.readTimeIndex,Kr.readTimeIndexPath,{unique:!1}),e.createIndex(Kr.collectionReadTimeIndex,Kr.collectionReadTimeIndexPath,{unique:!1})}(e)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Kr.store).fo((function(t,n){e+=Lr(n)})).next((function(){var n=new Qr(e);return t.store(Qr.store).put(Qr.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Hr.store),r=t.store(zr.store);return n.oo().next((function(n){return Yn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.oo(zr.userMutationsIndex,i).next((function(r){return Yn.forEach(r,(function(r){_(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.Do(r);return lr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Jr.store),n=t.store(Kr.store);return Nr(t).next((function(t){var r=[];return n.fo((function(n,i){var o=new lt(n),a=function(t){return[0,Vn(t)]}(o);r.push(e.get(a).next((function(n){return n?Yn.resolve():function(n){return e.put(new Jr(0,Vn(n),t))}(o)})))})).next((function(){return Yn.ks(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore($r.store,{keyPath:$r.keyPath});var n=e.store($r.store),r=new jr,i=function(t){if(r.add(t)){var e=t.X(),i=t.H();return n.put({collectionId:e,parent:Vn(i)})}};return e.store(Kr.store).fo({ao:!0},(function(t,e){var n=new lt(t);return i(n.H())})).next((function(){return e.store(Br.store).fo({ao:!0},(function(t,e){var n=zn(t[1]);return i(n.H())}))}))},t}(),Vr=function(t,e){this.seconds=t,this.nanoseconds=e},qr=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),Hr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),zr=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),Br=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Vn(e)]},t.key=function(t,e,n){return[t,Vn(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Gr=function(t,e){this.path=t,this.readTime=e},Wr=function(t,e){this.path=t,this.version=e},Kr=function(){function t(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),Qr=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),Yr=function(){function t(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Jr=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,_(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),Xr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),$r=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function Zr(t){t.createObjectStore(Jr.store,{keyPath:Jr.keyPath}).createIndex(Jr.documentTargetsIndex,Jr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Yr.store,{keyPath:Yr.keyPath}).createIndex(Yr.queryTargetsIndexName,Yr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Xr.store)}var ti=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}(),ei=a.__spreadArrays([Hr.store,zr.store,Br.store,Kr.store,Yr.store,qr.store,Xr.store,Jr.store],[ti.store]),ni=a.__spreadArrays(ei,[Qr.store]),ri=a.__spreadArrays(ni,[$r.store]),ii=function(){function t(){this.ya=new jr}return t.prototype.Ro=function(t,e){var n=this;if(_(e.length%2==1,"Expected a collection path."),!this.ya.has(e)){var r=e.X(),i=e.H();t.Gs((function(){n.ya.add(e)}));var o={collectionId:r,parent:Vn(i)};return oi(t).put(o)}return Yn.resolve()},t.prototype.uh=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[k(e),""],!1,!0);return oi(t).oo(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(zn(o.parent))}return n}))},t}();function oi(t){return ci.$s(t,$r.store)}var ai=function(){function t(t){this._a=t}return t.prototype.la=function(t){if(t.document)return this._a.Er(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=dt.at(t.noDocument.path),n=this.Ia(t.noDocument.readTime);return new ae(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=dt.at(t.unknownDocument.path),n=this.Ia(t.unknownDocument.version),new se(e,n)):m("Unexpected DbRemoteDocument")},t.prototype.ga=function(t,e){var n=this.fa(e),r=t.key.path.H().tt();if(t instanceof oe){var i=t.proto?t.proto:this._a.Tr(t),o=t.hasCommittedMutations;return new Kr(null,null,i,o,n,r)}if(t instanceof ae){var a=t.key.path.tt(),s=this.Ta(t.version);return o=t.hasCommittedMutations,new Kr(null,new Gr(a,s),null,o,n,r)}if(t instanceof se){a=t.key.path.tt();var u=this.Ta(t.version);return new Kr(new Wr(a,u),null,null,!0,n,r)}return m("Unexpected MaybeDocument")},t.prototype.fa=function(t){var e=t.q();return[e.seconds,e.nanoseconds]},t.prototype.da=function(t){var e=new st(t[0],t[1]);return ut.L(e)},t.prototype.Ta=function(t){var e=t.q();return new Vr(e.seconds,e.nanoseconds)},t.prototype.Ia=function(t){var e=new st(t.seconds,t.nanoseconds);return ut.L(e)},t.prototype.Eo=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n._a.Nr(t)})),i=e.mutations.map((function(t){return n._a.Nr(t)}));return new zr(t,e.batchId,e.jn.toMillis(),r,i)},t.prototype.Do=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e._a.xr(t)})),r=t.mutations.map((function(t){return e._a.xr(t)})),i=st.fromMillis(t.localWriteTimeMs);return new Bn(t.batchId,i,n,r)},t.prototype.Ea=function(t){var e=[];return t.forEach((function(t){e.push(Vn(t.path))})),e},t.prototype.Ra=function(t){for(var e=$e(),n=0,r=t;n<r.length;n++)e=e.add(new dt(zn(r[n])));return e},t.prototype.ta=function(t){var e,n=this.Ia(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Ia(t.lastLimboFreeSnapshotVersion):ut.MIN;return e=void 0!==t.query.documents?this._a.Gr(t.query):this._a.Jr(t.query),new Fe(e,t.targetId,xe.Si,t.lastListenSequenceNumber,n,r,De.fromBase64String(t.resumeToken))},t.prototype.na=function(t){_(xe.Si===t.Vi,"Only queries with purpose "+xe.Si+" may be stored, got "+t.Vi);var e,n=this.Ta(t.Ni),r=this.Ta(t.lastLimboFreeSnapshotVersion);e=t.target.zn()?this._a.Qr(t.target):this._a.Wr(t.target);var i=t.resumeToken.toBase64();return new Yr(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),si="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",ui=function(t){function e(e,n){var r=t.call(this)||this;return r.xo=e,r.Mh=n,r}return a.__extends(e,t),e}($n),ci=function(){function t(e,n,r,i,o,a,s,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Aa=a,this.Da=u,this.Pa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Sa=null,this.inForeground=!1,this.Ca=null,this.ka=null,this.Va=Number.NEGATIVE_INFINITY,this.Na=function(t){return Promise.resolve()},this.vo=new fi(this,o),this.Oa=n+t.Fa,this.serializer=new ai(s),this.document=i.document,this._h=new Tr(this.vo,this.serializer),this.do=new ii,this.Ho=new Rr(this.serializer,this.do),!i.window||!i.window.localStorage)throw new N(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.Ua=this.window.localStorage}return t.$s=function(t,e){if(t instanceof ui)return Zn.$s(t.xo,e);throw m("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.xa=function(e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:if(!t.Hs())throw new N(A.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.ja,e.Aa,e.serializer,e.Da)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return _(!this.mh,"IndexedDbPersistence double-started!"),_(null!==this.window,"Expected 'window' to be defined"),Zn.Ks(this.Oa,Ur,new Fr(this.serializer)).then((function(e){return t.La=e,t.Ba()})).then((function(){return t.Ma(),t.qa(),t.Qa(),t.La.runTransaction("readonly-idempotent",[Xr.store],(function(t){return Nr(t)}))})).then((function(e){t.Ga=new Mn(e,t.Da)})).then((function(){t.Pa=!0})).catch((function(e){return t.La&&t.La.close(),Promise.reject(e)}))},t.prototype.Wa=function(t){var e=this;return this.Na=function(n){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.mh?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.za=function(t){var e=this;this.La.Zs((function(n){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.oc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Aa.xu((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.mh?[4,this.Ba()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ba=function(){var t=this;return this.La.runTransaction("readwrite-idempotent",ri,(function(e){return hi(e).put(new ti(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Ka(e).next((function(e){e||(t.isPrimary=!1,t.Aa.xu((function(){return t.Na(!1)})))}))})).next((function(){return t.Ha(e)})).next((function(n){return t.isPrimary&&!n?t.Ja(e).next((function(){return!1})):!!n&&t.Ya(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return v("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Aa.xu((function(){return t.Na(e)})),t.isPrimary=e}))},t.prototype.Ka=function(t){var e=this;return li(t).get(qr.key).next((function(t){return Yn.resolve(e.Xa(t))}))},t.prototype.$a=function(t){return hi(t).delete(this.clientId)},t.prototype.Za=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.tf(this.Va,18e5)?[3,2]:(this.Va=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=t.$s(n,ti.store);return r.oo().next((function(t){var n=e.nf(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Yn.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.if(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.Qa=function(){var t=this;this.ka=this.Aa.Yu(xn.Ru,4e3,(function(){return t.Ba().then((function(){return t.Za()})).then((function(){return t.Qa()}))}))},t.prototype.Xa=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ha=function(t){var e=this;return li(t).get(qr.key).next((function(n){if(null!==n&&e.tf(n.leaseTimestampMs,5e3)&&!e.ef(n.ownerId)){if(e.Xa(n)&&e.networkEnabled)return!0;if(!e.Xa(n)){if(!n.allowTabSynchronization)throw new N(A.FAILED_PRECONDITION,si);return!1}}return!(!e.networkEnabled||!e.inForeground)||hi(t).oo().next((function(t){return void 0===e.nf(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&v("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(e){switch(e.label){case 0:return this.Pa=!1,this.rf(),this.ka&&(this.ka.cancel(),this.ka=null),this.uf(),this.sf(),[4,this.La.runTransaction("readwrite-idempotent",[qr.store,ti.store],(function(e){return t.Ja(e).next((function(){return t.$a(e)}))}))];case 1:return e.sent(),this.La.close(),this.hf(),[2]}}))}))},t.prototype.nf=function(t,e){var n=this;return t.filter((function(t){return n.tf(t.updateTimeMs,e)&&!n.ef(t.clientId)}))},t.prototype.uc=function(){var t=this;return this.La.runTransaction("readonly-idempotent",[ti.store],(function(e){return hi(e).oo().next((function(e){return t.nf(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return t.Hs()?[4,Zn.delete(e+t.Fa)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"mh",{get:function(){return this.Pa},enumerable:!0,configurable:!0}),t.prototype.gh=function(t){return _(this.mh,"Cannot initialize MutationQueue before persistence is started."),ur.mo(t,this.serializer,this.do,this.vo)},t.prototype.Ih=function(){return _(this.mh,"Cannot initialize TargetCache before persistence is started."),this._h},t.prototype.yh=function(){return _(this.mh,"Cannot initialize RemoteDocumentCache before persistence is started."),this.Ho},t.prototype.Eh=function(){return _(this.mh,"Cannot initialize IndexManager before persistence is started."),this.do},t.prototype.runTransaction=function(t,e,n){var r=this;v("IndexedDbPersistence","Starting transaction:",t);var i,o=e.endsWith("idempotent"),a=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.La.runTransaction(a,ri,(function(o){return i=new ui(o,r.Ga.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.Ka(o).next((function(t){return!!t||r.Ha(o)})).next((function(e){if(!e)throw y("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Aa.xu((function(){return r.Na(!1)})),new N(A.FAILED_PRECONDITION,Xn);return n(i)})).next((function(t){return r.Ya(o).next((function(){return t}))})):r.cf(o).next((function(){return n(i)}))})).then((function(t){return i.Ws(),t}))},t.prototype.cf=function(t){var e=this;return li(t).get(qr.key).next((function(t){if(null!==t&&e.tf(t.leaseTimestampMs,5e3)&&!e.ef(t.ownerId)&&!e.Xa(t)&&!t.allowTabSynchronization)throw new N(A.FAILED_PRECONDITION,si)}))},t.prototype.Ya=function(t){var e=new qr(this.clientId,this.allowTabSynchronization,Date.now());return li(t).put(qr.key,e)},t.Hs=function(){return Zn.Hs()},t.af=function(t){var e=t.s.projectId;return t.s.o||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Ja=function(t){var e=this,n=li(t);return n.get(qr.key).next((function(t){return e.Xa(t)?(v("IndexedDbPersistence","Releasing primary lease."),n.delete(qr.key)):Yn.resolve()}))},t.prototype.tf=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(y("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ma=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ca=function(){t.Aa.xu((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ba()}))},this.document.addEventListener("visibilitychange",this.Ca),this.inForeground="visible"===this.document.visibilityState)},t.prototype.uf=function(){this.Ca&&(_(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.Ca),this.Ca=null)},t.prototype.qa=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Sa=function(){t.rf(),t.Aa.xu((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Sa))},t.prototype.sf=function(){this.Sa&&(_("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Sa),this.Sa=null)},t.prototype.ef=function(t){try{var e=null!==this.Ua.getItem(this.if(t));return v("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return y("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.rf=function(){try{this.Ua.setItem(this.if(this.clientId),String(Date.now()))}catch(t){y("Failed to set zombie client id.",t)}},t.prototype.hf=function(){try{this.Ua.removeItem(this.if(this.clientId))}catch(t){}},t.prototype.if=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.Fa="main",t}();function li(t){return t.store(qr.store)}function hi(t){return t.store(ti.store)}var fi=function(){function t(t,e){this.db=t,this.ff=null,this.Vc=new Ir(this,e)}return t.prototype.Lc=function(t){var e=this.lf(t);return this.db.Ih().ia(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.lf=function(t){var e=0;return this.Mc(t,(function(t){e++})).next((function(){return e}))},t.prototype.Le=function(t,e){return this.db.Ih().Le(t,e)},t.prototype.Mc=function(t,e){return this.df(t,(function(t,n){return e(n)}))},t.prototype.ph=function(t){this.ff=t},t.prototype.fs=function(t,e){return di(t,e)},t.prototype.ds=function(t,e){return di(t,e)},t.prototype.qc=function(t,e,n){return this.db.Ih().qc(t,e,n)},t.prototype.Lo=function(t,e){return di(t,e)},t.prototype.vf=function(t,e){return this.ff.bs(e)?Yn.resolve(!0):function(t,e){var n=!1;return dr(t).lo((function(r){return cr(t,r,e).next((function(t){return t&&(n=!0),Yn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Qc=function(t,e){var n=this,r=this.db.yh().Nh(),i=[],o=0;return this.df(t,(function(a,s){if(s<=e){var u=n.vf(t,a).next((function(e){if(!e)return o++,r.Ls(t,a).next((function(){return r.js(a),Or(t).delete([0,Vn(a.path)])}))}));i.push(u)}})).next((function(){return Yn.ks(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Oi(t.Mh);return this.db.Ih().Qh(t,n)},t.prototype.Gh=function(t,e){return di(t,e)},t.prototype.df=function(t,e){var n,r=Or(t),i=Mn.gu;return r.fo({index:Jr.documentTargetsIndex},(function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==Mn.gu&&e(new dt(zn(n)),i),i=a,n=o):i=Mn.gu})).next((function(){i!==Mn.gu&&e(new dt(zn(n)),i)}))},t.prototype.Gc=function(t){return this.db.yh().wa(t)},t}();function di(t,e){return Or(t).put(function(t,e){return new Jr(0,Vn(t.path),e)}(e,t.Mh))}var pi,vi,yi=function(){function t(){}return t.prototype.Rh=function(t){this.wf=t},t.prototype.nh=function(t,e,n,r){var o=this;return _(void 0!==this.wf,"setLocalDocumentsView() not called"),e.fi()?this.mf(t,e):n.isEqual(ut.MIN)?this.mf(t,e):this.wf.Zo(t,r).next((function(a){var s=o.pf(e,a);return(e.gi()||e.bi())&&o.gf(e.Yn,s,r,n)?o.mf(t,e):(d()<=i.DEBUG&&v("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),o.wf.nh(t,e,n).next((function(t){return s.forEach((function(e){t=t.lt(e.key,e)})),t})))}))},t.prototype.pf=function(t,e){var n=new mt((function(e,n){return t.di(e,n)}));return e.forEach((function(e,r){r instanceof oe&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.gf=function(t,e,n,r){if(n.size!==e.size)return!0;var i=t===pe.Kn?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.h(r)>0)},t.prototype.mf=function(t,e){return d()<=i.DEBUG&&v("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.wf.nh(t,e,ut.MIN)},t}(),gi=function(){function t(t,e){this.do=t,this.vo=e,this.Jo=[],this.bf=1,this.lastStreamToken=De.Pi,this.yf=new mt(Kn.Bn)}return t.prototype.po=function(t){return Yn.resolve(0===this.Jo.length)},t.prototype.bo=function(t,e,n){var r=e.batchId,i=this._f(r,"acknowledged");_(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.Jo[i];return _(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Yn.resolve()},t.prototype._o=function(t){return Yn.resolve(this.lastStreamToken)},t.prototype.Io=function(t,e){return this.lastStreamToken=e,Yn.resolve()},t.prototype.To=function(t,e,n,r){_(0!==r.length,"Mutation batches should not be empty");var i=this.bf;this.bf++,this.Jo.length>0&&_(this.Jo[this.Jo.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Bn(i,e,n,r);this.Jo.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.yf=this.yf.add(new Kn(u.key,i)),this.do.Ro(t,u.key.path.H())}return Yn.resolve(o)},t.prototype.Ao=function(t,e){return Yn.resolve(this.If(e))},t.prototype.Po=function(t,e){var n=this.If(e);return _(null!=n,"Failed to find local mutation batch."),Yn.resolve(n.keys())},t.prototype.So=function(t,e){var n=this.Tf(e+1),r=n<0?0:n;return Yn.resolve(this.Jo.length>r?this.Jo[r]:null)},t.prototype.Co=function(){return Yn.resolve(0===this.Jo.length?-1:this.bf-1)},t.prototype.ko=function(t){return Yn.resolve(this.Jo.slice())},t.prototype.Vo=function(t,e){var n=this,r=new Kn(e,0),i=new Kn(e,Number.POSITIVE_INFINITY),o=[];return this.yf.Lt([r,i],(function(t){_(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.If(t.ys);_(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Yn.resolve(o)},t.prototype.No=function(t,e){var n=this,r=new mt(w);return e.forEach((function(t){var e=new Kn(t,0),i=new Kn(t,Number.POSITIVE_INFINITY);n.yf.Lt([e,i],(function(e){_(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.ys)}))})),Yn.resolve(this.Ef(r))},t.prototype.Fo=function(t,e){_(!e._i(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;dt.ht(i)||(i=i.child(""));var o=new Kn(new dt(i),0),a=new mt(w);return this.yf.Bt((function(t){var e=t.key.path;return!!n.$(e)&&(e.length===r&&(a=a.add(t.ys)),!0)}),o),Yn.resolve(this.Ef(a))},t.prototype.Ef=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.If(t);null!==r&&n.push(r)})),n},t.prototype.Uo=function(t,e){var n=this;_(0===this._f(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.Jo.shift();var r=this.yf;return Yn.forEach(e.mutations,(function(i){var o=new Kn(i.key,e.batchId);return r=r.delete(o),n.vo.Lo(t,i.key)})).next((function(){n.yf=r}))},t.prototype.jo=function(t){},t.prototype.bs=function(t,e){var n=new Kn(e,0),r=this.yf.Mt(n);return Yn.resolve(e.isEqual(r&&r.key))},t.prototype.Bo=function(t){return 0===this.Jo.length&&_(this.yf.J(),"Document leak -- detected dangling mutation references when queue is empty."),Yn.resolve()},t.prototype._f=function(t,e){var n=this.Tf(t);return _(n>=0&&n<this.Jo.length,"Batches must exist to be "+e),n},t.prototype.Tf=function(t){return 0===this.Jo.length?0:t-this.Jo[0].batchId},t.prototype.If=function(t){var e=this.Tf(t);if(e<0||e>=this.Jo.length)return null;var n=this.Jo[e];return _(n.batchId===t,"If found batch must match"),n},t}(),mi=function(){function t(t,e){this.do=t,this.Rf=e,this.docs=new pt(dt.G),this.size=0}return t.prototype.Us=function(t,e,n){_(!n.isEqual(ut.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.Rf(e);return this.docs=this.docs.lt(r,{sa:e,size:a,readTime:n}),this.size+=a-o,this.do.Ro(t,r.path.H())},t.prototype.js=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ls=function(t,e){var n=this.docs.get(e);return Yn.resolve(n?n.sa:null)},t.prototype.getEntries=function(t,e){var n=this,r=We();return e.forEach((function(t){var e=n.docs.get(t);r=r.lt(t,e?e.sa:null)})),Yn.resolve(r)},t.prototype.nh=function(t,e,n){_(!e._i(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Qe(),i=new dt(e.path.child("")),o=this.docs.yt(i);o.At();){var a=o.Rt(),s=a.value,u=s.sa,c=s.readTime;if(!e.path.$(a.key.path))break;c.h(n)<=0||u instanceof oe&&e.matches(u)&&(r=r.lt(u.key,u))}return Yn.resolve(r)},t.prototype.Af=function(t,e){return Yn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.fc=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.dc=function(t){return Yn.resolve(ut.MIN)},t.prototype.Nh=function(e){return new t.va(this)},t.prototype.wa=function(t){return Yn.resolve(this.size)},t.va=function(t){function e(e){var n=t.call(this)||this;return n.ma=e,n}return a.__extends(e,t),e.prototype.qs=function(t){var e=this,n=[];return this.Ns.forEach((function(r,i){i?n.push(e.ma.Us(t,i,e.readTime)):e.ma.js(r)})),Yn.ks(n)},e.prototype.Bs=function(t,e){return this.ma.Ls(t,e)},e.prototype.Ms=function(t,e){return this.ma.getEntries(t,e)},e}(Jn),t}(),_i=function(){function t(t){this.persistence=t,this.Df=new Qn((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=ut.MIN,this.highestTargetId=0,this.Pf=0,this.Sf=new Wn,this.targetCount=0,this.zc=pr.zo()}return t.prototype.Le=function(t,e){return this.Df.forEach((function(t,n){return e(n)})),Yn.resolve()},t.prototype.xh=function(t){return Yn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Jc=function(t){return Yn.resolve(this.Pf)},t.prototype.$h=function(t){var e=this.zc.after(this.highestTargetId);return this.highestTargetId=e,Yn.resolve(e)},t.prototype.Wh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Pf&&(this.Pf=e),Yn.resolve()},t.prototype.Yc=function(t){this.Df.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.Pf&&(this.Pf=t.sequenceNumber)},t.prototype.Zh=function(t,e){return _(!this.Df.has(e.target),"Adding a target that already exists"),this.Yc(e),this.targetCount+=1,Yn.resolve()},t.prototype.Qh=function(t,e){return _(this.Df.has(e.target),"Updating a non-existent target"),this.Yc(e),Yn.resolve()},t.prototype.$c=function(t,e){return _(this.targetCount>0,"Removing a target from an empty cache"),_(this.Df.has(e.target),"Removing a non-existent target from the cache"),this.Df.delete(e.target),this.Sf.ms(e.targetId),this.targetCount-=1,Yn.resolve()},t.prototype.qc=function(t,e,n){var r=this,i=0,o=[];return this.Df.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.Df.delete(a),o.push(r.Zc(t,s.targetId)),i++)})),Yn.ks(o).next((function(){return i}))},t.prototype.ia=function(t){return Yn.resolve(this.targetCount)},t.prototype.Xh=function(t,e){var n=this.Df.get(e)||null;return Yn.resolve(n)},t.prototype.Ye=function(t,e){return m("Not yet implemented.")},t.prototype.Bh=function(t,e,n){this.Sf.ls(e,n);var r=this.persistence.vo,i=[];return r&&e.forEach((function(e){i.push(r.fs(t,e))})),Yn.ks(i)},t.prototype.Lh=function(t,e,n){this.Sf.ws(e,n);var r=this.persistence.vo,i=[];return r&&e.forEach((function(e){i.push(r.ds(t,e))})),Yn.ks(i)},t.prototype.Zc=function(t,e){return this.Sf.ms(e),Yn.resolve()},t.prototype.ic=function(t,e){var n=this.Sf.gs(e);return Yn.resolve(n)},t.prototype.bs=function(t,e){return Yn.resolve(this.Sf.bs(e))},t}(),bi=function(){function t(t,e){var n=this;this.clientId=t,this.Cf={},this.Ga=new Mn(0),this.Pa=!1,this.Pa=!0,this.vo=e(this),this._h=new _i(this),this.do=new Mr,this.Ho=new mi(this.do,(function(t){return n.vo.kf(t)}))}return t.Vf=function(e,n){return new t(e,(function(t){return new ki(t,n)}))},t.Nf=function(e){return new t(e,(function(t){return new Ci(t)}))},t.prototype.shutdown=function(){return this.Pa=!1,Promise.resolve()},Object.defineProperty(t.prototype,"mh",{get:function(){return this.Pa},enumerable:!0,configurable:!0}),t.prototype.uc=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.Wa=function(t){return t(!0)},t.prototype.za=function(){},t.prototype.oc=function(t){},t.prototype.Eh=function(){return this.do},t.prototype.gh=function(t){var e=this.Cf[t.v()];return e||(e=new gi(this.do,this.vo),this.Cf[t.v()]=e),e},t.prototype.Ih=function(){return this._h},t.prototype.yh=function(){return this.Ho},t.prototype.runTransaction=function(t,e,n){var r=this;v("MemoryPersistence","Starting transaction:",t);var i=new wi(this.Ga.next());return this.vo.Of(),n(i).next((function(t){return r.vo.Ff(i).next((function(){return t}))})).Ss().then((function(t){return i.Ws(),t}))},t.prototype.Uf=function(t,e){return Yn.Vs((n=this.Cf,r=[],F(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.bs(t,e)}})));var n,r},t}(),wi=function(t){function e(e){var n=t.call(this)||this;return n.Mh=e,n}return a.__extends(e,t),e}($n),Ci=function(){function t(t){this.persistence=t,this.ff=null,this.xf=null}return Object.defineProperty(t.prototype,"jf",{get:function(){if(this.xf)return this.xf;throw m("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.ph=function(t){this.ff=t},t.prototype.fs=function(t,e){return this.jf.delete(e),Yn.resolve()},t.prototype.ds=function(t,e){return this.jf.add(e),Yn.resolve()},t.prototype.Lo=function(t,e){return this.jf.add(e),Yn.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.Ih();return r.ic(t,e.targetId).next((function(t){t.forEach((function(t){return n.jf.add(t)}))})).next((function(){return r.$c(t,e)}))},t.prototype.Of=function(){this.xf=new Set},t.prototype.Ff=function(t){var e=this,n=this.persistence.yh().Nh();return Yn.forEach(this.jf,(function(r){return e.Lf(t,r).next((function(t){t||n.js(r)}))})).next((function(){return e.xf=null,n.apply(t)}))},t.prototype.Gh=function(t,e){var n=this;return this.Lf(t,e).next((function(t){t?n.jf.delete(e):n.jf.add(e)}))},t.prototype.kf=function(t){return 0},t.prototype.Lf=function(t,e){var n=this;return Yn.Vs([function(){return n.persistence.Ih().bs(t,e)},function(){return n.persistence.Uf(t,e)},function(){return Yn.resolve(n.ff.bs(e))}])},t}(),ki=function(){function t(t,e){this.persistence=t,this.ff=null,this.Bf=new Qn((function(t){return Vn(t.path)})),this.Vc=new Ir(this,e)}return t.prototype.Of=function(){},t.prototype.Ff=function(t){return Yn.resolve()},t.prototype.Le=function(t,e){return this.persistence.Ih().Le(t,e)},t.prototype.Lc=function(t){var e=this.Mf(t);return this.persistence.Ih().ia(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Mf=function(t){var e=0;return this.Mc(t,(function(t){e++})).next((function(){return e}))},t.prototype.Mc=function(t,e){var n=this;return Yn.forEach(this.Bf,(function(r,i){return n.vf(t,r,i).next((function(t){return t?Yn.resolve():e(i)}))}))},t.prototype.ph=function(t){this.ff=t},t.prototype.qc=function(t,e,n){return this.persistence.Ih().qc(t,e,n)},t.prototype.Qc=function(t,e){var n=this,r=0,i=this.persistence.yh(),o=i.Nh();return i.Af(t,(function(i){return n.vf(t,i,e).next((function(t){t||(r++,o.js(i))}))})).next((function(){return o.apply(t)})).next((function(){return r}))},t.prototype.Lo=function(t,e){return this.Bf.set(e,t.Mh),Yn.resolve()},t.prototype.removeTarget=function(t,e){var n=e.Oi(t.Mh);return this.persistence.Ih().Qh(t,n)},t.prototype.fs=function(t,e){return this.Bf.set(e,t.Mh),Yn.resolve()},t.prototype.ds=function(t,e){return this.Bf.set(e,t.Mh),Yn.resolve()},t.prototype.Gh=function(t,e){return this.Bf.set(e,t.Mh),Yn.resolve()},t.prototype.kf=function(t){var e=t.key.toString().length;return t instanceof oe&&(e+=t.data().Nn()),e},t.prototype.vf=function(t,e,n){var r=this;return Yn.Vs([function(){return r.persistence.Uf(t,e)},function(){return Yn.resolve(r.ff.bs(e))},function(){return r.persistence.Ih().bs(t,e)},function(){var t=r.Bf.get(e);return Yn.resolve(void 0!==t&&t>n)}])},t.prototype.Gc=function(t){return this.persistence.yh().wa(t)},t}(),Ei=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Aa=t,this.Su=e,this.qf=n,this.Qf=r,this.Gf=i,this.Wf=0,this.zf=null,this.Kf=Date.now(),this.reset()}return t.prototype.reset=function(){this.Wf=0},t.prototype.Hf=function(){this.Wf=this.Gf},t.prototype.Jf=function(t){var e=this;this.cancel();var n=Math.floor(this.Wf+this.Yf()),r=Math.max(0,Date.now()-this.Kf),i=Math.max(0,n-r);this.Wf>0&&v("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Wf+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zf=this.Aa.Yu(this.Su,i,(function(){return e.Kf=Date.now(),t()})),this.Wf*=this.Qf,this.Wf<this.qf&&(this.Wf=this.qf),this.Wf>this.Gf&&(this.Wf=this.Gf)},t.prototype.cancel=function(){null!==this.zf&&(this.zf.cancel(),this.zf=null)},t.prototype.Yf=function(){return(Math.random()-.5)*this.Wf},t}();(vi=pi||(pi={}))[vi.Xf=0]="__PRIVATE_Initial",vi[vi.$f=1]="__PRIVATE_Starting",vi[vi.Zf=2]="__PRIVATE_Open",vi[vi.Error=3]="Error",vi[vi.tl=4]="__PRIVATE_Backoff";var Ii,Ti,Si=function(){function t(t,e,n,r,i,o){this.Aa=t,this.nl=n,this.connection=r,this.il=i,this.listener=o,this.state=pi.Xf,this.el=0,this.rl=null,this.stream=null,this.ul=new Ei(t,e)}return t.prototype.sl=function(){return this.state===pi.$f||this.state===pi.Zf||this.state===pi.tl},t.prototype.ol=function(){return this.state===pi.Zf},t.prototype.start=function(){this.state!==pi.Error?(_(this.state===pi.Xf,"Already started"),this.auth()):this.hl()},t.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.sl()?[4,this.close(pi.Xf)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.cl=function(){_(!this.sl(),"Can only inhibit backoff in a stopped state"),this.state=pi.Xf,this.ul.reset()},t.prototype.al=function(){var t=this;this.ol()&&null===this.rl&&(this.rl=this.Aa.Yu(this.nl,6e4,(function(){return t.fl()})))},t.prototype.ll=function(t){this.dl(),this.stream.send(t)},t.prototype.fl=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.ol()?[2,this.close(pi.Xf)]:[2]}))}))},t.prototype.dl=function(){this.rl&&(this.rl.cancel(),this.rl=null)},t.prototype.close=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return _(this.sl(),"Only started streams should be closed."),_(t===pi.Error||fe(e),"Can't provide an error when not in an error state."),this.dl(),this.ul.cancel(),this.el++,t!==pi.Error?this.ul.reset():e&&e.code===A.RESOURCE_EXHAUSTED?(y(e.toString()),y("Using maximum backoff delay to prevent overloading the backend."),this.ul.Hf()):e&&e.code===A.UNAUTHENTICATED&&this.il.I(),null!==this.stream&&(this.vl(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.wl(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.vl=function(){},t.prototype.auth=function(){var t=this;_(this.state===pi.Xf,"Must be in initial state to auth"),this.state=pi.$f;var e=this.ml(this.el),n=this.el;this.il.getToken().then((function(e){t.el===n&&t.pl(e)}),(function(n){e((function(){var e=new N(A.UNKNOWN,"Fetching auth token failed: "+n.message);return t.gl(e)}))}))},t.prototype.pl=function(t){var e=this;_(this.state===pi.$f,"Trying to start stream in a non-starting state");var n=this.ml(this.el);this.stream=this.bl(t),this.stream.yl((function(){n((function(){return _(e.state===pi.$f,"Expected stream to be in state Starting, but was "+e.state),e.state=pi.Zf,e.listener.yl()}))})),this.stream.wl((function(t){n((function(){return e.gl(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.hl=function(){var t=this;_(this.state===pi.Error,"Should only perform backoff when in Error state"),this.state=pi.tl,this.ul.Jf((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return _(this.state===pi.tl,"Backoff elapsed but state is now: "+this.state),this.state=pi.Xf,this.start(),_(this.sl(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.gl=function(t){return _(this.sl(),"Can't handle server close on non-started stream"),v("PersistentStream","close with error: "+t),this.stream=null,this.close(pi.Error,t)},t.prototype.ml=function(t){var e=this;return function(n){e.Aa.xu((function(){return e.el===t?n():(v("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ai=function(t){function e(e,n,r,i,o){var a=t.call(this,e,xn._u,xn.yu,n,r,o)||this;return a.serializer=i,a}return a.__extends(e,t),e.prototype.bl=function(t){return this.connection._l("Listen",t)},e.prototype.onMessage=function(t){this.ul.reset();var e=this.serializer.Cr(t),n=this.serializer.Vr(t);return this.listener.Il(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.wr,e.addTarget=this.serializer.li(t);var n=this.serializer.Zr(t);n&&(e.labels=n),this.ll(e)},e.prototype.Tl=function(t){var e={};e.database=this.serializer.wr,e.removeTarget=t,this.ll(e)},e}(Si),Ni=function(t){function e(e,n,r,i,o){var a=t.call(this,e,xn.Tu,xn.Iu,n,r,o)||this;return a.serializer=i,a.El=!1,a.lastStreamToken=De.Pi,a}return a.__extends(e,t),Object.defineProperty(e.prototype,"Rl",{get:function(){return this.El},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.El=!1,t.prototype.start.call(this)},e.prototype.vl=function(){this.El&&this.Al([])},e.prototype.bl=function(t){return this.connection._l("Write",t)},e.prototype.onMessage=function(t){if(_(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.er(t.streamToken),this.El){this.ul.reset();var e=this.serializer.qr(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Dl(n,e)}return _(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.El=!0,this.listener.Pl()},e.prototype.Sl=function(){_(this.ol(),"Writing handshake requires an opened stream"),_(!this.El,"Handshake already completed");var t={};t.database=this.serializer.wr,this.ll(t)},e.prototype.Al=function(t){var e=this;_(this.ol(),"Writing mutations requires an opened stream"),_(this.El,"Handshake must be complete before writing mutations"),_(this.lastStreamToken.Nn()>0,"Trying to write mutation without a token");var n={streamToken:this.serializer.ir(this.lastStreamToken),writes:t.map((function(t){return e.serializer.Nr(t)}))};this.ll(n)},e}(Si),Oi=function(){function t(t,e,n,r){this.Aa=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.Cl=function(t){return new Ni(this.Aa,this.connection,this.credentials,this.serializer,t)},t.prototype.kl=function(t){return new Ai(this.Aa,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.wr,writes:t.map((function(t){return e.serializer.Nr(t)}))};return this.Vl("Commit",n).then((function(t){return e.serializer.qr(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.wr,documents:t.map((function(t){return e.serializer.cr(t)}))};return this.Nl("BatchGetDocuments",n).then((function(n){var r=Ge();n.forEach((function(t){var n=e.serializer.Dr(t);r=r.lt(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);_(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},t.prototype.Vl=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.Vl(t,e,r)})).catch((function(t){throw t.code===A.UNAUTHENTICATED&&n.credentials.I(),t}))},t.prototype.Nl=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.Nl(t,e,r)})).catch((function(t){throw t.code===A.UNAUTHENTICATED&&n.credentials.I(),t}))},t}(),Ri=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new N(A.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+ot(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(G("FieldPath","string",n,t[n]),0===t[n].length)throw new N(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Ol=new ft(t)}return t.documentId=function(){return t.Fl},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","FieldPath",1,e);return this.Ol.isEqual(e.Ol)},t.Fl=new t(ft.st().nt()),t}(),xi=new RegExp("[~\\*/\\[\\]]"),Pi=function(){function t(t){this.Ul=t}return t.delete=function(){return q("FieldValue.delete",arguments),Di.instance},t.serverTimestamp=function(){return q("FieldValue.serverTimestamp",arguments),Li.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return z("FieldValue.arrayUnion",arguments,1),new Mi(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return z("FieldValue.arrayRemove",arguments,1),new ji(t)},t.increment=function(t){return G("FieldValue.increment","number",1,t),H("FieldValue.increment",arguments,1),new Ui(t)},t.prototype.isEqual=function(t){return this===t},t}(),Di=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return a.__extends(e,t),e.instance=new e,e}(Pi),Li=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(e,t),e.instance=new e,e}(Pi),Mi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n.xl=e,n}return a.__extends(e,t),e}(Pi),ji=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n.xl=e,n}return a.__extends(e,t),e}(Pi),Ui=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n.jl=e,n}return a.__extends(e,t),e}(Pi),Fi=Nn(Pi,"Use FieldValue.<field>() instead."),Vi=/^__.*__$/,qi=function(){function t(t,e,n){this.data=t,this.on=e,this.fieldTransforms=n}return t.prototype.Ll=function(t,e){var n=[];return n.push(null!==this.on?new jt(t,this.data,this.on,e):new Mt(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Ut(t,this.fieldTransforms)),n},t}(),Hi=function(){function t(t,e,n){this.data=t,this.on=e,this.fieldTransforms=n}return t.prototype.Ll=function(t,e){var n=[new jt(t,this.data,this.on,e)];return this.fieldTransforms.length>0&&n.push(new Ut(t,this.fieldTransforms)),n},t}();function zi(t){switch(t){case Ii.Set:case Ii.Bl:case Ii.Ml:return!0;case Ii.ql:case Ii.Ql:return!1;default:throw m("Unexpected case for UserDataSource: "+t)}}(Ti=Ii||(Ii={}))[Ti.Set=0]="Set",Ti[Ti.Ml=1]="__PRIVATE_Update",Ti[Ti.Bl=2]="__PRIVATE_MergeSet",Ti[Ti.ql=3]="__PRIVATE_Argument",Ti[Ti.Ql=4]="__PRIVATE_ArrayArgument";var Bi=function(){function t(t,e,n,r,i,o){this.Gl=t,this.methodName=e,this.path=n,this.Wl=r,void 0===i&&this.zl(),this.Wl=void 0!==r&&r,this.fieldTransforms=i||[],this.on=o||[]}return t.prototype.Kl=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.Gl,this.methodName,n,!1,this.fieldTransforms,this.on);return r.Hl(e),r},t.prototype.Jl=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.Gl,this.methodName,n,!1,this.fieldTransforms,this.on);return r.zl(),r},t.prototype.Yl=function(e){return new t(this.Gl,this.methodName,null,!0,this.fieldTransforms,this.on)},t.prototype.Xl=function(t){var e=null===this.path||this.path.J()?"":" (found in field "+this.path.toString()+")";return new N(A.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.on.find((function(e){return t.$(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.$(e.field)}))},t.prototype.zl=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Hl(this.path.get(t))},t.prototype.Hl=function(t){if(0===t.length)throw this.Xl("Document fields must not be empty");if(zi(this.Gl)&&Vi.test(t))throw this.Xl('Document fields cannot begin and end with "__"')},t}(),Gi=function(t,e){this.s=t,this.key=e},Wi=function(){function t(t){this.$l=t}return t.prototype.Zl=function(t,e){var n=new Bi(Ii.Set,t,ft.et);Qi("Data must be an object, but it was:",n,e);var r=this.td(e,n);return new qi(r,null,n.fieldTransforms)},t.prototype.nd=function(t,e,n){var r=new Bi(Ii.Bl,t,ft.et);Qi("Data must be an object, but it was:",r,e);var i,o,a=this.td(e,r);if(n){for(var s=new mt(ft.G),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Ri)h=l.Ol;else{if("string"!=typeof l)throw m("Expected stringOrFieldPath to be a string or a FieldPath");h=Ji(t,l)}if(!r.contains(h))throw new N(A.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=St.Jt(s),o=r.fieldTransforms.filter((function(t){return i.Xt(t.field)}))}else i=St.Yt(r.on),o=r.fieldTransforms;return new qi(a,i,o)},t.prototype.ed=function(t,e){var n=this,r=new Bi(Ii.Ml,t,ft.et);Qi("Data must be an object, but it was:",r,e);var i=new mt(ft.G),o=ee.mn();F(e,(function(e,a){var s=Ji(t,e),u=r.Jl(s);if((a=n.rd(a,u))instanceof Di)i=i.add(s);else{var c=n.td(a,u);null!=c&&(i=i.add(s),o.set(s,c))}}));var a=St.Jt(i);return new Hi(o.fn(),a,r.fieldTransforms)},t.prototype.ud=function(t,e,n,r){var i=new Bi(Ii.Ml,t,ft.et),o=[Yi(t,e)],a=[n];if(r.length%2!=0)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Yi(t,r[s])),a.push(r[s+1]);var u=new mt(ft.G),c=ee.mn();for(s=0;s<o.length;++s){var l=o[s],h=i.Jl(l),f=this.rd(a[s],h);if(f instanceof Di)u=u.add(l);else{var d=this.td(f,h);null!=d&&(u=u.add(l),c.set(l,d))}}var p=St.Jt(u);return new Hi(c.fn(),p,i.fieldTransforms)},t.prototype.sd=function(t,e,n){void 0===n&&(n=!1);var r=new Bi(n?Ii.Ql:Ii.ql,t,ft.et),i=this.td(e,r);return _(null!=i,"Parsed data should not be null."),_(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},t.prototype.rd=function(t,e){try{return this.$l(t)}catch(t){var n=Xi(t);throw e.Xl(n)}},t.prototype.td=function(t,e){if(Ki(t=this.rd(t,e)))return Qi("Unsupported field value:",e,t),this.od(t,e);if(t instanceof Pi)return this.hd(t,e),null;if(e.path&&e.on.push(e.path),t instanceof Array){if(e.Wl&&e.Gl!==Ii.Ql)throw e.Xl("Nested arrays are not supported");return this.ad(t,e)}return this.fd(t,e)},t.prototype.od=function(t,e){var n=this,r=new pt(w);return V(t)?e.path&&e.path.length>0&&e.on.push(e.path):F(t,(function(t,i){var o=n.td(i,e.Kl(t));null!=o&&(r=r.lt(t,o))})),new ee(r)},t.prototype.ad=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=this.td(o[i],e.Yl(r));null==a&&(a=zt.On),n.push(a),r++}return new re(n)},t.prototype.hd=function(t,e){if(!zi(e.Gl))throw e.Xl(t.Ul+"() can only be used with update() and set()");if(null===e.path)throw e.Xl(t.Ul+"() is not currently supported inside arrays");if(t instanceof Di){if(e.Gl!==Ii.Bl)throw e.Gl===Ii.Ml?(_(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.Xl("FieldValue.delete() can only appear at the top level of your update data")):e.Xl("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.on.push(e.path)}else if(t instanceof Li)e.fieldTransforms.push(new At(e.path,bt.instance));else if(t instanceof Mi){var n=this.ld(t.Ul,t.xl),r=new wt(n);e.fieldTransforms.push(new At(e.path,r))}else if(t instanceof ji){n=this.ld(t.Ul,t.xl);var i=new Ct(n);e.fieldTransforms.push(new At(e.path,i))}else if(t instanceof Ui){var o=this.sd("FieldValue.increment",t.jl),a=new kt(o);e.fieldTransforms.push(new At(e.path,a))}else m("Unknown FieldValue type: "+t)},t.prototype.fd=function(t,e){if(null===t)return zt.On;if("number"==typeof t)return de(t)?new Kt(t):new Qt(t);if("boolean"==typeof t)return Bt.of(t);if("string"==typeof t)return new Yt(t);if(t instanceof Date)return new Jt(st.fromDate(t));if(t instanceof st)return new Jt(new st(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof at)return new te(t);if(t instanceof Dn)return new $t(t);if(t instanceof Gi)return new Zt(t.s,t.key);throw e.Xl("Unsupported field value: "+Z(t))},t.prototype.ld=function(t,e){var n=this;return e.map((function(e,r){var i=new Bi(Ii.ql,t,ft.et);return n.td(e,i.Yl(r))}))},t}();function Ki(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof st||t instanceof at||t instanceof Dn||t instanceof Gi||t instanceof Pi)}function Qi(t,e,n){if(!Ki(n)||!$(n)){var r=Z(n);throw e.Xl("an object"===r?t+" a custom object":t+" "+r)}}function Yi(t,e){if(e instanceof Ri)return e.Ol;if("string"==typeof e)return Ji(t,e);throw new N(A.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ji(t,e){try{return function(t){if(t.search(xi)>=0)throw new N(A.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ri.bind.apply(Ri,a.__spreadArrays([void 0],t.split("."))))}catch(e){throw new N(A.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Ol}catch(r){var n=Xi(r);throw new N(A.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Xi(t){return t instanceof Error?t.message:t.toString()}var $i=function(){function t(t){this.dd=t,this.vd=Je(),this.mutations=[],this.wd=!1,this.md=null,this.pd=new Set}return t.prototype.lookup=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:if(this.gd(),this.mutations.length>0)throw new N(A.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.dd.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof ae||t instanceof oe?n.bd(t):m("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.Ll(t,this.rn(t))),this.pd.add(t)},t.prototype.update=function(t,e){try{this.write(e.Ll(t,this.yd(t)))}catch(t){this.md=t}this.pd.add(t)},t.prototype.delete=function(t){this.write([new Ft(t,this.rn(t))]),this.pd.add(t)},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e=this;return a.__generator(this,(function(n){switch(n.label){case 0:if(this.gd(),this.md)throw this.md;return t=this.vd,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Vt(t,e.rn(t)))})),[4,this.dd.commit(this.mutations)];case 1:return n.sent(),this.wd=!0,[2]}}))}))},t.prototype.bd=function(t){var e;if(t instanceof oe)e=t.version;else{if(!(t instanceof ae))throw m("Document in a transaction was a "+t.constructor.name);e=ut.B()}var n=this.vd.get(t.key);if(null!==n){if(!e.isEqual(n))throw new N(A.ABORTED,"Document version changed between two reads.")}else this.vd=this.vd.lt(t.key,e)},t.prototype.rn=function(t){var e=this.vd.get(t);return!this.pd.has(t)&&e?Dt.updateTime(e):Dt.NONE},t.prototype.yd=function(t){var e=this.vd.get(t);if(!this.pd.has(t)&&e){if(e.isEqual(ut.B()))throw new N(A.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dt.updateTime(e)}return Dt.exists(!0)},t.prototype.write=function(t){this.gd(),this.mutations=this.mutations.concat(t)},t.prototype.gd=function(){_(!this.wd,"A transaction object cannot be used after its update callback has been invoked.")},t}(),Zi=function(){function t(t,e){this.Pu=t,this._d=e,this.state="Unknown",this.Id=0,this.Td=null,this.Ed=!0}return t.prototype.Rd=function(){var t=this;0===this.Id&&(this.Ad("Unknown"),_(null===this.Td,"onlineStateTimer shouldn't be started yet"),this.Td=this.Pu.Yu(xn.Eu,1e4,(function(){return t.Td=null,_("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Dd("Backend didn't respond within 10 seconds."),t.Ad("Offline"),Promise.resolve()})))},t.prototype.Pd=function(t){"Online"===this.state?(this.Ad("Unknown"),_(0===this.Id,"watchStreamFailures must be 0"),_(null===this.Td,"onlineStateTimer must be null")):(this.Id++,this.Id>=1&&(this.Sd(),this.Dd("Connection failed 1 times. Most recent error: "+t.toString()),this.Ad("Offline")))},t.prototype.set=function(t){this.Sd(),this.Id=0,"Online"===t&&(this.Ed=!1),this.Ad(t)},t.prototype.Ad=function(t){t!==this.state&&(this.state=t,this._d(t))},t.prototype.Dd=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ed?(y(e),this.Ed=!1):v("OnlineStateTracker",e)},t.prototype.Sd=function(){null!==this.Td&&(this.Td.cancel(),this.Td=null)},t}(),to="RemoteStore",eo=function(){function t(t,e,n,r,i){var o=this;this.Nc=t,this.dd=e,this.Cd=[],this.kd={},this.Vd=null,this.networkEnabled=!1,this.isPrimary=!1,this.Nd=i,this.Nd.Od((function(t){n.xu((function(){return a.__awaiter(o,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.Fd()?(v(to,"Restarting streams for network reachability change."),[4,this.Ud()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.xd=new Zi(n,r),this.jd=this.dd.kl({yl:this.Ld.bind(this),wl:this.Bd.bind(this),Il:this.Md.bind(this)}),this.qd=this.dd.Cl({yl:this.Qd.bind(this),wl:this.Gd.bind(this),Pl:this.Wd.bind(this),Dl:this.Dl.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){var t;return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.Fd()?(t=this.qd,[4,this.Nc._o()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.zd()?this.Kd():this.xd.set("Unknown"),[4,this.Hd()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.Jd()];case 1:return t.sent(),this.xd.set("Offline"),[2]}}))}))},t.prototype.Jd=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.qd.stop()];case 1:return t.sent(),[4,this.jd.stop()];case 2:return t.sent(),this.Cd.length>0&&(v(to,"Stopping write stream with "+this.Cd.length+" pending writes"),this.Cd=[]),this.Yd(),[2]}}))}))},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return v(to,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.Jd()];case 1:return t.sent(),this.Nd.shutdown(),this.xd.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){M(this.kd,t.targetId)||(this.kd[t.targetId]=t,this.zd()?this.Kd():this.jd.ol()&&this.Xd(t))},t.prototype.$d=function(t){_(M(this.kd,t),"unlisten called on target no currently watched: "+t),delete this.kd[t],this.jd.ol()&&this.Zd(t),V(this.kd)&&(this.jd.ol()?this.jd.al():this.Fd()&&this.xd.set("Unknown"))},t.prototype.Ye=function(t){return this.kd[t]||null},t.prototype.Je=function(t){return this.tv.Je(t)},t.prototype.Xd=function(t){this.Vd.De(t.targetId),this.jd.watch(t)},t.prototype.Zd=function(t){this.Vd.De(t),this.jd.Tl(t)},t.prototype.Kd=function(){_(this.zd(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Vd=new gn(this),this.jd.start(),this.xd.Rd()},t.prototype.zd=function(){return this.Fd()&&!this.jd.sl()&&!V(this.kd)},t.prototype.Fd=function(){return this.isPrimary&&this.networkEnabled},t.prototype.Yd=function(){this.Vd=null},t.prototype.Ld=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(e){return U(this.kd,(function(e,n){t.Xd(n)})),[2]}))}))},t.prototype.Bd=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return void 0===t&&_(!this.zd(),"Watch stream was stopped gracefully while still needed."),this.Yd(),this.zd()?(this.xd.Pd(t),this.Kd()):this.xd.set("Unknown"),[2]}))}))},t.prototype.Md=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.xd.set("Online"),t instanceof vn&&t.state===sn.Mi&&t.cause?[2,this.nv(t)]:(t instanceof dn?this.Vd.Fe(t):t instanceof pn?this.Vd.Qe(t):(_(t instanceof vn,"Expected watchChange to be an instance of WatchTargetChange"),this.Vd.je(t)),e.isEqual(ut.MIN)?[3,3]:[4,this.Nc.xh()]);case 1:return n=r.sent(),e.h(n)>=0?[4,this.iv(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.iv=function(t){var e=this;_(!t.isEqual(ut.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.Vd.ze(t);return U(n.Zi,(function(n,r){if(r.resumeToken.Nn()>0){var i=e.kd[n];i&&(e.kd[n]=i.Fi(r.resumeToken,t))}})),n.te.forEach((function(t){var n=e.kd[t];if(n){e.kd[t]=n.Fi(De.Pi,n.Ni),e.Zd(t);var r=new Fe(n.target,t,xe.Ci,n.sequenceNumber);e.Xd(r)}})),this.tv.jh(n)},t.prototype.nv=function(t){var e=this;_(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return M(this.kd,t)?(delete this.kd[t],this.Vd.removeTarget(t),[2,this.tv.ev(t,n)]):[2]}))}))}))})),r},t.prototype.Hd=function(){return a.__awaiter(this,void 0,void 0,(function(){var t;return a.__generator(this,(function(e){switch(e.label){case 0:return this.rv()?[4,this.Nc.Hh(this.Cd.length>0?this.Cd[this.Cd.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.Cd.length&&this.qd.al(),[3,4]);case 2:return this.uv(t),[4,this.Hd()];case 3:e.sent(),e.label=4;case 4:return this.sv()&&this.ov(),[2]}}))}))},t.prototype.rv=function(){return this.Fd()&&this.Cd.length<10},t.prototype.hv=function(){return this.Cd.length},t.prototype.uv=function(t){_(this.rv(),"addToWritePipeline called when pipeline is full"),this.Cd.push(t),this.qd.ol()&&this.qd.Rl&&this.qd.Al(t.mutations)},t.prototype.sv=function(){return this.Fd()&&!this.qd.sl()&&this.Cd.length>0},t.prototype.ov=function(){_(this.sv(),"startWriteStream() called when shouldStartWriteStream() is false."),this.qd.start()},t.prototype.Qd=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.qd.Sl(),[2]}))}))},t.prototype.Wd=function(){var t=this;return this.Nc.Io(this.qd.lastStreamToken).then((function(){for(var e=0,n=t.Cd;e<n.length;e++)t.qd.Al(n[e].mutations)})).catch(_r)},t.prototype.Dl=function(t,e){var n=this;_(this.Cd.length>0,"Got result for empty write pipeline");var r=this.Cd.shift(),i=Gn.from(r,t,e,this.qd.lastStreamToken);return this.tv.cv(i).then((function(){return n.Hd()}))},t.prototype.Gd=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(n){return void 0===t&&_(!this.sv(),"Write stream was stopped gracefully while still needed."),t&&this.Cd.length>0?[2,(this.qd.Rl?this.av(t):this.fv(t)).then((function(){e.sv()&&e.ov()}))]:[2]}))}))},t.prototype.fv=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return qe(t.code)?(v(to,"RemoteStore error before completed handshake; resetting stream token: ",this.qd.lastStreamToken),this.qd.lastStreamToken=De.Pi,[2,this.Nc.Io(De.Pi).catch(_r)]):[2]}))}))},t.prototype.av=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){return qe(i=t.code)&&i!==A.ABORTED?(e=this.Cd.shift(),this.qd.cl(),[2,this.tv.lv(e.batchId,t).then((function(){return n.Hd()}))]):[2];var i}))}))},t.prototype.dv=function(){return new $i(this.dd)},t.prototype.Ud=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.Jd()];case 1:return t.sent(),this.xd.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.vv=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.Fd()?(v(to,"RemoteStore restarting streams for new credential"),[4,this.Ud()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.wv=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.Jd()];case 3:e.sent(),this.xd.set("Unknown"),e.label=4;case 4:return[2]}}))}))},t}(),no="firestore_clients";function ro(t,e){return _(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),no+"_"+t+"_"+e}var io="firestore_mutations";function oo(t,e,n){var r=io+"_"+t+"_"+n;return e.l()&&(r+="_"+e.uid),r}var ao="firestore_targets";function so(t,e){return ao+"_"+t+"_"+e}var uo="SharedClientState",co=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,_(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.mv=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new N(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(y(uo,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.pv=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),lo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,_(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.mv=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new N(r.error.code,r.error.message)),i?new t(e,r.state,o):(y(uo,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.pv=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ho=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.mv=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=tn(),a=0;i&&a<r.activeTargetIds.length;++a)i=de(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(y(uo,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),fo=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.mv=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(y(uo,"Failed to parse online state: "+e),null)},t}(),po=function(){function t(){this.activeTargetIds=tn()}return t.prototype.gv=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.bv=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.pv=function(){var t={activeTargetIds:this.activeTargetIds.tt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),vo=function(){function t(e,n,r,i,o){if(this.Aa=e,this.platform=n,this.persistenceKey=r,this.yv=i,this.tv=null,this._d=null,this.vu=null,this._v={},this.Iv=this.Tv.bind(this),this.mh=!1,this.Ev=[],!t.Hs(this.platform))throw new N(A.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.Rv=ro(this.persistenceKey,this.yv),this.Av=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this._v[this.yv]=new po,this.Dv=new RegExp("^"+no+"_"+a+"_([^_]*)$"),this.Pv=new RegExp("^"+io+"_"+a+"_(\\d+)(?:_(.*))?$"),this.Sv=new RegExp("^"+ao+"_"+a+"_(\\d+)$"),this.Cv=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Iv)}return t.Hs=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,c,l,h=this;return a.__generator(this,(function(a){switch(a.label){case 0:return _(!this.mh,"WebStorageSharedClientState already started"),_(null!==this.tv,"syncEngine property must be set before calling start()"),_(null!==this._d,"onlineStateHandler property must be set before calling start()"),[4,this.tv.uc()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.yv&&(i=this.getItem(ro(this.persistenceKey,r)))&&(o=ho.mv(r,i))&&(this._v[o.clientId]=o);for(this.kv(),(s=this.storage.getItem(this.Cv))&&(u=this.Vv(s))&&this.Nv(u),c=0,l=this.Ev;c<l.length;c++)this.Tv(l[c]);return this.Ev=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.mh=!0,[2]}}))}))},t.prototype.pu=function(t){this.setItem(this.Av,JSON.stringify(t))},t.prototype.Ov=function(){var t=tn();return F(this._v,(function(e,n){t=t.qt(n.activeTargetIds)})),t},t.prototype.Fv=function(t){for(var e in this._v)if(this._v.hasOwnProperty(e)&&this._v[e].activeTargetIds.has(t))return!0;return!1},t.prototype.Uv=function(t){this.xv(t,"pending")},t.prototype.jv=function(t,e,n){this.xv(t,e,n),this.Lv(t)},t.prototype.Bv=function(t){var e="not-current";if(this.Fv(t)){var n=this.storage.getItem(so(this.persistenceKey,t));if(n){var r=lo.mv(t,n);r&&(e=r.state)}}return this.Mv.gv(t),this.kv(),e},t.prototype.qv=function(t){this.Mv.bv(t),this.kv()},t.prototype.Qv=function(t){return this.Mv.activeTargetIds.has(t)},t.prototype.Gv=function(t){this.removeItem(so(this.persistenceKey,t))},t.prototype.Wv=function(t,e,n){this.zv(t,e,n)},t.prototype.Dh=function(t,e,n){var r=this;e.forEach((function(t){r.Lv(t)})),this.currentUser=t,n.forEach((function(t){r.Uv(t)}))},t.prototype.Kv=function(t){this.Hv(t)},t.prototype.shutdown=function(){this.mh&&(this.platform.window.removeEventListener("storage",this.Iv),this.removeItem(this.Rv),this.mh=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return v(uo,"READ",t,e),e},t.prototype.setItem=function(t,e){v(uo,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){v(uo,"REMOVE",t),this.storage.removeItem(t)},t.prototype.Tv=function(t){var e=this;if(t.storageArea===this.storage){if(v(uo,"EVENT",t.key,t.newValue),t.key===this.Rv)return void y("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Aa.xu((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,n,r,i,o,s;return a.__generator(this,(function(a){if(!this.mh)return this.Ev.push(t),[2];if(null===t.key)return[2];if(this.Dv.test(t.key)){if(null==t.newValue)return n=this.Jv(t.key),[2,this.Yv(n,null)];if(e=this.Xv(t.key,t.newValue))return[2,this.Yv(e.clientId,e)]}else if(this.Pv.test(t.key)){if(null!==t.newValue&&(r=this.$v(t.key,t.newValue)))return[2,this.Zv(r)]}else if(this.Sv.test(t.key)){if(null!==t.newValue&&(i=this.tw(t.key,t.newValue)))return[2,this.nw(i)]}else if(t.key===this.Cv){if(null!==t.newValue&&(o=this.Vv(t.newValue)))return[2,this.Nv(o)]}else t.key===this.Av&&(_(!!this.vu,"Missing sequenceNumberHandler"),(s=function(t){var e=Mn.gu;if(null!=t)try{var n=JSON.parse(t);_("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){y(uo,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==Mn.gu&&this.vu(s));return[2]}))}))}))}},Object.defineProperty(t.prototype,"Mv",{get:function(){return this._v[this.yv]},enumerable:!0,configurable:!0}),t.prototype.kv=function(){this.setItem(this.Rv,this.Mv.pv())},t.prototype.xv=function(t,e,n){var r=new co(this.currentUser,t,e,n),i=oo(this.persistenceKey,this.currentUser,t);this.setItem(i,r.pv())},t.prototype.Lv=function(t){var e=oo(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Hv=function(t){this.storage.setItem(this.Cv,JSON.stringify({clientId:this.yv,onlineState:t}))},t.prototype.zv=function(t,e,n){var r=so(this.persistenceKey,t),i=new lo(t,e,n);this.setItem(r,i.pv())},t.prototype.Jv=function(t){var e=this.Dv.exec(t);return e?e[1]:null},t.prototype.Xv=function(t,e){var n=this.Jv(t);return _(null!==n,"Cannot parse client state key '"+t+"'"),ho.mv(n,e)},t.prototype.$v=function(t,e){var n=this.Pv.exec(t);_(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return co.mv(new S(void 0!==n[2]?n[2]:null),r,e)},t.prototype.tw=function(t,e){var n=this.Sv.exec(t);_(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return lo.mv(r,e)},t.prototype.Vv=function(t){return fo.mv(t)},t.prototype.Zv=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(v(uo,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.tv.iw(t.batchId,t.state,t.error)]}))}))},t.prototype.nw=function(t){return this.tv.ew(t.targetId,t.state,t.error)},t.prototype.Yv=function(t,e){var n=this,r=this.Ov();e?this._v[t]=e:delete this._v[t];var i=this.Ov(),o=[],s=[];return i.forEach((function(t){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(e){return r.has(t)||o.push(t),[2]}))}))})),r.forEach((function(t){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(e){return i.has(t)||s.push(t),[2]}))}))})),this.tv.rw(o,s)},t.prototype.Nv=function(t){this._v[t.clientId]&&this._d(t.onlineState)},t}(),yo=function(){function t(){this.uw=new po,this.sw={},this.tv=null,this._d=null,this.vu=null}return t.prototype.Uv=function(t){},t.prototype.jv=function(t,e,n){},t.prototype.Bv=function(t){return this.uw.gv(t),this.sw[t]||"not-current"},t.prototype.Wv=function(t,e,n){this.sw[t]=e},t.prototype.qv=function(t){this.uw.bv(t)},t.prototype.Qv=function(t){return this.uw.activeTargetIds.has(t)},t.prototype.Gv=function(t){delete this.sw[t]},t.prototype.Ov=function(){return this.uw.activeTargetIds},t.prototype.Fv=function(t){return this.uw.activeTargetIds.has(t)},t.prototype.start=function(){return this.uw=new po,Promise.resolve()},t.prototype.Dh=function(t,e,n){},t.prototype.Kv=function(t){},t.prototype.shutdown=function(){},t.prototype.pu=function(t){},t}(),go=function(t){this.key=t},mo=function(t){this.key=t},_o=function(){function t(t,e){this.query=t,this.ow=e,this.hw=null,this.ue=!1,this.cw=$e(),this.Ji=$e(),this.aw=new an(t.di.bind(t))}return Object.defineProperty(t.prototype,"fw",{get:function(){return this.ow},enumerable:!0,configurable:!0}),t.prototype.lw=function(t,e){var n=this,r=e?e.dw:new cn,i=e?e.aw:this.aw,o=e?e.Ji:this.Ji,a=i,s=!1,u=this.query.gi()&&i.size===this.query.limit?i.last():null,c=this.query.bi()&&i.size===this.query.limit?i.first():null;if(t.pt((function(t,e){var l=i.get(t),h=e instanceof oe?e:null;h&&(_(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.Ji.has(l.key),d=!!h&&(h.un||n.Ji.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:en.Qi,doc:h}),p=!0):n.vw(l,h)||(r.track({type:en.qi,doc:h}),p=!0,(u&&n.query.di(h,u)>0||c&&n.query.di(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:en.Bi,doc:h}),p=!0):l&&!h&&(r.track({type:en.Mi,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.gi()||this.query.bi())for(;a.size>this.query.limit;){var l=this.query.gi()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:en.Mi,doc:l})}return _(!s||!e,"View was refilled using docs that themselves needed refilling."),{aw:a,dw:r,gf:s,Ji:o}},t.prototype.vw=function(t,e){return t.un&&e.hasCommittedMutations&&!e.un},t.prototype.qs=function(t,e,n){var r=this;_(!t.gf,"Cannot apply changes that need a refill");var i=this.aw;this.aw=t.aw,this.Ji=t.Ji;var o=t.dw.Ki();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case en.Bi:return 1;case en.qi:case en.Qi:return 2;case en.Mi:return 0;default:return m("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.di(t.doc,e.doc)})),this.ww(n);var a=e?this.mw():[],s=0===this.cw.size&&this.ue?rn.Wi:rn.Gi,u=s!==this.hw;return this.hw=s,0!==o.length||u?{snapshot:new ln(this.query,t.aw,i,o,t.Ji,s===rn.Gi,u,!1),pw:a}:{pw:a}},t.prototype.gw=function(t){return this.ue&&"Offline"===t?(this.ue=!1,this.qs({aw:this.aw,dw:new cn,Ji:this.Ji,gf:!1},!1)):{pw:[]}},t.prototype.bw=function(t){return!this.ow.has(t)&&!!this.aw.has(t)&&!this.aw.get(t).un},t.prototype.ww=function(t){var e=this;t&&(t.se.forEach((function(t){return e.ow=e.ow.add(t)})),t.oe.forEach((function(t){return _(e.ow.has(t),"Modified document "+t+" not found in view.")})),t.he.forEach((function(t){return e.ow=e.ow.delete(t)})),this.ue=t.ue)},t.prototype.mw=function(){var t=this;if(!this.ue)return[];var e=this.cw;this.cw=$e(),this.aw.forEach((function(e){t.bw(e.key)&&(t.cw=t.cw.add(e.key))}));var n=[];return e.forEach((function(e){t.cw.has(e)||n.push(new mo(e))})),this.cw.forEach((function(t){e.has(t)||n.push(new go(t))})),n},t.prototype.yw=function(t){this.ow=t.ec,this.cw=$e();var e=this.lw(t.documents);return this.qs(e,!0)},t.prototype._w=function(){return ln.$i(this.query,this.aw,this.Ji,this.hw===rn.Gi)},t}(),bo=function(){function t(t,e,n,r){this.Pu=t,this.Iw=e,this.updateFunction=n,this.Vu=r,this.Tw=5,this.ul=new Ei(this.Pu,xn.Du)}return t.prototype.run=function(){this.Ew()},t.prototype.Ew=function(){var t=this;this.ul.Jf((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return a.__generator(this,(function(r){return t=this.Iw.dv(),(e=this.Rw(t))&&e.then((function(e){n.Pu.xu((function(){return t.commit().then((function(){n.Vu.resolve(e)})).catch((function(t){n.Aw(t)}))}))})).catch((function(t){n.Aw(t)})),[2]}))}))}))},t.prototype.Rw=function(t){try{var e=this.updateFunction(t);return!fe(e)&&e.catch&&e.then?e:(this.Vu.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Vu.reject(t),null}},t.prototype.Aw=function(t){var e=this;this.Tw>0&&this.Dw(t)?(this.Tw-=1,this.Pu.xu((function(){return e.Ew(),Promise.resolve()}))):this.Vu.reject(t)},t.prototype.Dw=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!qe(e)}return!1},t}(),wo=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Co=function(t){this.key=t,this.Pw=!1},ko=function(){function t(t,e,n,r){this.Nc=t,this.Iw=e,this.Sw=n,this.currentUser=r,this.Cw=null,this.kw=new Qn((function(t){return t.canonicalId()})),this.Vw={},this.Nw=new pt(dt.G),this.Ow={},this.Fw=new Wn,this.Uw={},this.xw=new Map,this.jw=pr.Ko(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"Lw",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){_(null!==t,"SyncEngine listener cannot be null"),_(null===this.Cw,"SyncEngine already has a subscriber."),this.Cw=t},t.prototype.listen=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return this.Bw("listen()"),(r=this.kw.get(t))?(this.Sw.Bv(e=r.targetId),n=r.view._w(),[3,4]):[3,1];case 1:return[4,this.Nc.Yh(t.li())];case 2:return i=a.sent(),o=this.Sw.Bv(i.targetId),[4,this.Mw(t,e=i.targetId,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.Iw.listen(i),a.label=4;case 4:return this.Cw.Il([n]),[2,e]}}))}))},t.prototype.Mw=function(t,e,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,this.Nc.nc(t,!0)];case 1:return r=a.sent(),i=new _o(t,r.ec),o=i.lw(r.documents),s=fn.re(e,n&&"Offline"!==this.onlineState),_(0===(u=i.qs(o,!0===this.isPrimary,s)).pw.length,"View returned limbo docs before target ack from the server."),_(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new wo(t,e,i),this.kw.set(t,c),this.Vw[e]||(this.Vw[e]=[]),this.Vw[e].push(t),[2,u.snapshot]}}))}))},t.prototype.qw=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.Nc.nc(t.query,!0)];case 1:return e=r.sent(),n=t.view.yw(e),this.isPrimary&&this.Qw(t.targetId,n.pw),[2,n]}}))}))},t.prototype.$d=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return this.Bw("unlisten()"),_(!!(e=this.kw.get(t)),"Trying to unlisten on query not found:"+t),(n=this.Vw[e.targetId]).length>1?(this.Vw[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.kw.delete(t),[2]):this.isPrimary?(this.Sw.qv(e.targetId),this.Sw.Fv(e.targetId)?[3,2]:[4,this.Nc.tc(e.targetId,!1).then((function(){r.Sw.Gv(e.targetId),r.Iw.$d(e.targetId),r.Gw(e.targetId)})).catch(_r)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.Gw(e.targetId),[4,this.Nc.tc(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.Bw("write()"),[4,this.Nc.kh(t)];case 1:return n=r.sent(),this.Sw.Uv(n.batchId),this.Ww(n.batchId,e),[4,this.zw(n.Ns)];case 2:return r.sent(),[4,this.Iw.Hd()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new bo(t,this.Iw,e,n).run()},t.prototype.jh=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:this.Bw("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Nc.jh(t)];case 2:return e=r.sent(),F(t.Zi,(function(t,e){var r=n.Ow[Number(t)];r&&(_(e.se.size+e.oe.size+e.he.size<=1,"Limbo resolution for single document contains multiple changes."),e.se.size>0?r.Pw=!0:e.oe.size>0?_(r.Pw,"Received change for limbo target document without add."):e.he.size>0&&(_(r.Pw,"Received remove for limbo target document without add."),r.Pw=!1))})),[4,this.zw(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,_r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.gw=function(t,e){if(this.isPrimary&&e===ge.Ri||!this.isPrimary&&e===ge.Ai){this.Bw("applyOnlineStateChange()");var n=[];this.kw.forEach((function(e,r){var i=r.view.gw(t);_(0===i.pw.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.Cw.Kw(t),this.Cw.Il(n),this.onlineState=t,this.isPrimary&&this.Sw.Kv(t)}},t.prototype.ev=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return this.Bw("rejectListens()"),this.Sw.Wv(t,"rejected",e),(r=(n=this.Ow[t])&&n.key)?(this.Nw=this.Nw.remove(r),delete this.Ow[t],i=(i=new pt(dt.G)).lt(r,new ae(r,ut.B())),o=$e().add(r),s=new hn(ut.MIN,{},new mt(w),i,o),[2,this.jh(s)]):[3,1];case 1:return[4,this.Nc.tc(t,!1).then((function(){return u.Gw(t,e)})).catch(_r)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},t.prototype.iw=function(t,e,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return this.Bw("applyBatchState()"),[4,this.Nc.Vh(t)];case 1:return null===(r=i.sent())?(v("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.Iw.Hd()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.Hw(t,n||null),this.Nc.sc(t)):m("Unknown batchState: "+e),i.label=4;case 4:return[4,this.zw(r)];case 5:return i.sent(),[2]}}))}))},t.prototype.cv=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n;return a.__generator(this,(function(r){switch(r.label){case 0:this.Bw("applySuccessfulWrite()"),this.Hw(e=t.batch.batchId,null),this.Jw(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Nc.bo(t)];case 2:return n=r.sent(),this.Sw.jv(e,"acknowledged"),[4,this.zw(n)];case 3:return r.sent(),[3,6];case 4:return[4,_r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.lv=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:this.Bw("rejectFailedWrite()"),this.Hw(t,e),this.Jw(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Nc.Uh(t)];case 2:return n=r.sent(),this.Sw.jv(t,"rejected",e),[4,this.zw(n)];case 3:return r.sent(),[3,6];case 4:return[4,_r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Yw=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.Iw.Fd()||v("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.Nc.Co()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.xw.get(e)||[]).push(t),this.xw.set(e,n),[2])}}))}))},t.prototype.Jw=function(t){(this.xw.get(t)||[]).forEach((function(t){t.resolve()})),this.xw.delete(t)},t.prototype.Xw=function(t){this.xw.forEach((function(e){e.forEach((function(e){e.reject(new N(A.CANCELLED,t))}))})),this.xw.clear()},t.prototype.Ww=function(t,e){var n=this.Uw[this.currentUser.v()];n||(n=new pt(w)),n=n.lt(t,e),this.Uw[this.currentUser.v()]=n},t.prototype.Hw=function(t,e){var n=this.Uw[this.currentUser.v()];if(n){var r=n.get(t);r&&(_(t===n.vt(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.Uw[this.currentUser.v()]=n}},t.prototype.Gw=function(t,e){var n=this;void 0===e&&(e=null),this.Sw.qv(t),_(this.Vw[t]&&0!==this.Vw[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.Vw[t];r<i.length;r++){var o=i[r];this.kw.delete(o),e&&this.Cw.$w(o,e)}if(delete this.Vw[t],this.isPrimary){var a=this.Fw.gs(t);this.Fw.ms(t),a.forEach((function(t){n.Fw.bs(t)||n.Zw(t)}))}},t.prototype.Zw=function(t){var e=this.Nw.get(t);null!==e&&(this.Iw.$d(e),this.Nw=this.Nw.remove(t),delete this.Ow[e])},t.prototype.Qw=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof go?(this.Fw.fs(i.key,t),this.tm(i)):i instanceof mo?(v("SyncEngine","Document no longer in limbo: "+i.key),this.Fw.ds(i.key,t),this.Fw.bs(i.key)||this.Zw(i.key)):m("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.tm=function(t){var e=t.key;if(!this.Nw.get(e)){v("SyncEngine","New document in limbo: "+e);var n=this.jw.next(),r=_e.ti(e.path);this.Ow[n]=new Co(e),this.Iw.listen(new Fe(r.li(),n,xe.ki,Mn.gu)),this.Nw=this.Nw.lt(e,n)}},t.prototype.nm=function(){return this.Nw},t.prototype.zw=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return a.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.kw.forEach((function(a,s){i.push(Promise.resolve().then((function(){var e=s.view.lw(t);return e.gf?o.Nc.nc(s.query,!1).then((function(t){return s.view.lw(t.documents,e)})):e})).then((function(t){var i=s.view.qs(t,!0===o.isPrimary,e&&e.Zi[s.targetId]);if(o.Qw(s.targetId,i.pw),i.snapshot){o.isPrimary&&o.Sw.Wv(s.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var a=yr.ah(s.targetId,i.snapshot);r.push(a)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.Cw.Il(n),[4,this.Nc.Kh(r)];case 2:return a.sent(),[2]}}))}))},t.prototype.Bw=function(t){_(null!==this.Cw,"Trying to call "+t+" before calling subscribe().")},t.prototype.vv=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n;return a.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.Xw("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.Nc.Dh(t)]):[3,3];case 1:return n=r.sent(),this.Sw.Dh(t,n.Sh,n.Ch),[4,this.zw(n.Ph)];case 2:r.sent(),r.label=3;case 3:return[4,this.Iw.vv()];case 4:return r.sent(),[2]}}))}))},t.prototype.wv=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,s=this;return a.__generator(this,(function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Iw.wv(!0)]);case 1:return a.sent(),i=this.Sw.Ov(),[4,this.im(i.tt())];case 2:for(e=a.sent(),n=0,r=e;n<r.length;n++)this.Iw.listen(r[n]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,i=[],o=Promise.resolve(),U(this.Vw,(function(t,e){s.Sw.Qv(t)?i.push(t):o=o.then((function(){return s.Gw(t),s.Nc.tc(t,!0)})),s.Iw.$d(t)})),[4,o]);case 4:return a.sent(),[4,this.im(i)];case 5:return a.sent(),this.em(),[4,this.Iw.wv(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},t.prototype.em=function(){var t=this;U(this.Ow,(function(e){t.Iw.$d(e)})),this.Fw.ps(),this.Ow=[],this.Nw=new pt(dt.G)},t.prototype.im=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,c,l,h,f,d,p;return a.__generator(this,(function(a){switch(a.label){case 0:e=[],n=[],r=0,i=t,a.label=1;case 1:return r<i.length?(s=void 0,(u=this.Vw[o=i[r]])&&0!==u.length?[4,this.Nc.tc(o,!0)]:[3,8]):[3,14];case 2:return a.sent(),[4,this.Nc.Yh(u[0].li())];case 3:s=a.sent(),c=0,l=u,a.label=4;case 4:return c<l.length?(_(!!(f=this.kw.get(h=l[c])),"No query view found for "+h),[4,this.qw(f)]):[3,7];case 5:(d=a.sent()).snapshot&&n.push(d.snapshot),a.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return _(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.Nc.ac(o)];case 9:return _(!!(p=a.sent()),"Target for id "+o+" not found"),[4,this.Nc.Yh(p)];case 10:return s=a.sent(),[4,this.Mw(this.rm(p),o,!1)];case 11:a.sent(),a.label=12;case 12:e.push(s),a.label=13;case 13:return r++,[3,1];case 14:return this.Cw.Il(n),[2,e]}}))}))},t.prototype.rm=function(t){return new _e(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,pe.Kn,t.startAt,t.endAt)},t.prototype.uc=function(){return this.Nc.uc()},t.prototype.ew=function(t,e,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i;return a.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return v("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.Vw[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.Nc.fc()];case 2:return r=o.sent(),i=hn.ee(t,"current"===e),[4,this.zw(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.Nc.tc(t,!0)];case 5:return o.sent(),this.Gw(t,n),[3,7];case 6:m("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},t.prototype.rw=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,f=this;return a.__generator(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,d.label=1;case 1:return n<r.length?(_(!this.Vw[h=r[n]],"Trying to add an already active target"),[4,this.Nc.ac(h)]):[3,6];case 2:return _(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.Nc.Yh(i)];case 3:return o=d.sent(),[4,this.Mw(this.rm(i),o.targetId,!1)];case 4:d.sent(),this.Iw.listen(o),d.label=5;case 5:return n++,[3,1];case 6:s=function(t){return a.__generator(this,(function(e){switch(e.label){case 0:return u.Vw[t]?[4,u.Nc.tc(t,!1).then((function(){f.Iw.$d(t),f.Gw(t)})).catch(_r)]:[2,"continue"];case 1:return e.sent(),[2]}}))},u=this,c=0,l=e,d.label=7;case 7:return c<l.length?[5,s(h=l[c])]:[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.Nc.oc(!0),this.Iw.enableNetwork()},t.prototype.disableNetwork=function(){return this.Nc.oc(!1),this.Iw.disableNetwork()},t.prototype.Je=function(t){var e=this.Ow[t];if(e&&e.Pw)return $e().add(e.key);var n=$e(),r=this.Vw[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.kw.get(a);_(!!s,"No query view found for "+a),n=n.qt(s.view.fw)}return n},t}(),Eo=function(){this.um=null,this.targetId=0,this.listeners=[]},Io=function(){function t(t){this.tv=t,this.sm=new Qn((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.om=new Set,this.tv.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.sm.get(e);return r||(n=!0,r=new Eo,this.sm.set(e,r)),r.listeners.push(t),_(!t.gw(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.um&&t.hm(r.um)&&this.cm(),n?this.tv.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.$d=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return a.__generator(this,(function(o){return n=!1,(r=this.sm.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.sm.delete(e),[2,this.tv.$d(e)]):[2]}))}))},t.prototype.Il=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=this.sm.get(i.query);if(o){for(var a=0,s=o.listeners;a<s.length;a++)s[a].hm(i)&&(e=!0);o.um=i}}e&&this.cm()},t.prototype.$w=function(t,e){var n=this.sm.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.sm.delete(t)},t.prototype.Kw=function(t){this.onlineState=t;var e=!1;this.sm.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].gw(t)&&(e=!0)})),e&&this.cm()},t.prototype.am=function(t){this.om.add(t),t.next()},t.prototype.fm=function(t){this.om.delete(t)},t.prototype.cm=function(){this.om.forEach((function(t){t.next()}))},t}(),To=function(){function t(t,e,n){this.query=t,this.lm=e,this.dm=!1,this.vm=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.hm=function(t){if(_(t.docChanges.length>0||t.Yi,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==en.Qi&&e.push(i)}t=new ln(t.query,t.docs,t.Hi,e,t.Ji,t.fromCache,t.Yi,!0)}var o=!1;return this.dm?this.wm(t)&&(this.lm.next(t),o=!0):this.mm(t,this.onlineState)&&(this.pm(t),o=!0),this.vm=t,o},t.prototype.onError=function(t){this.lm.error(t)},t.prototype.gw=function(t){this.onlineState=t;var e=!1;return this.vm&&!this.dm&&this.mm(this.vm,t)&&(this.pm(this.vm),e=!0),e},t.prototype.mm=function(t,e){return _(!this.dm,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.gm&&"Offline"!==e?(_(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.J()||"Offline"===e)},t.prototype.wm=function(t){return t.docChanges.length>0||!!(t.Yi||this.vm&&this.vm.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.pm=function(t){_(!this.dm,"Trying to raise initial events for second time"),t=ln.$i(t.query,t.docs,t.Ji,t.fromCache),this.dm=!0,this.lm.next(t)},t}(),So=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.ja=function(){return kr.Rc(this.cacheSizeBytes)},t}(),Ao=function(){},No=function(){function t(t,e,n,r){this.platform=t,this.bm=e,this.credentials=n,this.Pu=r,this.clientId=b.u()}return t.prototype.start=function(t){var e=this;this.ym();var n=new jn,r=new jn,i=!1;return this.credentials.T((function(o){i?e.Pu.xu((function(){return e.vv(o)})):(i=!0,e._m(t,r,o).then((function(t){return e.Im(o,t)})).then(n.resolve,n.reject))})),this.Pu.xu((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.ym(),this.Pu.enqueue((function(){return t.tv.enableNetwork()}))},t.prototype._m=function(t,e,n){var r=this;return t instanceof So?this.Tm(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.Em(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.Rm()})):(e.resolve(),this.Rm())},t.prototype.Em=function(t){return t instanceof N?t.code===A.FAILED_PRECONDITION||t.code===A.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.ym=function(){if(this.Pu.Gu)throw new N(A.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Tm=function(t,e){var n=this,r=ci.af(this.bm),i=new Sn(this.bm.s,{Ze:!0});return Promise.resolve().then((function(){return a.__awaiter(n,void 0,void 0,(function(){var n,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(e.synchronizeTabs&&!vo.Hs(this.platform))throw new N(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.ja(),this.Sw=e.synchronizeTabs?new vo(this.Pu,this.platform,r,this.clientId,t):new yo,[4,ci.xa({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,Aa:this.Pu,serializer:i,ja:n,Da:this.Sw})];case 1:return o=a.sent(),this.persistence=o,[2,o.vo.Vc]}}))}))}))},t.prototype.Rm=function(){return this.persistence=bi.Nf(this.clientId),this.Sw=new yo,Promise.resolve(null)},t.prototype.Im=function(t,e){var n=this;return v("FirestoreClient","Initializing. user=",t.uid),this.platform.Am(this.bm).then((function(r){return a.__awaiter(n,void 0,void 0,(function(){var n,i,o,s,u,c=this;return a.__generator(this,(function(l){switch(l.label){case 0:return n=new yi,this.Nc=new mr(this.persistence,n,t),[4,this.Nc.start()];case 1:return l.sent(),e&&(this.Dm=new Er(e,this.Pu,this.Nc)),i=this.platform.Pm(),o=this.platform.Sm(this.bm.s),s=new Oi(this.Pu,r,this.credentials,o),u=function(t){return c.tv.gw(t,ge.Ai)},this.Iw=new eo(this.Nc,s,this.Pu,(function(t){return c.tv.gw(t,ge.Ri)}),i),this.tv=new ko(this.Nc,this.Iw,this.Sw,t),this.Sw._d=u,this.Iw.tv=this.tv,this.Sw.tv=this.tv,this.Cm=new Io(this.tv),[4,this.Sw.start()];case 2:return l.sent(),[4,this.Iw.start()];case 3:return l.sent(),[4,this.persistence.Wa((function(t){return a.__awaiter(c,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.tv.wv(t)];case 1:return e.sent(),this.Dm&&(t&&!this.Dm.mh?this.Dm.start():t||this.Dm.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.za((function(){return a.__awaiter(c,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},t.prototype.vv=function(t){return this.Pu.$u(),v("FirestoreClient","Credential Changed. Current user: "+t.uid),this.tv.vv(t)},t.prototype.disableNetwork=function(){var t=this;return this.ym(),this.Pu.enqueue((function(){return t.tv.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Pu.Ju((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.Dm&&this.Dm.stop(),[4,this.Iw.shutdown()];case 1:return t.sent(),[4,this.Sw.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.R(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.ym();var e=new jn;return this.Pu.xu((function(){return t.tv.Yw(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.ym();var i=new To(t,e,n);return this.Pu.xu((function(){return r.Cm.listen(i)})),i},t.prototype.$d=function(t){var e=this;this.km||this.Pu.xu((function(){return e.Cm.$d(t)}))},t.prototype.Vm=function(t){var e=this;return this.ym(),this.Pu.enqueue((function(){return e.Nc.Jh(t)})).then((function(t){if(t instanceof oe)return t;if(t instanceof ae)return null;throw new N(A.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.Nm=function(t){var e=this;return this.ym(),this.Pu.enqueue((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,n,r;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.Nc.nc(t,!0)];case 1:return e=i.sent(),n=new _o(t,e.ec),r=n.lw(e.documents),[2,n.qs(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.ym();var n=new jn;return this.Pu.xu((function(){return e.tv.write(t,n)})),n.promise},t.prototype.s=function(){return this.bm.s},t.prototype.am=function(t){var e=this;this.ym(),this.Pu.xu((function(){return e.Cm.am(t),Promise.resolve()}))},t.prototype.fm=function(t){this.km||this.Cm.fm(t)},Object.defineProperty(t.prototype,"km",{get:function(){return this.Pu.Gu},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.ym();var n=new jn;return this.Pu.xu((function(){return e.tv.runTransaction(e.Pu,t,n),Promise.resolve()})),n.promise},t}(),Oo=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.Om(this.observer.next,t)},t.prototype.error=function(t){this.Om(this.observer.error,t)},t.prototype.Fm=function(){this.muted=!0},t.prototype.Om=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Ro(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var xo=kr.Pc,Po=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new N(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else K("settings","non-empty string","host",t.host),this.host=t.host,Q("settings","boolean","ssl",t.ssl),this.ssl=j(t.ssl,!0);if(et("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Q("settings","object","credentials",t.credentials),this.credentials=t.credentials,Q("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?y("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&y("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=j(t.timestampsInSnapshots,!0),Q("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=kr.Cc;else{if(t.cacheSizeBytes!==xo&&t.cacheSizeBytes<kr.Sc)throw new N(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+kr.Sc);this.cacheSizeBytes=t.cacheSizeBytes}Q("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Do=function(){function t(e,n){var r=this;if(this.Um=null,this.xm=new Fn,this.INTERNAL={delete:function(){return a.__awaiter(r,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.jm(),[4,this.Lm.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var i=e;this.Um=i,this.Bm=t.Mm(i),this.qm=i.name,this.Qm=new x(n)}else{var o=e;if(!o.projectId)throw new N(A.INVALID_ARGUMENT,"Must provide projectId");this.Bm=new T(o.projectId,o.database),this.qm="[DEFAULT]",this.Qm=new R}this.Gm=new Po({}),this.Wm=this.zm(this.Bm)}return t.prototype.settings=function(t){if(H("Firestore.settings",arguments,1),G("Firestore.settings","object",1,t),M(t,"persistence"))throw new N(A.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Po(t);if(this.Lm&&!this.Gm.isEqual(e))throw new N(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.Gm=e,void 0!==e.credentials&&(this.Qm=L(e.credentials))},t.prototype.enableNetwork=function(){return this.jm(),this.Lm.enableNetwork()},t.prototype.disableNetwork=function(){return this.jm(),this.Lm.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.Lm)throw new N(A.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&y("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=j(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.Km(new So(this.Gm.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=ci.af(this.Hm()),n=new jn;return this.xm.Wu((function(){return a.__awaiter(t,void 0,void 0,(function(){var t;return a.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this.Lm&&!this.Lm.km)throw new N(A.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,ci.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Jm",{get:function(){return this.jm(),this.Lm.km},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.jm(),this.Lm.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.jm(),Ro(t)?this.Ym(t):(G("Firestore.onSnapshotsInSync","function",1,t),this.Ym({next:t}))},t.prototype.Ym=function(t){var e=this,n=new Oo({next:function(){t.next&&t.next()},error:function(t){throw m("Uncaught Error in onSnapshotsInSync")}});return this.Lm.am(n),function(){n.Fm(),e.Lm.fm(n)}},t.prototype.jm=function(){return this.Lm||this.Km(new Ao),this.Lm},t.prototype.Hm=function(){return new E(this.Bm,this.qm,this.Gm.host,this.Gm.ssl,this.Gm.forceLongPolling)},t.prototype.Km=function(t){_(!!this.Gm.host,"FirestoreSettings.host is not set"),_(!this.Lm,"configureClient() called multiple times");var e=this.Hm();return this.Lm=new No(An.t(),e,this.Qm,this.xm),this.Lm.start(t)},t.prototype.zm=function(t){return new Wi((function(e){if(e instanceof jo){var n=t,r=e.firestore.Bm;if(!r.isEqual(n))throw new N(A.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Gi(t,e.Xm)}return e}))},t.Mm=function(t){var e=t.options;if(!M(e,"projectId"))throw new N(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new N(A.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new T(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Um)throw new N(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Um},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return H("Firestore.collection",arguments,1),G("Firestore.collection","non-empty string",1,t),this.jm(),new zo(lt.it(t),this)},t.prototype.doc=function(t){return H("Firestore.doc",arguments,1),G("Firestore.doc","non-empty string",1,t),this.jm(),jo.$m(lt.it(t),this)},t.prototype.collectionGroup=function(t){if(H("Firestore.collectionGroup",arguments,1),G("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new N(A.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.jm(),new qo(new _e(lt.et,t),this)},t.prototype.runTransaction=function(t){var e=this;return H("Firestore.runTransaction",arguments,1),G("Firestore.runTransaction","function",1,t),this.jm().transaction((function(n){return t(new Lo(e,n))}))},t.prototype.batch=function(){return this.jm(),new Mo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(d()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return m("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(H("Firestore.setLogLevel",arguments,1),G("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new N(A.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.Zm=function(){return this.Gm.timestampsInSnapshots},t}(),Lo=function(){function t(t,e){this.tp=t,this.np=e}return t.prototype.get=function(t){var e=this;H("Transaction.get",arguments,1);var n=Ko("Transaction.get",t,this.tp);return this.np.lookup([n.Xm]).then((function(t){if(!t||1!==t.length)return m("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof ae)return new Fo(e.tp,n.Xm,null,!1,!1,n.ip);if(r instanceof oe)return new Fo(e.tp,n.Xm,r,!1,!1,n.ip);throw m("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){B("Transaction.set",arguments,2,3);var r=Ko("Transaction.set",t,this.tp);n=Bo("Transaction.set",n);var i=Yo(r.ip,e,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this.tp.Wm.nd(a,o,n.mergeFields):this.tp.Wm.Zl(a,o);return this.np.set(r.Xm,s),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Ri?(z("Transaction.update",arguments,3),r=Ko("Transaction.update",t,this.tp),i=this.tp.Wm.ud("Transaction.update",e,n,o)):(H("Transaction.update",arguments,2),r=Ko("Transaction.update",t,this.tp),i=this.tp.Wm.ed("Transaction.update",e)),this.np.update(r.Xm,i),this},t.prototype.delete=function(t){H("Transaction.delete",arguments,1);var e=Ko("Transaction.delete",t,this.tp);return this.np.delete(e.Xm),this},t}(),Mo=function(){function t(t){this.tp=t,this.ep=[],this.rp=!1}return t.prototype.set=function(t,e,n){B("WriteBatch.set",arguments,2,3),this.up();var r=Ko("WriteBatch.set",t,this.tp);n=Bo("WriteBatch.set",n);var i=Yo(r.ip,e,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this.tp.Wm.nd(a,o,n.mergeFields):this.tp.Wm.Zl(a,o);return this.ep=this.ep.concat(s.Ll(r.Xm,Dt.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.up(),"string"==typeof e||e instanceof Ri?(z("WriteBatch.update",arguments,3),r=Ko("WriteBatch.update",t,this.tp),i=this.tp.Wm.ud("WriteBatch.update",e,n,o)):(H("WriteBatch.update",arguments,2),r=Ko("WriteBatch.update",t,this.tp),i=this.tp.Wm.ed("WriteBatch.update",e)),this.ep=this.ep.concat(i.Ll(r.Xm,Dt.exists(!0))),this},t.prototype.delete=function(t){H("WriteBatch.delete",arguments,1),this.up();var e=Ko("WriteBatch.delete",t,this.tp);return this.ep=this.ep.concat(new Ft(e.Xm,Dt.NONE)),this},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.up(),this.rp=!0,this.ep.length>0?[2,this.tp.jm().write(this.ep)]:[2]}))}))},t.prototype.up=function(){if(this.rp)throw new N(A.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),jo=function(){function t(t,e,n){this.Xm=t,this.firestore=e,this.ip=n,this.Lm=this.firestore.jm()}return t.$m=function(e,n,r){if(e.length%2!=0)throw new N(A.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.nt()+" has "+e.length);return new t(new dt(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.Xm.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new zo(this.Xm.path.H(),this.firestore,this.ip)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.Xm.path.nt()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(H("DocumentReference.collection",arguments,1),G("DocumentReference.collection","non-empty string",1,t),!t)throw new N(A.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=lt.it(t);return new zo(this.Xm.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.Xm.isEqual(e.Xm)&&this.ip===e.ip},t.prototype.set=function(t,e){B("DocumentReference.set",arguments,1,2),e=Bo("DocumentReference.set",e);var n=Yo(this.ip,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.Wm.nd(i,r,e.mergeFields):this.firestore.Wm.Zl(i,r);return this.Lm.write(o.Ll(this.Xm,Dt.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Ri?(z("DocumentReference.update",arguments,2),n=this.firestore.Wm.ud("DocumentReference.update",t,e,r)):(H("DocumentReference.update",arguments,1),n=this.firestore.Wm.ed("DocumentReference.update",t)),this.Lm.write(n.Ll(this.Xm,Dt.exists(!0)))},t.prototype.delete=function(){return H("DocumentReference.delete",arguments,0),this.Lm.write([new Ft(this.Xm,Dt.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];B("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Ro(t[i])||(et("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Q("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Ro(t[i])?n=t[i]:(G("DocumentReference.onSnapshot","function",i,t[i]),W("DocumentReference.onSnapshot","function",i+1,t[i+1]),W("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.sp(o,n)},t.prototype.sp=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Oo({next:function(t){if(e.next){_(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n.Xm);e.next(new Fo(n.firestore,n.Xm,r,t.fromCache,t.hasPendingWrites,n.ip))}},error:r}),o=this.Lm.listen(_e.ti(this.Xm.path),i,t);return function(){i.Fm(),n.Lm.$d(o)}},t.prototype.get=function(t){var e=this;return B("DocumentReference.get",arguments,0,1),Wo("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.jm().Vm(e.Xm).then((function(t){n(new Fo(e.firestore,e.Xm,t,!0,t instanceof oe&&t.un,e.ip))}),r):e.hp(n,r,t)}))},t.prototype.hp=function(t,e,n){var r=this.sp({includeMetadataChanges:!0,gm:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new N(A.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new N(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this.Xm,this.firestore,e)},t}(),Uo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Fo=function(){function t(t,e,n,r,i,o){this.tp=t,this.Xm=e,this.cp=n,this.ap=r,this.fp=i,this.ip=o}return t.prototype.data=function(t){if(B("DocumentSnapshot.data",arguments,0,1),t=Go("DocumentSnapshot.data",t),this.cp){if(this.ip){var e=new Vo(this.tp,this.Xm,this.cp,this.ap,this.fp);return this.ip.fromFirestore(e,t)}return this.lp(this.cp.data(),qt.Cn(t,this.tp.Zm()))}},t.prototype.get=function(t,e){if(B("DocumentSnapshot.get",arguments,1,2),e=Go("DocumentSnapshot.get",e),this.cp){var n=this.cp.data().field(Yi("DocumentSnapshot.get",t));if(null!==n)return this.dp(n,qt.Cn(e,this.tp.Zm()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this.Xm.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new jo(this.Xm,this.tp,this.ip)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.cp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Uo(this.fp,this.ap)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","DocumentSnapshot",1,e);return this.tp===e.tp&&this.ap===e.ap&&this.Xm.isEqual(e.Xm)&&(null===this.cp?null===e.cp:this.cp.isEqual(e.cp))&&this.ip===e.ip},t.prototype.lp=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.dp(i,e)})),r},t.prototype.dp=function(t,e){if(t instanceof ee)return this.lp(t,e);if(t instanceof re)return this.vp(t,e);if(t instanceof Zt){var n=t.value(e),r=this.tp.jm().s();return t.s.isEqual(r)||y("Document "+this.Xm.path+" contains a document reference within a different database ("+t.s.projectId+"/"+t.s.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new jo(n,this.tp,this.ip)}return t.value(e)},t.prototype.vp=function(t,e){var n=this;return t.Ht.map((function(t){return n.dp(t,e)}))},t}(),Vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return _(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Fo),qo=function(){function t(t,e,n){this.wp=t,this.firestore=e,this.ip=n}return t.prototype.where=function(e,n,r){H("Query.where",arguments,3),tt("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];J("Query.where",o,2,n);var a=Yi("Query.where",e),s=be.it(n);if(a.ut()){if(s===be.ARRAY_CONTAINS||s===be.ARRAY_CONTAINS_ANY)throw new N(A.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===be.IN){this.mp(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.pp(h))}i=new re(u)}else i=this.pp(r)}else s!==be.IN&&s!==be.ARRAY_CONTAINS_ANY||this.mp(r,s),i=this.firestore.Wm.sd("Query.where",r,s===be.IN);var f=we.create(a,s,i);return this.gp(f),new t(this.wp.ei(f),this.firestore,this.ip)},t.prototype.orderBy=function(e,n){var r;if(B("Query.orderBy",arguments,1,2),W("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Se.ASCENDING;else{if("desc"!==n)throw new N(A.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Se.DESCENDING}if(null!==this.wp.startAt)throw new N(A.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.wp.endAt)throw new N(A.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Yi("Query.orderBy",e),o=new Ne(i,r);return this.bp(o),new t(this.wp.ui(o),this.firestore,this.ip)},t.prototype.limit=function(e){return H("Query.limit",arguments,1),G("Query.limit","number",1,e),rt("Query.limit",1,e),new t(this.wp.si(e),this.firestore,this.ip)},t.prototype.limitToLast=function(e){return H("Query.limitToLast",arguments,1),G("Query.limitToLast","number",1,e),rt("Query.limitToLast",1,e),new t(this.wp.oi(e),this.firestore,this.ip)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];z("Query.startAt",arguments,1);var i=this.yp("Query.startAt",e,n,!0);return new t(this.wp.hi(i),this.firestore,this.ip)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];z("Query.startAfter",arguments,1);var i=this.yp("Query.startAfter",e,n,!1);return new t(this.wp.hi(i),this.firestore,this.ip)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];z("Query.endBefore",arguments,1);var i=this.yp("Query.endBefore",e,n,!0);return new t(this.wp.ci(i),this.firestore,this.ip)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];z("Query.endAt",arguments,1);var i=this.yp("Query.endAt",e,n,!1);return new t(this.wp.ci(i),this.firestore,this.ip)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","Query",1,e);return this.firestore===e.firestore&&this.wp.isEqual(e.wp)},t.prototype.withConverter=function(e){return new t(this.wp,this.firestore,e)},t.prototype.yp=function(t,e,n,r){if(tt(t,1,e),e instanceof Fo){if(n.length>0)throw new N(A.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new N(A.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this._p(t,i.cp,r)}var o=[e].concat(n);return this.Ip(t,o,r)},t.prototype._p=function(t,e,n){for(var r=[],i=0,o=this.wp.orderBy;i<o.length;i++){var a=o[i];if(a.field.ut())r.push(new Zt(this.firestore.Bm,e.key));else{var s=e.field(a.field);if(s instanceof Xt)throw new N(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.nt();throw new N(A.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ae(r,n)},t.prototype.Ip=function(t,e,n){var r=this.wp.Jn;if(e.length>r.length)throw new N(A.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.ut()){if("string"!=typeof a)throw new N(A.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this.wp._i()&&-1!==a.indexOf("/"))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this.wp.path.child(lt.it(a));if(!dt.ht(s))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new dt(s);i.push(new Zt(this.firestore.Bm,u))}else{var c=this.firestore.Wm.sd(t,a);i.push(c)}}return new Ae(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];B("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Ro(t[i])||(et("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Q("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Ro(t[i])?n=t[i]:(G("Query.onSnapshot","function",i,t[i]),W("Query.onSnapshot","function",i+1,t[i+1]),W("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.Tp(this.wp),this.sp(r,n)},t.prototype.sp=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Oo({next:function(t){e.next&&e.next(new Ho(n.firestore,n.wp,t,n.ip))},error:r}),o=this.firestore.jm(),a=o.listen(this.wp,i,t);return function(){i.Fm(),o.$d(a)}},t.prototype.Tp=function(t){if(t.bi()&&0===t.Jn.length)throw new N(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return B("Query.get",arguments,0,1),Wo("Query.get",t),this.Tp(this.wp),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.jm().Nm(e.wp).then((function(t){n(new Ho(e.firestore,e.wp,t,e.ip))}),r):e.hp(n,r,t)}))},t.prototype.hp=function(t,e,n){var r=this.sp({includeMetadataChanges:!0,gm:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new N(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.pp=function(t){if("string"==typeof t){if(""===t)throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.wp._i()&&-1!==t.indexOf("/"))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.wp.path.child(lt.it(t));if(!dt.ht(e))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Zt(this.firestore.Bm,new dt(e))}if(t instanceof jo)return new Zt(this.firestore.Bm,t.Xm);throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Z(t)+".")},t.prototype.mp=function(t,e){if(!Array.isArray(t)||0===t.length)throw new N(A.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new N(A.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new N(A.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new N(A.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.gp=function(t){if(t instanceof we){var e=[be.ARRAY_CONTAINS,be.ARRAY_CONTAINS_ANY],n=[be.IN,be.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.ri()){var o=this.wp.ni();if(null!==o&&!o.isEqual(t.field))throw new N(A.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this.wp.ii();null!==a&&this.Ep(t.field,a)}else if(i||r){var s=null;if(i&&(s=this.wp.yi(n)),null===s&&r&&(s=this.wp.yi(e)),null!=s)throw new N(A.INVALID_ARGUMENT,s===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.bp=function(t){if(null===this.wp.ii()){var e=this.wp.ni();null!==e&&this.Ep(e,t.field)}},t.prototype.Ep=function(t,e){if(!e.isEqual(t))throw new N(A.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Ho=function(){function t(t,e,n,r){this.tp=t,this.Rp=e,this.Ap=n,this.ip=r,this.Dp=null,this.Pp=null,this.metadata=new Uo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Ap.docs.J()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Ap.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;B("QuerySnapshot.forEach",arguments,1,2),G("QuerySnapshot.forEach","function",1,t),this.Ap.docs.forEach((function(r){t.call(e,n.Sp(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new qo(this.Rp,this.tp,this.ip)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(et("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Q("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Ap.Xi)throw new N(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Dp&&this.Pp===e||(this.Dp=function(t,e,n,r){if(n.Hi.J()){var i,o=0;return n.docChanges.map((function(e){var a=new Vo(t,e.doc.key,e.doc,n.fromCache,n.Ji.has(e.doc.key),r);return _(e.type===en.Bi,"Invalid event type for first snapshot"),_(!i||n.query.di(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.Hi;return n.docChanges.filter((function(t){return e||t.type!==en.Qi})).map((function(e){var i=new Vo(t,e.doc.key,e.doc,n.fromCache,n.Ji.has(e.doc.key),r),o=-1,s=-1;return e.type!==en.Bi&&(_((o=a.indexOf(e.doc.key))>=0,"Index for document not found"),a=a.delete(e.doc.key)),e.type!==en.Mi&&(s=(a=a.add(e.doc)).indexOf(e.doc.key)),{type:Qo(e.type),doc:i,oldIndex:o,newIndex:s}}))}(this.tp,e,this.Ap,this.ip),this.Pp=e),this.Dp},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","QuerySnapshot",1,e);return this.tp===e.tp&&this.Rp.isEqual(e.Rp)&&this.Ap.isEqual(e.Ap)&&this.ip===e.ip},t.prototype.Sp=function(t){return new Vo(this.tp,t.key,t,this.metadata.fromCache,this.Ap.Ji.has(t.key),this.ip)},t}();a.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(Ho.prototype.docChanges,t,{get:function(){return function(){throw new N(A.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var zo=function(t){function e(e,n,r){var i=t.call(this,_e.ti(e),n,r)||this;if(i.Cp=e,e.length%2!=1)throw new N(A.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.nt()+" has "+e.length);return i}return a.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.wp.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.wp.path.H();return t.J()?null:new jo(new dt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.wp.path.nt()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(B("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=b.u()),G("CollectionReference.doc","non-empty string",1,t),""===t)throw new N(A.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=lt.it(t);return jo.$m(this.wp.path.child(e),this.firestore,this.ip)},e.prototype.add=function(t){H("CollectionReference.add",arguments,1);var e=this.ip?this.ip.toFirestore(t):t;G("CollectionReference.add","object",1,e);var n=this.doc();return n.set(t).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Cp,this.firestore,t)},e}(qo);function Bo(t,e){if(void 0===e)return{merge:!1};if(et(t,e,["merge","mergeFields"]),Q(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Z(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Z(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof Ri}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new N(A.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Go(t,e){return void 0===e?{}:(et(t,e,["serverTimestamps"]),Y(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Wo(t,e){W(t,"object",1,e),e&&(et(t,e,["source"]),Y(t,0,"source",e.source,["default","server","cache"]))}function Ko(t,e,n){if(e instanceof jo){if(e.firestore!==n)throw new N(A.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw nt(t,"DocumentReference",1,e)}function Qo(t){switch(t){case en.Bi:return"added";case en.qi:case en.Qi:return"modified";case en.Mi:return"removed";default:return m("Unknown change type: "+t)}}function Yo(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var Jo=Nn(Do,"Use firebase.firestore() instead."),Xo=Nn(Lo,"Use firebase.firestore().runTransaction() instead."),$o=Nn(Mo,"Use firebase.firestore().batch() instead."),Zo=Nn(jo,"Use firebase.firestore().doc() instead."),ta=Nn(Fo),ea=Nn(Vo),na=Nn(qo),ra=Nn(Ho),ia=Nn(zo,"Use firebase.firestore().collection() instead."),oa={Firestore:Jo,GeoPoint:at,Timestamp:st,Blob:Ln,Transaction:Xo,WriteBatch:$o,DocumentReference:Zo,DocumentSnapshot:ta,Query:na,QueryDocumentSnapshot:ea,QuerySnapshot:ra,CollectionReference:ia,FieldPath:Ri,FieldValue:Fi,setLogLevel:Do.setLogLevel,CACHE_SIZE_UNLIMITED:xo},aa=function(){function t(){}return t.prototype.Od=function(t){},t.prototype.shutdown=function(){},t}(),sa=function(){function t(){var t=this;this.kp=function(){return t.Vp()},this.Np=function(){return t.Op()},this.Fp=[],this.Up()}return t.prototype.Od=function(t){this.Fp.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.kp),window.removeEventListener("offline",this.Np)},t.prototype.Up=function(){window.addEventListener("online",this.kp),window.addEventListener("offline",this.Np)},t.prototype.Vp=function(){v("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Fp;t<e.length;t++)(0,e[t])(0)},t.prototype.Op=function(){v("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Fp;t<e.length;t++)(0,e[t])(1)},t.Hs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ua=function(){function t(t){this.xp=t.xp,this.jp=t.jp}return t.prototype.yl=function(t){_(!this.Lp,"Called onOpen on stream twice!"),this.Lp=t},t.prototype.wl=function(t){_(!this.Bp,"Called onClose on stream twice!"),this.Bp=t},t.prototype.onMessage=function(t){_(!this.Mp,"Called onMessage on stream twice!"),this.Mp=t},t.prototype.close=function(){this.jp()},t.prototype.send=function(t){this.xp(t)},t.prototype.qp=function(){_(void 0!==this.Lp,"Cannot call onOpen because no callback was set"),this.Lp()},t.prototype.Qp=function(t){_(void 0!==this.Bp,"Cannot call onClose because no callback was set"),this.Bp(t)},t.prototype.Gp=function(t){_(void 0!==this.Mp,"Cannot call onMessage because no callback was set"),this.Mp(t)},t}(),ca={BatchGetDocuments:"batchGet",Commit:"commit"},la="gl-js/ fire/"+h,ha=function(){function t(t){this.s=t.s,this.Wp=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.zp=function(t,e){if(e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n]);t["X-Goog-Api-Client"]=la},t.prototype.Vl=function(t,e,n){var r=this,i=this.Kp(t);return new Promise((function(o,s){var u=new l.XhrIo;u.listenOnce(l.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var e=u.getResponseJson();v("Connection","XHR received:",JSON.stringify(e)),o(e);break;case l.ErrorCode.TIMEOUT:v("Connection",'RPC "'+t+'" timed out'),s(new N(A.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(v("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(a=r.status.toLowerCase().replace("_","-"),Object.values(A).indexOf(a)>=0?a:A.UNKNOWN);s(new N(i,r.message))}else s(new N(A.UNKNOWN,"Server responded with status "+u.getStatus()))}else v("Connection",'RPC "'+t+'" failed'),s(new N(A.UNAVAILABLE,"Connection failed."));break;default:m('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{v("Connection",'RPC "'+t+'" completed.')}var a}));var c=a.__assign({},e);delete c.database;var h=JSON.stringify(c);v("Connection","XHR sending: ",i+" "+h);var f={"Content-Type":"text/plain"};r.zp(f,n),u.send(i,"POST",h,f,15)}))},t.prototype.Nl=function(t,e,n){return this.Vl(t,e,n)},t.prototype._l=function(t,e){var n=[this.Wp,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=l.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.zp(i.initMessageHeaders,e),u.isMobileCordova()||u.isReactNative()||u.isElectron()||u.isIE()||u.isUWP()||u.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");v("Connection","Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,c=!1,h=new ua({xp:function(t){c?v("Connection","Not sending because WebChannel is closed:",t):(s||(v("Connection","Opening WebChannel transport."),a.open(),s=!0),v("Connection","WebChannel sending:",t),a.send(t))},jp:function(){return a.close()}}),f=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(l.WebChannel.EventType.OPEN,(function(){c||v("Connection","WebChannel transport opened.")})),f(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,v("Connection","WebChannel transport closed"),h.Qp())})),f(l.WebChannel.EventType.ERROR,(function(t){c||(c=!0,v("Connection","WebChannel transport errored:",t),h.Qp(new N(A.UNAVAILABLE,"The operation could not be completed")))})),f(l.WebChannel.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];_(!!n,"Got a webchannel message without data.");var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){v("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=je[t];if(void 0!==e)return He(e)}(i),s=r.message;void 0===o&&(o=A.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,h.Qp(new N(o,s)),a.close()}else v("Connection","WebChannel received:",n),h.Gp(n)}})),setTimeout((function(){h.qp()}),0),h},t.prototype.Kp=function(t){var e=ca[t];return _(void 0!==e,"Unknown REST mapping for: "+t),this.Wp+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),fa=function(){function t(){this.du="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.Am=function(t){return Promise.resolve(new ha(t))},t.prototype.Pm=function(){return sa.Hs()?new sa:new aa},t.prototype.Sm=function(t){return new Sn(t,{Ze:!0})},t.prototype.i=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();function da(t){(function(t){var e;t.INTERNAL.registerComponent(new c.Component("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new Do(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((_((e=oa)&&"object"==typeof e,"shallowCopy() expects object parameter."),a.__assign({},e))))})(t),t.registerVersion("@firebase/firestore","1.11.2")}An.lu(new fa),da(o),e.__PRIVATE_registerFirestore=da},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),a=n("2QA8"),s=n("2fFW"),u=n("NJ4a"),c=function(t){function e(t,n,r){var o;switch(_classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=i.a;break;case 1:if(!t){o.destination=i.a;break}if("object"==typeof t){t instanceof e?(o.syncErrorThrowable=t.syncErrorThrowable,o.destination=t,t.add(_assertThisInitialized(o))):(o.syncErrorThrowable=!0,o.destination=new l(_assertThisInitialized(o),t));break}default:o.syncErrorThrowable=!0,o.destination=new l(_assertThisInitialized(o),t,n,r)}return o}return _inherits(e,t),_createClass(e,[{key:a.a,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(e.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}],[{key:"create",value:function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i}}]),e}(o.a),l=function(t){function e(t,n,o,a){var s,u;_classCallCheck(this,e),(s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._parentSubscriber=t;var c=_assertThisInitialized(s);return Object(r.a)(n)?u=n:n&&(u=n.next,o=n.error,a=n.complete,n!==i.a&&(c=Object.create(n),Object(r.a)(c.unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(_assertThisInitialized(s)))),s._context=c,s._next=u,s._error=o,s._complete=a,s}return _inherits(e,t),_createClass(e,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!s.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),e}(c)},"8Y7J":function(t,e,n){"use strict";var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),a=n("VRyK"),s=n("7o/Q");function u(){return function(t){return t.lift(new c(t))}}var c=function(){function t(e){_classCallCheck(this,t),this.connectable=e}return _createClass(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),l=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).connectable=n,r}return _inherits(e,t),_createClass(e,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),e}(s.a),h=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return _inherits(e,t),_createClass(e,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new i.a).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed?(this._connection=null,t=i.a.EMPTY):this._connection=t),t}},{key:"refCount",value:function(){return u()(this)}}]),e}(o.a).prototype,f={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}},d=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).connectable=n,r}return _inherits(e,t),_createClass(e,[{key:"_error",value:function(t){this._unsubscribe(),_get(_getPrototypeOf(e.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(e.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),e}(r.b);function p(){return new r.a}function v(t,e,n){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=_construct(i,e);return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}n.d(e,"gb",(function(){return ta})),n.d(e,"hb",(function(){return ea})),n.d(e,"ib",(function(){return na})),n.d(e,"jb",(function(){return ra})),n.d(e,"fb",(function(){return Vi})),n.d(e,"g",(function(){return Vo})),n.d(e,"P",(function(){return Lo})),n.d(e,"w",(function(){return Do})),n.d(e,"Q",(function(){return Gt})),n.d(e,"T",(function(){return Bt})),n.d(e,"c",(function(){return $i})),n.d(e,"A",(function(){return Zi})),n.d(e,"z",(function(){return to})),n.d(e,"b",(function(){return eo})),n.d(e,"d",(function(){return Ji})),n.d(e,"e",(function(){return Xi})),n.d(e,"S",(function(){return Xo})),n.d(e,"K",(function(){return Ao})),n.d(e,"V",(function(){return Oo})),n.d(e,"s",(function(){return ro})),n.d(e,"f",(function(){return ia})),n.d(e,"m",(function(){return Ki})),n.d(e,"l",(function(){return qt})),n.d(e,"E",(function(){return ve})),n.d(e,"F",(function(){return pe})),n.d(e,"a",(function(){return Ye})),n.d(e,"N",(function(){return Y})),n.d(e,"L",(function(){return On})),n.d(e,"Lb",(function(){return C})),n.d(e,"R",(function(){return S})),n.d(e,"p",(function(){return qe})),n.d(e,"Mb",(function(){return q})),n.d(e,"o",(function(){return D})),n.d(e,"n",(function(){return y})),n.d(e,"y",(function(){return g})),n.d(e,"G",(function(){return _})),n.d(e,"x",(function(){return wo})),n.d(e,"B",(function(){return An})),n.d(e,"C",(function(){return Tn})),n.d(e,"D",(function(){return Sn})),n.d(e,"i",(function(){return ho})),n.d(e,"j",(function(){return bn})),n.d(e,"k",(function(){return En})),n.d(e,"t",(function(){return G})),n.d(e,"v",(function(){return B})),n.d(e,"u",(function(){return Ho})),n.d(e,"H",(function(){return Go})),n.d(e,"I",(function(){return zo})),n.d(e,"J",(function(){return Kn})),n.d(e,"M",(function(){return Yn})),n.d(e,"h",(function(){return je})),n.d(e,"q",(function(){return Hn})),n.d(e,"r",(function(){return zn})),n.d(e,"O",(function(){return en})),n.d(e,"U",(function(){return Zo})),n.d(e,"tb",(function(){return nn})),n.d(e,"Y",(function(){return no})),n.d(e,"W",(function(){return Fe})),n.d(e,"X",(function(){return wn})),n.d(e,"bb",(function(){return fe})),n.d(e,"cb",(function(){return me})),n.d(e,"db",(function(){return Yt})),n.d(e,"rb",(function(){return P})),n.d(e,"wb",(function(){return Ze})),n.d(e,"Eb",(function(){return I})),n.d(e,"ub",(function(){return pn})),n.d(e,"vb",(function(){return dn})),n.d(e,"qb",(function(){return Gi})),n.d(e,"pb",(function(){return Wi})),n.d(e,"Z",(function(){return qi})),n.d(e,"ab",(function(){return Hi})),n.d(e,"Kb",(function(){return at})),n.d(e,"Ib",(function(){return Je})),n.d(e,"Ob",(function(){return on})),n.d(e,"Nb",(function(){return an})),n.d(e,"Jb",(function(){return sn})),n.d(e,"Pb",(function(){return cn})),n.d(e,"eb",(function(){return oa})),n.d(e,"kb",(function(){return Zr})),n.d(e,"lb",(function(){return Ts})),n.d(e,"mb",(function(){return fr})),n.d(e,"nb",(function(){return ki})),n.d(e,"ob",(function(){return aa})),n.d(e,"sb",(function(){return Fr})),n.d(e,"xb",(function(){return Wr})),n.d(e,"yb",(function(){return Gr})),n.d(e,"zb",(function(){return li})),n.d(e,"Bb",(function(){return Ei})),n.d(e,"Cb",(function(){return Ii})),n.d(e,"Ab",(function(){return ga})),n.d(e,"Db",(function(){return ha})),n.d(e,"Fb",(function(){return ma})),n.d(e,"Gb",(function(){return hr})),n.d(e,"Hb",(function(){return wa}));var y=v("Inject",(function(t){return{token:t}})),g=v("Optional"),m=v("Self"),_=v("SkipSelf"),b=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function w(t){for(var e in t)if(t[e]===w)return e;throw Error("Could not find renamed property on target object.")}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function k(t){var e=t[E];return e&&e.token===t?e:null}var E=w({ngInjectableDef:w});function I(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(I).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return"".concat(t.overriddenName);if(t.name)return"".concat(t.name);var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var T=w({__forward_ref__:w});function S(t){return t.__forward_ref__=S,t.toString=function(){return I(this())},t}function A(t){var e=t;return"function"==typeof e&&e.hasOwnProperty(T)&&e.__forward_ref__===S?e():t}var N="undefined"!=typeof globalThis&&globalThis,O="undefined"!=typeof window&&window,R="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,x="undefined"!=typeof global&&global,P=N||x||O||R,D=function(){function t(e,n){_classCallCheck(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(t,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),t}(),L=new D("INJECTOR",-1),M=new Object,j=/\n/gm,U=w({provide:String,useValue:w}),F=void 0;function V(t){var e=F;return F=t,e}function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.Default;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.Default;if(void 0===F)throw new Error("inject() must be called from an injection context");return null===F?function(t,e,n){var r=k(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&b.Optional)return null;throw new Error("Injector: NOT_FOUND [".concat(I(t),"]"))}(t,0,e):F.get(t,e&b.Optional?null:void 0,e)}(t,e)}var H=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;if(e===M){var n=new Error("NullInjectorError: No provider for ".concat(I(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}();function z(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=I(e);if(e instanceof Array)i=e.map(I).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):I(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(j,"\n  "))}var B=function t(){_classCallCheck(this,t)},G=function t(){_classCallCheck(this,t)};function W(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function K(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Q=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),Y=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),J={},X=[],$=w({ngComponentDef:w}),Z=w({ngDirectiveDef:w}),tt=w({ngPipeDef:w}),et=0;function nt(t){return function(t){return t[$]||null}(t)||function(t){return t[Z]||null}(t)}function rt(t){return function(t){return t[tt]||null}(t)}function it(t,e){if(null==t)return J;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var ot,at=function(t){var e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,consts:t.consts,vars:t.vars,factory:t.factory,template:t.template||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===Q.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Y.Emulated,id:"c",styles:t.styles||X,_:null,setInput:null,schemas:t.schemas||null,tView:null};return i._=""+{toString:function(){var n=t.directives,o=t.features,a=t.pipes;i.id+=et++,i.inputs=it(t.inputs,r),i.outputs=it(t.outputs),o&&o.forEach((function(t){return t(i)})),i.directiveDefs=n?function(){return("function"==typeof n?n():n).map(nt)}:null,i.pipeDefs=a?function(){return("function"==typeof a?a():a).map(rt)}:null,e.hasOwnProperty(E)||(e[E]=C({token:e,factory:t.factory}))}},i},st=null,ut=new Map,ct=null;function lt(t,e){return ct&&t===ct||(ct=t,e&&(st=ut.get(t)||null),st=st||{classesBitMask:0,classesIndex:1,stylesBitMask:0,stylesIndex:1}),st}function ht(t,e){return function(t){for(;Array.isArray(t);)t=t[0];return t}(e[t.index])}function ft(t,e){return e[1].data[t+19]}function dt(){return ot}var pt=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(P);function vt(t,e){0===e?t[2]>0&&function(t){gt(t,2|yt(t))}(t):t[2]=e}function yt(t){return t[1]}function gt(t,e){t[1]=e}function mt(t,e){return t[e+2]}function _t(t,e){return 1&t[e+0]}function bt(t,e){return(1&_t(t,e))>0}function wt(t,e){return t[e+0]>>1}function Ct(t,e,n){var r=_t(t,e);t[e+0]=r|n<<1}function kt(t,e){return t[e+1]}function Et(t,e,n){return t[e+3+n]}function It(t,e){return!(!t||e!==t[2])}function Tt(t){return(1&yt(t))>0}function St(t){return(2&yt(t))>0}function At(t){return 6+t[4]}function Nt(t,e){var n=Array.isArray(t)?t[0]:t,r=Array.isArray(e)?e[0]:e;return n instanceof String&&(n=n.toString()),r instanceof String&&(r=r.toString()),function(t,e){return!(t!=t&&e!=e)&&t!==e}(n,r)}function Ot(t){return null!=t&&""!==t}function Rt(t){return t.replace(/[a-z][A-Z]/g,(function(t){return t.charAt(0)+"-"+t.charAt(1)})).toLowerCase()}function xt(t){return Array.isArray(t)&&t.length>=6&&"string"!=typeof t[1]}function Pt(t,e){return t[e+0]}function Dt(t,e,n){t[e+1]=n}function Lt(t,e){return t[e+1]}var Mt=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();function jt(t){return!!t.listen}function Ut(t){return t.ngDebugContext}function Ft(t){return t.ngOriginalError}function Vt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var qt=function(){function t(){_classCallCheck(this,t),this._console=console}return _createClass(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Vt}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?Ut(t)?Ut(t):this._findContext(Ft(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=Ft(t);e&&Ft(e);)e=Ft(e);return e}}]),t}(),Ht=!0,zt=!1;function Bt(){return zt=!0,Ht}function Gt(){if(zt)throw new Error("Cannot enable prod mode after platform setup.");Ht=!1}var Wt=function(){function t(e){if(_classCallCheck(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(t,[{key:"getInertBodyElement_XHR",value:function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),Kt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Qt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yt(t){return(t=String(t)).match(Kt)||t.match(Qt)?t:(Bt()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function Jt(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,a=t.split(",")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){e[o.value]=!0}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}function Xt(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var $t,Zt=Jt("area,br,col,hr,img,wbr"),te=Jt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ee=Jt("rp,rt"),ne=Xt(ee,te),re=Xt(Zt,Xt(te,Jt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xt(ee,Jt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ne),ie=Jt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),oe=Jt("srcset"),ae=Xt(ie,oe,Jt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Jt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),se=Jt("script,style,template"),ue=function(){function t(){_classCallCheck(this,t),this.sanitizedSomething=!1,this.buf=[]}return _createClass(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!re.hasOwnProperty(e))return this.sanitizedSomething=!0,!se.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(ae.hasOwnProperty(s)){var u=o.value;ie[s]&&(u=Yt(u)),oe[s]&&(n=u,u=(n=String(n)).split(",").map((function(t){return Yt(t.trim())})).join(", ")),this.buf.push(" ",a,'="',he(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();re.hasOwnProperty(e)&&!Zt.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(he(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(t.outerHTML));return e}}]),t}(),ce=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,le=/([^\#-~ |!])/g;function he(t){return t.replace(/&/g,"&amp;").replace(ce,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(le,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function fe(t,e){var n=null;try{$t=$t||new Wt(t);var r=e?String(e):"";n=$t.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=$t.getInertBodyElement(r)}while(r!==o);var a=new ue,s=a.sanitizeChildren(de(n)||n);return Bt()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=de(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function de(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pe=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),ve=function t(){_classCallCheck(this,t)},ye=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),ge=/^url\(([^)]+)\)$/;function me(t){if(!(t=String(t).trim()))return"";var e=t.match(ge);return e&&Yt(e[1])===e[1]||t.match(ye)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Bt()&&console.warn("WARNING: sanitizing unsafe style value ".concat(t," (see http://g.co/ng/security#xss).")),"unsafe")}var _e=/([A-Z])/g;function be(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}var we=[];function Ce(t,e,n,r,i,o,a,s,u){Tt(t)||(a?function(t,e,n,r,i){we.unshift(t,e,n,r,i)}(t,n,r,i,u):(we.length&&ke(),Ee(t,n,r,i,u)));var c=s||Nt(e[i],o);return c&&(e[i]=o),c}function ke(){for(var t=0;t<we.length;)Ee(we[t++],we[t++],we[t++],we[t++],we[t++]);we.length=0}function Ee(t,e,n,r,i){var o=!1;if(n){for(var a=!1,s=At(t);s<t.length;){var u=kt(t,s),c=mt(t,s);if(a=n<=c){n<c&&Ie(t,s,n,i),Te(t,!1,s,r,e);break}s+=3+u}a||(Ie(t,t.length,n,i),Te(t,!1,s,r,e),o=!0)}else Te(t,!0,3,r,e),o=!0;return o}function Ie(t,e,n,r){t.splice(e,0,r?1:0,1,n,null),Ct(t,e,1)}function Te(t,e,n,r,i){var o=n+3,a=o+kt(t,n);if(e||a--,"number"==typeof r){for(var s=o;s<=a;s++)if(t[s]===r)return;t.splice(a,0,r),t[n+1]++,Ct(t,n,wt(t,n)|1<<i)}else null!==r&&null==t[a]&&(t[a]=r)}function Se(t,e,n,r,i,o,a,s){return i&&r&&(function(t){if(!Tt(t)){var e=xt(n=t)?n[0]:n;e&&function(t,e){for(var n=1;n<e.length;n+=2){var r=Lt(e,n);r&&Ee(t,-1,Pt(e,n),r,!1)}}(t,e),function(t){gt(t,1|yt(t))}(t)}var n}(r),function(t,e){return t&&e>0}(r,o))?(function(t,e,n,r,i,o,a){for(var s,u=!0===(s=i)?-1:!1===s?0:s,c=Ae,l=(u&wt(t,3))>0?1:0,h=At(t);h<t.length;){var f=kt(t,h);if(u&wt(t,h)){for(var d=!1,p=mt(t,h),v=f-1,y=Et(t,h,v),g=0;g<v;g++){var m=Et(t,h,g),_=r[m];if(Ot(_)){o(e,n,p,a&&bt(t,h)?a(p,_,2):_,m),d=!0;break}}if(c){var b=c(t,e,n,r,o,a,l|(d?4:2),p,y);d=d||b}d||o(e,n,p,y)}h+=3+f}c&&c(t,e,n,r,o,a,l)}(r,t,e,n,o,a,s),!0):i}var Ae=null,Ne=function(t,e,n,r){var i=e.style;r?(r=r.toString(),t&&jt(t)?t.setStyle(e,n,r,Mt.DashCase):i&&i.setProperty(n,r)):t&&jt(t)?t.removeStyle(e,n,Mt.DashCase):i&&i.removeProperty(n)},Oe=function(t,e,n,r){if(""!==n){var i=e.classList;r?t&&jt(t)?t.addClass(e,n):i&&i.add(n):t&&jt(t)?t.removeClass(e,n):i&&i.remove(n)}},Re={},xe=function(t,e,n,r,i,o,a,s,u){var c=!1;if(kt(t,3)){var l=!0,h=!s;h&&-2&a&&(l=!1,c=!0),l&&(c=function t(e,n,r,i,o,a,s,u,c,l){var h,f=!1;if(c<kt(e,3)){for(var d=Et(e,3,c),p=i[d],v=((h=c)>=Le.length&&Le.push(1),Le[h]);v<p.length;){var y=Pt(p,v),g=u&&y>u,m=!g&&y===u,_=Lt(p,v),b=Ot(_),w=t(e,n,r,i,o,a,g?s:Pe(s,b,m),g?u:y,c+1,l);if(g){f||(f=w);break}if(!w&&De(s,m)){var C=m&&!b,k=C?l:_,E=C?d:null;o(n,r,y,a?a(y,k,3):k,E),w=!0}f=w&&m,v+=2}if(Le[c]=v,1===p.length||!u)return t(e,n,r,i,o,a,s,u,c+1,l)}return f}(t,e,n,r,i,o,a,s||null,0,u||null)),h&&function(){for(var t=0;t<Le.length;t++)Le[t]=1}()}return c};function Pe(t,e,n){var r=t;return e||4&t||!(n||1&t)?(r|=4,r&=-3):(r|=2,r&=-5),r}function De(t,e){var n=(1&t)>0;return n?4&t&&e&&(n=!1):2&t&&(n=e),n}var Le=[];function Me(t,e,n,r){for(var i=1;i<t.length;i+=2){var o=Pt(t,i);if(e<=o){var a=!1;if(o===e){var s=t[i];!r&&Ot(s)||(a=!0,Dt(t,i,n))}else a=!0,t.splice(i,0,e,n);return a}}return t.push(e,n),!0}var je=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Ue()},t}(),Ue=function(){},Fe=new D("The presence of this token marks an injector as being the root injector."),Ve=function(t,e,n){return new We(t,e,n)},qe=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?Ve(t,e,""):Ve(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=M,t.NULL=new H,t.ngInjectableDef=C({token:t,providedIn:"any",factory:function(){return q(L)}}),t.__NG_ELEMENT_ID__=-1,t}(),He=function(t){return t},ze=[],Be=He,Ge=function(){return Array.prototype.slice.call(arguments)},We=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe.NULL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,t),this.parent=n,this.source=r;var i=this._records=new Map;i.set(qe,{token:qe,fn:He,deps:ze,value:this,useNew:!1}),i.set(L,{token:L,fn:He,deps:ze,value:this,useNew:!1}),function t(e,n){if(n)if((n=A(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Qe("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Qe("Unexpected provider",n);var i=A(n.provide),o=function(t){var e=function(t){var e=ze,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6,o=A(n[r]);if(o instanceof Array)for(var a=0,s=o;a<s.length;a++){var u=s[a];u instanceof g||u==g?i|=1:u instanceof _||u==_?i&=-3:u instanceof m||u==m?i&=-5:o=u instanceof y?u.token:A(u)}e.push({token:o,options:i})}}else if(t.useExisting)e=[{token:A(t.useExisting),options:6}];else if(!(n||U in t))throw Qe("'deps' required",t);return e}(t),n=He,r=ze,i=!1,o=A(t.provide);if(U in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=A(t.useClass);else{if("function"!=typeof o)throw Qe("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==Ge)throw Ke(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:Ge,value:ze});i=n,a.deps.push({token:i,options:6})}var s=e.get(i);if(s&&s.fn==Ge)throw Ke(i);e.set(i,o)}}(i,e)}return _createClass(t,[{key:"get",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.Default,r=this._records.get(t);try{return function t(e,n,r,i,o,a){try{return function(e,n,r,i,o,a){var s;if(!n||a&b.SkipSelf)a&b.Self||(s=i.get(e,o,b.Default));else{if((s=n.value)==Be)throw Error("\u0275Circular dependency");if(s===ze){n.value=Be;var u=n.useNew,c=n.fn,l=n.deps,h=ze;if(l.length){h=[];for(var f=0;f<l.length;f++){var d=l[f],p=d.options,v=2&p?r.get(d.token):void 0;h.push(t(d.token,v,r,v||4&p?i:qe.NULL,1&p?null:qe.THROW_IF_NOT_FOUND,b.Default))}}n.value=s=u?_construct(c,_toConsumableArray(h)):c.apply(void 0,h)}}return s}(e,n,r,i,o,a)}catch(s){throw s instanceof Error||(s=new Error(s)),(s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(e),n&&n.value==Be&&(n.value=ze),s}}(t,r,this._records,this.parent,e,n)}catch(i){return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=z("\n"+t.message,i,"StaticInjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(i,t,0,this.source)}}},{key:"toString",value:function(){var t=[];return this._records.forEach((function(e,n){return t.push(I(n))})),"StaticInjector[".concat(t.join(", "),"]")}}]),t}();function Ke(t){return Qe("Cannot mix multi providers and regular providers",t)}function Qe(t,e){return new Error(z(t,e,"StaticInjectorError"))}var Ye=new D("AnalyzeForEntryComponents");function Je(t){var e=(void 0)[1];e.firstTemplatePass&&(function(t,e,n){var r=t.expandoInstructions,i=r.length;i>=2&&r[i-2]===null.hostBindings?r[i-1]=r[i-1]+n:r.push(null.hostBindings,n)}(e,0,t),function(t,e,n){for(var r=0;r<n;r++)(void 0).push(Re),t.blueprint.push(Re),t.data.push(null)}(e,0,t))}var Xe=null;function $e(){if(!Xe){var t=P.Symbol;if(t&&t.iterator)Xe=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Xe=r)}}return Xe}function Ze(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function tn(t,e){var n=nn(t),r=nn(e);return n&&r?function(t,e,n){for(var r=t[$e()](),i=e[$e()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,tn):!(n||!(t&&("object"==typeof t||"function"==typeof t))||r||!(e&&("object"==typeof e||"function"==typeof e)))||Ze(t,e)}var en=function(){function t(e){_classCallCheck(this,t),this.wrapped=e}return _createClass(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function nn(t){return!!rn(t)&&(Array.isArray(t)||!(t instanceof Map)&&$e()in t)}function rn(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function on(){(void 0)[1].firstTemplatePass&&(vt(hn(void 0),1),vt(ln(void 0),1))}function an(t){un(-1,ln(ft(-1,void 0)),(void 0)[7]++,t,!1,!1)}function sn(t){!function(t,e){un(-1,hn(ft(-1,void 0)),(void 0)[7]++,e,!0,!1)}(0,t)}function un(t,e,n,r,i,o){Ae=xe;var a=!1;if(r!==Re){var s=ht(ft(t,void 0),void 0),u=(void 0)[n];a=Nt(u,r);var c=function(t,e,n){var r=Array.isArray(t)?t:[null];r[0]=e||null;for(var i=1;i<r.length;i+=2)Dt(r,i,null);var o,a=null,s=!1;if("string"==typeof e?e.length&&(a=e.split(/\s+/),s=!0):(a=e?Object.keys(e):null,o=e),a)for(var u=0;u<a.length;u++){var c=a[u];Me(r,n?Rt(c):c,!!s||o[c],!0)}return r}(u,r,!i);i?function(t,e,n,r,i,o,a,s){var u=lt(n,St(t));!Ce(t,void 0,0,null,i,o,a,s,!1)&&!s||(u.classesBitMask|=1)}(e,0,s,0,n,c,o,a):function(t,e,n,r,i,o,a,s,u){var c=lt(n,St(t));!Ce(t,void 0,0,null,i,o,s,u,!0)&&!u||(c.stylesBitMask|=1)}(e,0,s,0,n,c,dt(),o,a)}return a}function cn(){var t=ft(-1,void 0),e=function(t,e){return 3===t.type?(void 0)[12]:null}(t),n=ht(t,void 0),r=dt();(function(t,e,n,r,i,o,a){var s=n?St(n):!!r&&St(r),u=It(n,1),c=It(r,1);we.length&&(u||c)&&ke();var l=lt(i,s),h=Se(t,i,void 0,n,u,l.classesBitMask,Oe,null),f=Se(t,i,void 0,r,c,l.stylesBitMask,Ne,a);h&&f?(st=null,ct=null,s&&function(t){ut.delete(t)}(i)):s&&function(t,e){ut.set(t,e)}(i,l)})(e,0,hn(t),ln(t),n,0,r),ot=null}function ln(t){return fn(t,!1)}function hn(t){return fn(t,!0)}function fn(t,e){var n=e?t.classes:t.styles;return xt(n)||(n=[n||[""],0,0,1,0,"--MAP--"],e?t.classes=n:t.styles=n),n}function dn(t){return!!t&&"function"==typeof t.then}function pn(t){return!!t&&"function"==typeof t.subscribe}var vn=function(){function t(e,n,r){_classCallCheck(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return _createClass(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}(),yn=function t(){_classCallCheck(this,t)};function gn(t){var e=Error("No component factory found for ".concat(I(t),". Did you add it to @NgModule.entryComponents?"));return e[mn]=t,e}var mn="ngComponent",_n=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){throw gn(t)}}]),t}(),bn=function(){var t=function t(){_classCallCheck(this,t)};return t.NULL=new _n,t}(),wn=function(){function t(e,n,r){_classCallCheck(this,t),this._parent=n,this._ngModule=r,this._factories=new Map;for(var i=0;i<e.length;i++){var o=e[i];this._factories.set(o.componentType,o)}}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw gn(t);return new Cn(e,this._ngModule)}}]),t}(),Cn=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).factory=t,r.ngModule=n,r.selector=t.selector,r.componentType=t.componentType,r.ngContentSelectors=t.ngContentSelectors,r.inputs=t.inputs,r.outputs=t.outputs,r}return _inherits(e,t),_createClass(e,[{key:"create",value:function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}]),e}(yn);function kn(){}var En=function(){var t=function t(e){_classCallCheck(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=function(){return In(t)},t}(),In=kn,Tn=function t(){_classCallCheck(this,t)},Sn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),An=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Nn()},t}(),Nn=kn,On=function t(e){_classCallCheck(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},Rn=new On("8.2.14"),xn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return nn(t)}},{key:"create",value:function(t){return new Dn(t)}}]),t}(),Pn=function(t,e){return e},Dn=function(){function t(e){_classCallCheck(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Pn}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Un(n,r,i)?e:n,a=Un(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!nn(t))throw new Error("Error trying to diff '".concat(I(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==o&&Ze(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Ze(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[$e()]();!(r=i.next()).done;)e(r.value)}(t,(function(t){i=e._trackByFn(n,t),null!==o&&Ze(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Ze(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ze(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ze(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Ln(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new jn),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),t}(),Ln=function t(e,n){_classCallCheck(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Mn=function(){function t(){_classCallCheck(this,t),this._head=null,this._tail=null}return _createClass(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ze(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),jn=function(){function t(){_classCallCheck(this,t),this.map=new Map}return _createClass(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Mn,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),t}();function Un(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Fn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return t instanceof Map||rn(t)}},{key:"create",value:function(){return new Vn}}]),t}(),Vn=function(){function t(){_classCallCheck(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||rn(t)))throw new Error("Error trying to diff '".concat(I(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new qn(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Ze(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),t}(),qn=function t(e){_classCallCheck(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Hn=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new _,new g]]}}}]),t}();return t.ngInjectableDef=C({token:t,providedIn:"root",factory:function(){return new t([new xn])}}),t}(),zn=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new _,new g]]}}}]),t}();return t.ngInjectableDef=C({token:t,providedIn:"root",factory:function(){return new t([new Fn])}}),t}(),Bn=[new Fn],Gn=new Hn([new xn]),Wn=new zn(Bn),Kn=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Qn(t,En)},t}(),Qn=kn,Yn=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Jn(t,En)},t}(),Jn=kn;function Xn(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(e,"'. Current value: '").concat(n,"'.");return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return $n(n,e),n}(i,t)}function $n(t,e){t.ngDebugContext=e,t.ngErrorLogger=e.logError.bind(e)}function Zn(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: ".concat(t))}function tr(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function er(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function nr(t,e){return t.nodes[e]}function rr(t,e){return t.nodes[e]}function ir(t,e){return t.nodes[e]}function or(t,e){return t.nodes[e]}function ar(t,e){return t.nodes[e]}var sr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},ur=function(){},cr=new Map;function lr(t){var e=cr.get(t);return e||(e=I(t)+"_"+cr.size,cr.set(t,e)),e}function hr(t,e,n,r){if(en.isWrapped(r)){r=en.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=en.unwrap(t.oldValues[i]);t.oldValues[i]=new en(o)}return r}function fr(t){return{id:"$$undefined",styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var dr=0;function pr(t,e,n,r){return!(!(2&t.state)&&Ze(t.oldValues[e.bindingIndex+n],r))}function vr(t,e,n,r){return!!pr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function yr(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!tn(i,r)){var o=e.bindings[n].name;throw Xn(sr.createDebugContext(t,e.nodeIndex),"".concat(o,": ").concat(i),"".concat(o,": ").concat(r),0!=(1&t.state))}}function gr(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function mr(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function _r(t,e,n,r){try{return gr(33554432&t.def.nodes[e].flags?rr(t,e).componentView:t),sr.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function br(t){return t.parent?rr(t.parent,t.parentNodeDef.nodeIndex):null}function wr(t){return t.parent?t.parentNodeDef.parent:null}function Cr(t,e){switch(201347067&e.flags){case 1:return rr(t,e.nodeIndex).renderElement;case 2:return nr(t,e.nodeIndex).renderText}}function kr(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Er(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function Ir(t){return 1<<t%32}function Tr(t){var e={},n=0,r={};return t&&t.forEach((function(t){var i=_slicedToArray(t,2),o=i[0],a=i[1];"number"==typeof o?(e[o]=a,n|=Ir(o)):r[o]=a})),{matchedQueries:e,references:r,matchedQueryIds:n}}function Sr(t,e){return t.map((function(t){var n,r,i;return Array.isArray(t)?(i=(n=_slicedToArray(t,2))[0],r=n[1]):(i=0,r=t),r&&("function"==typeof r||"object"==typeof r)&&e&&Object.defineProperty(r,"__source",{value:e,configurable:!0}),{flags:i,token:r,tokenKey:lr(r)}}))}function Ar(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Y.Native?rr(t,n.renderParent.nodeIndex).renderElement:void 0:e}var Nr=new WeakMap;function Or(t){var e=Nr.get(t);return e||((e=t((function(){return ur}))).factory=t,Nr.set(t,e)),e}function Rr(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(Cr(t,t.def.lastRenderRootNode))),xr(t,e,0,t.def.nodes.length-1,n,r,i)}function xr(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&Dr(t,u,e,i,o,a),s+=u.childCount}}function Pr(t,e,n,r,i,o){for(var a=t;a&&!kr(a);)a=a.parent;for(var s=a.parent,u=wr(a),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=s.def.nodes[l];h.ngContentIndex===e&&Dr(s,h,n,r,i,o),l+=h.childCount}if(!s.parent){var f=t.root.projectableNodes[e];if(f)for(var d=0;d<f.length;d++)Lr(t,f[d],n,r,i,o)}}function Dr(t,e,n,r,i,o){if(8&e.flags)Pr(t,e.ngContent.index,n,r,i,o);else{var a=Cr(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Lr(t,a,n,r,i,o),32&e.bindingFlags&&Lr(rr(t,e.nodeIndex).componentView,a,n,r,i,o)):Lr(t,a,n,r,i,o),16777216&e.flags)for(var s=rr(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)Rr(s[u],n,r,i,o);1&e.flags&&!e.element.name&&xr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function Lr(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var Mr=/^:([^:]+):(.+)$/;function jr(t){if(":"===t[0]){var e=t.match(Mr);return[e[1],e[2]]}return["",t]}function Ur(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function Fr(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,y,g,m,_){switch(t){case 1:return e+Vr(n)+r;case 2:return e+Vr(n)+r+Vr(i)+o;case 3:return e+Vr(n)+r+Vr(i)+o+Vr(a)+s;case 4:return e+Vr(n)+r+Vr(i)+o+Vr(a)+s+Vr(u)+c;case 5:return e+Vr(n)+r+Vr(i)+o+Vr(a)+s+Vr(u)+c+Vr(l)+h;case 6:return e+Vr(n)+r+Vr(i)+o+Vr(a)+s+Vr(u)+c+Vr(l)+h+Vr(f)+d;case 7:return e+Vr(n)+r+Vr(i)+o+Vr(a)+s+Vr(u)+c+Vr(l)+h+Vr(f)+d+Vr(p)+v;case 8:return e+Vr(n)+r+Vr(i)+o+Vr(a)+s+Vr(u)+c+Vr(l)+h+Vr(f)+d+Vr(p)+v+Vr(y)+g;case 9:return e+Vr(n)+r+Vr(i)+o+Vr(a)+s+Vr(u)+c+Vr(l)+h+Vr(f)+d+Vr(p)+v+Vr(y)+g+Vr(m)+_;default:throw new Error("Does not support more than 9 expressions")}}function Vr(t){return null!=t?t.toString():""}var qr=new Object,Hr=lr(qe),zr=lr(L),Br=lr(B);function Gr(t,e,n,r){return n=A(n),{index:-1,deps:Sr(r,I(e)),flags:t,token:e,value:n}}function Wr(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===Fe&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[lr(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function Kr(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qe.THROW_IF_NOT_FOUND,o=V(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(i=null),1&e.flags)return t._parent.get(e.token,i);var a=e.tokenKey;switch(a){case Hr:case zr:case Br:return t}var s,u=t._def.providersByKey[a];if(u){var c=t._providers[u.index];return void 0===c&&(c=t._providers[u.index]=Qr(t,u)),c===qr?void 0:c}if((s=k(e.token))&&(n=t,null!=(r=s).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(n,r.providedIn)||"root"===r.providedIn&&n._def.isRoot))){var l=t._providers.length;return t._def.providers[l]=t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:l,token:e.token},t._providers[l]=qr,t._providers[l]=Qr(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?i:t._parent.get(e.token,i)}finally{V(o)}}function Qr(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Kr(t,n[0]));case 2:return new e(Kr(t,n[0]),Kr(t,n[1]));case 3:return new e(Kr(t,n[0]),Kr(t,n[1]),Kr(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Kr(t,n[o]);return _construct(e,i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Kr(t,n[0]));case 2:return e(Kr(t,n[0]),Kr(t,n[1]));case 3:return e(Kr(t,n[0]),Kr(t,n[1]),Kr(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Kr(t,n[o]);return e.apply(void 0,i)}}(t,e.value,e.deps);break;case 2048:n=Kr(t,e.deps[0]);break;case 256:n=e.value}return n===qr||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?qr:n}function Yr(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,K(n,e),sr.dirtyParentQueries(r),Xr(r),r}function Jr(t,e,n){var r=e?Cr(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Rr(n,2,i,o,void 0)}function Xr(t){Rr(t,3,null,null,void 0)}var $r=new Object;function Zr(t,e,n,r,i,o){return new ti(t,e,n,r,i,o)}var ti=function(t){function e(t,n,r,i,o,a){var s;return _classCallCheck(this,e),(s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).selector=t,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return _inherits(e,t),_createClass(e,[{key:"create",value:function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=Or(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=sr.createRootView(t,e||[],n,i,r,$r),s=ir(a,o).instance;return n&&a.renderer.setAttribute(rr(a,0).renderElement,"ng-version",Rn.full),new ei(a,new oi(a),s)}},{key:"inputs",get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t}},{key:"outputs",get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}}]),e}(yn),ei=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._view=t,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return _inherits(e,t),_createClass(e,[{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(t){this._viewRef.onDestroy(t)}},{key:"location",get:function(){return new En(rr(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new ci(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}}]),e}(function(){return function t(){_classCallCheck(this,t)}}());function ni(t,e,n){return new ri(t,e,n)}var ri=function(){function t(e,n,r){_classCallCheck(this,t),this._view=e,this._elDef=n,this._data=r,this._embeddedViews=[]}return _createClass(t,[{key:"clear",value:function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Yr(this._data,t);sr.destroyView(e)}}},{key:"get",value:function(t){var e=this._embeddedViews[t];if(e){var n=new oi(e);return n.attachToViewContainerRef(this),n}return null}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Cn||(i=o.get(B));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a}},{key:"insert",value:function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a,s=t;return n=this._view,r=this._data,i=e,o=s._view,a=r.viewContainer._embeddedViews,null==i&&(i=a.length),o.viewContainerParent=n,W(a,i,o),function(t,e){var n=br(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(!(4&e.flags)){t.nodeFlags|=4,e.flags|=4;for(var n=e.parent;n;)n.childFlags|=4,n=n.parent}}(e.parent.def,e.parentNodeDef)}}(r,o),sr.dirtyParentQueries(o),Jr(r,i>0?a[i-1]:null,o),s.attachToViewContainerRef(this),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return n=this._data,r=s,i=e,o=n.viewContainer._embeddedViews,a=o[r],K(o,r),null==i&&(i=o.length),W(o,i,a),sr.dirtyParentQueries(a),Xr(a),Jr(n,i>0?o[i-1]:null,a),t}},{key:"indexOf",value:function(t){return this._embeddedViews.indexOf(t._view)}},{key:"remove",value:function(t){var e=Yr(this._data,t);e&&sr.destroyView(e)}},{key:"detach",value:function(t){var e=Yr(this._data,t);return e?new oi(e):null}},{key:"element",get:function(){return new En(this._data.renderElement)}},{key:"injector",get:function(){return new ci(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=wr(t),t=t.parent;return t?new ci(t,e):new ci(this._view,null)}},{key:"length",get:function(){return this._embeddedViews.length}}]),t}();function ii(t){return new oi(t)}var oi=function(){function t(e){_classCallCheck(this,t),this._view=e,this._viewContainerRef=null,this._appRef=null}return _createClass(t,[{key:"markForCheck",value:function(){gr(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{sr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}},{key:"checkNoChanges",value:function(){sr.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),sr.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,Xr(this._view),sr.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"rootNodes",get:function(){return Rr(this._view,0,void 0,void 0,t=[]),t;var t}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}}]),t}();function ai(t,e){return new si(t,e)}var si=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._parentView=t,r._def=n,r}return _inherits(e,t),_createClass(e,[{key:"createEmbeddedView",value:function(t){return new oi(sr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}},{key:"elementRef",get:function(){return new En(rr(this._parentView,this._def.nodeIndex).renderElement)}}]),e}(Kn);function ui(t,e){return new ci(t,e)}var ci=function(){function t(e,n){_classCallCheck(this,t),this.view=e,this.elDef=n}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe.THROW_IF_NOT_FOUND;return sr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:lr(t)},e)}}]),t}();function li(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=rr(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return nr(t,n.nodeIndex).renderText;if(20240&n.flags)return ir(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index ".concat(e))}function hi(t){return new fi(t.renderer)}var fi=function(){function t(e){_classCallCheck(this,t),this.delegate=e}return _createClass(t,[{key:"selectRootElement",value:function(t){return this.delegate.selectRootElement(t)}},{key:"createElement",value:function(t,e){var n=_slicedToArray(jr(e),2),r=n[0],i=n[1],o=this.delegate.createElement(i,r);return t&&this.delegate.appendChild(t,o),o}},{key:"createViewRoot",value:function(t){return t}},{key:"createTemplateAnchor",value:function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}},{key:"createText",value:function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}},{key:"projectNodes",value:function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}},{key:"attachViewAfter",value:function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)}},{key:"detachView",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}},{key:"destroyView",value:function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"listenGlobal",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"setElementProperty",value:function(t,e,n){this.delegate.setProperty(t,e,n)}},{key:"setElementAttribute",value:function(t,e,n){var r=_slicedToArray(jr(e),2),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)}},{key:"setBindingDebugInfo",value:function(t,e,n){}},{key:"setElementClass",value:function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}},{key:"setElementStyle",value:function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}},{key:"invokeElementMethod",value:function(t,e,n){t[e].apply(t,n)}},{key:"setText",value:function(t,e){this.delegate.setValue(t,e)}},{key:"animate",value:function(){throw new Error("Renderer.animate is no longer supported!")}}]),t}();function di(t,e,n,r){return new pi(t,e,n,r)}var pi=function(){function t(e,n,r,i){_classCallCheck(this,t),this._moduleType=e,this._parent=n,this._bootstrapComponents=r,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Qr(t,i))}}(this)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.Default,r=0;return n&b.SkipSelf?r|=1:n&b.Self&&(r|=4),Kr(this,{token:t,tokenKey:lr(t),flags:r},e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(I(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==qr){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach((function(t){return t()}))}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get(bn)}}]),t}(),vi=lr((function t(){_classCallCheck(this,t)})),yi=lr(An),gi=lr(En),mi=lr(Yn),_i=lr(Kn),bi=lr(je),wi=lr(qe),Ci=lr(L);function ki(t,e,n,r,i,o,a,s){var u=[];if(a)for(var c in a){var l=_slicedToArray(a[c],2),h=l[0],f=l[1];u[h]={flags:8,name:c,nonMinifiedName:f,ns:null,securityContext:null,suffix:null}}var d=[];if(s)for(var p in s)d.push({type:1,propName:p,target:null,eventName:s[p]});return Ti(t,e|=16384,n,r,i,i,o,u,d)}function Ei(t,e,n){return Ti(-1,t|=16,null,0,e,e,n)}function Ii(t,e,n,r,i){return Ti(-1,t,e,0,n,r,i)}function Ti(t,e,n,r,i,o,a,s,u){var c=Tr(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),s||(s=[]),o=A(o);var d=Sr(a,I(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Ur(s),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function Si(t,e){return Ri(t,e)}function Ai(t,e){for(var n=t;n.parent&&!kr(n);)n=n.parent;return xi(n.parent,wr(n),!0,e.provider.value,e.provider.deps)}function Ni(t,e){var n=xi(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName];if(!pn(o))throw new Error("@Output ".concat(i.propName," not initialized in '").concat(n.constructor.name,"'."));var a=o.subscribe(Oi(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=a.unsubscribe.bind(a)}return n}function Oi(t,e,n){return function(r){return _r(t,e,n,r)}}function Ri(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return xi(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(Di(t,e,n,i[0]));case 2:return r(Di(t,e,n,i[0]),Di(t,e,n,i[1]));case 3:return r(Di(t,e,n,i[0]),Di(t,e,n,i[1]),Di(t,e,n,i[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=Di(t,e,n,i[s]);return r.apply(void 0,a)}}(t,e.parent,n,r.value,r.deps);case 2048:return Di(t,e.parent,n,r.deps[0]);case 256:return r.value}}function xi(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(Di(t,e,n,i[0]));case 2:return new r(Di(t,e,n,i[0]),Di(t,e,n,i[1]));case 3:return new r(Di(t,e,n,i[0]),Di(t,e,n,i[1]),Di(t,e,n,i[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=Di(t,e,n,i[s]);return _construct(r,a)}}var Pi={};function Di(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qe.THROW_IF_NOT_FOUND;if(8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===bi&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case vi:return hi(Li(s,e,n));case yi:return Li(s,e,n).renderer;case gi:return new En(rr(s,e.nodeIndex).renderElement);case mi:return rr(s,e.nodeIndex).viewContainer;case _i:if(e.element.template)return rr(s,e.nodeIndex).template;break;case bi:return ii(Li(s,e,n));case wi:case Ci:return ui(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var c=ir(s,u.nodeIndex);return c||(c={instance:Ri(s,u)},s.nodes[u.nodeIndex]=c),c.instance}}n=kr(s),e=wr(s),s=s.parent,4&r.flags&&(s=null)}var l=o.root.injector.get(r.token,Pi);return l!==Pi||i===Pi?l:o.root.ngModule.injector.get(r.token,i)}function Li(t,e,n){var r;if(n)r=rr(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!kr(r);)r=r.parent;return r}function Mi(t,e,n,r,i,o){if(32768&n.flags){var a=rr(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=en.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new vn(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function ji(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&Fi(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=Ui(t,a,e,r)),a=a.parent}}function Ui(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Fi(t,i,o.flags&n,r++),i+=o.childCount}return r}function Fi(t,e,n,r){var i=ir(t,e);if(i){var o=i.instance;o&&(sr.setCurrentNode(t,e),1048576&n&&er(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&er(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var Vi=new D("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return pt}}),qi={},Hi=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),zi=void 0,Bi=["en",[["a","p"],["AM","PM"],zi],[["AM","PM"],zi,zi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zi,"{1} 'at' {0}",zi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];function Gi(t){return Wi(t)[Hi.PluralCase]}function Wi(t){var e=t.toLowerCase().replace(/_/g,"-"),n=qi[e];if(n)return n;var r=e.split("-")[0];if(n=qi[r])return n;if("en"===r)return Bi;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}var Ki=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).__isAsync=n,t}return _inherits(e,t),_createClass(e,[{key:"emit",value:function(t){_get(_getPrototypeOf(e.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,n,r){var o,a=function(t){return null},s=function(){return null};t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(a=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},n&&(a=this.__isAsync?function(t){setTimeout((function(){return n(t)}))}:function(t){n(t)}),r&&(s=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var u=_get(_getPrototypeOf(e.prototype),"subscribe",this).call(this,o,a,s);return t instanceof i.a&&t.add(u),u}}]),e}(r.a);function Qi(){return this._results[$e()]()}var Yi=function(){function t(){_classCallCheck(this,t),this.dirty=!0,this._results=[],this.changes=new Ki,this.length=0;var e=$e(),n=t.prototype;n[e]||(n[e]=Qi)}return _createClass(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),Ji=new D("Application Initializer"),Xi=function(){function t(e){var n=this;_classCallCheck(this,t),this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return _createClass(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();dn(i)&&e.push(i)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}(),$i=new D("AppId"),Zi=new D("Platform Initializer"),to=new D("Platform ID"),eo=new D("appBootstrapListener"),no=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}(),ro=new D("LocaleId");function io(){throw new Error("Runtime compiler is not loaded")}var oo,ao,so=io,uo=io,co=io,lo=io,ho=function(){function t(){_classCallCheck(this,t),this.compileModuleSync=so,this.compileModuleAsync=uo,this.compileModuleAndAllComponentsSync=co,this.compileModuleAndAllComponentsAsync=lo}return _createClass(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}(),fo=function t(){_classCallCheck(this,t)};var po,vo=!(!(po=P.wtf)||(oo=po.trace,!oo)||(ao=oo.events,0));function yo(t,e){return null}var go=vo?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ao.createScope(t,e)}:function(t,e){return yo},mo=vo?function(t,e){return oo.leaveScope(t,e),e}:function(t,e){return e},_o=Promise.resolve(0);function bo(t){"undefined"==typeof Zone?_o.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var wo=function(){function t(e){var n,r=e.enableLongStackTrace,i=void 0!==r&&r;if(_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ki(!1),this.onMicrotaskEmpty=new Ki(!1),this.onStable=new Ki(!1),this.onError=new Ki(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,r,i,o,a){try{return Io(n),t.invokeTask(r,i,o,a)}finally{To(n)}},onInvoke:function(t,e,r,i,o,a,s){try{return Io(n),t.invoke(r,i,o,a,s)}finally{To(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,Eo(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ko,Co,Co);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function Co(){}var ko={};function Eo(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function Io(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function To(t){t._nesting--,Eo(t)}var So=function(){function t(){_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ki,this.onMicrotaskEmpty=new Ki,this.onStable=new Ki,this.onError=new Ki}return _createClass(t,[{key:"run",value:function(t){return t()}},{key:"runGuarded",value:function(t){return t()}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t){return t()}}]),t}(),Ao=function(){function t(e){var n=this;_classCallCheck(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){wo.assertNotInAngularZone(),bo((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())bo((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(t){return t.timeoutId!==i})),t(r._didWork,r.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}(),No=function(){function t(){_classCallCheck(this,t),this._applications=new Map,xo.addToWindow(this)}return _createClass(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return xo.findTestabilityInTree(this,t,e)}}]),t}();function Oo(t){xo=t}var Ro,xo=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),Po=new D("AllowMultipleToken"),Do=function t(e,n){_classCallCheck(this,t),this.name=e,this.token=n};function Lo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(e),i=new D(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Mo();if(!o||o.injector.get(Po,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(Ro&&!Ro.destroyed&&!Ro.injector.get(Po,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ro=t.get(jo);var e=t.get(Zi,null);e&&e.forEach((function(t){return t()}))}(qe.create({providers:a,name:r}))}return function(t){var e=Mo();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Mo(){return Ro&&!Ro.destroyed?Ro:null}var jo=function(){function t(e){_classCallCheck(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new So:("zone.js"===n?void 0:n)||new wo({enableLongStackTrace:Bt()}),o=[{provide:wo,useValue:i}];return i.run((function(){var e=qe.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(qt,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return qo(r._modules,n)})),i.runOutsideAngular((function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})})),function(t,e,i){try{var o=((a=n.injector.get(Xi)).runInitializers(),a.donePromise.then((function(){return r._moduleDoBootstrap(n),n})));return dn(o)?o.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):o}catch(s){throw e.runOutsideAngular((function(){return t.handleError(s)})),s}var a}(a,i)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Uo({},n);return function(t,e,n){return t.get(fo).createCompiler([e]).compileModuleAsync(n)}(this.injector,r,t).then((function(t){return e.bootstrapModuleFactory(t,r)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(Vo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(I(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();function Uo(t,e){return Array.isArray(e)?e.reduce(Uo,t):Object.assign({},t,e)}var Fo,Vo=((Fo=function(){function t(e,n,r,i,s,c){var l=this;_classCallCheck(this,t),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Bt(),this._zone.onMicrotaskEmpty.subscribe({next:function(){l._zone.run((function(){l.tick()}))}});var h=new o.a((function(t){l._stable=l._zone.isStable&&!l._zone.hasPendingMacrotasks&&!l._zone.hasPendingMicrotasks,l._zone.runOutsideAngular((function(){t.next(l._stable),t.complete()}))})),d=new o.a((function(t){var e;l._zone.runOutsideAngular((function(){e=l._zone.onStable.subscribe((function(){wo.assertNotInAngularZone(),bo((function(){l._stable||l._zone.hasPendingMacrotasks||l._zone.hasPendingMicrotasks||(l._stable=!0,t.next(!0))}))}))}));var n=l._zone.onUnstable.subscribe((function(){wo.assertInAngularZone(),l._stable&&(l._stable=!1,l._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=Object(a.a)(h,d.pipe((function(t){return u()((e=p,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e})))}return _createClass(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof yn?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof Cn?null:this._injector.get(B),o=n.create(qe.NULL,[],e||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(Ao,null);return a&&o.injector.get(No).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Bt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0;var r=!0,i=!1,o=void 0;try{for(var a,s=this._views[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)a.value.detectChanges()}catch(d){i=!0,o=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}if(this._enforceNoNewChanges){var u=!0,c=!1,l=void 0;try{for(var h,f=this._views[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)h.value.checkNoChanges()}catch(d){c=!0,l=d}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}}}catch(p){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(p)}))}finally{this._runningTick=!1,mo(n)}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;qo(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(eo,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),qo(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}())._tickScope=go("ApplicationRef#tick()"),Fo);function qo(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Ho=function t(){_classCallCheck(this,t)},zo=function t(){_classCallCheck(this,t)},Bo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Go=function(){function t(e,n){_classCallCheck(this,t),this._compiler=e,this._config=n||Bo}return _createClass(t,[{key:"load",value:function(t){return this._compiler instanceof ho?this.loadFactory(t):this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var e=this,r=_slicedToArray(t.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),n("zn8P")(i).then((function(t){return t[o]})).then((function(t){return Wo(t,i,o)})).then((function(t){return e._compiler.compileModuleAsync(t)}))}},{key:"loadFactory",value:function(t){var e=_slicedToArray(t.split("#"),2),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(t){return t[i+o]})).then((function(t){return Wo(t,r,i)}))}}]),t}();function Wo(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var Ko=function t(e,n){_classCallCheck(this,t),this.name=e,this.callback=n},Qo=function(){function t(e,n,r){_classCallCheck(this,t),this.listeners=[],this.parent=null,this._debugContext=r,this.nativeNode=e,n&&n instanceof Yo&&n.addChild(this)}return _createClass(t,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),t}(),Yo=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n,r))).properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=t,i}return _inherits(e,t),_createClass(e,[{key:"addChild",value:function(t){t&&(this.childNodes.push(t),t.parent=this)}},{key:"removeChild",value:function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}},{key:"insertChildrenAfter",value:function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(_toConsumableArray(e))),e.forEach((function(e){e.parent&&e.parent.removeChild(e),t.parent=r})))}},{key:"insertBefore",value:function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}},{key:"query",value:function(t){return this.queryAll(t)[0]||null}},{key:"queryAll",value:function(t){var n=[];return function t(n,r,i){n.childNodes.forEach((function(n){n instanceof e&&(r(n)&&i.push(n),t(n,r,i))}))}(this,t,n),n}},{key:"queryAllNodes",value:function(t){var n=[];return function t(n,r,i){n instanceof e&&n.childNodes.forEach((function(n){r(n)&&i.push(n),n instanceof e&&t(n,r,i)}))}(this,t,n),n}},{key:"triggerEventHandler",value:function(t,e){this.listeners.forEach((function(n){n.name==t&&n.callback(e)}))}},{key:"children",get:function(){return this.childNodes.filter((function(t){return t instanceof e}))}}]),e}(Qo),Jo=new Map,Xo=function(t){return Jo.get(t)||null};function $o(t){Jo.set(t.nativeNode,t)}var Zo=Lo(null,"core",[{provide:to,useValue:"unknown"},{provide:jo,deps:[qe]},{provide:No,deps:[]},{provide:no,deps:[]}]);function ta(){return Gn}function ea(){return Wn}function na(t){return t||"en-US"}function ra(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}var ia=function t(e){_classCallCheck(this,t)};function oa(t,e,n,r,i,o){t|=1;var a=Tr(e),s=a.matchedQueries,u=a.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:a.matchedQueryIds,references:u,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Or(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||ur},provider:null,text:null,query:null,ngContent:null}}function aa(t,e,n,r,i,o){var a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;l||(l=ur);var d=Tr(n),p=d.matchedQueries,v=d.references,y=d.matchedQueryIds,g=null,m=null;o&&(g=(a=_slicedToArray(jr(o),2))[0],m=a[1]),u=u||[];for(var _=new Array(u.length),b=0;b<u.length;b++){var w=_slicedToArray(u[b],3),C=w[0],k=w[1],E=w[2],I=jr(k),T=_slicedToArray(I,2),S=T[0],A=T[1],N=void 0,O=void 0;switch(15&C){case 4:O=E;break;case 1:case 8:N=E}_[b]={flags:C,ns:S,name:A,nonMinifiedName:A,securityContext:N,suffix:O}}c=c||[];for(var R=new Array(c.length),x=0;x<c.length;x++){var P=_slicedToArray(c[x],2),D=P[0],L=P[1];R[x]={type:0,target:D,eventName:L,propName:null}}var M=(s=s||[]).map((function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1],i=_slicedToArray(jr(n),2);return[i[0],i[1],r]}));return f=function(t){if(t&&"$$undefined"===t.id){var e=null!=t.encapsulation&&t.encapsulation!==Y.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c".concat(dr++):"$$empty"}return t&&"$$empty"===t.id&&(t=null),t||null}(f),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:p,matchedQueryIds:y,references:v,ngContentIndex:r,childCount:i,bindings:_,bindingFlags:Ur(_),outputs:R,element:{ns:g,name:m,attrs:M,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:l||ur},provider:null,text:null,query:null,ngContent:null}}function sa(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=Ar(t,e,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o,!!i.componentRendererType&&i.componentRendererType.encapsulation===Y.ShadowDom);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var c=_slicedToArray(i.attrs[u],3),l=c[0],h=c[1],f=c[2];a.setAttribute(r,h,f,l)}return r}function ua(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=ca(t,n.nodeIndex,(h=o.eventName,(l=o.target)?"".concat(l,":").concat(h):h)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var c=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=c}var l,h}function ca(t,e,n){return function(r){return _r(t,e,n,r)}}function la(t,e,n,r){if(!vr(t,e,n,r))return!1;var i=e.bindings[n],o=rr(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(pe.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}function ha(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:Ir(e),bindings:r},ngContent:null}}function fa(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Er(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++){var o=t.def.nodes[i];67108864&o.flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&ar(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}}if(134217728&t.def.nodeFlags)for(var a=0;a<t.def.nodes.length;a++){var s=t.def.nodes[a];134217728&s.flags&&536870912&s.flags&&ar(t,a).setDirty(),a+=s.childCount}}function da(t,e){var n=ar(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=pa(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=ir(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=pa(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var c=a[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,s=!0}r[c.propName]=l}s&&n.notifyOnChanges()}}function pa(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(va(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=rr(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(pa(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=br(h);f&&f===u&&pa(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(var p=0;p<d.length;p++){var v=d[p];pa(v,0,v.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function va(t,e,n){if(null!=n)switch(n){case 1:return rr(t,e.nodeIndex).renderElement;case 0:return new En(rr(t,e.nodeIndex).renderElement);case 2:return rr(t,e.nodeIndex).template;case 3:return rr(t,e.nodeIndex).viewContainer;case 4:return ir(t,e.nodeIndex).instance}}function ya(t,e,n){var r=Ar(t,e,n);r&&Pr(t,n.ngContent.index,1,r,null,void 0)}function ga(t,e){return function(t,e,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:32,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Ur(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,t,new Array(e))}function ma(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function _a(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=Ar(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function ba(t,e){return(null!=t?t.toString():"")+e.suffix}function wa(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,c=null,l=null,h=!1,f=!1,d=null,p=0;p<e.length;p++){var v=e[p];if(v.nodeIndex=p,v.parent=c,v.bindingIndex=i,v.outputIndex=o,v.renderParent=l,a|=v.flags,u|=v.matchedQueryIds,v.element){var y=v.element;y.publicProviders=c?c.element.publicProviders:Object.create(null),y.allProviders=y.publicProviders,h=!1,f=!1,v.element.template&&(u|=v.element.template.nodeMatchedQueries)}if(ka(c,v,e.length),i+=v.bindings.length,o+=v.outputs.length,!l&&3&v.flags&&(d=v),20224&v.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var g=0!=(32768&v.flags);0==(8192&v.flags)||g?c.element.publicProviders[lr(v.provider.token)]=v:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[lr(v.provider.token)]=v),g&&(c.element.componentProvider=v)}if(c?(c.childFlags|=v.flags,c.directChildFlags|=v.flags,c.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(c.childMatchedQueries|=v.element.template.nodeMatchedQueries)):s|=v.flags,v.childCount>0)c=v,Ca(v)||(l=v);else for(;c&&p===c.nodeIndex+c.childCount;){var m=c.parent;m&&(m.childFlags|=c.childFlags,m.childMatchedQueries|=c.childMatchedQueries),l=(c=m)&&Ca(c)?c.renderParent:c}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||ur,updateRenderer:r||ur,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:d}}function Ca(t){return 0!=(1&t.flags)&&null===t.element.name}function ka(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(e.nodeIndex,"!"))}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(e.nodeIndex,"!"));if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(e.nodeIndex,"!"));if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(e.nodeIndex,"!"))}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(e.nodeIndex,"!"))}}function Ea(t,e,n,r){var i=Sa(t.root,t.renderer,t,e,n);return Aa(i,t.component,r),Na(i),i}function Ia(t,e,n){var r=Sa(t,t.renderer,null,null,e);return Aa(r,n,n),Na(r),r}function Ta(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,Sa(t.root,i,t,e.element.componentProvider,n)}function Sa(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function Aa(t,e,n){t.component=e,t.context=n}function Na(t){var e;kr(t)&&(e=rr(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i],a=void 0;switch(sr.setCurrentNode(t,i),201347067&o.flags){case 1:var s=sa(t,e,o),u=void 0;if(33554432&o.flags){var c=Or(o.element.componentView);u=sr.createComponentView(t,o,c,s)}ua(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?ai(t,o):void 0},16777216&o.flags&&(a.viewContainer=ni(t,o,a));break;case 2:a=_a(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:Si(t,o)});break;case 16:a={instance:Ai(t,o)};break;case 16384:(a=r[i])||(a={instance:Ni(t,o)}),32768&o.flags&&Aa(rr(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Yi;break;case 8:ya(t,e,o),a=void 0}r[i]=a}Ua(t,ja.CreateViewNodes),Ha(t,201326592,268435456,0)}function Oa(t){Pa(t),sr.updateDirectives(t,1),Fa(t,ja.CheckNoChanges),sr.updateRenderer(t,1),Ua(t,ja.CheckNoChanges),t.state&=-97}function Ra(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,tr(t,0,256),Pa(t),sr.updateDirectives(t,0),Fa(t,ja.CheckAndUpdate),Ha(t,67108864,536870912,0);var e=tr(t,256,512);ji(t,2097152|(e?1048576:0)),sr.updateRenderer(t,0),Ua(t,ja.CheckAndUpdate),Ha(t,134217728,536870912,0),ji(t,8388608|((e=tr(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,tr(t,768,1024)}function xa(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length,d=!1;return f>0&&la(t,e,0,n)&&(d=!0),f>1&&la(t,e,1,r)&&(d=!0),f>2&&la(t,e,2,i)&&(d=!0),f>3&&la(t,e,3,o)&&(d=!0),f>4&&la(t,e,4,a)&&(d=!0),f>5&&la(t,e,5,s)&&(d=!0),f>6&&la(t,e,6,u)&&(d=!0),f>7&&la(t,e,7,c)&&(d=!0),f>8&&la(t,e,8,l)&&(d=!0),f>9&&la(t,e,9,h)&&(d=!0),d}(t,e,n,r,i,o,a,s,u,c,l,h);case 2:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=!1,d=e.bindings,p=d.length;if(p>0&&vr(t,e,0,n)&&(f=!0),p>1&&vr(t,e,1,r)&&(f=!0),p>2&&vr(t,e,2,i)&&(f=!0),p>3&&vr(t,e,3,o)&&(f=!0),p>4&&vr(t,e,4,a)&&(f=!0),p>5&&vr(t,e,5,s)&&(f=!0),p>6&&vr(t,e,6,u)&&(f=!0),p>7&&vr(t,e,7,c)&&(f=!0),p>8&&vr(t,e,8,l)&&(f=!0),p>9&&vr(t,e,9,h)&&(f=!0),f){var v=e.text.prefix;p>0&&(v+=ba(n,d[0])),p>1&&(v+=ba(r,d[1])),p>2&&(v+=ba(i,d[2])),p>3&&(v+=ba(o,d[3])),p>4&&(v+=ba(a,d[4])),p>5&&(v+=ba(s,d[5])),p>6&&(v+=ba(u,d[6])),p>7&&(v+=ba(c,d[7])),p>8&&(v+=ba(l,d[8])),p>9&&(v+=ba(h,d[9]));var y=nr(t,e.nodeIndex).renderText;t.renderer.setValue(y,v)}return f}(t,e,n,r,i,o,a,s,u,c,l,h);case 16384:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=ir(t,e.nodeIndex),d=f.instance,p=!1,v=void 0,y=e.bindings.length;return y>0&&pr(t,e,0,n)&&(p=!0,v=Mi(t,f,e,0,n,v)),y>1&&pr(t,e,1,r)&&(p=!0,v=Mi(t,f,e,1,r,v)),y>2&&pr(t,e,2,i)&&(p=!0,v=Mi(t,f,e,2,i,v)),y>3&&pr(t,e,3,o)&&(p=!0,v=Mi(t,f,e,3,o,v)),y>4&&pr(t,e,4,a)&&(p=!0,v=Mi(t,f,e,4,a,v)),y>5&&pr(t,e,5,s)&&(p=!0,v=Mi(t,f,e,5,s,v)),y>6&&pr(t,e,6,u)&&(p=!0,v=Mi(t,f,e,6,u,v)),y>7&&pr(t,e,7,c)&&(p=!0,v=Mi(t,f,e,7,c,v)),y>8&&pr(t,e,8,l)&&(p=!0,v=Mi(t,f,e,8,l,v)),y>9&&pr(t,e,9,h)&&(p=!0,v=Mi(t,f,e,9,h,v)),v&&d.ngOnChanges(v),65536&e.flags&&er(t,256,e.nodeIndex)&&d.ngOnInit(),262144&e.flags&&d.ngDoCheck(),p}(t,e,n,r,i,o,a,s,u,c,l,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings,d=!1,p=f.length;if(p>0&&vr(t,e,0,n)&&(d=!0),p>1&&vr(t,e,1,r)&&(d=!0),p>2&&vr(t,e,2,i)&&(d=!0),p>3&&vr(t,e,3,o)&&(d=!0),p>4&&vr(t,e,4,a)&&(d=!0),p>5&&vr(t,e,5,s)&&(d=!0),p>6&&vr(t,e,6,u)&&(d=!0),p>7&&vr(t,e,7,c)&&(d=!0),p>8&&vr(t,e,8,l)&&(d=!0),p>9&&vr(t,e,9,h)&&(d=!0),d){var v,y=or(t,e.nodeIndex);switch(201347067&e.flags){case 32:v=new Array(f.length),p>0&&(v[0]=n),p>1&&(v[1]=r),p>2&&(v[2]=i),p>3&&(v[3]=o),p>4&&(v[4]=a),p>5&&(v[5]=s),p>6&&(v[6]=u),p>7&&(v[7]=c),p>8&&(v[8]=l),p>9&&(v[9]=h);break;case 64:v={},p>0&&(v[f[0].name]=n),p>1&&(v[f[1].name]=r),p>2&&(v[f[2].name]=i),p>3&&(v[f[3].name]=o),p>4&&(v[f[4].name]=a),p>5&&(v[f[5].name]=s),p>6&&(v[f[6].name]=u),p>7&&(v[f[7].name]=c),p>8&&(v[f[8].name]=l),p>9&&(v[f[9].name]=h);break;case 128:var g=n;switch(p){case 1:v=g.transform(n);break;case 2:v=g.transform(r);break;case 3:v=g.transform(r,i);break;case 4:v=g.transform(r,i,o);break;case 5:v=g.transform(r,i,o,a);break;case 6:v=g.transform(r,i,o,a,s);break;case 7:v=g.transform(r,i,o,a,s,u);break;case 8:v=g.transform(r,i,o,a,s,u,c);break;case 9:v=g.transform(r,i,o,a,s,u,c,l);break;case 10:v=g.transform(r,i,o,a,s,u,c,l,h)}}y.value=v}return d}(t,e,n,r,i,o,a,s,u,c,l,h);default:throw"unreachable"}}(t,e,r,i,o,a,s,u,c,l,h,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)la(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)vr(t,e,o,n[o])&&(i=!0);if(i){for(var a="",s=0;s<n.length;s++)a+=ba(n[s],r[s]);a=e.text.prefix+a;var u=nr(t,e.nodeIndex).renderText;t.renderer.setValue(u,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=ir(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)pr(t,e,s,n[s])&&(o=!0,a=Mi(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&er(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)vr(t,e,o,n[o])&&(i=!0);if(i){var a,s=or(t,e.nodeIndex);switch(201347067&e.flags){case 32:a=n;break;case 64:a={};for(var u=0;u<n.length;u++)a[r[u].name]=n[u];break;case 128:var c=n[0],l=n.slice(1);a=c.transform.apply(c,_toConsumableArray(l))}s.value=a}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Pa(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=rr(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,mr(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Da(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length;f>0&&yr(t,e,0,n),f>1&&yr(t,e,1,r),f>2&&yr(t,e,2,i),f>3&&yr(t,e,3,o),f>4&&yr(t,e,4,a),f>5&&yr(t,e,5,s),f>6&&yr(t,e,6,u),f>7&&yr(t,e,7,c),f>8&&yr(t,e,8,l),f>9&&yr(t,e,9,h)}(t,e,r,i,o,a,s,u,c,l,h,f):function(t,e,n){for(var r=0;r<n.length;r++)yr(t,e,r,n[r])}(t,e,r),!1}function La(t,e){if(ar(t,e.nodeIndex).dirty)throw Xn(sr.createDebugContext(t,e.nodeIndex),"Query ".concat(e.query.id," not dirty"),"Query ".concat(e.query.id," dirty"),0!=(1&t.state))}function Ma(t){if(!(128&t.state)){if(Fa(t,ja.Destroy),Ua(t,ja.Destroy),ji(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=br(t);if(e){var n=e.template._projectedViews;n&&(K(n,n.indexOf(t)),sr.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(rr(t,n).renderElement):2&r.flags?t.renderer.destroyNode(nr(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&ar(t,n).destroy()}}(t),kr(t)&&t.renderer.destroy(),t.state|=128}}var ja=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Ua(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?Va(rr(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Fa(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=rr(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)Va(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Va(t,e){var n=t.state;switch(e){case ja.CheckNoChanges:0==(128&n)&&(12==(12&n)?Oa(t):64&n&&qa(t,ja.CheckNoChangesProjectedViews));break;case ja.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Oa(t):64&n&&qa(t,e));break;case ja.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Ra(t):64&n&&qa(t,ja.CheckAndUpdateProjectedViews));break;case ja.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Ra(t):64&n&&qa(t,e));break;case ja.Destroy:Ma(t);break;case ja.CreateViewNodes:Na(t)}}function qa(t,e){Fa(t,e),Ua(t,e)}function Ha(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(sr.setCurrentNode(t,a.nodeIndex),r){case 0:da(t,a);break;case 1:La(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var za=!1;function Ba(t,e,n,r,i,o){var a=i.injector.get(Tn);return Ia(Wa(t,i,a,e,n),r,o)}function Ga(t,e,n,r,i,o){var a=i.injector.get(Tn),s=Wa(t,i,new Es(a),e,n),u=ns(r);return Cs(hs.create,Ia,null,[s,u,o])}function Wa(t,e,n,r,i){var o=e.injector.get(ve),a=e.injector.get(qt),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function Ka(t,e,n,r){var i=ns(n);return Cs(hs.create,Ea,null,[t,e,i,r])}function Qa(t,e,n,r){return n=$a.get(e.element.componentProvider.provider.token)||ns(n),Cs(hs.create,Ta,null,[t,e,n,r])}function Ya(t,e,n,r){return di(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Ja.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach((function(t){var r=Ja.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)})),t.modules.forEach((function(t){Xa.forEach((function(r,i){k(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)}))})),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasOverrides,r=e.hasDeprecatedOverrides;return n?(function(t){for(var e=0;e<t.providers.length;e++){var n=t.providers[e];r&&(n.flags|=4096);var i=Ja.get(n.token);i&&(n.flags=-3841&n.flags|i.flags,n.deps=Sr(i.deps),n.value=i.value)}if(Xa.size>0){var o=new Set(t.modules);Xa.forEach((function(e,n){if(o.has(k(n).providedIn)){var i={token:n,flags:e.flags|(r?4096:0),deps:Sr(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[lr(n)]=i}}))}}(t=t.factory((function(){return ur}))),t):t}(r))}var Ja=new Map,Xa=new Map,$a=new Map;function Za(t){var e;Ja.set(t.token,t),"function"==typeof t.token&&(e=k(t.token))&&"function"==typeof e.providedIn&&Xa.set(t.token,t)}function ts(t,e){var n=Or(e.viewDefFactory),r=Or(n.nodes[0].element.componentView);$a.set(t,r)}function es(){Ja.clear(),Xa.clear(),$a.clear()}function ns(t){if(0===Ja.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ja.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory((function(){return ur}));for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Ja.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=Sr(o.deps),i.value=o.value)}}}}function rs(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=t.def.nodes[e];return xa(t,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?or(t,e).value:void 0}function is(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=t.def.nodes[e];return Da(t,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?or(t,e).value:void 0}function os(t){return Cs(hs.detectChanges,Ra,null,[t])}function as(t){return Cs(hs.checkNoChanges,Oa,null,[t])}function ss(t){return Cs(hs.destroy,Ma,null,[t])}var us,cs,ls,hs=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function fs(t,e){cs=t,ls=e}function ds(t,e,n,r){return fs(t,e),Cs(hs.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function ps(t,e){if(128&t.state)throw Zn(hs[us]);return fs(t,ms(t,0)),t.def.updateDirectives((function(t,n,r){for(var i=t.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===e?ys(t,i,r,a):gs(t,i,r,a),16384&i.flags&&fs(t,ms(t,n)),224&i.flags?or(t,i.nodeIndex).value:void 0}),t)}function vs(t,e){if(128&t.state)throw Zn(hs[us]);return fs(t,_s(t,0)),t.def.updateRenderer((function(t,n,r){for(var i=t.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===e?ys(t,i,r,a):gs(t,i,r,a),3&i.flags&&fs(t,_s(t,n)),224&i.flags?or(t,i.nodeIndex).value:void 0}),t)}function ys(t,e,n,r){if(xa.apply(void 0,[t,e,n].concat(_toConsumableArray(r)))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],u=i[a];8&s.flags&&(o[(d=s.nonMinifiedName,p=void 0,p=d.replace(/[$@]/g,"_"),"ng-reflect-".concat(d=p.replace(_e,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"-"+e[1].toLowerCase()}))))]=be(u))}var c=e.parent,l=rr(t,c.nodeIndex).renderElement;if(c.element.name)for(var h in o){var f=o[h];null!=f?t.renderer.setAttribute(l,h,f):t.renderer.removeAttribute(l,h)}else t.renderer.setValue(l,"bindings=".concat(JSON.stringify(o,null,2)))}}var d,p}function gs(t,e,n,r){Da.apply(void 0,[t,e,n].concat(_toConsumableArray(r)))}function ms(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function _s(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var bs=function(){function t(e,n){_classCallCheck(this,t),this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];for(var r=this.nodeDef,i=e;r&&0==(1&r.flags);)r=r.parent;if(!r)for(;!r&&i;)r=wr(i),i=i.parent;this.elDef=r,this.elView=i}return _createClass(t,[{key:"logError",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,o;2&this.nodeDef.flags?(i=this.view.def,o=this.nodeDef.nodeIndex):(i=this.elView.def,o=this.elDef.nodeIndex);var a=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(i,o),s=-1;i.factory((function(){var e;return++s===a?(e=t.error).bind.apply(e,[t].concat(n)):ur})),s<a&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,n))}},{key:"elOrCompView",get:function(){return rr(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return ui(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}},{key:"references",get:function(){var t={};if(this.elDef){ws(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&ws(this.elView,n,t),e+=n.childCount}}return t}},{key:"componentRenderElement",get:function(){var t=function(t){for(;t&&!kr(t);)t=t.parent;return t.parent?rr(t.parent,wr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?Cr(this.view,this.nodeDef):Cr(this.elView,this.elDef)}}]),t}();function ws(t,e,n){for(var r in e.references)n[r]=va(t,e,e.references[r])}function Cs(t,e,n,r){var i,o,a=us,s=cs,u=ls;try{us=t;var c=e.apply(n,r);return cs=s,ls=u,us=a,c}catch(l){if(Ut(l)||!cs)throw l;throw i=l,o=ks(),i instanceof Error||(i=new Error(i.toString())),$n(i,o),i}}function ks(){return cs?new bs(cs,ls):null}var Es=function(){function t(e){_classCallCheck(this,t),this.delegate=e}return _createClass(t,[{key:"createRenderer",value:function(t,e){return new Is(this.delegate.createRenderer(t,e))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),t}(),Is=function(){function t(e){_classCallCheck(this,t),this.delegate=e,this.debugContextFactory=ks,this.data=this.delegate.data}return _createClass(t,[{key:"createDebugContext",value:function(t){return this.debugContextFactory(t)}},{key:"destroyNode",value:function(t){var e=Xo(t);!function(t){Jo.delete(t.nativeNode)}(e),e instanceof Qo&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(t,e){var n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){var i=new Yo(n,null,r);i.name=t,$o(i)}return n}},{key:"createComment",value:function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&$o(new Qo(e,null,n)),e}},{key:"createText",value:function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&$o(new Qo(e,null,n)),e}},{key:"appendChild",value:function(t,e){var n=Xo(t),r=Xo(e);n&&r&&n instanceof Yo&&n.addChild(r),this.delegate.appendChild(t,e)}},{key:"insertBefore",value:function(t,e,n){var r=Xo(t),i=Xo(e),o=Xo(n);r&&i&&r instanceof Yo&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)}},{key:"removeChild",value:function(t,e){var n=Xo(t),r=Xo(e);n&&r&&n instanceof Yo&&n.removeChild(r),this.delegate.removeChild(t,e)}},{key:"selectRootElement",value:function(t,e){var n=this.delegate.selectRootElement(t,e),r=ks();return r&&$o(new Yo(n,null,r)),n}},{key:"setAttribute",value:function(t,e,n,r){var i=Xo(t);i&&i instanceof Yo&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){var r=Xo(t);r&&r instanceof Yo&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){var n=Xo(t);n&&n instanceof Yo&&(n.classes[e]=!0),this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){var n=Xo(t);n&&n instanceof Yo&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){var i=Xo(t);i&&i instanceof Yo&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){var r=Xo(t);r&&r instanceof Yo&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){var r=Xo(t);r&&r instanceof Yo&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){if("string"!=typeof t){var r=Xo(t);r&&r.listeners.push(new Ko(e,n))}return this.delegate.listen(t,e,n)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setValue",value:function(t,e){return this.delegate.setValue(t,e)}}]),t}();function Ts(t,e,n){return new Ss(t,e,n)}var Ss=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).moduleType=t,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return _inherits(e,t),_createClass(e,[{key:"create",value:function(t){!function(){if(!za){za=!0;var t=Bt()?{setCurrentNode:fs,createRootView:Ga,createEmbeddedView:Ka,createComponentView:Qa,createNgModuleRef:Ya,overrideProvider:Za,overrideComponentView:ts,clearOverrides:es,checkAndUpdateView:os,checkNoChangesView:as,destroyView:ss,createDebugContext:function(t,e){return new bs(t,e)},handleEvent:ds,updateDirectives:ps,updateRenderer:vs}:{setCurrentNode:function(){},createRootView:Ba,createEmbeddedView:Ea,createComponentView:Ta,createNgModuleRef:di,overrideProvider:ur,overrideComponentView:ur,clearOverrides:ur,checkAndUpdateView:Ra,checkNoChangesView:Oa,destroyView:Ma,createDebugContext:function(t,e){return new bs(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?rs:is,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?rs:is,t)}};sr.setCurrentNode=t.setCurrentNode,sr.createRootView=t.createRootView,sr.createEmbeddedView=t.createEmbeddedView,sr.createComponentView=t.createComponentView,sr.createNgModuleRef=t.createNgModuleRef,sr.overrideProvider=t.overrideProvider,sr.overrideComponentView=t.overrideComponentView,sr.clearOverrides=t.clearOverrides,sr.checkAndUpdateView=t.checkAndUpdateView,sr.checkNoChangesView=t.checkNoChangesView,sr.destroyView=t.destroyView,sr.resolveDep=Di,sr.createDebugContext=t.createDebugContext,sr.handleEvent=t.handleEvent,sr.updateDirectives=t.updateDirectives,sr.updateRenderer=t.updateRenderer,sr.dirtyParentQueries=fa}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(Or(this._ngModuleDefFactory));return sr.createNgModuleRef(this.moduleType,t||qe.NULL,this._bootstrapComponents,e)}}]),e}(G)},"9ppp":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);var i=r},"9rNa":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function t(e,n){_classCallCheck(this,t),this.name=e,this.amount=n}},ABqa:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),a=n("S+S0"),s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},u=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return o.__extends(e,t),e}(Error),c=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function l(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var h,f=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return l(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?l(t,(function(t){return e.decode(t)})):t},t}(),d=function(){function t(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new f,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new c(e,n),this.cancelAllRequests=new Promise((function(t){i.deleteService=function(){return t()}}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+n+"/"+t:"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a,c,l,h,f,d;return o.__generator(this,(function(o){switch(o.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},a=new Headers,[4,this.contextProvider.getContext()];case 1:return(c=o.sent()).authToken&&a.append("Authorization","Bearer "+c.authToken),c.instanceIdToken&&a.append("Firebase-Instance-ID-Token",c.instanceIdToken),l=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,a),(p=l,new Promise((function(t,e){setTimeout((function(){e(new u("deadline-exceeded","deadline-exceeded"))}),p)}))),this.cancelAllRequests])];case 2:if(!(h=o.sent()))throw new u("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var c=a.status;if("string"==typeof c){if(!s[c])return new u("internal","internal");r=s[c],i=c}var l=a.message;"string"==typeof l&&(i=l),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(h){}return"ok"===r?null:new u(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new u("internal","Response is not valid JSON object.");if(void 0===(d=h.json.data)&&(d=h.json.result),void 0===d)throw new u("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}var p}))}))},t}();h={Functions:d},i.INTERNAL.registerComponent(new a.Component("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new d(n,r,i,e)}),"PUBLIC").setServiceProps(h).setMultipleInstances(!0)),i.registerVersion("@firebase/functions","0.4.36")},CRDf:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("kJWO"),i=function(t){return function(e){var n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},Cfvw:function(t,e,n){"use strict";var r=n("HDdC"),i=n("c2HN"),o=n("I55L"),a=n("kJWO"),s=n("Lhse"),u=n("yCtX"),c=n("quSY"),l=n("a7t3"),h=n("pLzU"),f=n("CRDf"),d=n("SeVD");function p(t,e){if(!e)return t instanceof r.a?t:new r.a(Object(d.a)(t));if(null!=t){if(function(t){return t&&"function"==typeof t[a.a]}(t))return function(t,e){return new r.a(e?function(n){var r=new c.a;return r.add(e.schedule((function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}:Object(f.a)(t))}(t,e);if(Object(i.a)(t))return function(t,e){return new r.a(e?function(n){var r=new c.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}:Object(l.a)(t))}(t,e);if(Object(o.a)(t))return Object(u.a)(t,e);if(function(t){return t&&"function"==typeof t[s.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(e?function(n){var r,i=new c.a;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[s.a](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}:Object(h.a)(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",(function(){return p}))},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},DQLy:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("2Vo4"),o=n("HDdC"),a=n("XNiG"),s=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).scheduler=t,r.work=n,r}return _inherits(e,t),_createClass(e,[{key:"schedule",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n>0?_get(_getPrototypeOf(e.prototype),"schedule",this).call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,n){return n>0||this.closed?_get(_getPrototypeOf(e.prototype),"execute",this).call(this,t,n):this._execute(t,n)}},{key:"requestAsyncId",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?_get(_getPrototypeOf(e.prototype),"requestAsyncId",this).call(this,t,n,r):t.flush(this)}}]),e}(function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).scheduler=t,r.work=n,r.pending=!1,r}return _inherits(e,t),_createClass(e,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),e}(function(t){function e(t,n){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))}return _inherits(e,t),_createClass(e,[{key:"schedule",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),e}(n("quSY").a))),u=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;_classCallCheck(this,t),this.SchedulerAction=e,this.now=n}return _createClass(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),c=new(function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.now;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,(function(){return e.delegate&&e.delegate!==_assertThisInitialized(n)?e.delegate.now():r()})))).actions=[],n.active=!1,n.scheduled=void 0,n}return _inherits(e,t),_createClass(e,[{key:"schedule",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return e.delegate&&e.delegate!==this?e.delegate.schedule(t,n,r):_get(_getPrototypeOf(e.prototype),"schedule",this).call(this,t,n,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),e}(u)))(s),l=n("7o/Q"),h=n("WMd4"),f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this.scheduler=e,this.delay=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new d(t,this.scheduler,this.delay))}}]),t}(),d=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).scheduler=n,r.delay=i,r}return _inherits(e,t),_createClass(e,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new p(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(h.a.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(h.a.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(h.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),e}(l.a),p=function t(e,n){_classCallCheck(this,t),this.notification=e,this.destination=n},v=n("zp1y"),y=n("Kqap"),g=n("lJxs"),m=function(){function t(e,n){_classCallCheck(this,t),this.compare=e,this.keySelector=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new _(t,this.compare,this.keySelector))}}]),t}(),_=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return _inherits(e,t),_createClass(e,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),e}(l.a);function b(t,e){if("function"==typeof e)return C(t,(function(){return Object.assign({},e.apply(void 0,arguments),{type:t})}));switch(e?e._as:"empty"){case"empty":return C(t,(function(){return{type:t}}));case"props":return C(t,(function(e){return Object.assign({},e,{type:t})}));default:throw new Error("Unexpected config.")}}function w(){return{_as:"props",_p:void 0}}function C(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}n.d(e,"B",(function(){return bt})),n.d(e,"U",(function(){return gt})),n.d(e,"A",(function(){return _t})),n.d(e,"z",(function(){return mt})),n.d(e,"S",(function(){return St})),n.d(e,"Q",(function(){return It})),n.d(e,"P",(function(){return Et})),n.d(e,"O",(function(){return kt})),n.d(e,"R",(function(){return Tt})),n.d(e,"T",(function(){return At})),n.d(e,"N",(function(){return B})),n.d(e,"I",(function(){return L})),n.d(e,"H",(function(){return D})),n.d(e,"K",(function(){return j})),n.d(e,"F",(function(){return R})),n.d(e,"D",(function(){return T})),n.d(e,"E",(function(){return N})),n.d(e,"L",(function(){return q})),n.d(e,"C",(function(){return I})),n.d(e,"J",(function(){return M})),n.d(e,"G",(function(){return P})),n.d(e,"M",(function(){return z})),n.d(e,"u",(function(){return b})),n.d(e,"x",(function(){return w})),n.d(e,"n",(function(){return nt})),n.d(e,"y",(function(){return rt})),n.d(e,"s",(function(){return G})),n.d(e,"t",(function(){return W})),n.d(e,"v",(function(){return K})),n.d(e,"a",(function(){return E})),n.d(e,"g",(function(){return X})),n.d(e,"i",(function(){return Y})),n.d(e,"h",(function(){return J})),n.d(e,"k",(function(){return $})),n.d(e,"w",(function(){return st})),n.d(e,"l",(function(){return tt})),n.d(e,"m",(function(){return Z})),n.d(e,"d",(function(){return S})),n.d(e,"f",(function(){return A})),n.d(e,"c",(function(){return O})),n.d(e,"j",(function(){return x})),n.d(e,"e",(function(){return V})),n.d(e,"b",(function(){return U})),n.d(e,"q",(function(){return F})),n.d(e,"r",(function(){return H})),n.d(e,"p",(function(){return wt})),n.d(e,"o",(function(){return Ct}));var k="@ngrx/store/init",E=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,{type:k}))}return _inherits(e,t),_createClass(e,[{key:"next",value:function(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===t)throw new TypeError("Actions must be objects");if(void 0===t.type)throw new TypeError("Actions must have a type property");_get(_getPrototypeOf(e.prototype),"next",this).call(this,t)}},{key:"complete",value:function(){}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(e.prototype),"complete",this).call(this)}}]),e}(i.a),I=new r.o("@ngrx/store Internal Root Guard"),T=new r.o("@ngrx/store Internal Initial State"),S=new r.o("@ngrx/store Initial State"),A=new r.o("@ngrx/store Reducer Factory"),N=new r.o("@ngrx/store Internal Reducer Factory Provider"),O=new r.o("@ngrx/store Initial Reducers"),R=new r.o("@ngrx/store Internal Initial Reducers"),x=new r.o("@ngrx/store Store Features"),P=new r.o("@ngrx/store Internal Store Reducers"),D=new r.o("@ngrx/store Internal Feature Reducers"),L=new r.o("@ngrx/store Internal Feature Configs"),M=new r.o("@ngrx/store Internal Store Features"),j=new r.o("@ngrx/store Internal Feature Reducers Token"),U=new r.o("@ngrx/store Feature Reducers"),F=new r.o("@ngrx/store User Provided Meta Reducers"),V=new r.o("@ngrx/store Meta Reducers"),q=new r.o("@ngrx/store Internal Resolved Meta Reducers"),H=new r.o("@ngrx/store User Runtime Checks Config"),z=new r.o("@ngrx/store Internal User Runtime Checks Config"),B=new r.o("@ngrx/store Internal Runtime Checks");function G(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i];"function"==typeof t[o]&&(r[o]=t[o])}var a=Object.keys(r);return function(t,n){t=void 0===t?e:t;for(var i=!1,o={},s=0;s<a.length;s++){var u=a[s],c=t[u],l=(0,r[u])(c,n);o[u]=l,i=i||l!==c}return i?o:t}}function W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){if(0===e.length)return t;var n=e[e.length-1];return e.slice(0,-1).reduceRight((function(t,e){return e(t)}),n(t))}}function K(t,e){return Array.isArray(e)&&e.length>0&&(t=W.apply(null,[].concat(_toConsumableArray(e),[t]))),function(e,n){var r=t(e);return function(t,e){return r(t=void 0===t?n:t,e)}}}var Q,Y=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(o.a),J=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(E),X=function(t){function e(t,n,r,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,i(r,n)))).dispatcher=t,o.initialState=n,o.reducers=r,o.reducerFactory=i,o}return _inherits(e,t),_createClass(e,[{key:"addFeature",value:function(t){this.addFeatures([t])}},{key:"addFeatures",value:function(t){var e=t.reduce((function(t,e){var n=e.reducers,r=e.reducerFactory,i=e.metaReducers,o=e.initialState,a=e.key,s="function"==typeof n?function(t){var e=Array.isArray(t)&&t.length>0?W.apply(void 0,_toConsumableArray(t)):function(t){return t};return function(t,n){return t=e(t),function(e,r){return t(e=void 0===e?n:e,r)}}}(i)(n,o):K(r,i)(n,o);return t[a]=s,t}),{});this.addReducers(e)}},{key:"removeFeature",value:function(t){this.removeFeatures([t])}},{key:"removeFeatures",value:function(t){this.removeReducers(t.map((function(t){return t.key})))}},{key:"addReducer",value:function(t,e){this.addReducers(_defineProperty({},t,e))}},{key:"addReducers",value:function(t){this.reducers=Object.assign({},this.reducers,t),this.updateReducers(Object.keys(t))}},{key:"removeReducer",value:function(t){this.removeReducers([t])}},{key:"removeReducers",value:function(t){var e=this;t.forEach((function(t){var n,r;e.reducers=(n=e.reducers,r=t,Object.keys(n).filter((function(t){return t!==r})).reduce((function(t,e){return Object.assign(t,_defineProperty({},e,n[e]))}),{}))})),this.updateReducers(t)}},{key:"updateReducers",value:function(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}},{key:"ngOnDestroy",value:function(){this.complete()}}]),e}(i.a),$=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"ngOnDestroy",value:function(){this.complete()}}]),e}(a.a),Z=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(o.a),tt=((Q=function(t){function e(t,n,r,i){var o;_classCallCheck(this,e),o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,i));var a={state:i},s=t.pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new f(t,e))}}(c)).pipe(Object(v.a)(n)).pipe(Object(y.a)(et,a));return o.stateSubscription=s.subscribe((function(t){var e=t.state,n=t.action;o.next(e),r.next(n)})),o}return _inherits(e,t),_createClass(e,[{key:"ngOnDestroy",value:function(){this.stateSubscription.unsubscribe(),this.complete()}}]),e}(i.a)).INIT=k,Q);function et(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:void 0},e=arguments.length>1?arguments[1]:void 0,n=_slicedToArray(e,2),r=n[0],i=n[1],o=t.state;return{state:i(o,r),action:r}}var nt=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).actionsObserver=n,i.reducerManager=r,i.source=t,i}return _inherits(e,t),_createClass(e,[{key:"select",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return rt.call.apply(rt,[null,t].concat(n))(this)}},{key:"lift",value:function(t){var n=new e(this,this.actionsObserver,this.reducerManager);return n.operator=t,n}},{key:"dispatch",value:function(t){this.actionsObserver.next(t)}},{key:"next",value:function(t){this.actionsObserver.next(t)}},{key:"error",value:function(t){this.actionsObserver.error(t)}},{key:"complete",value:function(){this.actionsObserver.complete()}},{key:"addReducer",value:function(t,e){this.reducerManager.addReducer(t,e)}},{key:"removeReducer",value:function(t){this.reducerManager.removeReducer(t)}}]),e}(o.a);function rt(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return function(n){var i;if("string"==typeof t){var o=[e].concat(r).filter(Boolean);i=n.pipe((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(t){return Object(g.a)(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return;r=o}return r}}(e,r))(t)}}).apply(void 0,[t].concat(_toConsumableArray(o))))}else{if("function"!=typeof t)throw new TypeError("Unexpected type '".concat(typeof t,"' in select operator,")+" expected 'string' or 'function'");i=n.pipe(Object(g.a)((function(n){return t(n,e)})))}return i.pipe((function(t){return t.lift(new m(void 0,void 0))}))}}function it(t,e){return t===e}function ot(t,e,n){for(var r=0;r<t.length;r++)if(!n(t[r],e[r]))return!0;return!1}function at(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it,i=null,o=null;return{memoized:function(){if(void 0!==e)return e;if(!i)return o=t.apply(null,arguments),i=arguments,o;if(!ot(arguments,i,n))return o;var a=t.apply(null,arguments);return i=arguments,r(o,a)?o:(o=a,a)},reset:function(){i=null,o=null},setResult:function(t){e=t}}}function st(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stateFn:ut};return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r;if(Array.isArray(o[0])){var a=o,s=_toArray(a),u=s[0],c=s.slice(1);o=[].concat(_toConsumableArray(u),_toConsumableArray(c))}var l=o.slice(0,o.length-1),h=o[o.length-1],f=l.filter((function(t){return t.release&&"function"==typeof t.release})),d=t((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return h.apply(null,e)})),p=at((function(t,n){return e.stateFn.apply(null,[t,l,n,d])}));return Object.assign(p.memoized,{release:function(){p.reset(),d.reset(),f.forEach((function(t){return t.release()}))},projector:d.memoized,setResult:p.setResult})}}(at).apply(void 0,arguments)}function ut(t,e,n,r){if(void 0===n){var i=e.map((function(e){return e(t)}));return r.memoized.apply(null,i)}var o=e.map((function(e){return e(t,n)}));return r.memoized.apply(null,[].concat(_toConsumableArray(o),[n]))}function ct(t){return void 0===t}function lt(t){return null===t}function ht(t){return Array.isArray(t)}function ft(t){return"object"==typeof t&&null!==t}function dt(t){return"function"==typeof t}function pt(t){Object.freeze(t);var e=dt(t);return Object.getOwnPropertyNames(t).forEach((function(n){if(function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,n)&&(!e||"caller"!==n&&"callee"!==n&&"arguments"!==n)){var r=t[n];!ft(r)&&!dt(r)||Object.isFrozen(r)||pt(r)}})),t}function vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(ct(t)||lt(t))&&0===e.length?{path:["root"],value:t}:Object.keys(t).reduce((function(n,r){if(n)return n;var i=t[r];return!(ct(i)||lt(i)||function(t){return"number"==typeof t}(i)||function(t){return"boolean"==typeof t}(i)||function(t){return"string"==typeof t}(i)||ht(i))&&(function(t){if(!function(t){return ft(t)&&!ht(t)}(t))return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}(i)?vt(i,[].concat(_toConsumableArray(e),[r])):{path:[].concat(_toConsumableArray(e),[r]),value:i})}),!1)}function yt(t,e){if(!1!==t){var n=t.path.join("."),r=new Error("Detected unserializable ".concat(e,' at "').concat(n,'"'));throw r.value=t.value,r.unserializablePath=n,r}}function gt(t){return Object(r.T)()?(void 0===t&&console.warn("@ngrx/store: runtime checks are currently opt-in but will be the default in the next major version with the possibility to opt-out, see https://ngrx.io/guide/migration/v8 for more information."),Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1},t)):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1}}function mt(t){var e=t.strictActionSerializability,n=t.strictStateSerializability;return function(t){return e||n?function(t,e){return function(n,r){e.action&&yt(vt(r),"action");var i=t(n,r);return e.state&&yt(vt(i),"state"),i}}(t,{action:e,state:n}):t}}function _t(t){var e=t.strictActionImmutability,n=t.strictStateImmutability;return function(t){return e||n?function(t,e){return function(n,r){var i=e.action?pt(r):r,o=t(n,i);return e.state?pt(o):o}}(t,{action:e,state:n}):t}}function bt(t){return t}var wt=function t(e,n,r,i,o){_classCallCheck(this,t)},Ct=function(){function t(e,n,r,i){_classCallCheck(this,t),this.features=e,this.featureReducers=n,this.reducerManager=r;var o=e.map((function(t,e){var r=n.shift();return Object.assign({},t,{reducers:r[e],initialState:Tt(t.initialState)})}));r.addFeatures(o)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.reducerManager.removeFeatures(this.features)}}]),t}();function kt(t,e){return e instanceof r.o?t.get(e):e}function Et(t,e,n){return n.map((function(n,i){if(e[i]instanceof r.o){var o=t.get(e[i]);return{key:n.key,reducerFactory:o.reducerFactory?o.reducerFactory:G,metaReducers:o.metaReducers?o.metaReducers:[],initialState:o.initialState}}return n}))}function It(t,e){return e.map((function(e){return e instanceof r.o?t.get(e):e}))}function Tt(t){return"function"==typeof t?t():t}function St(t,e){return t.concat(e)}function At(t){if(t)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC"),i=new r.a((function(t){return t.complete()}));function o(t){return t?function(t){return new r.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):i}},HDdC:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),a=n("kJWO"),s=n("mCNh"),u=n("2fFW");n.d(e,"a",(function(){return l}));var c,l=((c=function(){function t(e){_classCallCheck(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return _createClass(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var a=this.operator,s=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(s.add(a?a.call(s,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),u.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.a?i:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=h(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}}),r,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:a.a,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:Object(s.b)(e)(this)}},{key:"toPromise",value:function(t){var e=this;return new(t=h(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))}}]),t}()).create=function(t){return new c(t)},c);function h(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},IheW:function(t,e,n){"use strict";n.d(e,"l",(function(){return x})),n.d(e,"o",(function(){return j})),n.d(e,"p",(function(){return U})),n.d(e,"m",(function(){return D})),n.d(e,"n",(function(){return L})),n.d(e,"b",(function(){return h})),n.d(e,"f",(function(){return l})),n.d(e,"c",(function(){return T})),n.d(e,"a",(function(){return A})),n.d(e,"d",(function(){return q})),n.d(e,"e",(function(){return V})),n.d(e,"k",(function(){return F})),n.d(e,"g",(function(){return _})),n.d(e,"h",(function(){return P})),n.d(e,"j",(function(){return R})),n.d(e,"i",(function(){return M}));var r=n("8Y7J"),i=n("LRne"),o=n("HDdC"),a=n("bOdf"),s=n("pLZG"),u=n("lJxs"),c=n("SVse"),l=function t(){_classCallCheck(this,t)},h=function t(){_classCallCheck(this,t)},f=function(){function t(e){var n=this;_classCallCheck(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach((function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}}))}:function(){n.headers=new Map,Object.keys(e).forEach((function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))}))}:this.headers=new Map}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var o=this.headers.get(e);if(!o)return;0===(o=o.filter((function(t){return-1===i.indexOf(t)}))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))}}]),t}(),d=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"encodeKey",value:function(t){return p(t)}},{key:"encodeValue",value:function(t){return p(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function p(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var v=function(){function t(){var e,n,r,i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,t),this.updates=null,this.cloneFrom=null,this.encoder=o.encoder||new d,o.fromString){if(o.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=o.fromString,n=this.encoder,r=new Map,e.length>0&&e.split("&").forEach((function(t){var e=t.indexOf("="),i=_slicedToArray(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),o=i[0],a=i[1],s=r.get(o)||[];s.push(a),r.set(o,s)})),r)}else o.fromObject?(this.map=new Map,Object.keys(o.fromObject).forEach((function(t){var e=o.fromObject[t];i.map.set(t,Array.isArray(e)?e:[e])}))):this.map=null}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)}}]),t}();function y(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function g(t){return"undefined"!=typeof Blob&&t instanceof Blob}function m(t){return"undefined"!=typeof FormData&&t instanceof FormData}var _=function(){function t(e,n,r,i){var o;if(_classCallCheck(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new f),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new v,this.urlWithParams=n}return _createClass(t,[{key:"serializeBody",value:function(){return null===this.body?null:y(this.body)||g(this.body)||m(this.body)||"string"==typeof this.body?this.body:this.body instanceof v?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body?null:m(this.body)?null:g(this.body)?this.body.type||null:y(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof v?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),c)),new t(n,r,o,{params:c,headers:u,reportProgress:s,responseType:i,withCredentials:a})}}]),t}(),b=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}(),w=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,t),this.headers=e.headers||new f,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},C=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n))).type=b.ResponseHeader,t}return _inherits(e,t),_createClass(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),e}(w),k=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n))).type=b.Response,t.body=void 0!==n.body?n.body:null,t}return _inherits(e,t),_createClass(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),e}(w),E=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,0,"Unknown Error"))).name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for ".concat(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),n.error=t.error||null,n}return _inherits(e,t),e}(w);function I(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var T=function(){function t(e){_classCallCheck(this,t),this.handler=e}return _createClass(t,[{key:"request",value:function(t,e){var n,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof _)n=t;else{var c=void 0;c=o.headers instanceof f?o.headers:new f(o.headers);var l=void 0;o.params&&(l=o.params instanceof v?o.params:new v({fromObject:o.params})),n=new _(t,e,void 0!==o.body?o.body:null,{headers:c,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}var h=Object(i.a)(n).pipe(Object(a.a)((function(t){return r.handler.handle(t)})));if(t instanceof _||"events"===o.observe)return h;var d=h.pipe(Object(s.a)((function(t){return t instanceof k})));switch(o.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return d.pipe(Object(u.a)((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return d.pipe(Object(u.a)((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return d.pipe(Object(u.a)((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));case"json":default:return d.pipe(Object(u.a)((function(t){return t.body})))}case"response":return d;default:throw new Error("Unreachable: unhandled observe type ".concat(o.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new v).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,I(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,I(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,I(n,e))}}]),t}(),S=function(){function t(e,n){_classCallCheck(this,t),this.next=e,this.interceptor=n}return _createClass(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),A=new r.o("HTTP_INTERCEPTORS"),N=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}(),O=/^\)\]\}',?\n/,R=function t(){_classCallCheck(this,t)},x=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}(),P=function(){function t(e){_classCallCheck(this,t),this.xhrFactory=e}return _createClass(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new o.a((function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((function(t,e){return r.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new f(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new C({headers:i,status:e,statusText:n,url:o})},c=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace(O,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new k({body:c,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new E({error:c,headers:i,status:o,statusText:a,url:s||void 0}))},l=function(t){var e=u().url,i=new E({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},h=!1,d=function(e){h||(n.next(u()),h=!0);var i={type:b.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},p=function(t){var e={type:b.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",c),r.addEventListener("error",l),t.reportProgress&&(r.addEventListener("progress",d),null!==a&&r.upload&&r.upload.addEventListener("progress",p)),r.send(a),n.next({type:b.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),t.reportProgress&&(r.removeEventListener("progress",d),null!==a&&r.upload&&r.upload.removeEventListener("progress",p)),r.abort()}}))}}]),t}(),D=new r.o("XSRF_COOKIE_NAME"),L=new r.o("XSRF_HEADER_NAME"),M=function t(){_classCallCheck(this,t)},j=function(){function t(e,n,r){_classCallCheck(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(c.s)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}(),U=function(){function t(e,n){_classCallCheck(this,t),this.tokenService=e,this.headerName=n}return _createClass(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}(),F=function(){function t(e,n){_classCallCheck(this,t),this.backend=e,this.injector=n,this.chain=null}return _createClass(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(A,[]);this.chain=e.reduceRight((function(t,e){return new S(t,e)}),this.backend)}return this.chain.handle(t)}}]),t}(),V=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:U,useClass:N}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:D,useValue:e.cookieName}:[],e.headerName?{provide:L,useValue:e.headerName}:[]]}}}]),t}(),q=function t(){_classCallCheck(this,t)}},IzEk:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function a(t){return function(e){return 0===t?Object(o.b)():e.lift(new s(t))}}var s=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new i.a}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.total))}}]),t}(),u=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).total=n,r.count=0,r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),e}(r.a)},JIr8:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("l7GE"),i=n("51Dv"),o=n("ZUHj");function a(t){return function(e){var n=new s(t),r=e.lift(n);return n.caught=r}}var s=function(){function t(e){_classCallCheck(this,t),this.selector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.selector,this.caught))}}]),t}(),u=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).selector=n,i.caught=r,i}return _inherits(e,t),_createClass(e,[{key:"error",value:function(t){if(!this.isStopped){var n;try{n=this.selector(t,this.caught)}catch(a){return void _get(_getPrototypeOf(e.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var r=new i.a(this,void 0,void 0);this.add(r),Object(o.a)(this,n,void 0,void 0,r)}}}]),e}(r.a)},Kqap:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}var o=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),a=function(t){function e(t,n,r,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}},{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}}]),e}(r.a)},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("EY2u"),a=n("XUOw");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=e[e.length-1];switch(Object(r.a)(s)?e.pop():s=void 0,e.length){case 0:return Object(o.b)(s);case 1:return s?Object(i.a)(e,s):Object(a.a)(e[0]);default:return Object(i.a)(e,s)}}},Lhse:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},LmZi:function(t,e,n){"use strict";n.r(e),n.d(e,"registerStorage",(function(){return Ut}));var r=n("wj3C"),i=n.n(r),o=n("mrSG"),a=n("S+S0"),s=function(){function t(t,e){this.code_=u(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return u(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}();function u(t){return"storage/"+t}function c(){return new s("unknown","An unknown error occurred, please check the error payload for server response.")}function l(){return new s("canceled","User canceled the upload/download.")}function h(){return new s("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function f(){return new s("no-download-url","The given file does not have any download URLs.")}function d(t,e,n){return new s("invalid-argument","Invalid argument in `"+e+"` at index "+t+": "+n)}function p(){return new s("app-deleted","The Firebase app was deleted.")}function v(t,e){return new s("invalid-format","String does not match format '"+t+"': "+e)}function y(t){throw new s("internal-error","Internal error: "+t)}var g={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function m(t){switch(t){case g.RAW:case g.BASE64:case g.BASE64URL:case g.DATA_URL:return;default:throw"Expected one of the event types: ["+g.RAW+", "+g.BASE64+", "+g.BASE64URL+", "+g.DATA_URL+"]."}}var _=function(t,e){this.data=t,this.contentType=e||null};function b(t,e){switch(t){case g.RAW:return new _(w(e));case g.BASE64:case g.BASE64URL:return new _(C(t,e));case g.DATA_URL:return new _((n=new k(e)).base64?C(g.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw v(g.DATA_URL,"Malformed data URL.")}return w(e)}(n.rest),new k(e).contentType)}var n;throw c()}function w(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function C(t,e){switch(t){case g.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw v(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case g.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw v(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(c){throw v(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var k=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw v(g.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)},E={STATE_CHANGED:"state_changed"},I={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function T(t){switch(t){case"running":case"pausing":case"canceling":return I.RUNNING;case"paused":return I.PAUSED;case"success":return I.SUCCESS;case"canceled":return I.CANCELED;case"error":default:return I.ERROR}}function S(t){return null!=t}function A(t){return void 0!==t}function N(t){return"function"==typeof t}function O(t){return"object"==typeof t}function R(t){return O(t)&&null!==t}function x(t){return"string"==typeof t||t instanceof String}function P(t){return D(t)&&Number.isInteger(t)}function D(t){return"number"==typeof t||t instanceof Number}function L(t){return M()&&t instanceof Blob}function M(){return"undefined"!=typeof Blob}var j=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),U=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=j.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=j.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=j.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw y("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),S(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return S(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw y("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw y("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw y("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){S(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){S(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),F=function(){function t(){}return t.prototype.createXhrIo=function(){return new U},t}();function V(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=V();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(M())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var H=function(){function t(t,e){var n=0,r="";L(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(L(this.data_)){var r=(o=e,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(M()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(q.apply(null,r))}var i=e.map((function(t){return x(t)?b(g.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),z=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new s("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){for(var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),i="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],a=0;a<o.length;a++){var u=o[a],c=u.regex.exec(e);if(c){var l=c[u.indices.path];l||(l=""),n=new t(c[u.indices.bucket],l),u.postModify(n);break}}if(null==n)throw function(t){return new s("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function B(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return O(n=e)&&!Array.isArray(n)?e:null}function G(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function W(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function K(t){return"https://firebasestorage.googleapis.com/v0"+t}function Q(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Y(t,e){return e}var J=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Y},X=null;function $(t,e,n){var r=B(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new z(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Z(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function tt(t){if(!O(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!O(n))throw"Expected object for 'customMetadata' mapping."}else if(R(n))throw"Mapping for '"+e+"' cannot be an object."}}function et(t){if(!O(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!P(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!x(t.pageToken))throw"Expected pageToken to be string."}}var nt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function rt(t){if(!t)throw c()}function it(t,e){return function(n,r){var i=$(t,r,e);return rt(null!==i),i}}function ot(t){return function(e,n){var r;return(r=401===e.getStatus()?new s("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new s("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new s("unauthorized","User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function at(t){var e=ot(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new s("object-not-found","Object '"+t.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function st(t,e,n){var r=K(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new nt(r,"GET",it(t,n),i);return o.errorHandler=at(e),o}function ut(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=K(e.bucketOnlyServerUrl()),u=t.maxOperationRetryTime(),c=new nt(a,"GET",function(t){return function(e,n){var r=function(t,e){var n=B(e);return null===n?null:function(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(null===r)throw new s("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");if(e.prefixes)for(var i=0,o=e.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),u=t.makeStorageReference(new z(r,a));n.prefixes.push(u)}if(e.items)for(var c=0,l=e.items;c<l.length;c++)u=t.makeStorageReference(new z(r,l[c].name)),n.items.push(u);return n}(t,n)}(t,n);return rt(null!==r),r}}(t),u);return c.urlParams=o,c.errorHandler=ot(e),c}function ct(t,e,n){var r=K(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new nt(r,"GET",function(t,e){return function(n,r){var i=$(t,r,e);return rt(null!==i),function(t,e){var n=B(e);if(null===n)return null;if(!x(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return K("/b/"+i(t.bucket)+"/o/"+i(n))+Q({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=at(e),o}function lt(t,e,n,r){var i=K(e.fullServerUrl()),o=Z(n,r),a=t.maxOperationRetryTime(),s=new nt(i,"PATCH",it(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=at(e),s}function ht(t,e){var n=K(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new nt(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=at(e),i}function ft(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var dt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function pt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){rt(!1)}return rt(!!n&&-1!==(e||["active"]).indexOf(n)),n}var vt=function(t,e,n){if(N(t)||S(e)||S(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},yt=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function gt(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var a,u,c,l;if(!(r<=n.length&&n.length<=i))throw(a=r)===(u=i)?(c=a,l=1===a?"argument":"arguments"):(c="between "+a+" and "+u,l="arguments"),new s("invalid-argument-count","Invalid argument count in `"+t+"`: Expected "+c+" "+l+", received "+n.length+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(h){throw h instanceof Error?d(o,t,h.message):d(o,t,h)}}var mt=function(t,e){var n=this;this.validator=function(e){n.optional&&!A(e)||t(e)},this.optional=!!e};function _t(t,e){function n(t){if(!x(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new mt(r,e)}function bt(){return new mt((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||M()&&t instanceof Blob))throw"Expected Blob or File."}))}function wt(t){return new mt(tt,t)}function Ct(t){return new mt(et,t)}function kt(){return new mt((function(t){if(!(D(t)&&t>=0))throw"Expected a number 0 or greater."}))}function Et(t,e){return new mt((function(e){if(!(null===e||S(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function It(t){return new mt((function(t){if(null!==t&&!N(t))throw"Expected a Function."}),t)}function Tt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var St=function(){function t(t,e,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals("canceled")?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_("error"))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals("canceled")?a.completeTransitions_():(a.error_=t,a.transition_("error"))},this.promise_=new Promise((function(t,e){a.resolve_=t,a.reject_=e,a.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case"running":t(n);break;case"canceling":e.transition_("canceled");break;case"pausing":e.transition_("paused")}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=ft(e,r,i),s={name:a.fullPath},u=K(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Z(a,n),h=t.maxUploadRetryTime(),f=new nt(u,"POST",(function(t){var e;pt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){rt(!1)}return rt(x(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=ot(e),f}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new nt(n,"POST",(function(t){var e=pt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){rt(!1)}n||rt(!1);var i=Number(n);return rt(!isNaN(i)),new dt(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=ot(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new dt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,a,u){var c=new dt(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new s("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=c.total-c.current,f=l;i>0&&(f=Math.min(f,i));var d=c.current,p={"X-Goog-Upload-Command":f===l?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},v=r.slice(d,d+f);if(null===v)throw h();var y=e.maxUploadRetryTime(),g=new nt(n,"POST",(function(t,n){var i,a=pt(t,["active","final"]),s=c.current+f,u=r.size();return i="final"===a?it(e,o)(t,n):null,new dt(s,u,"final"===a,i)}),y);return g.headers=p,g.body=v.uploadData(),g.progressCallback=u||null,g.errorHandler=ot(t),g}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(u){return t.error_=u,void t.transition_("error")}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_("success")):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=st(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_("success")}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=ft(e,r,i),c=Z(u,n),l=H.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===l)throw h();var f={name:u.fullPath},d=K(o),p=t.maxUploadRetryTime(),v=new nt(d,"POST",it(t,n),p);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=ot(e),v}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_("success")}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case"canceling":case"pausing":this.state_=t,null!==this.request_&&this.request_.cancel();break;case"running":var e="paused"===this.state_;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=t,this.notifyObservers_();break;case"canceled":this.error_=l(),this.state_=t,this.notifyObservers_();break;case"error":case"success":this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=T(this.state_);return new yt(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==E.STATE_CHANGED)throw"Expected one of the event types: ["+E.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=It(!0).validator,s=Et(null,!0).validator;function u(t){try{return void a(t)}catch(e){}try{if(s(t),!(A(t.next)||A(t.error)||A(t.complete)))throw"";return}catch(e){throw o}}var c=[_t(i),Et(u,!0),It(!0),It(!0)];gt("on",c,arguments);var l=this;function h(t){return function(e,n,i){null!==t&&gt("on",t,arguments);var o=new vt(e,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function f(t){if(null===t)throw o;u(t)}var d=[Et(f),It(!0),It(!0)],p=!(A(e)||A(n)||A(r));return p?h(d):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(T(this.state_)){case I.SUCCESS:Tt(this.resolve_.bind(null,this.snapshot))();break;case I.CANCELED:case I.ERROR:Tt(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(T(this.state_)){case I.RUNNING:case I.PAUSED:t.next&&Tt(t.next.bind(t,this.snapshot))();break;case I.SUCCESS:t.complete&&Tt(t.complete.bind(t))();break;case I.CANCELED:case I.ERROR:t.error&&Tt(t.error.bind(t,this.error_))();break;default:t.error&&Tt(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){gt("resume",[],arguments);var t="paused"===this.state_||"pausing"===this.state_;return t&&this.transition_("running"),t},t.prototype.pause=function(){gt("pause",[],arguments);var t="running"===this.state_;return t&&this.transition_("pausing"),t},t.prototype.cancel=function(){gt("cancel",[],arguments);var t="running"===this.state_||"pausing"===this.state_;return t&&this.transition_("canceling"),t},t}(),At=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof z?e:z.makeFromUrl(e)}return t.prototype.toString=function(){return gt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(X)return X;var t=[];t.push(new J("bucket")),t.push(new J("generation")),t.push(new J("metageneration")),t.push(new J("name","fullPath",!0));var e=new J("name");e.xform=function(t,e){return function(t){return!x(t)||t.length<2?t:W(t)}(e)},t.push(e);var n=new J("size");return n.xform=function(t,e){return S(e)?Number(e):e},t.push(n),t.push(new J("timeCreated")),t.push(new J("updated")),t.push(new J("md5Hash",null,!0)),t.push(new J("cacheControl",null,!0)),t.push(new J("contentDisposition",null,!0)),t.push(new J("contentEncoding",null,!0)),t.push(new J("contentLanguage",null,!0)),t.push(new J("contentType",null,!0)),t.push(new J("metadata","customMetadata",!0)),X=t}()},t.prototype.child=function(t){gt("child",[_t()],arguments);var e=G(this.location.path,t),n=new z(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new z(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new z(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return W(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),gt("put",[bt(),wt(!0)],arguments),this.throwIfRoot_("put"),new St(this,this.authWrapper,this.location,this.mappings(),new H(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=g.RAW),gt("putString",[_t(),_t(m,!0),wt(!0)],arguments),this.throwIfRoot_("putString");var r=b(e,t),i=Object.assign({},n);return!S(i.contentType)&&S(r.contentType)&&(i.contentType=r.contentType),new St(this,this.authWrapper,this.location,this.mappings(),new H(r.data,!0),i)},t.prototype.delete=function(){var t=this;return gt("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=ht(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){gt("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){gt("list",[Ct(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=ut(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return gt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=st(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return gt("updateMetadata",[wt()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=lt(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return gt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=ct(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw f();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new s("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Nt=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Ot=function(){function t(){this.map=new Map,this.id=-9007199254740991}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},t.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},t}(),Rt=function(){function t(e,n,r,i,o,a){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var s=this.app_.options;S(s)&&(this.bucket_=t.extractBucket_(s))}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=a,this.service_=o,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new Ot}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:z.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw p();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Nt(p());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),xt=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var u=t.callback_(a,a.getResponseText());A(u)?i(u):i()}catch(h){o(h)}else null!==a?((r=c()).setServerResponseProp(a.getResponseText()),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(r=n.canceled?t.appDelete_?p():l():new s("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Pt(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,a=null,s=!1,u=0;function c(){return 2===u}var l=!1;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l||(l=!0,n.apply(null,t))}function f(e){a=setTimeout((function(){a=null,function(e,n){if(n)e(!1,new Pt(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===j.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Pt(a,n))}else{var s=n.getErrorCode()===j.ABORT;e(!1,new Pt(!1,null,s))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,c())}),e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!l)if(t)h.call.apply(h,Object(o.__spreadArrays)([null,t],e));else{var r,a=c()||s;a?h.call.apply(h,Object(o.__spreadArrays)([null,t],e)):(i<64&&(i*=2),1===u?(u=2,r=0):r=1e3*(i+Math.random()),f(r))}}var p=!1;function v(t){p||(p=!0,l||(null!==a?(t||(u=2),clearTimeout(a),f(0)):t||(u=1)))}return f(0),setTimeout((function(){s=!0,v(!0)}),r),v}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Pt=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Dt(t,e,n){var r=Q(t.urlParams),o=t.url+r,a=Object.assign({},t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,e),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==i.a?i.a.SDK_VERSION:"AppManager")}(a),new xt(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Lt=function(){function t(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new Rt(t,e,(function(t,e){return new At(t,e)}),Dt,this,n),this.app_=t,null!=r)this.bucket_=z.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new z(i,""))}this.internals_=new Mt(this)}return t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(gt("ref",[_t(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new At(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{z.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return gt("refFromURL",[_t(e,!1)],arguments),new At(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){gt("setMaxUploadRetryTime",[kt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){gt("setMaxOperationRetryTime",[kt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Mt=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}();function jt(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Lt(n,r,new F,e)}function Ut(t){var e={TaskState:I,TaskEvent:E,StringFormat:g,Storage:Lt,Reference:At};t.INTERNAL.registerComponent(new a.Component("storage",jt,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.3.28")}Ut(i.a)},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}))}n.d(e,"a",(function(){return r}))},NSPt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,a=n("mrSG"),s=n("zVF4"),u=n("q/0M"),c=n("S+S0"),l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),s.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:s.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return s.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},d=f("localStorage"),p=f("sessionStorage"),v=new u.Logger("@firebase/database"),y=(i=1,function(){return i++}),g=function(t){var e=s.stringToByteArray(t),n=new s.Sha1;n.update(e);var r=n.digest();return s.base64.encodeByteArray(r)},m=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var o=e[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=t.apply(null,o):r+="object"==typeof o?s.stringify(o):o,r+=" "}return r},_=null,b=!0,w=function(t,e){s.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=u.LogLevel.VERBOSE,_=v.log.bind(v),e&&p.set("logging_enabled",!0)):"function"==typeof t?_=t:(_=null,p.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===_&&!0===p.get("logging_enabled")&&w(!0)),_){var n=m.apply(null,t);_(n)}},k=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,a.__spread([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,a.__spread(t));v.error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,a.__spread(t));throw v.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,a.__spread(t));v.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",N="[MAX_NAME]",O=function(t,e){if(t===e)return 0;if(t===A||e===N)return-1;if(e===A||t===N)return 1;var n=Q(t),r=Q(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},R=function(t,e){return t===e?0:t<e?-1:1},x=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+s.stringify(e))},P=function t(e){if("object"!=typeof e||null===e)return s.stringify(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=s.stringify(n[o]),i+=":",i+=t(e[n[o]]);return i+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M,j,U,F,V,q,H,z,B,G,W=function(t){var e,n,r,i,o;s.assert(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},K=new RegExp("^-?(0*)\\d{1,10}$"),Q=function(t){if(K.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Y=function(t){try{t()}catch(e){setTimeout((function(){throw T("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},J=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=O(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),$=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=s.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=s.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=s.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Z=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(s.assert("string"==typeof t,"typeof type must == string"),s.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return L(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),tt=function(t){var e=et(t),n=e.namespace;return"firebase"===e.domain&&I(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||I("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,"",n!==e.subdomain),path:new X(e.pathString)}},et=function(t){var e="",n="",r="",i="",o="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=a.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=t.length;var p=e.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,l).toLowerCase()&&(n="localhost"),"ns"in d&&(o=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:o}},nt=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,it=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},ot=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&s.contains(t,".sv")},st=function(t,e,n,r,i){i&&void 0===n||ut(s.errorPrefix(t,e,i),n,r)},ut=function t(e,n,r){var i=r instanceof X?new $(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(S(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>10485760/3&&s.stringLength(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(L(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!it(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()})),o&&a)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},ct=function(t,e,n,r,i){if(!i||void 0!==n){var o=s.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];L(n,(function(t,e){var n=new X(t);if(ut(o,e,r.child(n)),".priority"===n.getBack()&&!at(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!it(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},lt=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(s.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!at(n))throw new Error(s.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ht=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(s.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ft=function(t,e,n,r){if(!(r&&void 0===n||it(n)))throw new Error(s.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dt=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(s.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!it(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ot(t)}(r))throw new Error(s.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},gt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(s.errorPrefix(t,e,r)+"must be a boolean.")},mt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){s.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),s.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){s.validateArgCount("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),s.validateCallback("OnDisconnect.remove",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){s.validateArgCount("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),st("OnDisconnect.set",1,t,this.path_,!1),s.validateCallback("OnDisconnect.set",2,e,!0);var n=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){s.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),st("OnDisconnect.setWithPriority",1,t,this.path_,!1),lt("OnDisconnect.setWithPriority",2,e,!1),s.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new s.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(s.validateArgCount("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ct("OnDisconnect.update",1,t,this.path_,!1),s.validateCallback("OnDisconnect.update",2,e,!0);var i=new s.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),_t=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return s.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),bt=(M="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",j=0,U=[],function(t){var e,n=t===j;j=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=M.charAt(t%64),t=Math.floor(t/64);s.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===U[e];e--)U[e]=0;U[e]++}else for(e=0;e<12;e++)U[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=M.charAt(U[e]);return s.assert(20===i.length,"nextPushId: Length should be 20."),i}),wt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ct=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new wt(A,t),r=new wt(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return wt.MIN},t}(),kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return F},set:function(t){F=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return O(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw s.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return new wt(N,F)},e.prototype.makePost=function(t,e){return s.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new wt(t,F)},e.prototype.toString=function(){return".key"},e}(Ct),Et=new kt,It=function(t){return"number"==typeof t?"number:"+W(t):"string:"+t},Tt=function(t){if(t.isLeafNode()){var e=t.val();s.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&s.contains(e,".sv"),"Priority must be a string or number.")}else s.assert(t===V||t.isEmpty(),"priority of unexpected type.");s.assert(t===V||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},St=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,s.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Tt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return q},set:function(t){q=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(s.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+It(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?W(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(s.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return s.assert(i>=0,"Unknown leaf type: "+n),s.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),At=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return new wt(N,new St("[PRIORITY-POST]",z))},e.prototype.makePost=function(t,e){var n=H(t);return new wt(e,new St("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ct)),Nt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ot=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:xt.EMPTY_NODE,this.right=null!=o?o:xt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return xt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return xt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ot(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),xt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ot.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ot.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Nt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Nt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}(),Pt=Math.log(2),Dt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Pt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Lt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e;var u=function e(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=t[r],a=n?n(o):o,new Ot(a,o.node,Ot.BLACK,null,null);var u=parseInt(s/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],a=n?n(o):o,new Ot(a,o.node,Ot.BLACK,c,l)}(i+1,a),c=t[i],l=n?n(c):c;s(new Ot(l,c.node,r,null,u))},s=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?a(l,Ot.BLACK):(a(l,Ot.BLACK),a(l,Ot.RED))}return i}(new Dt(t.length));return new xt(r||e,i)},Mt={},jt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return s.assert(Mt&&At,"ChildrenNode.ts has not been loaded"),B=B||new t({".priority":Mt},{".priority":At})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=s.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof xt?e:null},t.prototype.hasIndex=function(t){return s.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){s.assert(e!==Et,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,u=n.getIterator(wt.Wrap),c=u.getNext();c;)o=o||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=o?Lt(i,e.getCompare()):Mt;var l=e.toString(),h=a.__assign({},this.indexSet_);h[l]=e;var f=a.__assign({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(s.map(this.indexes_,(function(t,i){var o=s.safeGet(r.indexSet_,i);if(s.assert(o,"Missing index implementation for "+i),t===Mt){if(o.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(wt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Lt(a,o.getCompare())}return Mt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new wt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(s.map(this.indexes_,(function(t){if(t===Mt)return t;var r=n.get(e.name);return r?t.remove(new wt(e.name,r)):t})),this.indexSet_)},t}();function Ut(t,e){return O(t.name,e.name)}function Ft(t,e){return O(t,e)}var Vt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tt(this.priorityNode_),this.children_.isEmpty()&&s.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return G||(G=new t(new xt(Ft),null,jt.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||G},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?G:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(s.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new wt(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?G:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;s.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(At,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+It(this.getPriority().val())+":"),this.forEachChild(At,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new wt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new wt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new wt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,wt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,wt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qt?-1:0},t.prototype.withIndex=function(e){if(e===Et||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Et||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(At),r=e.getIterator(At),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Et?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),qt=new(function(t){function e(){return t.call(this,new xt(Ft),Vt.EMPTY_NODE,jt.Default)||this}return a.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Vt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Vt));function Ht(t,e){if(void 0===e&&(e=null),null===t)return Vt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),s.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new St(t,Ht(e));if(t instanceof Array){var n=Vt.EMPTY_NODE;return L(t,(function(e,r){if(s.contains(t,e)&&"."!==e.substring(0,1)){var i=Ht(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Ht(e))}var r=[],i=!1;if(L(t,(function(t,e){if("."!==t.substring(0,1)){var n=Ht(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new wt(t,n)))}})),0===r.length)return Vt.EMPTY_NODE;var o=Lt(r,Ut,(function(t){return t.name}),Ft);if(i){var a=Lt(r,At.getCompare());return new Vt(o,Ht(e),new jt({".priority":a},{".priority":At}))}return new Vt(o,Ht(e),jt.Default)}Object.defineProperties(wt,{MIN:{value:new wt(A,Vt.EMPTY_NODE)},MAX:{value:new wt(N,qt)}}),kt.__EMPTY_NODE=Vt.EMPTY_NODE,St.__childrenNodeConstructor=Vt,V=qt,z=qt,function(t){H=t}(Ht);var zt,Bt,Gt,Wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?O(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return wt.MIN},e.prototype.maxPost=function(){return wt.MAX},e.prototype.makePost=function(t,e){var n=Ht(t);return new wt(e,n)},e.prototype.toString=function(){return".value"},e}(Ct)),Kt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,s.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return a.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Ht(t),r=Vt.EMPTY_NODE.updateChild(this.indexPath_,n);return new wt(e,r)},e.prototype.maxPost=function(){var t=Vt.EMPTY_NODE.updateChild(this.indexPath_,qt);return new wt(N,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ct),Qt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return s.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return s.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return s.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return s.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){s.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),dt("DataSnapshot.child",1,e,!1);var n=new X(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,At)},t.prototype.hasChild=function(t){s.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),dt("DataSnapshot.hasChild",1,t,!1);var e=new X(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return s.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(s.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),s.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),At))}))},t.prototype.hasChildren=function(){return s.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return s.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return s.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Yt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+s.stringify(this.snapshot.exportVal())},t}(),Jt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Xt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Yt("value",this,new Qt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),$t=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return s.contains(this.callbacks_,e="children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.createEvent=function(t,e){s.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Yt(t.type,this,new Qt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(zt,"Reference.ts has not been loaded"),zt},set:function(t){zt=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Et){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==N)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===At){if(null!=e&&!at(e)||null!=n&&!at(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(s.assert(t.getIndex()instanceof Kt||t.getIndex()===Wt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return s.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){s.validateArgCount("Query.on",2,4,arguments.length),ht("Query.on",1,e,!1),s.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Xt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new $t(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){s.validateArgCount("Query.off",0,3,arguments.length),ht("Query.off",1,t,!0),s.validateCallback("Query.off",2,e,!0),s.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Xt(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new $t(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;s.validateArgCount("Query.once",1,4,arguments.length),ht("Query.once",1,e,!1),s.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new s.Deferred;c.promise.catch((function(){}));var l=function t(r){u&&(u=!1,o.off(e,t),n&&n.bind(a.context)(r),c.resolve(r))};return this.on(e,l,(function(t){o.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(s.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(s.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(s.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');dt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Kt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){s.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Et);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){s.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(At);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){s.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Wt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.startAt",0,2,arguments.length),st("Query.startAt",1,e,this.path,!0),ft("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.endAt",0,2,arguments.length),st("Query.endAt",1,e,this.path,!0),ft("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(s.validateArgCount("Query.equalTo",1,2,arguments.length),st("Query.equalTo",1,t,this.path,!1),ft("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return s.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return s.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=P(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(s.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,s.validateCallback(t,3,r.cancel,!0),r.context=n,s.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(s.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),te=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(At,(function(t,e){n.remember(new X(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new X(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),ee=function(t,e){return t&&"object"==typeof t?(s.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},ne=function t(e,n){var r,i=e.getPriority().val(),o=ee(i,n);if(e.isLeafNode()){var a=e,s=ee(a.getValue(),n);return s!==a.getValue()||o!==a.getPriority().val()?new St(s,Ht(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new St(o))),u.forEachChild(At,(function(e,i){var o=t(i,n);o!==i&&(r=r.updateImmediateChild(e,o))})),r},re=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),ie=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,s.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),oe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=re.ACK_USER_WRITE,this.source=ie.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return s.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(e));return new t(X.Empty,n,this.revert)}return s.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ae=function(){function t(t,e){void 0===e&&(Bt||(Bt=new xt(R)),e=Bt),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return L(e,(function(t,e){n=n.set(new X(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:X.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new X(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(X.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,X.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,X.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(X.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),se=function(){function t(t,e){this.source=t,this.path=e,this.type=re.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty):new t(this.source,this.path.popFront())},t}(),ue=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=re.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ce=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=re.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new ue(this.source,X.Empty,n.value):new t(this.source,X.Empty,n)}return s.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),he=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new le(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new le(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new le(Vt.EMPTY_NODE,!1,!1),new le(Vt.EMPTY_NODE,!1,!1)),t}(),fe=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),de=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){s.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(fe.childRemovedChange(e,a)):s.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(fe.childAddedChange(e,n)):o.trackChildChange(fe.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(At,(function(t,r){e.hasChild(t)||n.trackChildChange(fe.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(At,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(fe.childChangedChange(e,r,i))}else n.trackChildChange(fe.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Vt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),pe=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;s.assert(e===fe.CHILD_ADDED||e===fe.CHILD_CHANGED||e===fe.CHILD_REMOVED,"Only child changes supported for tracking"),s.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===fe.CHILD_ADDED&&i===fe.CHILD_REMOVED)this.changeMap.set(n,fe.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===fe.CHILD_REMOVED&&i===fe.CHILD_ADDED)this.changeMap.delete(n);else if(e===fe.CHILD_REMOVED&&i===fe.CHILD_CHANGED)this.changeMap.set(n,fe.childRemovedChange(n,r.oldSnap));else if(e===fe.CHILD_CHANGED&&i===fe.CHILD_ADDED)this.changeMap.set(n,fe.childAddedChange(n,t.snapshotNode));else{if(e!==fe.CHILD_CHANGED||i!==fe.CHILD_CHANGED)throw s.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,fe.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),ve=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),ye=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new le(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),ge=function(t,e){this.viewCache=t,this.changes=e},me=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){s.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),s.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,u=new pe;if(n.type===re.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(s.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===re.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(e,l.path,l.children,r,i,u):(s.assert(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===re.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==re.LISTEN_COMPLETE)throw s.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new ge(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(fe.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(s.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Vt?c:Vt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){s.assert(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){u=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,ve,null)}var p=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new ye(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new ye(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Vt.EMPTY_NODE}if(f.equals(d))a=t;else{var v=this.filter_.updateChild(u.getNode(),l,d,h,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:ae.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new X(e),h,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new X(e),f,r,i,o,a)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=ae.Empty;return s.getNode().forEachChild(Et,(function(t,e){u=u.set(new X(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=ae.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,ve,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new ye(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();s.assert(h instanceof Vt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Vt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),_e=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===fe.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(fe.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,fe.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,fe.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,fe.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,fe.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,fe.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw s.assertionError("Should only compare child_ events.");var n=new wt(t.childName,t.snapshotNode),r=new wt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),be=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new de(n.getIndex()),i=n.getNodeFilter();this.processor_=new me(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(Vt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Vt.EMPTY_NODE,a.getNode(),null),c=new le(s,o.isFullyInitialized(),r.filtersNodes()),l=new le(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new he(l,c),this.eventGenerator_=new _e(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){s.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===re.MERGE&&null!==t.source.queryId&&(s.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),s.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),s.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(At,(function(t,e){n.push(fe.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(fe.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),we=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(Gt,"Reference.ts has not been loaded"),Gt},set:function(t){s.assert(!Gt,"__referenceConstructor has already been defined"),Gt=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var u=this.views.get(o);return s.assert(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=a.__values(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof Vt?(s=n.calcCompleteEventChildren(r),u=!1):(s=Vt.EMPTY_NODE,u=!1);var c=new he(new le(s,u,!1),new le(r,i,!1));a=new be(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===s)try{for(var h=a.__values(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=a.__read(f.value,2),v=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(v),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(s))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=a.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=a.__values(this.views.values()),o=i.next();!o.done;o=i.next())r=r||o.value.getCompleteServerCache(t)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=a.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ce=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ae(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=X.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new ae(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return L(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ae.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(X.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(At,(function(e,n){t.push(new wt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new wt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ae(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(s.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(X.Empty,this.writeTree_,t)},t.Empty=new t(new ae(null)),t}(),ke=function(){function t(){this.visibleWrites_=Ce.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ee(t,this)},t.prototype.addOverwrite=function(t,e,n,r){s.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){s.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));s.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),a--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):L(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(X.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Vt.EMPTY_NODE):null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);return s.isEmpty()?n:null!=n||s.hasCompleteWrite(X.Empty)?s.apply(n||Vt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Vt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(At,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(At,(function(t,e){var r=i.childCompoundWrite(new X(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){s.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(X.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ce.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,u=void 0;if(o.snap)n.contains(a)?(u=X.relativePath(n,a),r=r.addWrite(u,o.snap)):a.contains(n)&&(u=X.relativePath(a,n),r=r.addWrite(X.Empty,o.snap.getChild(u)));else{if(!o.children)throw s.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))u=X.relativePath(n,a),r=r.addWrites(u,o.children);else if(a.contains(n))if((u=X.relativePath(a,n)).isEmpty())r=r.addWrites(X.Empty,o.children);else{var c=s.safeGet(o.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(X.Empty,l)}}}}}return r},t}(),Ee=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ie=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ae.Empty,this.pendingWriteTree_=new ke,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ue(ie.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ae.fromObject(e);return this.applyOperationToSyncPoints_(new ce(ie.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ae.Empty;return null!=n.snap?r=r.set(X.Empty,!0):L(n.children,(function(t,e){r=r.set(new X(t),e)})),this.applyOperationToSyncPoints_(new oe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ue(ie.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ae.fromObject(e);return this.applyOperationToSyncPoints_(new ce(ie.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new se(ie.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=X.relativePath(a,e),c=new ue(ie.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=X.relativePath(a,e),c=ae.fromObject(n),l=new ce(ie.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=X.relativePath(o,e),u=new se(ie.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=X.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(X.Empty)):(u=new we,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Vt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(X.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);s.assert(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!o){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var v=d[p],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=X.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),L(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)s.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),L(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Vt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return s.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);s.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(X.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(X.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Te=function(){function t(){this.rootNode_=Vt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Se=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Ae=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),s.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return s.deepCopy(this.counters_)},t}(),Ne=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ae),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Oe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=a.__assign({},t);return this.last_&&L(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Oe(t);var n=1e4+2e4*Math.random();J(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,(function(e,i){i>0&&s.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),J(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),xe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Pe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Pe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();_&&C("event: "+e.toString()),Y(n)}}},t.prototype.getPath=function(){return this.path_},t}(),De=function(){function t(t){this.allowedEvents_=t,this.listeners_={},s.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=a.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){s.assert(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Le=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(De),Me=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||s.isMobileCordova()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(De),je=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Y((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ue=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(t),this.stats_=Ne.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new je(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(s.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Fe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=a.__read(t,5),i=r[0],o=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=a.__read(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(s.isNodeSdk()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=s.base64Encode(e),r=D(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!s.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=s.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Fe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,s.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;s.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Ve="",qe=null;"undefined"!=typeof MozWebSocket?qe=MozWebSocket:"undefined"!=typeof WebSocket&&(qe=WebSocket);var He=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=Ne.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!s.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(s.isNodeSdk()){var r={headers:{"User-Agent":"Firebase/5/"+Ve+"/"+process.platform+"/"+(s.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},i=process.env,o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new qe(this.connURL,[],r)}else this.mySock=new qe(this.connURL)}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==qe&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=s.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(s.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ze=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ue,He]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=He&&He.isAvailable(),o=i&&!He.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[He];else{var s=this.transports_=[];try{for(var u=a.__values(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Be=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new ze(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=J((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=x("t",t),n=x("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=x("t",t),n=x("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=x("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),J((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):J((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ge=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),We=function(t){function e(n,r,i,o,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.onDataUpdate_=r,c.onConnectStatus_=i,c.onServerInfoUpdate_=o,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=k("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!s.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Le.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Me.getInstance().on("online",c.onOnline_,c),c}return a.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(s.stringify(i)),s.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&s.contains(t,"w")){var n=s.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||s.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=s.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+s.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+s.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;s.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())};this.realtime_={close:l,sendRequest:function(t){s.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(e){u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,c=new Be(i,o.repoInfo_,t,n,r,(function(t){T(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),a))})).then(null,(function(t){o.log_("Failed to get token: "+t),u||(s.CONSTANTS.NODE_ADMIN&&T(t),l())}))}},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],s.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return P(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new X(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=a.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(s.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";s.CONSTANTS.NODE_ADMIN?e="admin_node":s.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+Ve.replace(/\./g,"-")]=1,s.isMobileCordova()?t["framework.cordova"]=1:s.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Me.getInstance().currentlyOnline();return s.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ge),Ke=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=k("p:rest:"),i.listens_={},i}return a.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(s.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),s.safeGet(o.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+s.querystring(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=s.jsonEval(u.responseText)}catch(e){T("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&T("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(Ge),Qe=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new te,this.persistentConnection_=null;var o=new Se(n,r);if(this.stats_=Ne.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Ke(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{s.stringify(a)}catch(u){throw new Error("Invalid authOverride provided: "+u)}}this.persistentConnection_=new We(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=Ne.getOrCreateReporter(t,(function(){return new Re(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Te,this.infoSyncTree_=new Ie({startListening:function(t,e,n,r){var o=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ie({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new X(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=s.map(e,(function(t){return Ht(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Ht(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=s.map(e,(function(t){return Ht(t)}));o=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Ht(e);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;L(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new X("/.info/"+t),r=Ht(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Ht(e,n),s=ne(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||T("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(L(e,(function(t,e){i=!1;var n=Ht(e);a[t]=ne(n,o)})),i)C("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||T("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),L(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=function(t,e){var n=new te;return t.forEachTree(new X(""),(function(t,r){n.remember(t,ne(r,e))})),n}(this.onDisconnect_,e),r=[];n.forEachTree(X.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new te,this.eventQueue_.raiseEventsForChangedPath(X.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Ht(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Ht(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(s.isEmpty(e))return C("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&L(e,(function(e,n){var i=Ht(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Oe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);L(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),C.apply(void 0,a.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Y((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new on(this))},enumerable:!0,configurable:!0}),t}(),Ye=function(){function t(e){this.indexedFilter_=new de(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new wt(e,n))||(n=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Vt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Vt.EMPTY_NODE);var i=this;return e.forEachChild(At,(function(t,e){i.matches(new wt(t,e))||(r=r.updateImmediateChild(t,Vt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Je=function(){function t(t){this.rangedFilter_=new Ye(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new wt(e,n))||(n=Vt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Vt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Vt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Vt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var u=t;s.assert(u.numChildren()===this.limit_,"");var c=new wt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(fe.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(fe.childRemovedChange(e,f));var v=u.updateImmediateChild(e,Vt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(fe.childAddedChange(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&o(l,c)>=0?(null!=i&&(i.trackChildChange(fe.childRemovedChange(l.name,l.node)),i.trackChildChange(fe.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Vt.EMPTY_NODE)):t},t}(),Xe=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return s.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==At&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===At},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new de(this.getIndex()):this.hasLimit()?new Je(this):new Ye(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===At?e=n.PRIORITY_INDEX:this.index_===Wt?e=n.VALUE_INDEX:this.index_===Et?e=n.KEY_INDEX:(s.assert(this.index_ instanceof Kt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=s.stringify(e),this.startSet_&&(r[n.START_AT]=s.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+s.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=s.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+s.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),$e=function(t){function e(e,n){if(!(e instanceof Qe))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,Xe.DEFAULT,!1)||this}return a.__extends(e,t),e.prototype.getKey=function(){return s.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return s.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof X||(null===this.path.getFront()?pt("Reference.child",1,t,!1):dt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){s.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){s.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){s.validateArgCount("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),st("Reference.set",1,t,this.path,!1),s.validateCallback("Reference.set",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(s.validateArgCount("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ct("Reference.update",1,t,this.path,!1),s.validateCallback("Reference.update",2,e,!0);var i=new s.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(s.validateArgCount("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),st("Reference.setWithPriority",1,t,this.path,!1),lt("Reference.setWithPriority",2,e,!1),s.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new s.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return s.validateArgCount("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),s.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(s.validateArgCount("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),s.validateCallback("Reference.transaction",1,t,!1),s.validateCallback("Reference.transaction",2,e,!0),gt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new s.Deferred;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new _t(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){s.validateArgCount("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),lt("Reference.setPriority",1,t,!1),s.validateCallback("Reference.setPriority",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){s.validateArgCount("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),st("Reference.push",1,t,this.path,!0),s.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=bt(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new mt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Zt);Zt.__referenceConstructor=$e,we.__referenceConstructor=$e;var Ze=function(){this.children={},this.childCount=0,this.value=null},tn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Ze),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof X?e:new X(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,s.safeGet(r.node_.children,i)||new Ze),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){s.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;L(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=s.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),en=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});Qe.MAX_TRANSACTION_RETRIES_=25,Qe.prototype.transactionsInit_=function(){this.transactionQueueTree_=new tn},Qe.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new $e(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:y(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Qt(a.currentInputSnapshot,new $e(this,a.path),At);a.onComplete(null,!1,l)}}else{ut("transaction failed: Data returned ",c,a.path),a.status=en.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&s.contains(c,".priority")?(d=s.safeGet(c,".priority"),s.assert(at(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Vt.EMPTY_NODE).getPriority().val(),d=d;var p=this.generateServerValues(),v=Ht(c,d),g=ne(v,p);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},Qe.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Vt.EMPTY_NODE},Qe.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);s.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===en.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Qe.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];s.assert(c.status===en.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=en.SENT,c.retryCount++;var l=X.relativePath(t,c.path);o=o.updateChild(l,c.currentOutputSnapshotRaw)}var h=o.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=en.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new $e(n,e[a].path),c=new Qt(s,u,At);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),a=0;a<o.length;a++)Y(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status=e[a].status===en.SENT_NEEDS_ABORT?en.NEEDS_ABORT:en.RUN;else for(T("transaction at "+f.toString()+" failed: "+r),a=0;a<e.length;a++)e[a].status=en.NEEDS_ABORT,e[a].abortReason=r;n.rerunTransactions_(t)}}),a)},Qe.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Qe.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===en.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var a=t[o],u=X.relativePath(e,a.path),c=!1,l=void 0;if(s.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===en.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===en.RUN)if(a.retryCount>=Qe.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[o].update(h.val());if(void 0!==f){ut("transaction failed: Data returned ",f,a.path);var d=Ht(f);"object"==typeof f&&null!=f&&s.contains(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,v=this.generateServerValues(),y=ne(d,v);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[o].status=en.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===l){var g=new $e(this,t[o].path),m=new Qt(t[o].currentInputSnapshot,g,At);n.push(t[o].onComplete.bind(null,null,!1,m))}else n.push(t[o].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)Y(n[o]);this.sendReadyTransactions_()}},Qe.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Qe.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Qe.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Qe.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==en.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Qe.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Qe.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===en.SENT_NEEDS_ABORT||(e[o].status===en.SENT?(s.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=en.SENT_NEEDS_ABORT,e[o].abortReason="set"):(s.assert(e[o].status===en.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)Y(n[o])}};var nn,rn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return nn||(nn=new t),nn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=a.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next())this.repos_[s][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=a.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next())this.repos_[s][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var r=n||t.options.databaseURL;void 0===r&&I("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var i=tt(r),o=i.repoInfo,a=void 0;return"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a&&(o=(i=tt(r="http://"+a+"?ns="+o.namespace)).repoInfo),yt("Invalid Firebase Database URL",1,i),i.path.isEmpty()||I("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},t.prototype.deleteRepo=function(t){var e=s.safeGet(this.repos_,t.app.name);e&&s.safeGet(e,t.repoInfo_.toURLString())===t||I("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=s.safeGet(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=s.safeGet(r,t.toURLString());return i&&I("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Qe(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),on=function(){function t(t){this.repo_=t,t instanceof Qe||I("Don't call new Database() directly - please use firebase.database()."),this.root_=new $e(t,X.Empty),this.INTERNAL=new an(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),s.validateArgCount("database.ref",0,1,arguments.length),t instanceof $e?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),s.validateArgCount(e,1,1,arguments.length);var n=tt(t);yt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&I(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&I("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){s.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){s.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),an=function(){function t(t){this.database=t}return t.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.database.checkDeleted_("delete"),rn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),sn=Object.freeze({__proto__:null,forceLongPolling:function(){He.forceDisallow(),Ue.forceAllow()},forceWebSockets:function(){Ue.forceDisallow()},isWebSocketsAvailable:function(){return He.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),un=We;We.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},We.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var cn=Object.freeze({__proto__:null,DataConnection:un,RealTimeConnection:Be,hijackHash:function(t){var e=We.prototype.put;return We.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){We.prototype.put=e}},ConnectionTarget:Z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){rn.getInstance().forceRestClient(t)}}),ln=on.ServerValue;function hn(e){Ve=e.SDK_VERSION;var n=e.INTERNAL.registerComponent(new c.Component("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return rn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:$e,Query:Zt,Database:on,DataSnapshot:Qt,enableLogging:w,INTERNAL:sn,ServerValue:ln,TEST_ACCESS:cn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.5.22"),s.isNodeSdk()&&(t.exports=n)}hn(o),e.DataSnapshot=Qt,e.Database=on,e.OnDisconnect=mt,e.Query=Zt,e.Reference=$e,e.ServerValue=ln,e.enableLogging=w,e.registerDatabase=hn},NXyV:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("Cfvw"),o=n("EY2u");function a(t){return new r.a((function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)}))}},O1kn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("fSjL");var o,a=n("mrSG"),s=n("zVF4"),u=n("q/0M"),c=n("S+S0"),l=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),h=((o={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",o["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",o["registration-api-key"]="Undefined API key. Check Firebase app initialization.",o["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",o["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",o["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",o["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",o["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",o["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",o["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',o["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',o["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",o["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",o),f=new s.ErrorFactory("remoteconfig","Remote Config",h),d=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,c,l,h,d,p,v,y,g,m;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=a.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===_&&(_=navigator),_.languages&&_.languages[0]||_.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),u=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,Promise.race([s,u])];case 3:return a.sent(),[4,s];case 4:return c=a.sent(),[3,6];case 5:throw l=a.sent(),h="fetch-client-network","AbortError"===l.name&&(h="fetch-timeout"),f.create(h,{originalErrorMessage:l.message});case 6:if(d=c.status,p=c.headers.get("ETag")||void 0,200!==c.status)return[3,11];g=void 0,a.label=7;case 7:return a.trys.push([7,9,,10]),[4,c.json()];case 8:return g=a.sent(),[3,10];case 9:throw m=a.sent(),f.create("fetch-client-parse",{originalErrorMessage:m.message});case 10:v=g.entries,y=g.state,a.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(v={}),304!==d&&200!==d)throw f.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:p,config:v}]}var _}))}))},t}(),p=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),v=["1","true","t","yes","y","on"],y=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&v.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),g=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=u.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=u.LogLevel.SILENT;break;default:this._logger.logLevel=u.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),t.prototype.activate=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:t=new p,setTimeout((function(){return a.__awaiter(r,void 0,void 0,(function(){return a.__generator(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=(o=e)instanceof s.FirebaseError&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o}))}))},t.prototype.fetchAndActivate=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(a.__assign(a.__assign({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new y("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new y("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new y("static"))},t}();function m(t,e){var n=t.target.error||void 0;return f.create(e,{originalErrorMessage:n&&n.message})}var _=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(m(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(m(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(u){i(f.create("storage-get",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.set=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(m(t,"storage-set"))},u.onsuccess=function(){i()}}catch(c){o(f.create("storage-set",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.delete=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(m(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(u){i(f.create("storage-delete",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),b=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function w(t){var e=1e3*Math.pow(2,t),n=Math.round(.5*e*(Math.random()-.5)*2);return Math.min(144e5,e+n)}function C(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(f.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var k=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return a.__awaiter(this,void 0,void 0,(function(){var e,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,C(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof s.FirebaseError))return!1;var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+w(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),E="@firebase/remote-config";function I(t){t.INTERNAL.registerComponent(new c.Component("remoteConfig",(function(e,n){var r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw f.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,c=o.appId;if(!a)throw f.create("registration-project-id");if(!s)throw f.create("registration-api-key");if(!c)throw f.create("registration-app-id");var h=new _(c,r.name,n=n||"firebase"),p=new b(h),v=new u.Logger(E);v.logLevel=u.LogLevel.ERROR;var y=new d(i,t.SDK_VERSION,n,a,s,c),m=new k(y,h),w=new l(m,h,p,v),C=new g(r,w,p,h,v);return C.ensureInitialized(),C}),"PUBLIC").setMultipleInstances(!0)),t.registerVersion(E,"0.1.15")}I(i),e.registerRemoteConfig=I},PCNd:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function t(){_classCallCheck(this,t)}},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("zVF4"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=s,e.Provider=a},SVse:function(t,e,n){"use strict";n.d(e,"r",(function(){return p})),n.d(e,"k",(function(){return y})),n.d(e,"l",(function(){return v})),n.d(e,"s",(function(){return g})),n.d(e,"c",(function(){return A})),n.d(e,"i",(function(){return _})),n.d(e,"j",(function(){return w})),n.d(e,"d",(function(){return N})),n.d(e,"b",(function(){return S})),n.d(e,"q",(function(){return O})),n.d(e,"p",(function(){return R})),n.d(e,"o",(function(){return x})),n.d(e,"n",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"h",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"m",(function(){return h})),n.d(e,"g",(function(){return u}));var r=n("8Y7J"),i=function t(){_classCallCheck(this,t)},o=new r.o("Location Initialized"),a=function t(){_classCallCheck(this,t)},s=new r.o("appBaseHref"),u=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._subject=new r.m,this._urlChangeListeners=[],this._platformStrategy=e;var o=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=t.stripTrailingSlash(c(o)),this._platformStrategy.onPopState((function(t){i._subject.emit({url:i.path(!0),pop:!0,state:t.state,type:t.type})}))}return _createClass(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+t.normalizeQueryParams(n))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,c(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}},{key:"replaceState",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this.subscribe((function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(t,e)}))}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}],[{key:"normalizeQueryParams",value:function(t){return t&&"?"!==t[0]?"?"+t:t}},{key:"joinWithSlash",value:function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}},{key:"stripTrailingSlash",value:function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}]),t}();function c(t){return t.replace(/\/index.html$/,"")}var l=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._platformLocation=t,r._baseHref="",null!=n&&(r._baseHref=n),r}return _inherits(e,t),_createClass(e,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=u.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),e}(a),h=function(t){function e(t,n){var r;if(_classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._platformLocation=t,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,_possibleConstructorReturn(r)}return _inherits(e,t),_createClass(e,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return u.joinWithSlash(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+u.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+u.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),e}(a),f=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),d=r.qb,p=new r.o("UseV4Plurals"),v=function t(){_classCallCheck(this,t)},y=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).locale=t,r.deprecatedPluralFn=n,r}return _inherits(e,t),_createClass(e,[{key:"getPluralCategory",value:function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):d(e||this.locale)(t)){case f.Zero:return"zero";case f.One:return"one";case f.Two:return"two";case f.Few:return"few";case f.Many:return"many";default:return"other"}}}]),e}(v);function g(t,e){e=encodeURIComponent(e);var n=!0,r=!1,i=void 0;try{for(var o,a=t.split(";")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.indexOf("="),c=_slicedToArray(-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],2),l=c[0],h=c[1];if(l.trim()===e)return decodeURIComponent(h)}}catch(f){r=!0,i=f}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}var m=function(){function t(e,n,r,i){_classCallCheck(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return _createClass(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),_=function(){function t(e,n,r){_classCallCheck(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOfDirty=!0,this._differ=null}return _createClass(t,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new m(null,e._ngForOf,-1,-1),null===i?void 0:i),a=new b(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new b(t,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}},{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(t){Object(r.T)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". ")+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}(),b=function t(e,n){_classCallCheck(this,t),this.record=e,this.view=n},w=function(){function t(e,n){_classCallCheck(this,t),this._viewContainer=e,this._context=new C,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(t,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){k("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){k("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}}]),t}(),C=function t(){_classCallCheck(this,t),this.$implicit=null,this.ngIf=null};function k(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(Object(r.Eb)(e),"'."))}var E=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"createSubscription",value:function(t,e){return t.subscribe({next:e,error:function(t){throw t}})}},{key:"dispose",value:function(t){t.unsubscribe()}},{key:"onDestroy",value:function(t){t.unsubscribe()}}]),t}(),I=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"createSubscription",value:function(t,e){return t.then(e,(function(t){throw t}))}},{key:"dispose",value:function(t){}},{key:"onDestroy",value:function(t){}}]),t}()),T=new E,S=function(){function t(e){_classCallCheck(this,t),this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return _createClass(t,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):Object(r.wb)(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.O.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}},{key:"_subscribe",value:function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,(function(n){return e._updateLatestValue(t,n)}))}},{key:"_selectStrategy",value:function(e){if(Object(r.vb)(e))return I;if(Object(r.ub)(e))return T;throw n=t,Error("InvalidPipeArgument: '".concat(e,"' for pipe '").concat(Object(r.Eb)(n),"'"));var n}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}]),t}(),A=function t(){_classCallCheck(this,t)},N=new r.o("DocumentToken"),O="browser";function R(t){return"server"===t}var x=function(){var t=function t(){_classCallCheck(this,t)};return t.ngInjectableDef=Object(r.Lb)({token:t,providedIn:"root",factory:function(){return new P(Object(r.Mb)(N),window,Object(r.Mb)(r.l))}}),t}(),P=function(){function t(e,n,r){_classCallCheck(this,t),this.document=e,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var e=this.document.querySelector("#".concat(t));if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='".concat(t,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}]),t}()},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("HDdC"),i=n("ngJS"),o=n("a7t3"),a=n("pLzU"),s=n("CRDf"),u=n("I55L"),c=n("c2HN"),l=n("XoHu"),h=n("Lhse"),f=n("kJWO"),d=function(t){if(t instanceof r.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[f.a])return Object(s.a)(t);if(Object(u.a)(t))return Object(i.a)(t);if(Object(c.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[h.a])return Object(a.a)(t);var e=Object(l.a)(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(e," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),a=n("yCtX");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=e[e.length-1];return Object(i.a)(c)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(s=e.pop())):"number"==typeof c&&(s=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(s)(Object(a.a)(e,u))}},WMd4:function(t,e,n){"use strict";var r=n("EY2u"),i=n("LRne"),o=n("HDdC");n.d(e,"a",(function(){return a}));var a=function(){var t=function(){function t(e,n,r){_classCallCheck(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return _createClass(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a((function(e){return e.error(t)}));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}();return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},XNiG:function(t,e,n){"use strict";var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),a=n("9ppp"),s=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).subject=t,r.subscriber=n,r.closed=!1,r}return _inherits(e,t),_createClass(e,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),e}(o.a),u=n("2QA8");n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return h}));var c,l=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).destination=t,n}return _inherits(e,t),e}(i.a),h=((c=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _inherits(e,t),_createClass(e,[{key:u.a,value:function(){return new l(this)}},{key:"lift",value:function(t){var e=new f(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new a.a;return _get(_getPrototypeOf(e.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new s(this,t))}},{key:"asObservable",value:function(){var t=new r.a;return t.source=this,t}}]),e}(r.a)).create=function(t,e){return new f(t,e)},c),f=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).destination=t,r.source=n,r}return _inherits(e,t),_createClass(e,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):o.a.EMPTY}}]),e}(h)},XUOw:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t){var e=new r.a((function(e){e.next(t),e.complete()}));return e._isScalar=!0,e.value=t,e}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Yml6:function(t,e,n){"use strict";var r=n("DQLy"),i=n("VRyK"),o=n("HDdC"),a=n("XNiG"),s=(n("NXyV"),n("WMd4")),u=n("7o/Q"),c=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new l(t))}}]),t}(),l=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){}}]),e}(u.a),h=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new f(t))}}]),t}(),f=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.destination.next(s.a.createNext(t))}},{key:"_error",value:function(t){var e=this.destination;e.next(s.a.createError(t)),e.complete()}},{key:"_complete",value:function(){var t=this.destination;t.next(s.a.createComplete()),t.complete()}}]),e}(u.a),d=n("lJxs"),p=n("JIr8"),v=n("pLZG"),y=n("quSY");function g(t,e,n,r){return function(i){return i.lift(new m(t,e,n,r))}}var m=function(){function t(e,n,r,i){_classCallCheck(this,t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new _(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}]),t}(),_=function(t){function e(t,n,r,i,o){var a;return _classCallCheck(this,e),(a=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).keySelector=n,a.elementSelector=r,a.durationSelector=i,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){var e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}},{key:"_group",value:function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(u){this.error(u)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new a.a,n.set(e,i);var o=new w(e,i,this);if(this.destination.next(o),this.durationSelector){var s;try{s=this.durationSelector(new w(e,i))}catch(u){return void this.error(u)}this.add(s.subscribe(new b(e,i,this)))}}i.closed||i.next(r)}},{key:"_error",value:function(t){var e=this.groups;e&&(e.forEach((function(e,n){e.error(t)})),e.clear()),this.destination.error(t)}},{key:"_complete",value:function(){var t=this.groups;t&&(t.forEach((function(t,e){t.complete()})),t.clear()),this.destination.complete()}},{key:"removeGroup",value:function(t){this.groups.delete(t)}},{key:"unsubscribe",value:function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&_get(_getPrototypeOf(e.prototype),"unsubscribe",this).call(this))}}]),e}(u.a),b=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n))).key=t,i.group=n,i.parent=r,i}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.complete()}},{key:"_unsubscribe",value:function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)}}]),e}(u.a),w=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).key=t,i.groupSubject=n,i.refCountSubscription=r,i}return _inherits(e,t),_createClass(e,[{key:"_subscribe",value:function(t){var e=new y.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new C(n)),e.add(r.subscribe(t)),e}}]),e}(o.a),C=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).parent=t,t.count++,n}return _inherits(e,t),_createClass(e,[{key:"unsubscribe",value:function(){var t=this.parent;t.closed||this.closed||(_get(_getPrototypeOf(e.prototype),"unsubscribe",this).call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}]),e}(y.a),k=n("5+tZ"),E=n("l7GE"),I=n("51Dv"),T=n("ZUHj"),S=n("Cfvw"),A=function(){function t(e){_classCallCheck(this,t),this.project=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new N(t,this.project))}}]),t}(),N=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.hasSubscription||this.tryNext(t)}},{key:"tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var r=new I.a(this,void 0,void 0);this.destination.add(r),Object(T.a)(this,t,e,n,r)}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}]),e}(E.a),O=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new R(t))}}]),t}(),R=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){t.observe(this.destination)}}]),e}(u.a);n("bOdf"),n("nYR2");var x=n("8Y7J");n.d(e,"h",(function(){return X})),n.d(e,"g",(function(){return J})),n.d(e,"l",(function(){return K})),n.d(e,"k",(function(){return W})),n.d(e,"j",(function(){return G})),n.d(e,"i",(function(){return B})),n.d(e,"b",(function(){return M})),n.d(e,"a",(function(){return V})),n.d(e,"f",(function(){return q})),n.d(e,"c",(function(){return H})),n.d(e,"d",(function(){return Y})),n.d(e,"e",(function(){return Q}));var P={dispatch:!0,resubscribeOnError:!0};function D(t){return Object.getOwnPropertyNames(t).filter((function(e){return t[e]&&t[e].hasOwnProperty("__@ngrx/effects_create__")})).map((function(e){return Object.assign({propertyName:e},t[e]["__@ngrx/effects_create__"])}))}function L(t){return Object.getPrototypeOf(t)}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){var r,i;r=e,i=Object.assign({},P,t,{propertyName:n}),U(r)?r.constructor["__@ngrx/effects__"].push(i):Object.defineProperty(r.constructor,"__@ngrx/effects__",{value:[i]})}}function j(t){return Object(r.t)(F,L)(t)}function U(t){return t.constructor.hasOwnProperty("__@ngrx/effects__")}function F(t){return U(t)?t.constructor["__@ngrx/effects__"]:[]}var V=function(t){function e(t){var n;return _classCallCheck(this,e),n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),t&&(n.source=t),n}return _inherits(e,t),_createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}}]),e}(o.a);function q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(v.a)((function(t){return e.some((function(e){return"string"==typeof e?e===t.type:e.type===t.type}))}))}var H=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).errorHandler=t,r.store=n,r}return _inherits(e,t),_createClass(e,[{key:"addEffects",value:function(t){this.next(t),"ngrxOnInitEffects"in t&&"function"==typeof t.ngrxOnInitEffects&&this.store.dispatch(t.ngrxOnInitEffects())}},{key:"toActions",value:function(){var t=this;return this.pipe(g(L),Object(k.a)((function(t){return t.pipe(g(z))})),Object(k.a)((function(e){return e.pipe(function t(e,n){return n?function(r){return r.pipe(t((function(t,r){return Object(S.a)(e(t,r)).pipe(Object(d.a)((function(e,i){return n(t,e,r,i)})))})))}:function(t){return t.lift(new A(e))}}((n=t.errorHandler,function(t){var e=function(t,e){var n,r=L(t).constructor.name,o=(n=t,[j,D].reduce((function(t,e){return t.concat(e(n))}),[])).map((function(n){var i=n.propertyName,o=n.dispatch,a=n.resubscribeOnError,s="function"==typeof t[i]?t[i]():t[i],u=a?function t(e,n){return e.pipe(Object(p.a)((function(r){return n&&n.handleError(r),t(e,n)})))}(s,e):s;return!1===o?u.pipe((function(t){return t.lift(new c)})):u.pipe((function(t){return t.lift(new h)})).pipe(Object(d.a)((function(e){return{effect:t[i],notification:e,propertyName:i,sourceName:r,sourceInstance:t}})))}));return Object(i.a).apply(void 0,_toConsumableArray(o))}(t,n);return function(t){var e=L(t);return"ngrxOnRunEffects"in e&&"function"==typeof e.ngrxOnRunEffects}(t)?t.ngrxOnRunEffects(e):e})),Object(d.a)((function(e){return function(t,e){if("N"===t.notification.kind){var n=t.notification.value;!function(t){return"function"!=typeof t&&t&&t.type&&"string"==typeof t.type}(n)&&e.handleError(new Error("Effect ".concat((r=t,i=r.propertyName,o=r.sourceInstance,a=r.sourceName,s="function"==typeof o[i],'"'.concat(a,".").concat(String(i)).concat(s?"()":"",'"'))," dispatched an invalid action: ").concat(function(t){try{return JSON.stringify(t)}catch(e){return t}}(n))))}var r,i,o,a,s}(e,t.errorHandler),e.notification})),Object(v.a)((function(t){return"N"===t.kind})),(function(t){return t.lift(new O)}));var n})))}}]),e}(a.a);function z(t){return"ngrxOnIdentifyEffects"in t&&"function"==typeof t.ngrxOnIdentifyEffects?t.ngrxOnIdentifyEffects():""}var B=new x.o("@ngrx/effects Internal Root Guard"),G=new x.o("ngrx/effects: Root Effects"),W=new x.o("ngrx/effects: Feature Effects"),K=function(){function t(e,n){_classCallCheck(this,t),this.effectSources=e,this.store=n,this.effectsSubscription=null}return _createClass(t,[{key:"start",value:function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}},{key:"ngOnDestroy",value:function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}]),t}(),Q=function(){function t(e,n,r,i,o,a,s){_classCallCheck(this,t),this.sources=e,n.start(),i.forEach((function(t){return e.addEffects(t)})),r.dispatch({type:"@ngrx/effects/init"})}return _createClass(t,[{key:"addEffects",value:function(t){this.sources.addEffects(t)}}]),t}(),Y=function t(e,n,r,i){_classCallCheck(this,t),n.forEach((function(t){return t.forEach((function(t){return e.addEffects(t)}))}))};function J(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function X(t){if(t)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("51Dv"),i=n("SeVD");function o(t,e,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new r.a(t,n,o);if(!a.closed)return Object(i.a)(e)(a)}},a7t3:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("NJ4a"),i=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,r.a),e}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.a)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("5+tZ");function i(t,e){return Object(r.a)(t,e,1)}},bQlE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("fSjL");var o,a,s,u,c,l=n("mrSG"),h=n("zVF4"),f=n("q/0M"),d=n("S+S0"),p=((o={})["trace started"]="Trace {$traceName} was started before.",o["trace stopped"]="Trace {$traceName} is not running.",o["no window"]="Window is not available.",o["no app id"]="App id is not available.",o["no project id"]="Project id is not available.",o["no api key"]="Api key is not available.",o["invalid cc log"]="Attempted to queue invalid cc event",o["FB not default"]="Performance can only start when Firebase app instance is the default one.",o["RC response not ok"]="RC response is not ok",o["invalid attribute name"]="Attribute name {$attributeName} is invalid.",o["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",o["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",o),v=new h.ErrorFactory("performance","Performance",p),y=function(){function t(t){if(this.window=t,!t)throw v.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===a&&(a=new t(s)),a},t}(),g=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw v.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw v.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw v.create("no api key");return t},t.getInstance=function(){return void 0===u&&(u=new t),u},t}();function m(){return c}var _=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),b=["firebase_","google_","ga_"],w=new RegExp("^[a-zA-Z]\\w*$");function C(){var t=y.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function k(){switch(y.getInstance().document.visibilityState){case"visible":return _.VISIBLE;case"hidden":return _.HIDDEN;default:return _.UNKNOWN}}function E(){var t=y.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var I=new f.Logger("Performance");function T(t){if(!t)return t;var e=g.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=S(e.tracesSamplingRate),e.logNetworkAfterSampling=S(e.networkRequestsSamplingRate),t}function S(t){return Math.random()<=t}I.logLevel=f.LogLevel.INFO;var A,N=1;function O(){return N=2,A=A||function(){var t=y.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){t.addEventListener("readystatechange",(function n(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())}))}else e()}))}().then((function(){return(t=g.getInstance().installationsService.getId()).then((function(t){c=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=y.getInstance().localStorage;if(t){var e=t.getItem("@firebase/performance/configexpire");if(e&&Number(e)>Date.now()){var n=t.getItem("@firebase/performance/config");if(n)try{return JSON.parse(n)}catch(o){return}}}}();return e?(T(e),Promise.resolve()):function(t){return(e=g.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+g.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+g.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:g.getInstance().getAppId(),app_version:"0.2.34",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw v.create("RC response not ok")}))})).catch((function(){I.info("Could not fetch config, will use default configs")}));var e}(t).then((function(t){return T(t)})).then((function(t){return function(t){var e=y.getInstance().localStorage;t&&e&&(e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*g.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return R()}),(function(){return R()}))}function R(){N=3}var x,P=3,D=[],L=!1;function M(t){if(!t.eventTime||!t.message)throw v.create("invalid cc log");D=l.__spreadArrays(D,[t])}function j(t,e){x||(x=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);M({message:r,eventTime:Date.now()})}}(V)),x(t,e)}function U(t){var e=g.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&y.getInstance().requiredApisAvailable()&&(t.isAuto&&k()!==_.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===N?F(t):O().then((function(){return F(t)}),(function(){return F(t)}))))}function F(t){m()&&setTimeout((function(){return j(t,1)}),0)}function V(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:q(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:q(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function q(){return{google_app_id:g.getInstance().getAppId(),app_instance_id:m(),web_app_info:{sdk_version:"0.2.34",page_url:y.getInstance().getUrl(),service_worker_status:C(),visibility_state:k(),effective_connection_type:E()},application_process_state:0}}var H=["_fp","_fcp","_fid"],z=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=y.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw v.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw v.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),U(this)},t.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=l.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}U(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},t.prototype.putMetric=function(t,e){if(r=this.name,0===(n=t).length||n.length>100||!(r&&r.startsWith("_wt_")&&H.indexOf(n)>-1)&&n.startsWith("_"))throw v.create("invalide custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||b.some((function(t){return n.startsWith(t)}))||!n.match(w)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw v.create("invalid attribute name",{attributeName:t});if(!i)throw v.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return l.__assign({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=y.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),a=Math.floor(1e3*y.getInstance().getTimeOrigin());if(o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}U(o)}},t.createUserTimingTrace=function(e){U(new t(e,!1,e))},t}();function B(t){var e,n,r=t;if(r&&void 0!==r.responseStart){var i=y.getInstance().getTimeOrigin(),o=Math.floor(1e3*(r.startTime+i)),a=r.responseStart?Math.floor(1e3*(r.responseStart-r.startTime)):void 0,s=Math.floor(1e3*(r.responseEnd-r.startTime));e={url:r.name&&r.name.split("?")[0],responsePayloadBytes:r.transferSize,startTimeUs:o,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:s},(n=g.getInstance()).instrumentationEnabled&&e.url!==n.logEndPointUrl.split("?")[0]&&n.loggingEnabled&&n.logNetworkAfterSampling&&setTimeout((function(){return j(e,0)}),0)}}function G(){m()&&(setTimeout((function(){return function(){var t=y.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){z.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),z.createOobTrace(e,n,t))}))}else z.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=y.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)B(n[e]);t.setupObserver("resource",B)}()}),0),setTimeout((function(){return function(){for(var t=y.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)W(n[e]);t.setupObserver("measure",W)}()}),0))}function W(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&z.createUserTimingTrace(e)}var K=function(){function t(t){this.app=t,y.getInstance().requiredApisAvailable()?(L||(function t(e){setTimeout((function(){if(0!==P){if(!D.length)return t(1e4);var e=l.__spreadArrays(D);D=[];var n=e.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:g.getInstance().logSource,log_event:n};fetch(g.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(r)}).then((function(t){return t.ok||I.info("Call to Firebase backend failed."),t.json()})).then((function(e){var n=Number(e.next_request_wait_millis),r=isNaN(n)?1e4:Math.max(1e4,n);P=3,t(r)})).catch((function(){D=l.__spreadArrays(e,D),P--,I.info("Tries left: "+P+"."),t(1e4)}))}}),e)}(5500),L=!0),O().then(G,G)):I.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return t.prototype.trace=function(t){return new z(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return g.getInstance().instrumentationEnabled},set:function(t){g.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return g.getInstance().dataCollectionEnabled},set:function(t){g.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),t}();function Q(t){t.INTERNAL.registerComponent(new d.Component("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw v.create("FB not default");if("undefined"==typeof window)throw v.create("no window");return function(t){s=t}(window),g.getInstance().firebaseAppInstance=t,g.getInstance().installationsService=e,new K(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance","0.2.34")}Q(i),e.registerPerformance=Q},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},cUpR:function(t,e,n){"use strict";n.d(e,"q",(function(){return y})),n.d(e,"r",(function(){return C})),n.d(e,"a",(function(){return ht})),n.d(e,"h",(function(){return lt})),n.d(e,"c",(function(){return k})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return Q})),n.d(e,"f",(function(){return Y})),n.d(e,"g",(function(){return J})),n.d(e,"b",(function(){return et})),n.d(e,"p",(function(){return v})),n.d(e,"s",(function(){return a})),n.d(e,"j",(function(){return x})),n.d(e,"i",(function(){return W})),n.d(e,"m",(function(){return X})),n.d(e,"n",(function(){return tt})),n.d(e,"l",(function(){return S})),n.d(e,"o",(function(){return T})),n.d(e,"k",(function(){return nt}));var r=n("SVse"),i=n("8Y7J"),o=null;function a(){return o}var s,u={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},c={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},l={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},h=function(){if(i.rb.Node)return i.rb.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}}(),f=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"parse",value:function(t){throw new Error("parse not implemented")}},{key:"hasProperty",value:function(t,e){return e in t}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"getProperty",value:function(t,e){return t[e]}},{key:"invoke",value:function(t,e,n){t[e].apply(t,_toConsumableArray(n))}},{key:"logError",value:function(t){window.console&&(console.error?console.error(t):console.log(t))}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"contains",value:function(t,e){return h.call(t,e)}},{key:"querySelector",value:function(t,e){return t.querySelector(e)}},{key:"querySelectorAll",value:function(t,e){return t.querySelectorAll(e)}},{key:"on",value:function(t,e,n){t.addEventListener(e,n,!1)}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"createMouseEvent",value:function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}},{key:"createEvent",value:function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}},{key:"preventDefault",value:function(t){t.preventDefault(),t.returnValue=!1}},{key:"isPrevented",value:function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}},{key:"getInnerHTML",value:function(t){return t.innerHTML}},{key:"getTemplateContent",value:function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}},{key:"getOuterHTML",value:function(t){return t.outerHTML}},{key:"nodeName",value:function(t){return t.nodeName}},{key:"nodeValue",value:function(t){return t.nodeValue}},{key:"type",value:function(t){return t.type}},{key:"content",value:function(t){return this.hasProperty(t,"content")?t.content:t}},{key:"firstChild",value:function(t){return t.firstChild}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"parentElement",value:function(t){return t.parentNode}},{key:"childNodes",value:function(t){return t.childNodes}},{key:"childNodesAsList",value:function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n}},{key:"clearNodes",value:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"removeChild",value:function(t,e){t.removeChild(e)}},{key:"replaceChild",value:function(t,e,n){t.replaceChild(e,n)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"insertBefore",value:function(t,e,n){t.insertBefore(n,e)}},{key:"insertAllBefore",value:function(t,e,n){n.forEach((function(n){return t.insertBefore(n,e)}))}},{key:"insertAfter",value:function(t,e,n){t.insertBefore(n,e.nextSibling)}},{key:"setInnerHTML",value:function(t,e){t.innerHTML=e}},{key:"getText",value:function(t){return t.textContent}},{key:"setText",value:function(t,e){t.textContent=e}},{key:"getValue",value:function(t){return t.value}},{key:"setValue",value:function(t,e){t.value=e}},{key:"getChecked",value:function(t){return t.checked}},{key:"setChecked",value:function(t,e){t.checked=e}},{key:"createComment",value:function(t){return this.getDefaultDocument().createComment(t)}},{key:"createTemplate",value:function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createElementNS",value:function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}},{key:"createTextNode",value:function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}},{key:"createScriptTag",value:function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}},{key:"createStyleElement",value:function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}},{key:"createShadowRoot",value:function(t){return t.createShadowRoot()}},{key:"getShadowRoot",value:function(t){return t.shadowRoot}},{key:"getHost",value:function(t){return t.host}},{key:"clone",value:function(t){return t.cloneNode(!0)}},{key:"getElementsByClassName",value:function(t,e){return t.getElementsByClassName(e)}},{key:"getElementsByTagName",value:function(t,e){return t.getElementsByTagName(e)}},{key:"classList",value:function(t){return Array.prototype.slice.call(t.classList,0)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"hasClass",value:function(t,e){return t.classList.contains(e)}},{key:"setStyle",value:function(t,e,n){t.style[e]=n}},{key:"removeStyle",value:function(t,e){t.style[e]=""}},{key:"getStyle",value:function(t,e){return t.style[e]}},{key:"hasStyle",value:function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0}},{key:"tagName",value:function(t){return t.tagName}},{key:"attributeMap",value:function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e}},{key:"hasAttribute",value:function(t,e){return t.hasAttribute(e)}},{key:"hasAttributeNS",value:function(t,e,n){return t.hasAttributeNS(e,n)}},{key:"getAttribute",value:function(t,e){return t.getAttribute(e)}},{key:"getAttributeNS",value:function(t,e,n){return t.getAttributeNS(e,n)}},{key:"setAttribute",value:function(t,e,n){t.setAttribute(e,n)}},{key:"setAttributeNS",value:function(t,e,n,r){t.setAttributeNS(e,n,r)}},{key:"removeAttribute",value:function(t,e){t.removeAttribute(e)}},{key:"removeAttributeNS",value:function(t,e,n){t.removeAttributeNS(e,n)}},{key:"templateAwareRoot",value:function(t){return this.isTemplateElement(t)?this.content(t):t}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"getBoundingClientRect",value:function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},{key:"getTitle",value:function(t){return t.title}},{key:"setTitle",value:function(t,e){t.title=e||""}},{key:"elementMatches",value:function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}},{key:"isTemplateElement",value:function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}},{key:"isTextNode",value:function(t){return t.nodeType===Node.TEXT_NODE}},{key:"isCommentNode",value:function(t){return t.nodeType===Node.COMMENT_NODE}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"hasShadowRoot",value:function(t){return null!=t.shadowRoot&&t instanceof HTMLElement}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"importIntoDoc",value:function(t){return document.importNode(this.templateAwareRoot(t),!0)}},{key:"adoptNode",value:function(t){return document.adoptNode(t)}},{key:"getHref",value:function(t){return t.getAttribute("href")}},{key:"getEventKey",value:function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&l.hasOwnProperty(e)&&(e=l[e]))}return c[e]||e}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=d||(d=document.querySelector("base"))?d.getAttribute("href"):null;return null==n?null:(e=n,s||(s=document.createElement("a")),s.setAttribute("href",e),"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname)}},{key:"resetBaseElement",value:function(){d=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"setData",value:function(t,e,n){this.setAttribute(t,"data-"+e,n)}},{key:"getData",value:function(t,e){return this.getAttribute(t,"data-"+e)}},{key:"getComputedStyle",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return getComputedStyle(t)}))},{key:"supportsWebAnimation",value:function(){return"function"==typeof Element.prototype.animate}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return Object(r.s)(document.cookie,t)}},{key:"setCookie",value:function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}},{key:"attrToPropMap",get:function(){return u}}],[{key:"makeCurrent",value:function(){var t;t=new e,o||(o=t)}}]),e}(function(t){function e(){var t;_classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=t.getStyle(n,r[i]+"AnimationName")){t._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach((function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])}))}catch(a){t._animationPrefix=null,t._transitionEnd=null}return t}return _inherits(e,t),_createClass(e,[{key:"getDistributedNodes",value:function(t){return t.getDistributedNodes()}},{key:"resolveAndSetHref",value:function(t,e,n){t.href=null==n?e:e+"/../"+n}},{key:"supportsDOMEvents",value:function(){return!0}},{key:"supportsNativeShadowDOM",value:function(){return"function"==typeof document.body.createShadowRoot}},{key:"getAnimationPrefix",value:function(){return this._animationPrefix?this._animationPrefix:""}},{key:"getTransitionEnd",value:function(){return this._transitionEnd?this._transitionEnd:""}},{key:"supportsAnimation",value:function(){return null!=this._animationPrefix&&null!=this._transitionEnd}}]),e}(function(){function t(){_classCallCheck(this,t),this.resourceLoaderType=null}return _createClass(t,[{key:"attrToPropMap",get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t}}]),t}())),d=null;function p(){return!!window.history.pushState}var v=new i.o("TRANSITION_ID");function y(t,e,n){return function(){n.get(i.e).donePromise.then((function(){var n=a();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter((function(e){return n.getAttribute(e,"ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}}var g=[{provide:i.d,useFactory:y,deps:[v,r.d,i.p],multi:!0}],m=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){i.rb.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.rb.getAllAngularTestabilities=function(){return t.getAllTestabilities()},i.rb.getAllAngularRootElements=function(){return t.getAllRootElements()},i.rb.frameworkStabilizers||(i.rb.frameworkStabilizers=[]),i.rb.frameworkStabilizers.push((function(t){var e=i.rb.getAllAngularTestabilities(),n=e.length,r=!1,o=function(e){r=r||e,0==--n&&t(r)};e.forEach((function(t){t.whenStable(o)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?a().isShadowRoot(e)?this.findTestabilityInTree(t,a().getHost(e),!0):this.findTestabilityInTree(t,a().parentElement(e),!0):null}}],[{key:"init",value:function(){Object(i.V)(new t)}}]),t}();function _(t,e){"undefined"!=typeof COMPILED&&COMPILED||((i.rb.ng=i.rb.ng||{})[t]=e)}var b={ApplicationRef:i.g,NgZone:i.x};function w(t){return Object(i.S)(t)}function C(t){return _("probe",w),_("coreTokens",Object.assign({},b,(t||[]).reduce((function(t,e){return t[e.name]=e.token,t}),{}))),function(){return w}}var k=new i.o("EventManagerPlugins"),E=function(){function t(e,n){var r=this;_classCallCheck(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=r})),this._plugins=e.slice().reverse()}return _createClass(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event ".concat(t))}}]),t}(),I=function(){function t(e){_classCallCheck(this,t),this._doc=e}return _createClass(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=a().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),T=function(){function t(){_classCallCheck(this,t),this._stylesSet=new Set}return _createClass(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}(),S=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return _inherits(e,t),_createClass(e,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return a().remove(t)}))}}]),e}(T),A={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},N=/%COMP%/g;function O(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?O(t,i,n):(i=i.replace(N,t),n.push(i))}return n}function R(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var x=function(){function t(e,n,r){_classCallCheck(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new P(e)}return _createClass(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.N.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new M(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case i.N.Native:case i.N.ShadowDom:return new j(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=O(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}(),P=function(){function t(e){_classCallCheck(this,t),this.eventManager=e,this.data=Object.create(null)}return _createClass(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(A[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=A[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=A[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&i.D.DashCase?t.style.setProperty(e,n,r&i.D.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&i.D.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){L(e,"property"),t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return L(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,R(n)):this.eventManager.addEventListener(t,e,R(n))}}]),t}(),D="@".charCodeAt(0);function L(t,e){if(t.charCodeAt(0)===D)throw new Error("Found the synthetic ".concat(e," ").concat(t,'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.'))}var M=function(t){function e(t,n,r,i){var o;_classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).component=r;var a,s=O(i+"-"+r.id,r.styles,[]);return n.addStyles(s),o.contentAttr="_ngcontent-%COMP%".replace(N,i+"-"+r.id),o.hostAttr=(a=i+"-"+r.id,"_nghost-%COMP%".replace(N,a)),o}return _inherits(e,t),_createClass(e,[{key:"applyToHost",value:function(t){_get(_getPrototypeOf(e.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,n){var r=_get(_getPrototypeOf(e.prototype),"createElement",this).call(this,t,n);return _get(_getPrototypeOf(e.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),e}(P),j=function(t){function e(t,n,r,o){var a;_classCallCheck(this,e),(a=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).sharedStylesHost=n,a.hostEl=r,a.component=o,a.shadowRoot=o.encapsulation===i.N.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=O(o.id,o.styles,[]),u=0;u<s.length;u++){var c=document.createElement("style");c.textContent=s[u],a.shadowRoot.appendChild(c)}return a}return _inherits(e,t),_createClass(e,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,n){return _get(_getPrototypeOf(e.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),n)}},{key:"insertBefore",value:function(t,n,r){return _get(_getPrototypeOf(e.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),n,r)}},{key:"removeChild",value:function(t,n){return _get(_getPrototypeOf(e.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),n)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(_get(_getPrototypeOf(e.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),e}(P),U="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},F=U("addEventListener"),V=U("removeEventListener"),q={},H="__zone_symbol__propagationStopped",z=function(){var t="undefined"!=typeof Zone&&Zone[U("BLACK_LISTED_EVENTS")];if(t){var e={};return t.forEach((function(t){e[t]=t})),e}}(),B=function(t){return!!z&&z.hasOwnProperty(t)},G=function(t){var e=q[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length){var i=n[0];return i.zone!==Zone.current?i.zone.run(i.handler,this,r):i.handler.apply(this,r)}for(var o=n.slice(),a=0;a<o.length&&!0!==t[H];a++){var s=o[a];s.zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}},W=function(t){function e(t,n,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).ngZone=n,i&&Object(r.p)(i)||o.patchEvent(),o}return _inherits(e,t),_createClass(e,[{key:"patchEvent",value:function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[H]=!0),t&&t.apply(this,arguments)}}}},{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this,o=n;if(!t[F]||i.x.isInAngularZone()&&!B(e))t.addEventListener(e,o,!1);else{var a=q[e];a||(a=q[e]=U("ANGULAR"+e+"FALSE"));var s=t[a],u=s&&s.length>0;s||(s=t[a]=[]);var c=B(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:c,handler:o});else{for(var l=!1,h=0;h<s.length;h++)if(s[h].handler===o){l=!0;break}l||s.push({zone:c,handler:o})}u||t[F](e,G,!1)}return function(){return r.removeEventListener(t,e,o)}}},{key:"removeEventListener",value:function(t,e,n){var r=t[V];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=q[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,G,!1]):t.removeEventListener.apply(t,[e,n,!1])}}]),e}(I),K={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Q=new i.o("HammerGestureConfig"),Y=new i.o("HammerLoader"),J=function(){function t(){_classCallCheck(this,t),this.events=[],this.overrides={}}return _createClass(t,[{key:"buildHammer",value:function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e}}]),t}(),X=function(t){function e(t,n,r,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t)))._config=n,o.console=r,o.loader=i,o}return _inherits(e,t),_createClass(e,[{key:"supports",value:function(t){return!(!K.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'.concat(t,'" event cannot be bound because Hammer.JS is not ')+"loaded and no custom loader has been specified."),1))}},{key:"addEventListener",value:function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then((function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(t,e,n))})).catch((function(){r.console.warn('The "'.concat(e,'" event cannot be bound because the custom ')+"Hammer.JS loader failed."),a=function(){}})),function(){a()}}return i.runOutsideAngular((function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded((function(){n(t)}))};return o.on(e,a),function(){o.off(e,a),"function"==typeof o.destroy&&o.destroy()}}))}},{key:"isCustomEvent",value:function(t){return this._config.events.indexOf(t)>-1}}]),e}(I),$=["alt","control","meta","shift"],Z={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},tt=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,t),_createClass(e,[{key:"supports",value:function(t){return null!=e.parseEventName(t)}},{key:"addEventListener",value:function(t,n,r){var i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return a().onAndCancel(t,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=e._normalizeKey(n.pop()),o="";if($.forEach((function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")})),o+=i,0!=n.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=a().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),$.forEach((function(r){r!=n&&(0,Z[r])(t)&&(e+=r+".")})),e+=n}},{key:"eventCallback",value:function(t,n,r){return function(i){e.getEventFullKey(i)===t&&r.runGuarded((function(){return n(i)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),e}(I),et=function t(){_classCallCheck(this,t)},nt=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._doc=t,n}return _inherits(e,t),_createClass(e,[{key:"sanitize",value:function(t,e){if(null==e)return null;switch(t){case i.F.NONE:return e;case i.F.HTML:return e instanceof it?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),Object(i.bb)(this._doc,String(e)));case i.F.STYLE:return e instanceof ot?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),Object(i.cb)(e));case i.F.SCRIPT:if(e instanceof at)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case i.F.URL:return e instanceof ut||e instanceof st?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Object(i.db)(String(e)));case i.F.RESOURCE_URL:if(e instanceof ut)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(t," (see http://g.co/ng/security#xss)"))}}},{key:"checkNotSafeValue",value:function(t,e){if(t instanceof rt)throw new Error("Required a safe ".concat(e,", got a ").concat(t.getTypeName()," ")+"(see http://g.co/ng/security#xss)")}},{key:"bypassSecurityTrustHtml",value:function(t){return new it(t)}},{key:"bypassSecurityTrustStyle",value:function(t){return new ot(t)}},{key:"bypassSecurityTrustScript",value:function(t){return new at(t)}},{key:"bypassSecurityTrustUrl",value:function(t){return new st(t)}},{key:"bypassSecurityTrustResourceUrl",value:function(t){return new ut(t)}}]),e}(et),rt=function(){function t(e){_classCallCheck(this,t),this.changingThisBreaksApplicationSecurity=e}return _createClass(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),t}(),it=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"HTML"}}]),e}(rt),ot=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"Style"}}]),e}(rt),at=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"Script"}}]),e}(rt),st=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"URL"}}]),e}(rt),ut=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),e}(rt),ct=[{provide:i.z,useValue:r.q},{provide:i.A,useValue:function(){f.makeCurrent(),m.init()},multi:!0},{provide:r.n,useClass:function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._doc=t,n._init(),n}return _inherits(e,t),_createClass(e,[{key:"_init",value:function(){this.location=a().getLocation(),this._history=a().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return a().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){a().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){a().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"pushState",value:function(t,e,n){p()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){p()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),e}(r.n),deps:[r.d]},{provide:r.d,useFactory:function(){return document},deps:[]}],lt=Object(i.P)(i.U,"browser",ct),ht=function(){function t(e){if(_classCallCheck(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:i.c,useValue:e.appId},{provide:v,useExisting:i.c},g]}}}]),t}();"undefined"!=typeof window&&window},eIep:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("l7GE"),i=n("51Dv"),o=n("ZUHj"),a=n("lJxs"),s=n("Cfvw");function u(t,e){return"function"==typeof e?function(n){return n.pipe(u((function(n,r){return Object(s.a)(t(n,r)).pipe(Object(a.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new c(t))}}var c=function(){function t(e){_classCallCheck(this,t),this.project=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new l(t,this.project))}}]),t}(),l=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).project=n,r.index=0,r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var a=new i.a(this,void 0,void 0);this.destination.add(a),this.innerSubscription=Object(o.a)(this,t,e,n,a)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||_get(_getPrototypeOf(e.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(e.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}}]),e}(r.a)},fSjL:function(t,e,n){"use strict";n.r(e),n.d(e,"registerInstallations",(function(){return K}));var r,i=n("wj3C"),o=n.n(i),a=n("S+S0"),s=n("mrSG"),u=n("zVF4"),c=n("nbvr"),l=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),h=new u.ErrorFactory("installations","Installations",l);function f(t){return t instanceof u.FirebaseError&&t.code.includes("request-failed")}function d(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function p(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function v(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,h.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function y(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function g(t,e){var n=e.refreshToken,r=y(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function m(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function _(t,e){var n=e.fid;return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return e=d(t),r=y(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.4"})},[4,m((function(){return fetch(e,i)}))];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:p(a.authToken)}];case 3:return[4,v("Create Installation",o)];case 4:throw s.sent()}}))}))}function b(t){return new Promise((function(e){setTimeout(e,t)}))}var w=/^[cdef][\w-]{21}$/;function C(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(s.__spread)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return w.test(e)?e:""}catch(r){return""}}function k(t){return t.appName+"!"+t.appId}var E=new Map;function I(t,e){var n=k(t);T(n,e),function(t,e){var n=A();n&&n.postMessage({key:t,fid:e}),N()}(n,e)}function T(t,e){var n,r,i=E.get(t);if(i)try{for(var o=Object(s.__values)(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var S=null;function A(){return!S&&"BroadcastChannel"in self&&((S=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){T(t.data.key,t.data.fid)}),S}function N(){0===E.size&&S&&(S.close(),S=null)}var O="firebase-installations-store",R=null;function x(){return R||(R=Object(c.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(O)}}))),R}function P(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return n=k(t),[4,x()];case 1:return r=s.sent(),i=r.transaction(O,"readwrite"),[4,(o=i.objectStore(O)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||I(t,e.fid),[2,e]}}))}))}function D(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return e=k(t),[4,x()];case 1:return n=i.sent(),[4,(r=n.transaction(O,"readwrite")).objectStore(O).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function L(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,u;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return n=k(t),[4,x()];case 1:return r=s.sent(),i=r.transaction(O,"readwrite"),[4,(o=i.objectStore(O)).get(n)];case 2:return a=s.sent(),void 0!==(u=e(a))?[3,4]:[4,o.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,o.put(u,n)];case 5:s.sent(),s.label=6;case 6:return[4,i.complete];case 7:return s.sent(),!u||a&&a.fid===u.fid||I(t,u.fid),[2,u]}}))}))}function M(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,L(t,(function(n){var r=function(t){return F(t||{fid:C(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(h.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,_(t,e)];case 1:return n=i.sent(),[2,P(t,n)];case 2:return f(r=i.sent())&&409===r.serverCode?[4,D(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,P(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:j(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function j(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return[4,U(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,b(100)];case 3:return o.sent(),[4,U(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,M(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function U(t){return L(t,(function(t){if(!t)throw h.create("installation-not-found");return F(t)}))}function F(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function V(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,i,o,a,u;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return t=function(t,e){var n=e.fid;return d(t)+"/"+n+"/authTokens:generate"}(n,e),i=g(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:"w:0.4.4"}})},[4,m((function(){return fetch(t,a)}))];case 1:return(u=s.sent()).ok?[4,u.json()]:[3,3];case 2:return[2,p(s.sent())];case 3:return[4,v("Generate Auth Token",u)];case 4:throw s.sent()}}))}))}function q(t,e){return void 0===e&&(e=!1),Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return[4,L(t.appConfig,(function(r){if(!z(r))throw h.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,H(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,b(100)];case 3:return i.sent(),[4,H(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,q(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw h.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(s.__assign)(Object(s.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,V(t,e)];case 1:return n=o.sent(),i=Object(s.__assign)(Object(s.__assign)({},e),{authToken:n}),[4,P(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!f(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,D(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(s.__assign)(Object(s.__assign)({},e),{authToken:{requestStatus:0}}),[4,P(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,a),a}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function H(t){return L(t,(function(t){if(!z(t))throw h.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(s.__assign)(Object(s.__assign)({},t),{authToken:{requestStatus:0}}):t}))}function z(t){return void 0!==t&&2===t.registrationStatus}function B(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,M(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function G(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.__generator)(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return d(t)+"/"+n}(t,e),r=g(t,e),i={method:"DELETE",headers:r},[4,m((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,v("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function W(t){return h.create("missing-app-config-values",{valueName:t})}function K(t){t.INTERNAL.registerComponent(new a.Component("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw W("App Configuration");if(!t.name)throw W("App Name");try{for(var r=Object(s.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw W(o)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,M(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):q(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return[4,B(t.appConfig)];case 1:return n.sent(),[4,q(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,L(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw h.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw h.create("app-offline");case 3:return[4,G(e,n)];case 4:return r.sent(),[4,D(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){A();var n=k(t),r=E.get(n);r||(r=new Set,E.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=k(t),r=E.get(n);r&&(r.delete(e),0===r.size&&E.delete(n),N())}(n,e)}}(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.4")}K(o.a)},g0Sx:function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"j",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"h",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"d",(function(){return h})),n.d(e,"i",(function(){return f})),n.d(e,"f",(function(){return d}));var r="SET_RECIPES",i="ADD_RECIPES",o="UPDATE_RECIPES",a="DELETE_RECIPES",s="STORE_RECIPES",u="FETCH_RECIPES",c=function t(e){_classCallCheck(this,t),this.payload=e,this.type=i},l=function t(e){_classCallCheck(this,t),this.payload=e,this.type=o},h=function t(e){_classCallCheck(this,t),this.payload=e,this.type=a},f=function t(){_classCallCheck(this,t),this.type=s},d=function t(){_classCallCheck(this,t),this.type=u}},gHGA:function(t,e,n){"use strict";n.r(e);var r,i=n("wj3C"),o=n.n(i),a=(n("fSjL"),n("S+S0")),s=n("mrSG"),u=n("zVF4"),c=n("nbvr"),l=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["permission-default"]="The notification permission was not granted and dismissed instead.",r["permission-blocked"]="The notification permission was not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",r["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",r["invalid-vapid-key"]="The public VAPID key must be a string.",r["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r),h=new u.ErrorFactory("messaging","Messaging",l);function f(t){return h.create("missing-app-config-values",{valueName:t})}function d(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(s.__spread)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];r.label=2;case 2:return e=null,[4,Object(c.openDb)("fcm_token_details_db",5,(function(r){return Object(s.__awaiter)(n,void 0,void 0,(function(){var n,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains("fcm_token_object_Store")?[4,(n=r.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:d(o.vapidKey)}}}else 3===r.oldVersion?e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:d(o.auth),p256dh:d(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:d(o.vapidKey)}}:4===r.oldVersion&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:d(o.auth),p256dh:d(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:d(o.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,Object(c.deleteDb)("fcm_token_details_db")];case 4:return r.sent(),[4,Object(c.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(c.deleteDb)("undefined")];case 6:return r.sent(),[2,v(e)?e:null]}}))}))}function v(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var y="firebase-messaging-store",g=null;function m(){return g||(g=Object(c.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(y)}}))),g}function _(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return e=C(t),[4,m()];case 1:return[4,i.sent().transaction(y).objectStore(y).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,p(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,b(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function b(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(s.__generator)(this,(function(o){switch(o.label){case 0:return n=C(t),[4,m()];case 1:return r=o.sent(),[4,(i=r.transaction(y,"readwrite")).objectStore(y).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function w(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return e=C(t),[4,m()];case 1:return n=i.sent(),[4,(r=n.transaction(y,"readwrite")).objectStore(y).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function C(t){return t.appConfig.appId}var k="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function E(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,A(t)];case 1:n=s.sent(),r=N(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(S(t.appConfig),i)];case 3:return[4,s.sent().json()];case 4:return o=s.sent(),[3,6];case 5:throw a=s.sent(),h.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw h.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw h.create("token-subscribe-no-token");return[2,o.token]}}))}))}function I(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return[4,A(t)];case 1:n=s.sent(),r=N(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(S(t.appConfig)+"/"+e.token,i)];case 3:return[4,s.sent().json()];case 4:return o=s.sent(),[3,6];case 5:throw a=s.sent(),h.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw h.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw h.create("token-update-no-token");return[2,o.token]}}))}))}function T(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.__generator)(this,(function(a){switch(a.label){case 0:return[4,A(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(S(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw h.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=a.sent(),h.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}}))}))}function S(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function A(t){var e=t.appConfig,n=t.installations;return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function N(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==k&&(n.web.applicationPubKey=e),n}function O(t,e,n){return Object(s.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw h.create("permission-blocked");return[4,D(e,n)];case 1:return r=s.sent(),[4,_(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:d(r.getKey("auth")),p256dh:d(r.getKey("p256dh"))},i?[3,3]:[2,P(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,T(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,P(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,x({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l}))}))}function R(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,_(t)];case 1:return(n=i.sent())?[4,T(t,n.token)]:[3,4];case 2:return i.sent(),[4,w(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function x(t,e,n){return Object(s.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return Object(s.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,I(e,t)];case 1:return r=a.sent(),i=Object(s.__assign)({token:r,createTime:Date.now()},t),[4,b(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,R(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function P(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return[4,E(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,b(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function D(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})]}}))}))}var L=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function M(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}var j=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),t.prototype.getToken=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(e){switch(e.label){case 0:return this.vapidKey||(this.vapidKey=k),[4,this.getServiceWorkerRegistration()];case 1:return t=e.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:e.sent(),e.label=3;case 3:if("granted"!==Notification.permission)throw h.create("permission-blocked");return[2,O(this.firebaseDependencies,t,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return t=e.sent(),[2,R(this.firebaseDependencies,t)]}}))}))},t.prototype.requestPermission=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw h.create("denied"===t?"permission-blocked":"permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw h.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw h.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw h.create("invalid-sw-registration");if(this.swRegistration)throw h.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw h.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.getServiceWorkerRegistration=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:if(this.swRegistration)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,4];case 3:throw e=n.sent(),h.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 4:return[2,this.swRegistration]}}))}))},t.prototype.messageEventListener=function(t){var e;return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(s.__generator)(this,(function(a){switch(a.label){case 0:return(null===(e=t.data)||void 0===e?void 0:e.firebaseMessaging)?(r=(n=t.data.firebaseMessaging).type,i=n.payload,this.onMessageCallback&&r===L.PUSH_RECEIVED&&this.onMessageCallback(i),M(o=i.data)&&"1"===o["google.c.a.e"]?[4,this.logEvent(r,o)]:[3,2]):[2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},t.prototype.logEvent=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case L.NOTIFICATION_CLICKED:return"notification_open";case L.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}(),U=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw h.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.getToken=function(){var t,e;return Object(s.__awaiter)(this,void 0,void 0,(function(){var n;return Object(s.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,_(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:k,r.label=2;case 2:return[2,O(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return R(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw h.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw h.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw h.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw h.create("only-available-in-window")},t.prototype.onMessage=function(){throw h.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw h.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,q()]:[2];case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=i.sent())?[2,V(n,e)]:(r=function(t){var e;if(t&&"object"==typeof t.notification){var n=Object(s.__assign)({},t.notification);return n.data=Object(s.__assign)(Object(s.__assign)({},t.notification.data),((e={}).FCM_MSG=t,e)),n}}(e))?[4,z(r)]:[3,3];case 2:return i.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(s.__awaiter)(this,void 0,void 0,(function(){var r;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,R(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,_(this.firebaseDependencies)];case 3:return r=i.sent(),[4,R(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,O(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:k)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(s.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(M(t.data)?self.location.origin:null)}(r))?[4,F(i)]:[2]):[2];case 1:return(o=s.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return o=s.sent(),[4,new Promise((function(t){setTimeout(t,3e3)}))];case 3:return s.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=s.sent(),s.label=6;case 6:return o?(a=H(L.NOTIFICATION_CLICKED,r),[2,o.postMessage(a)]):[2]}}))}))},t}();function F(t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,o,a,u;return Object(s.__generator)(this,(function(c){switch(c.label){case 0:return e=new URL(t,self.location.href).href,[4,q()];case 1:n=c.sent();try{for(r=Object(s.__values)(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).href===e)return[2,o]}catch(l){a={error:l}}finally{try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}}return[2,null]}}))}))}function V(t,e){var n,r,i=H(L.PUSH_RECEIVED,e);try{for(var o=Object(s.__values)(t),a=o.next();!a.done;a=o.next())a.value.postMessage(i)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function q(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function H(t,e){return{firebaseMessaging:{type:t,payload:e}}}function z(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}var B={isSupported:G};function G(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}o.a.INTERNAL.registerComponent(new a.Component("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw f("App Configuration Object");if(!t.name)throw f("App Name");var r=t.options;try{for(var i=Object(s.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw f(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!G())throw h.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new U(n):new j(n)}),"PUBLIC").setServiceProps(B))},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},iInd:function(t,e,n){"use strict";var r=n("SVse"),i=n("8Y7J"),o=n("LRne"),a=n("Cfvw"),s=n("2Vo4"),u=n("HDdC");function c(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}c.prototype=Object.create(Error.prototype);var l=c,h=n("z+Ro"),f=n("DH7j"),d=n("l7GE"),p=n("ZUHj"),v=n("yCtX"),y={},g=function(){function t(e){_classCallCheck(this,t),this.resultSelector=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new m(t,this.resultSelector))}}]),t}(),m=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.values.push(y),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(p.a)(this,r,r,n))}}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n,r,i){var o=this.values,a=this.toRespond?o[n]===y?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),e}(d.a),_=n("NXyV"),b=n("XNiG"),w=n("EY2u"),C=n("lJxs"),k=n("bHdf");function E(){return Object(k.a)(1)}var I=n("pLZG"),T=n("7o/Q"),S=n("4I5i");function A(t){return function(e){return 0===t?Object(w.b)():e.lift(new N(t))}}var N=function(){function t(e){if(_classCallCheck(this,t),this.total=e,this.total<0)throw new S.a}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new O(t,this.total))}}]),t}(),O=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).total=n,r.ring=new Array,r.count=0,r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),e}(T.a),R=n("vkgz"),x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return Object(R.a)({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function P(){return new l}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new L(t))}}var L=function(){function t(e){_classCallCheck(this,t),this.defaultValue=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new M(t,this.defaultValue))}}]),t}(),M=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).defaultValue=n,r.isEmpty=!0,r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),e}(T.a),j=n("SpAZ");function U(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(I.a)((function(e,n){return t(e,n,r)})):j.a,A(1),n?D(e):x((function(){return new l})))}}var F=n("JIr8"),V=n("IzEk");function q(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(I.a)((function(e,n){return t(e,n,r)})):j.a,Object(V.a)(1),n?D(e):x((function(){return new l})))}}var H=n("5+tZ"),z=function(){function t(e,n,r){_classCallCheck(this,t),this.predicate=e,this.thisArg=n,this.source=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new B(t,this.predicate,this.thisArg,this.source))}}]),t}(),B=function(t){function e(t,n,r,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||_assertThisInitialized(o),o}return _inherits(e,t),_createClass(e,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),e}(T.a),G=n("eIep"),W=n("XUOw"),K=n("Kqap"),Q=n("bOdf"),Y=n("mCNh"),J=n("nYR2"),X=n("cUpR");n.d(e,"I",(function(){return vt})),n.d(e,"y",(function(){return Nn})),n.d(e,"F",(function(){return Fn})),n.d(e,"A",(function(){return Pn})),n.d(e,"G",(function(){return Vn})),n.d(e,"H",(function(){return qn})),n.d(e,"C",(function(){return Ln})),n.d(e,"B",(function(){return Dn})),n.d(e,"E",(function(){return Un})),n.d(e,"z",(function(){return Rn})),n.d(e,"D",(function(){return jn})),n.d(e,"J",(function(){return Sn})),n.d(e,"p",(function(){return vn})),n.d(e,"r",(function(){return yn})),n.d(e,"q",(function(){return mn})),n.d(e,"t",(function(){return wn})),n.d(e,"d",(function(){return et})),n.d(e,"e",(function(){return tt})),n.d(e,"f",(function(){return nt})),n.d(e,"g",(function(){return Z})),n.d(e,"v",(function(){return rt})),n.d(e,"n",(function(){return on})),n.d(e,"o",(function(){return pn})),n.d(e,"m",(function(){return sn})),n.d(e,"k",(function(){return An})),n.d(e,"l",(function(){return Hn})),n.d(e,"s",(function(){return xn})),n.d(e,"b",(function(){return bn})),n.d(e,"h",(function(){return In})),n.d(e,"i",(function(){return En})),n.d(e,"j",(function(){return kn})),n.d(e,"u",(function(){return Tn})),n.d(e,"a",(function(){return ie})),n.d(e,"w",(function(){return cn})),n.d(e,"c",(function(){return jt})),n.d(e,"x",(function(){return Mt}));var $=function t(e,n){_classCallCheck(this,t),this.id=e,this.url=n},Z=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).navigationTrigger=i,r.restoredState=o,r}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),e}($),tt=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).urlAfterRedirects=r,i}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),e}($),et=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).reason=r,i}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),e}($),nt=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).error=r,i}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),e}($),rt=function(t){function e(t,n,r,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}($),it=function(t){function e(t,n,r,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}($),ot=function(t){function e(t,n,r,i,o){var a;return _classCallCheck(this,e),(a=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),e}($),at=function(t){function e(t,n,r,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}($),st=function(t){function e(t,n,r,i){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}($),ut=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),ct=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),lt=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),ht=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),ft=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),dt=function(){function t(e){_classCallCheck(this,t),this.snapshot=e}return _createClass(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),pt=function(){function t(e,n,r){_classCallCheck(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return _createClass(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),vt=function t(){_classCallCheck(this,t)},yt=function(){function t(e){_classCallCheck(this,t),this.params=e||{}}return _createClass(t,[{key:"has",value:function(t){return this.params.hasOwnProperty(t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function gt(t){return new yt(t)}function mt(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function _t(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var bt=function t(e,n){_classCallCheck(this,t),this.routes=e,this.module=n};function wt(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];Ct(r,kt(e,r))}}function Ct(t,e){if(!t)throw new Error("\n      Invalid configuration of route '".concat(e,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(t))throw new Error("Invalid configuration of route '".concat(e,"': Array cannot be specified"));if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error("Invalid configuration of route '".concat(e,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and children cannot be used together"));if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and loadChildren cannot be used together"));if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': children and loadChildren cannot be used together"));if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and component cannot be used together"));if(t.path&&t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': path and matcher cannot be used together"));if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': routes must have either a path or a matcher specified"));if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '".concat(e,"': path cannot start with a slash"));if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(e,'", redirectTo: "').concat(t.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '".concat(e,"': pathMatch can only be set to 'prefix' or 'full'"));t.children&&wt(t.children,e)}function kt(t,e){return e?t||e.path?t&&!e.path?"".concat(t,"/"):!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function Et(t){var e=t.children&&t.children.map(Et),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=vt),n}function It(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function Tt(t){return Array.prototype.concat.apply([],t)}function St(t){return t.length>0?t[t.length-1]:null}function At(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Nt(t){return Object(i.ub)(t)?t:Object(i.vb)(t)?Object(a.a)(Promise.resolve(t)):Object(o.a)(t)}function Ot(t,e,n){return n?function(t,e){return It(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Dt(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every((function(n){return e[n]===t[n]}))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Dt(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Dt(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Dt(n.segments,a)&&!!n.children.primary&&e(n.children.primary,r,s)}(e,n,n.segments)}(t.root,e.root)}var Rt=function(){function t(e,n,r){_classCallCheck(this,t),this.root=e,this.queryParams=n,this.fragment=r}return _createClass(t,[{key:"toString",value:function(){return Ut.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=gt(this.queryParams)),this._queryParamMap}}]),t}(),xt=function(){function t(e,n){var r=this;_classCallCheck(this,t),this.segments=e,this.children=n,this.parent=null,At(n,(function(t,e){return t.parent=r}))}return _createClass(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return Ft(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),t}(),Pt=function(){function t(e,n){_classCallCheck(this,t),this.path=e,this.parameters=n}return _createClass(t,[{key:"toString",value:function(){return Gt(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=gt(this.parameters)),this._parameterMap}}]),t}();function Dt(t,e){return t.length===e.length&&t.every((function(t,n){return t.path===e[n].path}))}function Lt(t,e){var n=[];return At(t.children,(function(t,r){"primary"===r&&(n=n.concat(e(t,r)))})),At(t.children,(function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))})),n}var Mt=function t(){_classCallCheck(this,t)},jt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"parse",value:function(t){var e=new Jt(t);return new Rt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){var e,n,r;return"".concat("/".concat(function t(e,n){if(!e.hasChildren())return Ft(e);if(n){var r=e.children.primary?t(e.children.primary,!1):"",i=[];return At(e.children,(function(e,n){"primary"!==n&&i.push("".concat(n,":").concat(t(e,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var o=Lt(e,(function(n,r){return"primary"===r?[t(e.children.primary,!1)]:["".concat(r,":").concat(t(n,!1))]}));return"".concat(Ft(e),"/(").concat(o.join("//"),")")}(t.root,!0)),(n=t.queryParams,r=Object.keys(n).map((function(t){var e=n[t];return Array.isArray(e)?e.map((function(e){return"".concat(qt(t),"=").concat(qt(e))})).join("&"):"".concat(qt(t),"=").concat(qt(e))})),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof t.fragment?"#".concat((e=t.fragment,encodeURI(e))):"")}}]),t}(),Ut=new jt;function Ft(t){return t.segments.map((function(t){return Gt(t)})).join("/")}function Vt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qt(t){return Vt(t).replace(/%3B/gi,";")}function Ht(t){return Vt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zt(t){return decodeURIComponent(t)}function Bt(t){return zt(t.replace(/\+/g,"%20"))}function Gt(t){return"".concat(Ht(t.path)).concat((e=t.parameters,Object.keys(e).map((function(t){return";".concat(Ht(t),"=").concat(Ht(e[t]))})).join("")));var e}var Wt=/^[^\/()?;=#]+/;function Kt(t){var e=t.match(Wt);return e?e[0]:""}var Qt=/^[^=?&#]+/,Yt=/^[^?&#]+/,Jt=function(){function t(e){_classCallCheck(this,t),this.url=e,this.remaining=e}return _createClass(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new xt(t,e)),n}},{key:"parseSegment",value:function(){var t=Kt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new Pt(zt(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=Kt(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Kt(this.remaining);r&&(n=r,this.capture(n))}t[zt(e)]=zt(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(Qt);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(Yt);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Bt(e),o=Bt(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Kt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new xt([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),Xt=function(){function t(e){_classCallCheck(this,t),this._root=e}return _createClass(t,[{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=$t(t,this._root);return e?e.children.map((function(t){return t.value})):[]}},{key:"firstChild",value:function(t){var e=$t(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=Zt(t,this._root);return e.length<2?[]:e[e.length-2].children.map((function(t){return t.value})).filter((function(e){return e!==t}))}},{key:"pathFromRoot",value:function(t){return Zt(t,this._root).map((function(t){return t.value}))}},{key:"root",get:function(){return this._root.value}}]),t}();function $t(t,e){if(t===e.value)return e;var n=!0,r=!1,i=void 0;try{for(var o,a=e.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=$t(t,o.value);if(s)return s}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}function Zt(t,e){if(t===e.value)return[e];var n=!0,r=!1,i=void 0;try{for(var o,a=e.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=Zt(t,o.value);if(s.length)return s.unshift(e),s}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return[]}var te=function(){function t(e,n){_classCallCheck(this,t),this.value=e,this.children=n}return _createClass(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function ee(t){var e={};return t&&t.children.forEach((function(t){return e[t.value.outlet]=t})),e}var ne=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).snapshot=n,ue(_assertThisInitialized(r),t),r}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return this.snapshot.toString()}}]),e}(Xt);function re(t,e){var n=function(t,e){var n=new ae([],{},{},"",{},"primary",e,null,t.root,-1,{});return new se("",new te(n,[]))}(t,e),r=new s.a([new Pt("",{})]),i=new s.a({}),o=new s.a({}),a=new s.a({}),u=new s.a(""),c=new ie(r,i,a,u,o,"primary",e,n.root);return c.snapshot=n.root,new ne(new te(c,[]),n)}var ie=function(){function t(e,n,r,i,o,a,s,u){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return _createClass(t,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(C.a)((function(t){return gt(t)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(C.a)((function(t){return gt(t)})))),this._queryParamMap}}]),t}();function oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((function(t,e){return{params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var ae=function(){function t(e,n,r,i,o,a,s,u,c,l,h){_classCallCheck(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return _createClass(t,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(t){return t.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=gt(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=gt(this.queryParams)),this._queryParamMap}}]),t}(),se=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n))).url=t,ue(_assertThisInitialized(r),n),r}return _inherits(e,t),_createClass(e,[{key:"toString",value:function(){return ce(this._root)}}]),e}(Xt);function ue(t,e){e.value._routerState=t,e.children.forEach((function(e){return ue(t,e)}))}function ce(t){var e=t.children.length>0?" { ".concat(t.children.map(ce).join(", ")," } "):"";return"".concat(t.value).concat(e)}function le(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,It(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),It(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!It(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),It(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function he(t,e){var n,r;return It(t.params,e.params)&&Dt(n=t.url,r=e.url)&&n.every((function(t,e){return It(t.parameters,r[e].parameters)}))&&!(!t.parent!=!e.parent)&&(!t.parent||he(t.parent,e.parent))}function fe(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function de(t,e,n,r,i){var o={};return r&&At(r,(function(t,e){o[e]=Array.isArray(t)?t.map((function(t){return"".concat(t)})):"".concat(t)})),new Rt(n.root===t?e:function t(e,n,r){var i={};return At(e.children,(function(e,o){i[o]=e===n?r:t(e,n,r)})),new xt(e.segments,i)}(n.root,t,e),o,i)}var pe=function(){function t(e,n,r){if(_classCallCheck(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&fe(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(t){return"object"==typeof t&&null!=t&&t.outlets}));if(i&&i!==St(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),ve=function t(e,n,r){_classCallCheck(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function ye(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:"".concat(t)}function ge(t,e,n){if(t||(t=new xt([],{})),0===t.segments.length&&t.hasChildren())return me(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=ye(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ce(s,u,a))return o;r+=2}else{if(!Ce(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new xt(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new xt(t.segments.slice(r.pathIndex),t.children),me(o,0,i)}return r.match&&0===i.length?new xt(t.segments,{}):r.match&&!t.hasChildren()?_e(t,e,n):r.match?me(t,0,i):_e(t,e,n)}function me(t,e,n){if(0===n.length)return new xt(t.segments,{});var r=function(t){return"object"!=typeof t[0]?{primary:t}:void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),i={};return At(r,(function(n,r){null!==n&&(i[r]=ge(t.children[r],e,n))})),At(t.children,(function(t,e){void 0===r[e]&&(i[e]=t)})),new xt(t.segments,i)}function _e(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=be(n[i].outlets);return new xt(r,o)}if(0===i&&fe(n[0]))r.push(new Pt(t.segments[e].path,n[0])),i++;else{var a=ye(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&fe(s)?(r.push(new Pt(a,we(s))),i+=2):(r.push(new Pt(a,{})),i++)}}return new xt(r,{})}function be(t){var e={};return At(t,(function(t,n){null!==t&&(e[n]=_e(new xt([],{}),0,t))})),e}function we(t){var e={};return At(t,(function(t,n){return e[n]="".concat(t)})),e}function Ce(t,e,n){return t==n.path&&It(e,n.parameters)}var ke=function(){function t(e,n,r,i){_classCallCheck(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),le(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=ee(e);t.children.forEach((function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]})),At(i,(function(t,e){r.deactivateRouteAndItsChildren(t,n)}))}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=ee(t),o=t.value.component?r.children:e;At(i,(function(t,e){return n.deactivateRouteAndItsChildren(t,o)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=ee(e);t.children.forEach((function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new dt(t.value.snapshot))})),t.children.length&&this.forwardEvent(new ht(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(le(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Ee(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function Ee(t){le(t.value),t.children.forEach(Ee)}function Ie(t){return"function"==typeof t}function Te(t){return t instanceof Rt}var Se=function t(e){_classCallCheck(this,t),this.segmentGroup=e||null},Ae=function t(e){_classCallCheck(this,t),this.urlTree=e};function Ne(t){return new u.a((function(e){return e.error(new Se(t))}))}function Oe(t){return new u.a((function(e){return e.error(new Ae(t))}))}function Re(t){return new u.a((function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))}))}var xe=function(){function t(e,n,r,o,a){_classCallCheck(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=o,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(i.v)}return _createClass(t,[{key:"apply",value:function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(C.a)((function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)}))).pipe(Object(F.a)((function(e){if(e instanceof Ae)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Se)throw t.noMatchError(e);throw e})))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(C.a)((function(n){return e.createUrlTree(n,t.queryParams,t.fragment)}))).pipe(Object(F.a)((function(t){if(t instanceof Se)throw e.noMatchError(t);throw t})))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new xt([],{primary:t}):t;return new Rt(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(C.a)((function(t){return new xt([],t)}))):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Object(o.a)({});var a=[],s=[],u={};return At(n,(function(n,i){var o,c,l=(o=i,c=n,r.expandSegmentGroup(t,e,c,o)).pipe(Object(C.a)((function(t){return u[i]=t})));"primary"===i?a.push(l):s.push(l)})),o.a.apply(null,a.concat(s)).pipe(E(),U(),Object(C.a)((function(){return u})))}(n.children)}},{key:"expandSegment",value:function(t,e,n,r,i,a){var s=this;return Object(o.a).apply(void 0,_toConsumableArray(n)).pipe(Object(C.a)((function(u){return s.expandSegmentAgainstRoute(t,e,n,u,r,i,a).pipe(Object(F.a)((function(t){if(t instanceof Se)return Object(o.a)(null);throw t})))})),E(),q((function(t){return!!t})),Object(F.a)((function(t,n){if(t instanceof l||"EmptyError"===t.name){if(s.noLeftoversInUrl(e,r,i))return Object(o.a)(new xt([],{}));throw new Se(e)}throw t})))}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return Me(r)!==o?Ne(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Ne(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Oe(o):this.lineralizeSegments(n,o).pipe(Object(H.a)((function(n){var o=new xt(n,{});return i.expandSegment(t,o,e,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=Pe(e,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return Ne(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Oe(f):this.lineralizeSegments(r,f).pipe(Object(H.a)((function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(C.a)((function(t){return n._loadedConfig=t,new xt(r,{})}))):Object(o.a)(new xt(r,{}));var a=Pe(e,n,r),s=a.matched,u=a.consumedSegments,c=a.lastChild;if(!s)return Ne(e);var l=r.slice(c);return this.getChildConfig(t,n,r).pipe(Object(H.a)((function(t){var n=t.module,r=t.routes,a=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some((function(n){return Le(t,e,n)&&"primary"!==Me(n)}))}(t,n,r)?{segmentGroup:De(new xt(e,function(t,e){var n={};n.primary=e;var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;""===u.path&&"primary"!==Me(u)&&(n[Me(u)]=new xt([],{}))}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(r,new xt(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some((function(n){return Le(t,e,n)}))}(t,n,r)?{segmentGroup:De(new xt(t.segments,function(t,e,n,r){var i={},o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;Le(t,e,l)&&!r[Me(l)]&&(i[Me(l)]=new xt([],{}))}}catch(h){a=!0,s=h}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return Object.assign({},r,i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,u,l,r),s=a.segmentGroup,c=a.slicedSegments;return 0===c.length&&s.hasChildren()?i.expandChildren(n,r,s).pipe(Object(C.a)((function(t){return new xt(u,t)}))):0===r.length&&0===c.length?Object(o.a)(new xt(u,{})):i.expandSegment(n,s,r,c,"primary",!0).pipe(Object(C.a)((function(t){return new xt(u.concat(t.segments),t.children)})))})))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?Object(o.a)(new bt(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(o.a)(e._loadedConfig):function(t,e,n){var r,i=e.canLoad;return i&&0!==i.length?Object(a.a)(i).pipe(Object(C.a)((function(r){var i,o=t.get(r);if(function(t){return t&&Ie(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!Ie(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return Nt(i)}))).pipe(E(),(r=function(t){return!0===t},function(t){return t.lift(new z(r,void 0,t))})):Object(o.a)(!0)}(t.injector,e,n).pipe(Object(H.a)((function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(C.a)((function(t){return e._loadedConfig=t,t}))):function(t){return new u.a((function(e){return e.error(mt("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))}))}(e)}))):Object(o.a)(new bt([],t))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Re(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Rt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return At(t,(function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t})),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return At(e.children,(function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)})),new xt(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map((function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)}))}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n=0,r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.path===t.path)return e.splice(n),u;n++}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}}]),t}();function Pe(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||_t)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function De(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new xt(t.segments.concat(e.segments),e.children)}return t}function Le(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Me(t){return t.outlet||"primary"}var je=function t(e){_classCallCheck(this,t),this.path=e,this.route=this.path[this.path.length-1]},Ue=function t(e,n){_classCallCheck(this,t),this.component=e,this.route=n};function Fe(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ve(t,e,n){var r=ee(t),i=t.value;At(r,(function(t,r){Ve(t,i.component?e?e.children.getContext(r):null:e,n)})),n.canDeactivateChecks.push(new Ue(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var qe=Symbol("INITIAL_VALUE");function He(){return Object(G.a)((function(t){return(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=null,i=null;return Object(h.a)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(f.a)(e[0])&&(e=e[0]),Object(v.a)(e,i).lift(new g(r))}).apply(void 0,_toConsumableArray(t.map((function(t){return t.pipe(Object(V.a)(1),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n=e[e.length-1];Object(h.a)(n)?e.pop():n=null;var r=e.length;return function(){return E()(Object(o.a).apply(void 0,arguments))}(1!==r||n?r>0?Object(v.a)(e,n):Object(w.b)(n):Object(W.a)(e[0]),t)}}(qe))})))).pipe(Object(K.a)((function(t,e){var n=!1;return e.reduce((function(t,r,i){if(t!==qe)return t;if(r===qe&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Te(r))return r}return t}),t)}),qe),Object(I.a)((function(t){return t!==qe})),Object(C.a)((function(t){return Te(t)?t:!0===t})),Object(V.a)(1))}))}function ze(t,e){return null!==t&&e&&e(new ft(t)),Object(o.a)(!0)}function Be(t,e){return null!==t&&e&&e(new lt(t)),Object(o.a)(!0)}function Ge(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(o.a)(!0);var i=r.map((function(r){return Object(_.a)((function(){var i,o=Fe(r,e,n);if(function(t){return t&&Ie(t.canActivate)}(o))i=Nt(o.canActivate(e,t));else{if(!Ie(o))throw new Error("Invalid CanActivate guard");i=Nt(o(e,t))}return i.pipe(q())}))}));return Object(o.a)(i).pipe(He())}function We(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map((function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)})).filter((function(t){return null!==t})).map((function(e){return Object(_.a)((function(){var i=e.guards.map((function(i){var o,a=Fe(i,e.node,n);if(function(t){return t&&Ie(t.canActivateChild)}(a))o=Nt(a.canActivateChild(r,t));else{if(!Ie(a))throw new Error("Invalid CanActivateChild guard");o=Nt(a(r,t))}return o.pipe(q())}));return Object(o.a)(i).pipe(He())}))}));return Object(o.a)(i).pipe(He())}var Ke=function t(){_classCallCheck(this,t)},Qe=function(){function t(e,n,r,i,o,a){_classCallCheck(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _createClass(t,[{key:"recognize",value:function(){try{var t=Xe(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new ae([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new te(n,e),i=new se(this.url,r);return this.inheritParamsAndData(i._root),Object(o.a)(i)}catch(a){return new u.a((function(t){return t.error(a)}))}}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=oe(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach((function(t){return e.inheritParamsAndData(t)}))}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){var n,r=this,i=Lt(e,(function(e,n){return r.processSegmentGroup(t,e,n)}));return n={},i.forEach((function(t){var e=n[t.value.outlet];if(e){var r=e.url.map((function(t){return t.toString()})).join("/"),i=t.value.url.map((function(t){return t.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[t.value.outlet]=t.value})),i.sort((function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)})),i}},{key:"processSegment",value:function(t,e,n,r){var i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;try{return this.processSegmentAgainstRoute(c,e,n,r)}catch(l){if(!(l instanceof Ke))throw l}}}catch(h){o=!0,a=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}if(this.noLeftoversInUrl(e,n,r))return[];throw new Ke}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo)throw new Ke;if((t.outlet||"primary")!==r)throw new Ke;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?St(n).parameters:{};i=new ae(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tn(t),r,t.component,t,Ye(e),Je(e)+n.length,en(t))}else{var u=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Ke;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||_t)(n,t,e);if(!r)throw new Ke;var i={};At(r.posParams,(function(t,e){i[e]=t.path}));var o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=u.consumedSegments,a=n.slice(u.lastChild),i=new ae(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tn(t),r,t.component,t,Ye(e),Je(e)+o.length,en(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=Xe(e,o,a,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new te(i,d)]}if(0===c.length&&0===f.length)return[new te(i,[])];var p=this.processSegment(c,h,f,"primary");return[new te(i,p)]}}]),t}();function Ye(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Je(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Xe(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some((function(n){return $e(t,e,n)&&"primary"!==Ze(n)}))}(t,n,r)){var o=new xt(e,function(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;if(""===l.path&&"primary"!==Ze(l)){var h=new xt([],{});h._sourceSegment=t,h._segmentIndexShift=e.length,i[Ze(l)]=h}}}catch(f){a=!0,s=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return i}(t,e,r,new xt(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some((function(n){return $e(t,e,n)}))}(t,n,r)){var a=new xt(t.segments,function(t,e,n,r,i,o){var a={},s=!0,u=!1,c=void 0;try{for(var l,h=r[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=l.value;if($e(t,n,f)&&!i[Ze(f)]){var d=new xt([],{});d._sourceSegment=t,d._segmentIndexShift="legacy"===o?t.segments.length:e.length,a[Ze(f)]=d}}}catch(p){u=!0,c=p}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}return Object.assign({},i,a)}(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}var s=new xt(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function $e(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Ze(t){return t.outlet||"primary"}function tn(t){return t.data||{}}function en(t){return t.resolve||{}}function nn(t,e,n,r){var i=Fe(t,e,r);return Nt(i.resolve?i.resolve(e,n):i(e,n))}function rn(t){return function(e){return e.pipe(Object(G.a)((function(e){var n=t(e);return n?Object(a.a)(n).pipe(Object(C.a)((function(){return e}))):Object(a.a)([e])})))}}var on=function t(){_classCallCheck(this,t)},an=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}(),sn=new i.o("ROUTES"),un=function(){function t(e,n,r,i){_classCallCheck(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(C.a)((function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new bt(Tt(i.injector.get(sn)).map(Et),i)})))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Object(a.a)(this.loader.load(t)):Nt(t()).pipe(Object(H.a)((function(t){return t instanceof i.t?Object(o.a)(t):Object(a.a)(e.compiler.compileModuleAsync(t))})))}}]),t}(),cn=function t(){_classCallCheck(this,t)},ln=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function hn(t){throw t}function fn(t,e,n){return e.parse("/")}function dn(t,e){return Object(o.a)(null)}var pn=function(){function t(e,n,r,o,a,u,c,l){var h=this;_classCallCheck(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new b.a,this.errorHandler=hn,this.malformedUriErrorHandler=fn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dn,afterPreactivation:dn},this.urlHandlingStrategy=new ln,this.routeReuseStrategy=new an,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=a.get(i.v),this.console=a.get(i.Y);var f=a.get(i.x);this.isNgZoneEnabled=f instanceof i.x,this.resetConfig(l),this.currentUrlTree=new Rt(new xt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new un(u,c,(function(t){return h.triggerEvent(new ut(t))}),(function(t){return h.triggerEvent(new ct(t))})),this.routerState=re(this.currentUrlTree,this.rootComponentType),this.transitions=new s.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(Object(I.a)((function(t){return 0!==t.id})),Object(C.a)((function(t){return Object.assign({},t,{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})})),Object(G.a)((function(t){var r,i,u,c=!1,l=!1;return Object(o.a)(t).pipe(Object(R.a)((function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign({},e.lastSuccessfulNavigation,{previousNavigation:null}):null}})),Object(G.a)((function(t){var r,i,a,s,u=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||u)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(o.a)(t).pipe(Object(G.a)((function(t){var r=e.transitions.getValue();return n.next(new Z(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?w.a:[t]})),Object(G.a)((function(t){return Promise.resolve(t)})),(r=e.ngModule.injector,i=e.configLoader,a=e.urlSerializer,s=e.config,function(t){return t.pipe(Object(G.a)((function(t){return function(t,e,n,r,i){return new xe(t,e,n,r,i).apply()}(r,i,a,t.extractedUrl,s).pipe(Object(C.a)((function(e){return Object.assign({},t,{urlAfterRedirects:e})})))})))}),Object(R.a)((function(t){e.currentNavigation=Object.assign({},e.currentNavigation,{finalUrl:t.urlAfterRedirects})})),function(t,n,r,i,o){return function(r){return r.pipe(Object(H.a)((function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new Qe(t,e,n,r,i,o).recognize()}(t,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,e.serializeUrl(a)),i,o).pipe(Object(C.a)((function(t){return Object.assign({},r,{targetSnapshot:t})})));var a})))}}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Object(R.a)((function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),Object(R.a)((function(t){var r=new rt(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)})));if(u&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var c=t.id,l=t.extractedUrl,h=t.source,f=t.restoredState,d=t.extras,p=new Z(c,e.serializeUrl(l),h,f);n.next(p);var v=re(l,e.rootComponentType).snapshot;return Object(o.a)(Object.assign({},t,{targetSnapshot:v,urlAfterRedirects:l,extras:Object.assign({},d,{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),w.a})),rn((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(R.a)((function(t){var n=new it(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),Object(C.a)((function(t){return Object.assign({},t,{guards:(n=t.targetSnapshot,r=t.currentSnapshot,i=e.rootContexts,o=n._root,function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=ee(n);return e.children.forEach((function(e){!function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,s=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Dt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Dt(t.url,e.url)||!It(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!he(t,e)||!It(t.queryParams,e.queryParams);case"paramsChange":default:return!he(t,e)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new je(i)):(a.data=s.data,a._resolvedData=s._resolvedData),t(e,n,a.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new Ue(u&&u.outlet&&u.outlet.component||null,s))}else s&&Ve(n,u,o),o.canActivateChecks.push(new je(i)),t(e,null,a.component?u?u.children:null:r,i,o)}(e,a[e.value.outlet],r,i.concat([e.value]),o),delete a[e.value.outlet]})),At(a,(function(t,e){return Ve(t,r.getContext(e),o)})),o}(o,r?r._root:null,i,[o.value]))});var n,r,i,o})),function(t,e){return function(n){return n.pipe(Object(H.a)((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,s=n.guards,u=s.canActivateChecks,c=s.canDeactivateChecks;return 0===c.length&&0===u.length?Object(o.a)(Object.assign({},n,{guardsResult:!0})):function(t,e,n,r){return Object(a.a)(t).pipe(Object(H.a)((function(t){return function(t,e,n,r,i){var a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return Object(o.a)(!0);var s=a.map((function(o){var a,s=Fe(o,e,i);if(function(t){return t&&Ie(t.canDeactivate)}(s))a=Nt(s.canDeactivate(t,e,n,r));else{if(!Ie(s))throw new Error("Invalid CanDeactivate guard");a=Nt(s(t,e,n,r))}return a.pipe(q())}));return Object(o.a)(s).pipe(He())}(t.component,t.route,n,e,r)})),q((function(t){return!0!==t}),!0))}(c,r,i,t).pipe(Object(H.a)((function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Object(a.a)(e).pipe(Object(Q.a)((function(e){return Object(a.a)([Be(e.route.parent,r),ze(e.route,r),We(t,e.path,n),Ge(t,e.route,n)]).pipe(E(),q((function(t){return!0!==t}),!0))})),q((function(t){return!0!==t}),!0))}(r,u,t,e):Object(o.a)(n)})),Object(C.a)((function(t){return Object.assign({},n,{guardsResult:t})})))})))}}(e.ngModule.injector,(function(t){return e.triggerEvent(t)})),Object(R.a)((function(t){if(Te(t.guardsResult)){var n=mt('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}})),Object(R.a)((function(t){var n=new ot(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(n)})),Object(I.a)((function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new et(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0})),rn((function(t){if(t.guards.canActivateChecks.length)return Object(o.a)(t).pipe(Object(R.a)((function(t){var n=new at(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})),(n=e.paramsInheritanceStrategy,r=e.ngModule.injector,function(t){return t.pipe(Object(H.a)((function(t){var e=t.targetSnapshot,i=t.guards.canActivateChecks;return i.length?Object(a.a)(i).pipe(Object(Q.a)((function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(o.a)({});if(1===i.length){var s=i[0];return nn(t[s],e,n,r).pipe(Object(C.a)((function(t){return _defineProperty({},s,t)})))}var u={};return Object(a.a)(i).pipe(Object(H.a)((function(i){return nn(t[i],e,n,r).pipe(Object(C.a)((function(t){return u[i]=t,t})))}))).pipe(U(),Object(C.a)((function(){return u})))}(t._resolve,t,e,r).pipe(Object(C.a)((function(e){return t._resolvedData=e,t.data=Object.assign({},t.data,oe(t,n).resolve),null})))}(t.route,e,n,r)})),function(t,e){return arguments.length>=2?function(n){return Object(Y.a)(Object(K.a)(t,e),A(1),D(e))(n)}:function(e){return Object(Y.a)(Object(K.a)((function(e,n,r){return t(e,n,r+1)})),A(1))(e)}}((function(t,e){return t})),Object(C.a)((function(e){return t}))):Object(o.a)(t)})))}),Object(R.a)((function(t){var n=new st(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)})));var n,r})),rn((function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(C.a)((function(t){var n=function(t,e,n){var r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var o=function(e,n,r){return n.children.map((function(n){var i=!0,o=!1,a=void 0;try{for(var s,u=r.children[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(e.shouldReuseRoute(c.value.snapshot,n.value))return t(e,n,c)}}catch(l){o=!0,a=l}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return t(e,n)}))}(e,n,r);return new te(i,o)}var a=e.retrieve(n.value);if(a){var u=a.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,u),u}var c,l=new ie(new s.a((c=n.value).url),new s.a(c.params),new s.a(c.queryParams),new s.a(c.fragment),new s.a(c.data),c.outlet,c.component,c),h=n.children.map((function(n){return t(e,n)}));return new te(l,h)}(t,e._root,n?n._root:void 0);return new ne(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:n})})),Object(R.a)((function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)})),(r=e.rootContexts,i=e.routeReuseStrategy,u=function(t){return e.triggerEvent(t)},Object(C.a)((function(t){return new ke(i,t.targetRouterState,t.currentRouterState,u).activate(r),t}))),Object(R.a)({next:function(){c=!0},complete:function(){c=!0}}),Object(J.a)((function(){if(!c&&!l){e.resetUrlToCurrentUrlTree();var r=new et(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null})),Object(F.a)((function(r){if(l=!0,(s=r)&&s.ngNavigationCancelingError){var i=Te(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new et(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),t.resolve(!1),i&&e.navigateByUrl(r.url)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new nt(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(u){t.reject(u)}}var s;return w.a})))})))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign({},this.getTransition(),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?e.state:null;setTimeout((function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){wt(t),this.config=t.map(Et),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,o=e.fragment,a=e.preserveQueryParams,s=e.queryParamsHandling,u=e.preserveFragment;Object(i.T)()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o,h=null;if(s)switch(s){case"merge":h=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=a?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return de(e.root,e.root,e,r,i);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new pe(!0,0,t);var e=0,n=!1,r=t.reduce((function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return At(r.outlets,(function(t,e){o[e]="string"==typeof t?t.split("/"):t})),[].concat(_toConsumableArray(t),[{outlets:o}])}if(r.segmentPath)return[].concat(_toConsumableArray(t),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(t),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))})),t):[].concat(_toConsumableArray(t),[r])}),[]);return new pe(n,e,r)}(n);if(o.toRoot())return de(e.root,new xt([],{}),e,r,i);var a=function(t,e,n){if(t.isAbsolute)return new ve(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new ve(n.snapshot._urlSegment,!0,0);var r=fe(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new ve(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),s=a.processChildren?me(a.segmentGroup,a.index,o.commands):ge(a.segmentGroup,a.index,o.commands);return de(a.segmentGroup,s,e,r,i)}(c,this.currentUrlTree,t,h,l)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Object(i.T)()&&this.isNgZoneEnabled&&!i.x.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Te(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(Te(t))return Ot(this.currentUrlTree,t,e);var n=this.parseUrl(t);return Ot(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return null!=r&&(e[n]=r),e}),{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe((function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new tt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)}),(function(e){t.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(t,e,n,r){var i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise((function(t,e){o=t,a=e})),u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(t){return Promise.reject(t)}))}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),t}(),vn=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.router=e,this.route=n,this.commands=[],null==r&&i.setAttribute(o.nativeElement,"tabindex","0")}return _createClass(t,[{key:"onClick",value:function(){var t={skipLocationChange:gn(this.skipLocationChange),replaceUrl:gn(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(i.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:gn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:gn(this.preserveFragment)})}}]),t}(),yn=function(){function t(e,n,r){var i=this;_classCallCheck(this,t),this.router=e,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=e.events.subscribe((function(t){t instanceof tt&&i.updateTargetUrlAndHref()}))}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:gn(this.skipLocationChange),replaceUrl:gn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(i.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:gn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:gn(this.preserveFragment)})}}]),t}();function gn(t){return""===t||!!t}var mn=function(){function t(e,n,r,i,o){var a=this;_classCallCheck(this,t),this.router=e,this.element=n,this.renderer=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe((function(t){t instanceof tt&&a.update()}))}return _createClass(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.links.changes.subscribe((function(e){return t.update()})),this.linksWithHrefs.changes.subscribe((function(e){return t.update()})),this.update()}},{key:"ngOnChanges",value:function(t){this.update()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"update",value:function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.classes.forEach((function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)})))}))}},{key:"isLinkActive",value:function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}},{key:"routerLinkActive",set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter((function(t){return!!t}))}}]),t}(),_n=function t(){_classCallCheck(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new bn,this.attachRef=null},bn=function(){function t(){_classCallCheck(this,t),this.contexts=new Map}return _createClass(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new _n,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),wn=function(){function t(e,n,r,o,a){_classCallCheck(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.m,this.deactivateEvents=new i.m,this.name=o||"primary",e.onChildOutletCreated(this.name,this)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Cn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),t}(),Cn=function(){function t(e,n,r){_classCallCheck(this,t),this.route=e,this.childContexts=n,this.parent=r}return _createClass(t,[{key:"get",value:function(t,e){return t===ie?this.route:t===bn?this.childContexts:this.parent.get(t,e)}}]),t}(),kn=function t(){_classCallCheck(this,t)},En=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return e().pipe(Object(F.a)((function(){return Object(o.a)(null)})))}}]),t}(),In=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"preload",value:function(t,e){return Object(o.a)(null)}}]),t}(),Tn=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new un(n,r,(function(t){return e.triggerEvent(new ut(t))}),(function(t){return e.triggerEvent(new ct(t))}))}return _createClass(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(Object(I.a)((function(t){return t instanceof tt})),Object(Q.a)((function(){return t.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var t=this.injector.get(i.v);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;if(c.loadChildren&&!c.canLoad&&c._loadedConfig){var l=c._loadedConfig;n.push(this.processRoutes(l.module,l.routes))}else c.loadChildren&&!c.canLoad?n.push(this.preloadConfig(t,c)):c.children&&n.push(this.processRoutes(t,c.children))}}catch(h){i=!0,o=h}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return Object(a.a)(n).pipe(Object(k.a)(),Object(C.a)((function(t){})))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,(function(){return n.loader.load(t.injector,e).pipe(Object(H.a)((function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})))}))}}]),t}(),Sn=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof Z?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof tt&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof pt&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new pt(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}(),An=new i.o("ROUTER_CONFIGURATION"),Nn=new i.o("ROUTER_FORROOT_GUARD"),On=[r.g,{provide:Mt,useClass:jt},{provide:pn,useFactory:jn,deps:[i.g,Mt,bn,r.g,i.p,i.u,i.i,sn,An,[cn,new i.y],[on,new i.y]]},bn,{provide:ie,useFactory:Un,deps:[pn]},{provide:i.u,useClass:i.H},Tn,In,En,{provide:An,useValue:{enableTracing:!1}}];function Rn(){return new i.w("Router",pn)}var xn=function(){function t(e,n){_classCallCheck(this,t)}return _createClass(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[On,Mn(e),{provide:Nn,useFactory:Ln,deps:[[pn,new i.y,new i.G]]},{provide:An,useValue:n||{}},{provide:r.h,useFactory:Dn,deps:[r.n,[new i.n(r.a),new i.y],An]},{provide:Sn,useFactory:Pn,deps:[pn,r.o,An]},{provide:kn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:In},{provide:i.w,multi:!0,useFactory:Rn},[Fn,{provide:i.d,multi:!0,useFactory:Vn,deps:[Fn]},{provide:Hn,useFactory:qn,deps:[Fn]},{provide:i.b,multi:!0,useExisting:Hn}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[Mn(e)]}}}]),t}();function Pn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Sn(t,e,n)}function Dn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new r.e(t,e):new r.m(t,e)}function Ln(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Mn(t){return[{provide:i.a,multi:!0,useValue:t},{provide:sn,multi:!0,useValue:t}]}function jn(t,e,n,r,i,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=arguments.length>9?arguments[9]:void 0,l=arguments.length>10?arguments[10]:void 0,h=new pn(null,e,n,r,i,o,a,Tt(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=Object(X.s)();h.events.subscribe((function(t){f.logGroup("Router Event: ".concat(t.constructor.name)),f.log(t.toString()),f.log(t),f.logGroupEnd()}))}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function Un(t){return t.routerState.root}var Fn=function(){function t(e){_classCallCheck(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new b.a}return _createClass(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(r.f,Promise.resolve(null)).then((function(){var e=null,n=new Promise((function(t){return e=t})),r=t.injector.get(pn),i=t.injector.get(An);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return t.initNavigation?Object(o.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(An),n=this.injector.get(Tn),r=this.injector.get(Sn),o=this.injector.get(pn),a=this.injector.get(i.g);t===a.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}},{key:"isLegacyDisabled",value:function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}]),t}();function Vn(t){return t.appInitializer.bind(t)}function qn(t){return t.bootstrapListener.bind(t)}var Hn=new i.o("Router Initializer")},iqUP:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("t6oF"),n("NSPt"),n("6Joi"),n("ABqa"),n("gHGA"),n("LmZi"),n("bQlE"),n("3Kre"),n("O1kn"),i.registerVersion("firebase","7.9.3","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),i.registerVersion("firebase","7.9.3"),t.exports=i},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),e}(n("7o/Q").a)},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}var o=function(){function t(e,n){_classCallCheck(this,t),this.project=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))}}]),t}(),a=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).project=n,i.count=0,i.thisArg=r||_assertThisInitialized(i),i}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),e}(r.a)},mCNh:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("KqfI");function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o(e)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:r.a}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__exportStar",(function(){return f})),n.d(e,"__values",(function(){return d})),n.d(e,"__read",(function(){return p})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return g})),n.d(e,"__asyncGenerator",(function(){return m})),n.d(e,"__asyncDelegator",(function(){return _})),n.d(e,"__asyncValues",(function(){return b})),n.d(e,"__makeTemplateObject",(function(){return w})),n.d(e,"__importStar",(function(){return C})),n.d(e,"__importDefault",(function(){return k}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function _(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:g(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},nYR2:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("7o/Q"),i=n("quSY");function o(t){return function(e){return e.lift(new a(t))}}var a=function(){function t(e){_classCallCheck(this,t),this.callback=e}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new s(t,this.callback))}}]),t}(),s=function(t){function e(t,n){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).add(new i.a(n)),r}return _inherits(e,t),e}(r.a)},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new p(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},pLZG:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}var o=function(){function t(e,n){_classCallCheck(this,t),this.predicate=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))}}]),t}(),a=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).predicate=n,i.thisArg=r,i.count=0,i}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),e}(r.a)},pLzU:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("Lhse"),i=function(t){return function(e){for(var n=t[r.a]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e}}},pMnS:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("8Y7J"),i=n("iInd"),o=r.mb({encapsulation:2,styles:[],data:{}});function a(t){return r.Hb(0,[(t()(),r.ob(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.nb(1,212992,null,0,i.t,[i.b,r.M,r.j,[8,null],r.h],null,null)],(function(t,e){t(e,1,0)}),null)}var s=r.kb("ng-component",i.I,(function(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"ng-component",[],null,null,null,a,o)),r.nb(1,49152,null,0,i.I,[],null,null)],null,null)}),{},{},[])},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return u})),n.d(e,"setLogLevel",(function(){return c}));var i=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a=o.INFO,s=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var a=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case o.INFO:console.info.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case o.WARN:console.warn.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case o.ERROR:console.error.apply(console,r(["["+a+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},u=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=s,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function c(t){i.forEach((function(e){e.logLevel=t}))}},quSY:function(t,e,n){"use strict";var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");function a(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}a.prototype=Object.create(Error.prototype);var s=a;n.d(e,"a",(function(){return l}));var u,c,l=((c=function(){function t(e){_classCallCheck(this,t),this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return _createClass(t,[{key:"unsubscribe",value:function(){var t,e=!1;if(!this.closed){var n=this._parent,a=this._parents,u=this._unsubscribe,c=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var l=-1,f=a?a.length:0;n;)n.remove(this),n=++l<f&&a[l]||null;if(Object(o.a)(u))try{u.call(this)}catch(p){e=!0,t=p instanceof s?h(p.errors):[p]}if(Object(r.a)(c))for(l=-1,f=c.length;++l<f;){var d=c[l];if(Object(i.a)(d))try{d.unsubscribe()}catch(p){e=!0,t=t||[],p instanceof s?t=t.concat(h(p.errors)):t.push(p)}}if(e)throw new s(t)}}},{key:"add",value:function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"_addParent",value:function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}]),t}()).EMPTY=((u=new c).closed=!0,u),c);function h(t){return t.reduce((function(t,e){return t.concat(e instanceof s?e.errors:e)}),[])}},s7LF:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("cUpR"),o=n("HDdC"),a=n("DH7j"),s=n("EY2u"),u=n("ZUHj"),c=n("l7GE"),l=n("lJxs"),h=function(t){function e(t,n){var r;_classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var a=n[o],s=Object(u.a)(_assertThisInitialized(r),a,null,o);s&&r.add(s)}return r}return _inherits(e,t),_createClass(e,[{key:"notifyNext",value:function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)}},{key:"notifyComplete",value:function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()}}]),e}(c.a),f=n("Cfvw");n.d(e,"z",(function(){return kt})),n.d(e,"C",(function(){return ft})),n.d(e,"A",(function(){return P})),n.d(e,"B",(function(){return dt})),n.d(e,"b",(function(){return g})),n.d(e,"o",(function(){return d})),n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return v})),n.d(e,"p",(function(){return _})),n.d(e,"q",(function(){return w})),n.d(e,"r",(function(){return C})),n.d(e,"s",(function(){return ot})),n.d(e,"t",(function(){return ht})),n.d(e,"u",(function(){return x})),n.d(e,"h",(function(){return _t})),n.d(e,"j",(function(){return pt})),n.d(e,"e",(function(){return yt})),n.d(e,"k",(function(){return vt})),n.d(e,"m",(function(){return wt})),n.d(e,"v",(function(){return Ct})),n.d(e,"x",(function(){return bt})),n.d(e,"f",(function(){return Et})),n.d(e,"d",(function(){return rt})),n.d(e,"g",(function(){return et})),n.d(e,"i",(function(){return nt})),n.d(e,"n",(function(){return E})),n.d(e,"y",(function(){return T})),n.d(e,"l",(function(){return It})),n.d(e,"w",(function(){return Tt}));var d=new r.o("NgValueAccessor"),p=new r.o("CompositionEventMode"),v=function(){function t(e,n,r){var o;_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(o=Object(i.s)()?Object(i.s)().getUserAgent():"",!/android (\d+)/.test(o.toLowerCase())))}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}(),y=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),t}(),g=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),e}(y);function m(){throw new Error("unimplemented")}var _=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments)))._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return _inherits(e,t),_createClass(e,[{key:"validator",get:function(){return m()}},{key:"asyncValidator",get:function(){return m()}}]),e}(y),b=function(){function t(e){_classCallCheck(this,t),this._cd=e}return _createClass(t,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),t}(),w=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,t),e}(b),C=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,t),e}(b);function k(t){return null==t||0===t.length}var E=new r.o("NgValidators"),I=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,T=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"min",value:function(t){return function(e){if(k(e.value)||k(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(k(e.value)||k(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return k(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return k(t.value)?null:I.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){if(k(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}},{key:"maxLength",value:function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(k(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(S);return 0==e.length?null:function(t){return N(function(t,e){return e.map((function(e){return e(t)}))}(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(S);return 0==e.length?null:function(t){return function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i;return"function"==typeof n[n.length-1]&&(i=n.pop()),1===n.length&&Object(a.a)(n[0])&&(n=n[0]),0===n.length?s.a:i?t(n).pipe(Object(l.a)((function(t){return i.apply(void 0,_toConsumableArray(t))}))):new o.a((function(t){return new h(t,n)}))}(function(t,e){return e.map((function(e){return e(t)}))}(t,e).map(A)).pipe(Object(l.a)(N))}}}]),t}();function S(t){return null!=t}function A(t){var e=Object(r.vb)(t)?Object(f.a)(t):t;if(!Object(r.ub)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function N(t){var e=t.reduce((function(t,e){return null!=e?Object.assign({},t,e):t}),{});return 0===Object.keys(e).length?null:e}function O(t){return t.validate?function(e){return t.validate(e)}:t}function R(t){return t.validate?function(e){return t.validate(e)}:t}var x=function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),P=function(){function t(){_classCallCheck(this,t),this._accessors=[]}return _createClass(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach((function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}(),D='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',L='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',M='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',j=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(D))}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(L,"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ").concat(M))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ".concat(D))}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(L))}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(t){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(t,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===t?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),t}();function U(t,e){return[].concat(_toConsumableArray(e.path),[t])}function F(t,e){t||z(e,"Cannot find control with"),e.valueAccessor||z(e,"No value accessor for form control with"),t.validator=T.compose([t.validator,e.validator]),t.asyncValidator=T.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange((function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&V(t,e)}))}(t,e),function(t,e){t.registerOnChange((function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)}))}(t,e),function(t,e){e.valueAccessor.registerOnTouched((function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&V(t,e),"submit"!==t.updateOn&&t.markAsTouched()}))}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange((function(t){e.valueAccessor.setDisabledState(t)})),e._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))})),e._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))}))}function V(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function q(t,e){null==t&&z(e,"Cannot find control with"),t.validator=T.compose([t.validator,e.validator]),t.asyncValidator=T.composeAsync([t.asyncValidator,e.asyncValidator])}function H(t){return z(t,"There is no FormControl instance attached to form control element with")}function z(t,e){var n;throw n=t.path.length>1?"path: '".concat(t.path.join(" -> "),"'"):t.path[0]?"name: '".concat(t.path,"'"):"unspecified name attribute",new Error("".concat(e," ").concat(n))}function B(t){return null!=t?T.compose(t.map(O)):null}function G(t){return null!=t?T.composeAsync(t.map(R)):null}function W(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object(r.wb)(e,n.currentValue)}var K=[function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),x,function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r.wb}return _createClass(t,[{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?"".concat(e):(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(t)));this._compareWith=t}}]),t}(),function(){function t(e,n){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r.wb}return _createClass(t,[{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map((function(t){return n._getOptionId(t)}));e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=e._getOptionValue(l.value);r.push(h)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(t)));this._compareWith=t}}]),t}(),function(){function t(e,n,r,i){_classCallCheck(this,t),this._renderer=e,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get(_),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),t}()];function Q(t,e){t._syncPendingControls(),e.forEach((function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}))}function Y(t,e){if(!e)return null;Array.isArray(e)||z(t,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return e.forEach((function(e){var o;e.constructor===v?n=e:(o=e,K.some((function(t){return o.constructor===t}))?(r&&z(t,"More than one built-in value accessor matches form control with"),r=e):(i&&z(t,"More than one custom value accessor matches form control with"),i=e))})),i||r||n||(z(t,"No valid value accessor for form control with"),null)}function J(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function X(t){var e=Z(t)?t.validators:t;return Array.isArray(e)?B(e):e||null}function $(t,e){var n=Z(e)?e.asyncValidators:t;return Array.isArray(n)?G(n):n||null}function Z(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var tt=function(){function t(e,n){_classCallCheck(this,t),this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(t,[{key:"setValidators",value:function(t){this.validator=X(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=$(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(e){e.disable(Object.assign({},t,{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(e){e.enable(Object.assign({},t,{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(e){return e._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=A(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return e.setErrors(n,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((function(t,e){return t instanceof nt?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof rt&&t.at(e)||null}),t))}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new r.m,this.statusChanges=new r.m}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(e){return e.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){Z(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]),t}(),et=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,X(r),$(i,r))))._onChange=[],t._applyFormState(n),t._setUpdateStrategy(r),t.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),t._initObservables(),t}return _inherits(e,t),_createClass(e,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(t){return t(e.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),e}(tt),nt=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,X(n),$(r,n)))).controls=t,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _inherits(e,t),_createClass(e,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,e,n){return t[n]=e instanceof et?e.value:e.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,e){return!!e._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){var e=this,n=!1;return this._forEachChild((function(r,i){n=n||e.contains(i)&&t(r)})),n}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e}))}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild((function(t,r){n=e(n,t,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),e}(tt),rt=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,X(n),$(r,n)))).controls=t,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _inherits(e,t),_createClass(e,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof et?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,e){return!!e._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index ".concat(t))}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(e,n){t(e,n)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(e){return e.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(e){return e.enabled&&t(e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){return t._registerControl(e)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.controls[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){if(r.value.enabled)return!1}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),e}(tt),it=Promise.resolve(null),ot=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).submitted=!1,i._directives=[],i.ngSubmit=new r.m,i.form=new nt({},B(t),G(n)),i}return _inherits(e,t),_createClass(e,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(t){var e=this;it.then((function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),F(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)}))}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){var e=this;it.then((function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),J(e._directives,t)}))}},{key:"addFormGroup",value:function(t){var e=this;it.then((function(){var n=e._findContainer(t.path),r=new nt({});q(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(t){var e=this;it.then((function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)}))}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){var n=this;it.then((function(){n.form.get(t.path).setValue(e)}))}},{key:"setValue",value:function(t){this.control.setValue(t)}},{key:"onSubmit",value:function(t){return this.submitted=!0,Q(this.form,this._directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(t){return t.pop(),t.length?this.form.get(t):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),e}(g),at=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '.concat(D,'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '))}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(L,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(M))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(L,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(M))}},{key:"ngFormWarning",value:function(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}]),t}(),st=new r.o("NgFormSelectorWarning"),ut=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return U(this.name,this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return B(this._validators)}},{key:"asyncValidator",get:function(){return G(this._asyncValidators)}}]),e}(g),ct=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._parent=t,i._validators=n,i._asyncValidators=r,i}return _inherits(e,t),_createClass(e,[{key:"_checkParentType",value:function(){this._parent instanceof e||this._parent instanceof ot||at.modelGroupParentException()}}]),e}(ut),lt=Promise.resolve(null),ht=function(t){function e(t,n,i,o){var a;return _classCallCheck(this,e),(a=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).control=new et,a._registered=!1,a.update=new r.m,a._parent=t,a._rawValidators=n||[],a._rawAsyncValidators=i||[],a.valueAccessor=Y(_assertThisInitialized(a),o),a}return _inherits(e,t),_createClass(e,[{key:"ngOnChanges",value:function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),W(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){F(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof ct)&&this._parent instanceof ut?at.formGroupNameException():this._parent instanceof ct||this._parent instanceof ot||at.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||at.missingNameException()}},{key:"_updateValue",value:function(t){var e=this;lt.then((function(){e.control.setValue(t,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;lt.then((function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()}))}},{key:"path",get:function(){return this._parent?U(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return B(this._rawValidators)}},{key:"asyncValidator",get:function(){return G(this._rawAsyncValidators)}}]),e}(_),ft=function t(){_classCallCheck(this,t)},dt=new r.o("NgModelWithFormControlWarning"),pt=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._validators=t,i._asyncValidators=n,i.submitted=!1,i.directives=[],i.form=null,i.ngSubmit=new r.m,i}return _inherits(e,t),_createClass(e,[{key:"ngOnChanges",value:function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"addControl",value:function(t){var e=this.form.get(t.path);return F(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){J(this.directives,t)}},{key:"addFormGroup",value:function(t){var e=this.form.get(t.path);q(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(t){}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"addFormArray",value:function(t){var e=this.form.get(t.path);q(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(t){}},{key:"getFormArray",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){this.form.get(t.path).setValue(e)}},{key:"onSubmit",value:function(t){return this.submitted=!0,Q(this.form,this.directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_updateDomValue",value:function(){var t=this;this.directives.forEach((function(e){var n=t.form.get(e.path);e.control!==n&&(function(t,e){e.valueAccessor.registerOnChange((function(){return H(e)})),e.valueAccessor.registerOnTouched((function(){return H(e)})),e._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),e._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),t&&t._clearChangeFns()}(e.control,e),n&&F(n,e),e.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var t=this;this.form._registerOnCollectionChange((function(){return t._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var t=B(this._validators);this.form.validator=T.compose([this.form.validator,t]);var e=G(this._asyncValidators);this.form.asyncValidator=T.composeAsync([this.form.asyncValidator,e])}},{key:"_checkFormPresent",value:function(){this.form||j.missingFormException()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}}]),e}(g),vt=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._parent=t,i._validators=n,i._asyncValidators=r,i}return _inherits(e,t),_createClass(e,[{key:"_checkParentType",value:function(){gt(this._parent)&&j.groupParentException()}}]),e}(ut),yt=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._parent=t,i._validators=n,i._asyncValidators=r,i}return _inherits(e,t),_createClass(e,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormArray(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormArray(this)}},{key:"_checkParentType",value:function(){gt(this._parent)&&j.arrayParentException()}},{key:"control",get:function(){return this.formDirective.getFormArray(this)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"path",get:function(){return U(this.name,this._parent)}},{key:"validator",get:function(){return B(this._validators)}},{key:"asyncValidator",get:function(){return G(this._asyncValidators)}}]),e}(g);function gt(t){return!(t instanceof vt||t instanceof pt||t instanceof yt)}var mt,_t=((mt=function(t){function e(t,n,i,o,a){var s;return _classCallCheck(this,e),(s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._ngModelWarningConfig=a,s._added=!1,s.update=new r.m,s._ngModelWarningSent=!1,s._parent=t,s._rawValidators=n||[],s._rawAsyncValidators=i||[],s.valueAccessor=Y(_assertThisInitialized(s),o),s}return _inherits(e,t),_createClass(e,[{key:"ngOnChanges",value:function(t){var n,i;this._added||this._setUpControl(),W(t,this.viewModel)&&(n=e,i=this._ngModelWarningConfig,Object(r.T)()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(j.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_checkParentType",value:function(){!(this._parent instanceof vt)&&this._parent instanceof ut?j.ngModelGroupException():this._parent instanceof vt||this._parent instanceof pt||this._parent instanceof yt||j.controlParentException()}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}},{key:"isDisabled",set:function(t){j.disabledAttrWarning()}},{key:"path",get:function(){return U(this.name,this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return B(this._rawValidators)}},{key:"asyncValidator",get:function(){return G(this._rawAsyncValidators)}}]),e}(_))._ngModelWarningSentOnce=!1,mt),bt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"validate",value:function(t){return this.required?T.required(t):null}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}},{key:"required",get:function(){return this._required},set:function(t){this._required=null!=t&&!1!==t&&"false"!=="".concat(t),this._onChange&&this._onChange()}}]),t}(),wt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnChanges",value:function(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(t){return null==this.minlength?null:this._validator(t)}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}},{key:"_createValidator",value:function(){this._validator=T.minLength(parseInt(this.minlength,10))}}]),t}(),Ct=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnChanges",value:function(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(t){return this._validator(t)}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}},{key:"_createValidator",value:function(){this._validator=T.pattern(this.pattern)}}]),t}(),kt=function t(){_classCallCheck(this,t)},Et=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"group",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(t),r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new nt(n,{asyncValidators:i,updateOn:o,validators:r})}},{key:"control",value:function(t,e,n){return new et(t,e,n)}},{key:"array",value:function(t,e,n){var r=this,i=t.map((function(t){return r._createControl(t)}));return new rt(i,e,n)}},{key:"_reduceControls",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(r){n[r]=e._createControl(t[r])})),n}},{key:"_createControl",value:function(t){return t instanceof et||t instanceof nt||t instanceof rt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}(),It=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:st,useValue:e.warnOnDeprecatedNgFormSelector}]}}}]),t}(),Tt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:dt,useValue:e.warnOnNgModelWithFormControl}]}}}]),t}()},sPvp:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"k",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"f",(function(){return f})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return p}));var r="ADD_INGREDIENT",i="ADD_INGREDIENTS",o="UPDATE_INGREDIENT",a="DELETE_INGREDIENT",s="START_EDIT",u="STOP_EDIT",c=function t(e){_classCallCheck(this,t),this.payload=e,this.type=r},l=function t(e){_classCallCheck(this,t),this.payload=e,this.type=i},h=function t(e){_classCallCheck(this,t),this.payload=e,this.type=o},f=function t(){_classCallCheck(this,t),this.type=a},d=function t(e){_classCallCheck(this,t),this.payload=e,this.type=s},p=function t(){_classCallCheck(this,t),this.type=u}},t6oF:function(t,e,n){"use strict";n.r(e);var r=n("wj3C"),i=n.n(r);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.o=function(t){var e=this.f();t.La(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.La(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.La=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).La(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).La(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self;function u(t){return"string"==typeof t}function c(t){return"boolean"==typeof t}var l=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(){}function d(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){return null===t}function v(t){return"array"==d(t)}function y(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==d(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function C(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function k(t,e,n){return(k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:C).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var I=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function A(t){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function N(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");A.call(this,n+t[r])}function O(t,e){throw new N("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function R(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function P(){this.b=this.a=null}T(A,Error),A.prototype.name="CustomError",T(N,A),N.prototype.name="AssertionError",R.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var D=new R((function(){return new M}),(function(t){t.reset()}));function L(){var t=Ht,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function M(){this.next=this.b=this.a=null}function j(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}P.prototype.add=function(t,e){var n=D.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(u(t))return u(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},F=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=u(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=u(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=U(t,e)}function z(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function B(t,e){!function(t,e){for(var n=u(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)}))}function G(t){return Array.prototype.concat.apply([],arguments)}function W(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function K(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function Q(t){for(var e in t)return!1;return!0}function Y(t){var e,n={};for(e in t)n[e]=t[e];return n}var J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<J.length;o++)n=J[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function $(t,e){this.a=t===et&&e||"",this.b=tt}function Z(t){return t instanceof $&&t.constructor===$&&t.b===tt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}$.prototype.qa=!0,$.prototype.pa=function(){return this.a},$.prototype.toString=function(){return"Const{"+this.a+"}"};var tt={},et={},nt=new $(et,"");function rt(){this.a="",this.b=ut}function it(t){return t instanceof rt&&t.constructor===rt&&t.b===ut?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function ot(t,e){var n=Z(t);if(!st.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ct(t=n.replace(at,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof $?Z(t):encodeURIComponent(String(t))})))}rt.prototype.qa=!0,rt.prototype.pa=function(){return this.a.toString()},rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var at=/%{(\w+)}/g,st=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ut={};function ct(t){var e=new rt;return e.a=t,e}var lt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ht=/&/g,ft=/</g,dt=/>/g,pt=/"/g,vt=/'/g,yt=/\x00/g,gt=/[\x00&<>"']/;function mt(t,e){return-1!=t.indexOf(e)}function _t(t,e){return t<e?-1:t>e?1:0}function bt(){this.a="",this.b=It}function wt(t){return t instanceof bt&&t.constructor===bt&&t.b===It?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}bt.prototype.qa=!0,bt.prototype.pa=function(){return this.a.toString()},bt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function kt(t){return t instanceof bt?t:(t="object"==typeof t&&t.qa?t.pa():String(t),Ct.test(t)||(t="about:invalid#zClosurez"),Tt(t))}var Et,It={};function Tt(t){var e=new bt;return e.a=t,e}Tt("about:blank");t:{var St=s.navigator;if(St){var At=St.userAgent;if(At){Et=At;break t}}Et=""}function Nt(t){return mt(Et,t)}function Ot(){this.a="",this.b=xt}function Rt(t){return t instanceof Ot&&t.constructor===Ot&&t.b===xt?t.a:(O("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}Ot.prototype.qa=!0,Ot.prototype.pa=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var xt={};function Pt(t){var e=new Ot;return e.a=t,e}Pt("<!DOCTYPE html>");var Dt,Lt,Mt=Pt("");function jt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ut(t){return gt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ht,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ft,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(dt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(pt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(vt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(yt,"&#0;"))),t}function Ft(t){s.setTimeout((function(){throw t}),0)}function Vt(t,e){Lt||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);Lt=function(){t.then(zt)}}else Lt=function(){var t=zt;!g(s.setImmediate)||s.Window&&s.Window.prototype&&!Nt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Dt||(Dt=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Nt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=ct(Z(nt));j(t,"HTMLIFrameElement"),t.src=it(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Rt(Mt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=k((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!Nt("Trident")&&!Nt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){s.setTimeout(t,0)}}()),Dt(t)):s.setImmediate(t)}}(),qt||(Lt(),qt=!0),Ht.add(t,e)}Pt("<br>");var qt=!1,Ht=new P;function zt(){for(var t;t=L();){try{t.a.call(t.b)}catch(e){Ft(e)}x(D,t)}qt=!1}function Bt(t,e){if(this.a=Gt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){re(n,Wt,t)}),(function(t){if(!(t instanceof le))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}re(n,Kt,t)}))}catch(r){re(this,Kt,r)}}var Gt=0,Wt=2,Kt=3;function Qt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Qt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Yt=new R((function(){return new Qt}),(function(t){t.reset()}));function Jt(t,e,n){var r=Yt.get();return r.g=t,r.b=e,r.f=n,r}function Xt(t){if(t instanceof Bt)return t;var e=new Bt(f);return re(e,Wt,t),e}function $t(t){return new Bt((function(e,n){n(t)}))}function Zt(t,e,n){ie(t,e,n,null)||Vt(E(e,t))}function te(t){return new Bt((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Zt(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function ee(t,e){t.b||t.a!=Wt&&t.a!=Kt||oe(t),t.f?t.f.next=e:t.b=e,t.f=e}function ne(t,e,n,r){var i=Jt(null,null,null);return i.a=new Bt((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof le?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,ee(t,i),i.a}function re(t,e,n){t.a==Gt&&(t===n&&(e=Kt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ie(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,oe(t),e!=Kt||n instanceof le||function(t,e){t.g=!0,Vt((function(){t.g&&ce.call(null,e)}))}(t,n)))}function ie(t,e,n,r){if(t instanceof Bt)return ee(t,Jt(e||f,n||null,r)),!0;if(S(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(g(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function oe(t){t.h||(t.h=!0,Vt(t.Zb,t))}function ae(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function se(t,e,n,r){if(n==Kt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ue(e,n,r);else try{e.c?e.g.call(e.f):ue(e,n,r)}catch(i){ce.call(null,i)}x(Yt,e)}function ue(t,e,n){e==Wt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Bt.prototype.then=function(t,e,n){return ne(this,g(t)?t:null,g(e)?e:null,n)},Bt.prototype.$goog_Thenable=!0,(t=Bt.prototype).ka=function(t,e){return(t=Jt(t,t,e)).c=!0,ee(this,t),this},t.s=function(t,e){return ne(this,null,t,e)},t.cancel=function(t){this.a==Gt&&Vt((function(){!function t(e,n){if(e.a==Gt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==Gt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):ae(r),se(r,o,Kt,n)))}e.c=null}else re(e,Kt,n)}(this,new le(t))}),this)},t.Oc=function(t){this.a=Gt,re(this,Wt,t)},t.Pc=function(t){this.a=Gt,re(this,Kt,t)},t.Zb=function(){for(var t;t=ae(this);)se(this,t,this.a,this.i);this.h=!1};var ce=Ft;function le(t){A.call(this,t)}function he(){0!=fe&&(de[this[_]||(this[_]=++b)]=this),this.va=this.va,this.la=this.la}T(le,A),le.prototype.name="cancel";var fe=0,de={};function pe(t){if(!t.va&&(t.va=!0,t.za(),0!=fe)){var e=t[_]||(t[_]=++b);if(0!=fe&&t.la&&0<t.la.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete de[e]}}function ve(t){return ve[" "](t),t}he.prototype.va=!1,he.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},ve[" "]=f;var ye,ge,me=Nt("Opera"),_e=Nt("Trident")||Nt("MSIE"),be=Nt("Edge"),we=be||_e,Ce=Nt("Gecko")&&!(mt(Et.toLowerCase(),"webkit")&&!Nt("Edge"))&&!(Nt("Trident")||Nt("MSIE"))&&!Nt("Edge"),ke=mt(Et.toLowerCase(),"webkit")&&!Nt("Edge");function Ee(){var t=s.document;return t?t.documentMode:void 0}t:{var Ie="",Te=(ge=Et,Ce?/rv:([^\);]+)(\)|;)/.exec(ge):be?/Edge\/([\d\.]+)/.exec(ge):_e?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ge):ke?/WebKit\/(\S+)/.exec(ge):me?/(?:Version)[ \/]?(\S+)/.exec(ge):void 0);if(Te&&(Ie=Te?Te[1]:""),_e){var Se=Ee();if(null!=Se&&Se>parseFloat(Ie)){ye=String(Se);break t}}ye=Ie}var Ae,Ne={};function Oe(t){return function(t,e){var n=Ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=lt(String(ye)).split("."),r=lt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=_t(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||_t(0==a[2].length,0==s[2].length)||_t(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}Ae=s.document&&_e?Ee():void 0;var Re=Object.freeze||function(t){return t},xe=!_e||9<=Number(Ae),Pe=_e&&!Oe("9"),De=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",f,e),s.removeEventListener("test",f,e)}catch(n){}return t}();function Le(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function Me(t,e){if(Le.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ce){t:{try{ve(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=u(t.pointerType)?t.pointerType:je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Le.prototype.preventDefault=function(){this.Mb=!1},T(Me,Le);var je=Re({2:"touch",3:"pen",4:"mouse"});Me.prototype.preventDefault=function(){Me.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Pe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Me.prototype.f=function(){return this.a};var Ue="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Ve(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Fe,this.ta=this.Ka=!1}function qe(t){t.ta=!0,t.listener=null,t.proxy=null,t.src=null,t.Pa=null}function He(t){this.src=t,this.a={},this.b=0}function ze(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(qe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Be(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ta&&o.listener==e&&o.capture==!!n&&o.Pa==r)return i}return-1}He.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Be(t,e,r,i);return-1<a?(e=t[a],n||(e.Ka=!1)):((e=new Ve(e,this.src,o,!!r,i)).Ka=n,t.push(e)),e};var Ge="closure_lm_"+(1e6*Math.random()|0),We={};function Ke(t,e,n,r,i){if(r&&r.once)Ye(t,e,n,r,i);else if(v(e))for(var o=0;o<e.length;o++)Ke(t,e[o],n,r,i);else n=on(n),t&&t[Ue]?sn(t,e,n,m(r)?!!r.capture:!!r,i):Qe(t,e,n,!1,r,i)}function Qe(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=nn(t);if(s||(t[Ge]=s=new He(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=en,e=xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)De||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($e(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Ye(t,e,n,r,i){if(v(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else n=on(n),t&&t[Ue]?un(t,e,n,m(r)?!!r.capture:!!r,i):Qe(t,e,n,!0,r,i)}function Je(t,e,n,r,i){if(v(e))for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=on(n),t&&t[Ue]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=Be(o=t.a[e],n,r,i))&&(qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=nn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Be(e,n,r,i)),(n=-1<t?e[t]:null)&&Xe(n))}function Xe(t){if("number"!=typeof t&&t&&!t.ta){var e=t.src;if(e&&e[Ue])ze(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($e(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nn(e))?(ze(n,t),0==n.b&&(n.src=null,e[Ge]=null)):qe(t)}}}function $e(t){return t in We?We[t]:We[t]="on"+t}function Ze(t,e,n,r){var i=!0;if((t=nn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ta&&(o=tn(o,r),i=i&&!1!==o)}return i}function tn(t,e){var n=t.listener,r=t.Pa||t.src;return t.Ka&&Xe(t),n.call(r,e)}function en(t,e){if(t.ta)return!0;if(!xe){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Me(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Ze(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Ze(r[i],t,!1,e),n=n&&o}return n}return tn(t,new Me(e,this))}function nn(t){return(t=t[Ge])instanceof He?t:null}var rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(t){return g(t)?t:(t[rn]||(t[rn]=function(e){return t.handleEvent(e)}),t[rn])}function an(){he.call(this),this.u=new He(this),this.Sb=this,this.Xa=null}function sn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function un(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function cn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&ze(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function ln(t,e,n){if(g(t))n&&(t=k(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=k(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function hn(t){var e=null;return new Bt((function(n,r){-1==(e=ln((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw s.clearTimeout(e),t}))}function fn(t){if(t.U&&"function"==typeof t.U)return t.U();if(u(t))return t.split("");if(y(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function dn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(y(t)||u(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function vn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];yn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)yn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function yn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(an,he),an.prototype[Ue]=!0,an.prototype.addEventListener=function(t,e,n,r){Ke(this,t,e,n,r)},an.prototype.removeEventListener=function(t,e,n,r){Je(this,t,e,n,r)},an.prototype.dispatchEvent=function(t){var e,n=this.Xa;if(n)for(e=[];n;n=n.Xa)e.push(n);n=this.Sb;var r=t.type||t;if(u(t))t=new Le(t,n);else if(t instanceof Le)t.target=t.target||n;else{var i=t;X(t=new Le(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=cn(a,r,!0,t)&&i}if(i=cn(a=t.b=n,r,!0,t)&&i,i=cn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=cn(a=t.b=e[o],r,!1,t)&&i;return i},an.prototype.za=function(){if(an.qb.za.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)qe(n[r]);delete e.a[t],e.b--}}this.Xa=null},(t=pn.prototype).U=function(){vn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return vn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return yn(this.b,t)?this.b[t]:e},t.set=function(t,e){yn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var gn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof mn?(this.h=void 0!==e?e:t.h,_n(this,t.f),this.i=t.i,this.b=t.b,bn(this,t.l),this.c=t.c,wn(this,Vn(t.a)),this.g=t.g):t&&(n=String(t).match(gn))?(this.h=!!e,_n(this,n[1]||"",!0),this.i=Tn(n[2]||""),this.b=Tn(n[3]||"",!0),bn(this,n[4]),this.c=Tn(n[5]||"",!0),wn(this,n[6]||"",!0),this.g=Tn(n[7]||"")):(this.h=!!e,this.a=new Dn(null,this.h))}function _n(t,e,n){t.f=n?Tn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function bn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function wn(t,e,n){e instanceof Dn?(t.a=e,function(t,e){e&&!t.f&&(Ln(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(jn(this,e),Fn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=Sn(e,xn)),t.a=new Dn(e,t.h))}function Cn(t,e,n){t.a.set(e,n)}function kn(t,e){return t.a.get(e)}function En(t){return t instanceof mn?new mn(t):new mn(t,void 0)}function In(t,e){var n=new mn(null,void 0);return _n(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Tn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Sn(t,e,n){return u(t)?(t=encodeURI(t).replace(e,An),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function An(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}mn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Sn(e,Nn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(Sn(e,Nn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Sn(n,"/"==n.charAt(0)?Rn:On,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Sn(n,Pn)),t.join("")},mn.prototype.resolve=function(t){var e=new mn(this),n=!!t.f;n?_n(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)bn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(mt(i,"./")||mt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?wn(e,Vn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Nn=/[#\/\?@]/g,On=/[#\?:]/g,Rn=/[#\?]/g,xn=/[#\?@]/g,Pn=/#/g;function Dn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ln(t){t.a||(t.a=new pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Mn(t){var e=dn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Dn(null,void 0);t=fn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];v(o)?Fn(n,i,o):n.add(i,o)}return n}function jn(t,e){Ln(t),e=qn(t,e),yn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,yn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&vn(t)))}function Un(t,e){return Ln(t),e=qn(t,e),yn(t.a.b,e)}function Fn(t,e,n){jn(t,e),0<n.length&&(t.c=null,t.a.set(qn(t,e),W(n)),t.b+=n.length)}function Vn(t){var e=new Dn;return e.c=t.c,t.a&&(e.a=new pn(t.a),e.b=t.b),e}function qn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=Dn.prototype).add=function(t,e){Ln(this),this.c=null,t=qn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Ln(this),this.a.forEach((function(n,r){F(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){Ln(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.U=function(t){Ln(this);var e=[];if(u(t))Un(this,t)&&(e=G(e,this.a.get(qn(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Ln(this),this.c=null,Un(this,t=qn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Hn=!_e||9<=Number(Ae);function zn(t){var e=document;return u(t)?e.getElementById(t):t}function Bn(t,e){K(e,(function(e,n){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Gn.hasOwnProperty(n)?t.setAttribute(Gn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var Gn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wn(t,e,n){function r(n){n&&e.appendChild(u(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!y(o)||m(o)&&0<o.nodeType?r(o):F(Kn(o)?W(o):o,r)}}function Kn(t){if(t&&"number"==typeof t.length){if(m(t))return"function"==typeof t.item||"string"==typeof t.item;if(g(t))return"function"==typeof t.item}return!1}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(v(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),$n(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Yn,t,e),e.join("")}function Yn(){}var Jn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Xn,(function(t){var e=Jn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Jn[t]=e),e})),'"')}function Zn(){var t=gr();return _e&&!!Ae&&11==Ae||/Edge\/\d+/.test(t)}function tr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||s.window;var n="about:blank";t&&(n=wt(kt(t)).toString()),e.location.href=n}function nr(t){return!!((t=(t||gr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||s.window;try{t.close()}catch(e){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=gr().toLowerCase(),r&&(e.target=r,mt(n,"crios/")&&(e.target="_blank")),pr(gr())==dr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof bt?n:kt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((Nt("iPhone")&&!Nt("iPod")&&!Nt("iPad")||Nt("iPad")||Nt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(j(a=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof bt||e instanceof bt||(e="object"==typeof e&&e.qa?e.pa():String(e),Ct.test(e)||(e="about:invalid#zClosurez"),e=Tt(e)),a.href=wt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=wt(e).toString(),a&&(we&&mt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Pt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">'),a.document.write(Rt(t)),a.document.close())):(a=r.open(wt(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ar=/^[^@]+@[^@]+$/;function sr(){var t=null;return new Bt((function(e){"complete"==s.document.readyState?e():(t=function(){e()},Ye(window,"load",t))})).s((function(e){throw Je(window,"load",t),e}))}function ur(t){return t=t||gr(),!("file:"!==Cr()&&"ionic:"!==Cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function lr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function hr(){return i.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":i.a.INTERNAL.hasOwnProperty("node")?"Node":lr()?"Worker":"Browser"}function fr(){var t=hr();return"ReactNative"===t||"Node"===t}var dr="Firefox";function pr(t){var e=t.toLowerCase();return mt(e,"opera/")||mt(e,"opr/")||mt(e,"opios/")?"Opera":mt(e,"iemobile")?"IEMobile":mt(e,"msie")||mt(e,"trident/")?"IE":mt(e,"edge/")?"Edge":mt(e,"firefox/")?dr:mt(e,"silk/")?"Silk":mt(e,"blackberry")?"Blackberry":mt(e,"webos")?"Webos":!mt(e,"safari/")||mt(e,"chrome/")||mt(e,"crios/")||mt(e,"android")?!mt(e,"chrome/")&&!mt(e,"crios/")||mt(e,"edge/")?mt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var vr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function yr(t,e){e=e||[];var n,r=[],i={};for(n in vr)i[vr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=hr())?r=pr(i=gr()):"Worker"===r&&(r=pr(i=gr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function gr(){return s.navigator&&s.navigator.userAgent||""}function mr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function _r(){try{var t=s.localStorage,e=Sr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!s.indexedDB}catch(n){return lr()&&!!s.indexedDB}return!1}function br(){return(wr()||"chrome-extension:"===Cr()||ur())&&!fr()&&_r()&&!lr()}function wr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){return s.location&&s.location.protocol||null}function kr(t){return!nr(t=t||gr())&&pr(t)!=dr}function Er(t){return void 0===t?null:Qn(t)}function Ir(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Tr(t){if(null!==t)return JSON.parse(t)}function Sr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ar(t){return"Safari"!=pr(t=t||gr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Or(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=gr(),e=hr(),this.b=nr(t)||"ReactNative"===e}function Rr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function xr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Pr(){return!(!mr("fireauth.oauthhelper",s)&&!mr("fireauth.iframe",s))}Or.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!wr()&&"chrome-extension:"!==Cr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Dr,Lr={};function Mr(t){Lr[t]||(Lr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var jr={};Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Dr=2==jr.abcd}catch(ge){Dr=!1}function Ur(t,e,n){Dr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Fr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ur(t,n,e[n])}function Vr(t){var e={};return Fr(e,t),e}function qr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ur(e,n,qr(t[n]));return e}function Hr(t){var e={},n=t[Br],r=t[Gr];if(!(t=t[Wr])||t!=zr&&!n)throw Error("Invalid provider user info!");e[Qr]=r||null,e[Kr]=n||null,Ur(this,Jr,t),Ur(this,Yr,qr(e))}var zr="EMAIL_SIGNIN",Br="email",Gr="newEmail",Wr="requestType",Kr="email",Qr="fromEmail",Yr="data",Jr="operation";function Xr(t,e){this.code=Zr+t,this.message=e||ti[t]||""}function $r(t){var e=t&&t.code;return e?new Xr(e.substring(Zr.length),t.message):null}T(Xr,Error),Xr.prototype.A=function(){return{code:this.code,message:this.message}},Xr.prototype.toJSON=function(){return this.A()};var Zr="auth/",ti={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ei(t){var e=kn(t=En(t),ni)||null,n=kn(t,ri)||null,r=kn(t,ai)||null;if(r=r&&ui[r]||null,!e||!n||!r)throw new Xr("argument-error",ni+", "+ri+"and "+ai+" are required in a valid action code URL.");Fr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,ii)||null,languageCode:kn(t,oi)||null,tenantId:kn(t,si)||null})}var ni="apiKey",ri="oobCode",ii="continueUrl",oi="languageCode",ai="mode",si="tenantId",ui={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:zr,verifyEmail:"VERIFY_EMAIL"};function ci(t){try{return new ei(t)}catch(e){return null}}function li(t){var e=t[vi];if(void 0===e)throw new Xr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Xr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[hi];if(n&&"object"==typeof n){e=n[mi];var r=n[yi];if(n=n[gi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Xr("argument-error",yi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Xr("argument-error",gi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Xr("argument-error",mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Xr("missing-android-pkg-name")}}else if(void 0!==n)throw new Xr("argument-error",hi+" property must be a non null object when specified.");if(this.f=null,(e=t[pi])&&"object"==typeof e){if("string"==typeof(e=e[_i])&&e.length)this.f=e;else if(void 0!==e)throw new Xr("argument-error",_i+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Xr("argument-error",pi+" property must be a non null object when specified.");if(void 0!==(e=t[di])&&"boolean"!=typeof e)throw new Xr("argument-error",di+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[fi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Xr("argument-error",fi+" property must be a non empty string when specified.");this.i=t||null}var hi="android",fi="dynamicLinkDomain",di="handleCodeInApp",pi="iOS",vi="url",yi="installApp",gi="minimumVersion",mi="packageName",_i="bundleId";function bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var wi=null,Ci=null;function ki(t){this.f=t.sub,I(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Ei(t){return(t=Ii(t))&&t.sub&&t.iss&&t.aud&&t.exp?new ki(t):null}function Ii(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ci[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!wi){wi={},Ci={};for(var t=0;65>t;t++)wi[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Ci[wi[t]]=t,62<=t&&(Ci["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(r){}return null}ki.prototype.R=function(){return this.c},ki.prototype.g=function(){return this.b};var Ti,Si={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ai(t){for(var e in Si)if(Si[e].id===t)return{firebaseEndpoint:(t=Si[e]).cb,secureTokenEndpoint:t.ib};return null}Ti=Ai("__EID__")?"__EID__":void 0;var Ni="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Oi=["client_id","response_type","scope","redirect_uri","state"],Ri={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Oi},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Oi},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Oi},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ni},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function xi(t){for(var e in Ri)if(Ri[e].Fa==t)return Ri[e];return null}function Pi(t){var e={};e["facebook.com"]=Ui,e["google.com"]=Vi,e["github.com"]=Fi,e["twitter.com"]=qi;var n=t&&t[Li];try{if(n)return e[n]?new e[n](t):new ji(t);if(void 0!==t[Di])return new Mi(t)}catch(r){}return null}var Di="idToken",Li="providerId";function Mi(t){var e=t[Li];if(!e&&t[Di]){var n=Ei(t[Di]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ur(this,"providerId",e),Ur(this,"isNewUser",n)}function ji(t){Mi.call(this,t),Ur(this,"profile",qr((t=Tr(t.rawUserInfo||"{}"))||{}))}function Ui(t){if(ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fi(t){if(ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",this.profile&&this.profile.login||null)}function Vi(t){if(ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function qi(t){if(ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",t.screenName||null)}function Hi(t){var e=En(t),n=kn(e,"link"),r=kn(En(n),"link");return e=kn(e,"deep_link_id"),kn(En(e),"link")||e||r||n||t}function zi(){}function Bi(t,e){return t.then((function(t){if(t[Oa]){var n=Ei(t[Oa]);if(!n||e!=n.f)throw new Xr("user-mismatch");return t}throw new Xr("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==Zr+"user-not-found"?new Xr("user-mismatch"):t}))}function Gi(t,e){if(!e)throw new Xr("internal-error","failed to construct a credential");this.a=e,Ur(this,"providerId",t),Ur(this,"signInMethod",t)}function Wi(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Ki(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Gi(t.providerId,t.pendingToken)}catch(e){}return null}function Qi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ur(this,"idToken",e.idToken),e.accessToken&&Ur(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ur(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Xr("internal-error","failed to construct a credential");Ur(this,"accessToken",e.oauthToken),Ur(this,"secret",e.oauthTokenSecret)}Ur(this,"providerId",t),Ur(this,"signInMethod",n)}function Yi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Mn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Ji(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Qi(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Xi(t,e){this.Fc=e||[],Fr(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(xi(t)||{}).Ea||null,this.bb=null}function $i(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Xr("argument-error",'SAML provider IDs must be prefixed with "saml."');Xi.call(this,t,[])}function Zi(t){Xi.call(this,t,Oi),this.a=[]}function to(){Zi.call(this,"facebook.com")}function eo(t){if(!t)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new to).credential({accessToken:e})}function no(){Zi.call(this,"github.com")}function ro(t){if(!t)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new no).credential({accessToken:e})}function io(){Zi.call(this,"google.com"),this.ya("profile")}function oo(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new io).credential({idToken:n,accessToken:e})}function ao(){Xi.call(this,"twitter.com",Ni)}function so(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Xr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Qi("twitter.com",n,"twitter.com")}function uo(t,e,n){this.a=t,this.c=e,Ur(this,"providerId","password"),Ur(this,"signInMethod",n===lo.EMAIL_LINK_SIGN_IN_METHOD?lo.EMAIL_LINK_SIGN_IN_METHOD:lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function co(t){return t&&t.email&&t.password?new uo(t.email,t.password,t.signInMethod):null}function lo(){Fr(this,{providerId:"password",isOAuthProvider:!1})}function ho(t,e){if(!(e=fo(e)))throw new Xr("argument-error","Invalid email link!");return new uo(t,e.code,lo.EMAIL_LINK_SIGN_IN_METHOD)}function fo(t){return(t=ci(t=Hi(t)))&&t.operation===zr?t:null}function po(t){if(!(t.Va&&t.Ua||t.Ha&&t.ba))throw new Xr("internal-error");this.a=t,Ur(this,"providerId","phone"),Ur(this,"signInMethod","phone")}function vo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return F(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new po(e)}return null}function yo(t){return t.a.Ha&&t.a.ba?{temporaryProof:t.a.Ha,phoneNumber:t.a.ba}:{sessionInfo:t.a.Va,code:t.a.Ua}}function go(t){try{this.a=t||i.a.auth()}catch(e){throw new Xr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Fr(this,{providerId:"phone",isOAuthProvider:!1})}function mo(t,e){if(!t)throw new Xr("missing-verification-id");if(!e)throw new Xr("missing-verification-code");return new po({Va:t,Ua:e})}function _o(t){if(t.temporaryProof&&t.phoneNumber)return new po({Ha:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return oo(o,n);case"facebook.com":return eo(n);case"github.com":return ro(n);case"twitter.com":return so(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Gi(e,a):new Qi(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Zi(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function bo(t){if(!t.isOAuthProvider)throw new Xr("invalid-oauth-provider")}function wo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Xr("invalid-auth-event");if(this.g&&this.a)throw new Xr("invalid-auth-event");if(this.g&&!this.f)throw new Xr("invalid-auth-event")}function Co(t){return(t=t||{}).type?new wo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&$r(t.error),t.postBody,t.tenantId):null}function ko(){this.b=null,this.a=[]}T(ji,Mi),T(Ui,ji),T(Fi,ji),T(Vi,ji),T(qi,ji),Gi.prototype.na=function(t){return Qa(t,Wi(this))},Gi.prototype.b=function(t,e){var n=Wi(this);return n.idToken=e,Ya(t,n)},Gi.prototype.f=function(t,e){return Bi(Ja(t,Wi(this)),e)},Gi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Qi.prototype.na=function(t){return Qa(t,Yi(this))},Qi.prototype.b=function(t,e){var n=Yi(this);return n.idToken=e,Ya(t,n)},Qi.prototype.f=function(t,e){return Bi(Ja(t,Yi(this)),e)},Qi.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Xi.prototype.Ga=function(t){return this.zb=Y(t),this},T($i,Xi),T(Zi,Xi),Zi.prototype.ya=function(t){return H(this.a,t)||this.a.push(t),this},Zi.prototype.Hb=function(){return W(this.a)},Zi.prototype.credential=function(t,e){var n;if(!(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Xr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Qi(this.providerId,n,this.providerId)},T(to,Zi),Ur(to,"PROVIDER_ID","facebook.com"),Ur(to,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(no,Zi),Ur(no,"PROVIDER_ID","github.com"),Ur(no,"GITHUB_SIGN_IN_METHOD","github.com"),T(io,Zi),Ur(io,"PROVIDER_ID","google.com"),Ur(io,"GOOGLE_SIGN_IN_METHOD","google.com"),T(ao,Xi),Ur(ao,"PROVIDER_ID","twitter.com"),Ur(ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),uo.prototype.na=function(t){return this.signInMethod==lo.EMAIL_LINK_SIGN_IN_METHOD?Is(t,is,{email:this.a,oobCode:this.c}):Is(t,ws,{email:this.a,password:this.c})},uo.prototype.b=function(t,e){return this.signInMethod==lo.EMAIL_LINK_SIGN_IN_METHOD?Is(t,os,{idToken:e,email:this.a,oobCode:this.c}):Is(t,vs,{idToken:e,email:this.a,password:this.c})},uo.prototype.f=function(t,e){return Bi(this.na(t),e)},uo.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Fr(lo,{PROVIDER_ID:"password"}),Fr(lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Fr(lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),po.prototype.na=function(t){return t.Wa(yo(this))},po.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,Is(t,ks,n)},po.prototype.f=function(t,e){var n=yo(this);return n.operation="REAUTH",Bi(t=Is(t,Es,n),e)},po.prototype.A=function(){var t={providerId:"phone"};return this.a.Va&&(t.verificationId=this.a.Va),this.a.Ua&&(t.verificationCode=this.a.Ua),this.a.Ha&&(t.temporaryProof=this.a.Ha),this.a.ba&&(t.phoneNumber=this.a.ba),t},go.prototype.Wa=function(t,e){var n=this.a.b;return Xt(e.verify()).then((function(r){if(!u(r))throw new Xr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Is(t,ds,e)}(n,{phoneNumber:t,recaptchaToken:r}).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new Xr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Fr(go,{PROVIDER_ID:"phone"}),Fr(go,{PHONE_SIGN_IN_METHOD:"phone"}),wo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},wo.prototype.R=function(){return this.h},wo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Eo,Io=null;function To(t){var e="unauthorized-domain",n=void 0,r=En(t);t=r.b,"chrome-extension"==(r=r.f)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Xr.call(this,e,n)}function So(t,e,n){Xr.call(this,t,n),(t=e||{}).Ab&&Ur(this,"email",t.Ab),t.ba&&Ur(this,"phoneNumber",t.ba),t.credential&&Ur(this,"credential",t.credential),t.Qb&&Ur(this,"tenantId",t.Qb)}function Ao(t){if(t.code){var e=t.code||"";0==e.indexOf(Zr)&&(e=e.substring(Zr.length));var n={credential:_o(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new Xr(e,t.message||void 0);return new So(e,n,t.message)}return null}function No(){}function Oo(){}function Ro(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function xo(){}function Po(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=k(this.fc,this),this.a.onerror=k(this.Ib,this),this.a.onprogress=k(this.gc,this),this.a.ontimeout=k(this.kc,this)}function Do(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Lo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Mo(t){this.f=t,this.b=this.c=this.a=null}function jo(t,e){this.name=t,this.value=e}T(To,Xr),T(So,Xr),So.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&X(t,e),t},So.prototype.toJSON=function(){return this.A()},No.prototype.c=null,T(Oo,No),Oo.prototype.a=function(){var t=Ro(this);return t?new ActiveXObject(t):new XMLHttpRequest},Oo.prototype.b=function(){var t={};return Ro(this)&&(t[0]=!0,t[1]=!0),t},Eo=new Oo,T(xo,No),xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Po;throw Error("Unsupported browser")},xo.prototype.b=function(){return{}},(t=Po.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Do(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Do(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Do(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Lo.prototype.a=null,Lo.prototype.reset=function(t,e,n,r,i){r||I(),delete this.a},jo.prototype.toString=function(){return this.name};var Uo=new jo("SEVERE",1e3),Fo=new jo("WARNING",900),Vo=new jo("CONFIG",700),qo=new jo("FINE",500);Mo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(O("Root logger has no level set."),null)}(this).value)for(g(e)&&(e=e()),t=new Lo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ho={},zo=null;function Bo(t){var e;if(zo||(zo=new Mo(""),Ho[""]=zo,zo.c=Vo),!(e=Ho[t])){e=new Mo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Bo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Ho[t]=e}return e}function Go(t,e){t&&t.log(qo,e,void 0)}function Wo(t){this.f=t}function Ko(t){an.call(this),this.o=t,this.readyState=Qo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Bo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(Wo,No),Wo.prototype.a=function(){return new Ko(this.f)},Wo.prototype.b=function(t){return function(){return t}}({}),T(Ko,an);var Qo=0;function Yo(t){t.c.read().then(t.ec.bind(t)).catch(t.Oa.bind(t))}function Jo(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Xo(t)}function Xo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function $o(t){an.call(this),this.headers=new pn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Zo,this.v=this.P=!1}(t=Ko.prototype).open=function(t,e){if(this.readyState!=Qo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,Xo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Jo(this,!1)),this.readyState=Qo},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Xo(this)),this.a&&(this.readyState=3,Xo(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Yo(this)):t.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Jo(this,!0):Xo(this),3==this.readyState&&Yo(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,Jo(this,!0))},t.hc=function(t){this.a&&(this.response=t,Jo(this,!0))},t.Oa=function(t){var e=this.h;e&&e.log(Fo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&Jo(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Fo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Fo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},T($o,an);var Zo="";$o.prototype.b=Bo("goog.net.XhrIo");var ta=/^https?$/i,ea=["POST","PUT"];function na(t){return"content-type"==t.toLowerCase()}function ra(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ia(t),aa(t)}function ia(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function oa(t){if(t.c&&void 0!==a)if(t.w[1]&&4==ua(t)&&2==ca(t))Go(t.b,la(t,"Local request error detected and ignored"));else if(t.i&&4==ua(t))ln(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==ua(t)){Go(t.b,la(t,"Request complete")),t.c=!1;try{var e,n=ca(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(gn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!ta.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ua(t)?t.a.statusText:""}catch(l){Go(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+ca(t)+"]",ia(t)}}finally{aa(t)}}}function aa(t,e){if(t.a){sa(t);var n=t.a,r=t.w[0]?f:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Uo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function sa(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(s.clearTimeout(t.o),t.o=null)}function ua(t){return t.a?t.a.readyState:0}function ca(t){try{return 2<ua(t)?t.a.status:-1}catch(e){return-1}}function la(t,e){return e+" ["+t.O+" "+t.l+" "+ca(t)+"]"}function ha(t){var e=Ca;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function fa(t,e,n){t.a=!0,t.c=n,t.f=!e,ya(t)}function da(t){if(t.a){if(!t.u)throw new ga(t);t.u=!1}}function pa(t,e,n,r){t.g.push([e,n,r]),t.a&&ya(t)}function va(t){return q(t.g,(function(t){return g(t[1])}))}function ya(t){if(t.h&&t.a&&va(t)){var e=t.h,n=ba[e];n&&(s.clearTimeout(n.a),delete ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(S(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,va(t)||(n=!0)}}t.c=e,r&&(u=k(t.m,t,!0),r=k(t.m,t,!1),e instanceof ha?(pa(e,u,r),e.w=!0):e.then(u,r)),n&&(e=new _a(e),ba[e.a]=e,t.h=e.a)}function ga(){A.call(this)}function ma(){A.call(this)}function _a(t){this.a=s.setTimeout(k(this.c,this),0),this.b=t}(t=$o.prototype).Ia=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Go(this.b,la(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Go(this.b,la(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),aa(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),aa(this,!0)),$o.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?oa(this):this.yc())},t.yc=function(){oa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Zo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Uo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Go(this.b,"Can not get response: "+e.message),null}},ha.prototype.cancel=function(t){if(this.a)this.c instanceof ha&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new ma(this),da(this),fa(this,!1,t))}},ha.prototype.m=function(t,e){this.i=!1,fa(this,t,e)},ha.prototype.then=function(t,e,n){var r,i,o=new Bt((function(t,e){r=t,i=e}));return pa(this,r,(function(t){t instanceof ma?o.cancel():i(t)})),o.then(t,e,n)},ha.prototype.$goog_Thenable=!0,T(ga,A),ga.prototype.message="Deferred has already fired",ga.prototype.name="AlreadyCalledError",T(ma,A),ma.prototype.message="Deferred was canceled",ma.prototype.name="CanceledError",_a.prototype.c=function(){throw delete ba[this.a],this.b};var ba={};function wa(t){var e={},n=e.document||document,r=it(t).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},a=new ha(o),u=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(u=window.setTimeout((function(){ka(i,!0);var t=new Ta(Ia,"Timeout reached for loading script "+r);da(a),fa(a,!1,t)}),c),o.Ia=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(ka(i,e.gd||!1,u),da(a),fa(a,!0,null))},i.onerror=function(){ka(i,!0,u);var t=new Ta(Ea,"Error while loading script "+r);da(a),fa(a,!1,t)},X(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Bn(i,o),function(t,e){j(t,"HTMLScriptElement"),t.src=it(e),null===h&&(h=(e=(e=s.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ca(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&ka(t,!0,this.Ia)}}function ka(t,e,n){null!=n&&s.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ea=0,Ia=1;function Ta(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),A.call(this,n),this.code=t}function Sa(t){this.f=t}function Aa(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||Ra,this.g=Y(t.secureTokenHeaders||xa),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||Pa,this.a=Y(t.firebaseHeaders||Da),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==hr(),!(n=s.XMLHttpRequest||n&&i.a.INTERNAL.node&&i.a.INTERNAL.node.XMLHttpRequest)&&!lr())throw new Xr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=lr()?new Wo(self):fr()?new Sa(n):new xo,this.b=null}T(Ta,A),T(Sa,No),Sa.prototype.a=function(){return new this.f},Sa.prototype.b=function(){return{}};var Na,Oa="idToken",Ra=new Or(3e4,6e4),xa={"Content-Type":"application/x-www-form-urlencoded"},Pa=new Or(3e4,6e4),Da={"Content-Type":"application/json"};function La(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ma(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ja(t,e,n,r,i,o,a){(function(){var t=gr();return!((t="Chrome"!=pr(t)?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||_e&&Ae&&!(9<Ae))})()||lr()?t=k(t.o,t):(Na||(Na=new Bt((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[Fa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){pa(t,null,e,void 0)}(wa(ot(Ua,{onload:Fa})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=k(t.m,t)),t(e,n,r,i,o,a)}Aa.prototype.R=function(){return this.b},Aa.prototype.o=function(t,e,n,r,i,o){if(lr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new Xr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new $o(this.f);if(o){a.g=Math.max(0,o);var c=setTimeout((function(){a.dispatchEvent("timeout")}),o)}sn(a,"complete",(function(){c&&clearTimeout(c);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Go(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),un(a,"ready",(function(){c&&clearTimeout(c),pe(this)})),un(a,"timeout",(function(){c&&clearTimeout(c),pe(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.O=n,t.I=!1,t.c=!0,t.a=t.B?t.B.a():Eo.a(),t.w=function(t){return t.c||(t.c=t.b())}(t.B?t.B:Eo),t.a.onreadystatechange=k(t.Lb,t);try{Go(t.b,la(t,"Opening Xhr")),t.J=!0,t.a.open(n,String(e),!0),t.J=!1}catch(a){return Go(t.b,la(t,"Error opening Xhr: "+a.message)),void ra(t,a)}e=r||"";var o=new pn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(y(t)||u(t))F(t,e,void 0);else for(var n=dn(t),r=fn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=na,n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:u(t)?t.charAt(e):t[e]}(o.X()),r=s.FormData&&e instanceof s.FormData,!H(ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{sa(t),0<t.g&&(t.v=function(t){return _e&&Oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Go(t.b,la(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=k(t.Ia,t)):t.o=ln(t.Ia,t.g,t)),Go(t.b,la(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){Go(t.b,la(t,"Send error: "+a.message)),ra(t,a)}}(a,t,n,r,i)};var Ua=new $(et,"https://apis.google.com/js/client.js?onload=%{onload}"),Fa="__fcb"+Math.floor(1e6*Math.random()).toString();function Va(t){if(!u(t=t.email)||!ar.test(t))throw new Xr("invalid-email")}function qa(t){"email"in t&&Va(t)}function Ha(t){if(!t[Oa])throw new Xr("internal-error")}function za(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Xr("internal-error")}else{if(!t.sessionInfo)throw new Xr("missing-verification-id");if(!t.code)throw new Xr("missing-verification-code")}}Aa.prototype.m=function(t,e,n,r,i){var o=this;Na.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Aa.prototype.ob=function(){return Is(this,ys,{})},Aa.prototype.rb=function(t,e){return Is(this,ps,{idToken:t,email:e})},Aa.prototype.sb=function(t,e){return Is(this,vs,{idToken:t,password:e})};var Ba={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ga(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Xr("internal-error")}function Wa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Un(t=new Dn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function Ka(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ao(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ao(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ao(t)):t.errorMessage&&(e=Ts(t.errorMessage)),e)throw e;if(!t[Oa])throw new Xr("internal-error")}function Qa(t,e){return e.returnIdpCredential=!0,Is(t,gs,e)}function Ya(t,e){return e.returnIdpCredential=!0,Is(t,_s,e)}function Ja(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Is(t,ms,e)}function Xa(t){if(!t.oobCode)throw new Xr("invalid-action-code")}(t=Aa.prototype).tb=function(t,e){var n={idToken:t},r=[];return K(Ba,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Is(this,ps,n)},t.kb=function(t,e){return X(t={requestType:"PASSWORD_RESET",email:t},e),Is(this,cs,t)},t.lb=function(t,e){return X(t={requestType:"EMAIL_SIGNIN",email:t},e),Is(this,ss,t)},t.jb=function(t,e){return X(t={requestType:"VERIFY_EMAIL",idToken:t},e),Is(this,us,t)},t.Wa=function(t){return Is(this,Cs,t)},t.ab=function(t,e){return Is(this,fs,{oobCode:t,newPassword:e})},t.Ma=function(t){return Is(this,Za,{oobCode:t})},t.Ya=function(t){return Is(this,$a,{oobCode:t})};var $a={endpoint:"setAccountInfo",D:Xa,fa:"email",F:!0},Za={endpoint:"resetPassword",D:Xa,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Xr("internal-error")},F:!0},ts={endpoint:"signupNewUser",D:function(t){if(Va(t),!t.password)throw new Xr("weak-password")},K:Ha,T:!0,F:!0},es={endpoint:"createAuthUri",F:!0},ns={endpoint:"deleteAccount",V:["idToken"]},rs={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!v(t.deleteProvider))throw new Xr("internal-error")}},is={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Va,K:Ha,T:!0,F:!0},os={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Va,K:Ha,T:!0},as={endpoint:"getAccountInfo"},ss={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Xr("internal-error");Va(t)},fa:"email",F:!0},us={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Xr("internal-error")},fa:"email",F:!0},cs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Xr("internal-error");Va(t)},fa:"email",F:!0},ls={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},hs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new Xr("internal-error")}},fs={endpoint:"resetPassword",D:Xa,fa:"email",F:!0},ds={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ps={endpoint:"setAccountInfo",V:["idToken"],D:qa,T:!0},vs={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(qa(t),!t.password)throw new Xr("weak-password")},K:Ha,T:!0},ys={endpoint:"signupNewUser",K:Ha,T:!0,F:!0},gs={endpoint:"verifyAssertion",D:Ga,Ra:Wa,K:Ka,T:!0,F:!0},ms={endpoint:"verifyAssertion",D:Ga,Ra:Wa,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Xr("user-not-found");if(t.errorMessage)throw Ts(t.errorMessage);if(!t[Oa])throw new Xr("internal-error")},T:!0,F:!0},_s={endpoint:"verifyAssertion",D:function(t){if(Ga(t),!t.idToken)throw new Xr("internal-error")},Ra:Wa,K:Ka,T:!0},bs={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Xr("invalid-custom-token")},K:Ha,T:!0,F:!0},ws={endpoint:"verifyPassword",D:function(t){if(Va(t),!t.password)throw new Xr("wrong-password")},K:Ha,T:!0,F:!0},Cs={endpoint:"verifyPhoneNumber",D:za,K:Ha,F:!0},ks={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Xr("internal-error");za(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ao(t);Ha(t)}},Es={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:za,K:Ha,F:!0};function Is(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.V))return $t(new Xr("internal-error"));var r,i=e.Kb||"POST";return Xt(n).then(e.D).then((function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o){var a=En(t.h+e);Cn(a,"key",t.c),o&&Cn(a,"cb",I().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Cn(a,u,r[u]);return new Bt((function(e,o){ja(t,a.toString(),(function(t){t?t.error?o(Ss(t,i||{})):e(t):o(new Xr("network-request-failed"))}),n,s?void 0:Qn(Ir(r)),t.a,t.i.get())}))}(t,e.endpoint,i,n,e.Yb,e.wb||!1)})).then((function(t){return r=t,e.Ra?e.Ra(n,r):r})).then(e.K).then((function(){if(!e.fa)return r;if(!(e.fa in r))throw new Xr("internal-error");return r[e.fa]}))}function Ts(t){return Ss({error:{errors:[{message:t}],code:400,message:t}})}function Ss(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Xr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",X(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Xr(r[i],e);return!e&&t&&(e=Er(t)),new Xr("internal-error",e)}function As(t){this.b=t,this.a=null,this.gb=function(t){return(xs||(xs=new Bt((function(t,e){function n(){Nr(),mr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Nr(),e(Error("Network Error"))},timeout:Os.get()})}if(mr("gapi.iframes.Iframe"))t();else if(mr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){mr("gapi.load")?n():e(Error("Network Error"))},Xt(wa(r=ot(Ns,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw xs=null,t})))).then((function(){return new Bt((function(e,n){mr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Rs.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Ns=new $(et,"https://apis.google.com/js/api.js?onload=%{onload}"),Os=new Or(3e4,6e4),Rs=new Or(5e3,15e3),xs=null;function Ps(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=In(this.i,"/__/auth/iframe"),Cn(this.a,"apiKey",this.g),Cn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ds(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ls(t){try{return i.a.app(t).auth().Ca()}catch(e){return[]}}function Ms(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function js(t){var e=tr();return function(t){return Is(t,ls,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=En(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=En(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:or.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new To(tr())}))}function Us(t){return t.l?t.l:(t.l=sr().then((function(){if(!t.o){var e=t.c,n=t.h,r=Ls(t.b),i=new Ps(t.u,t.f,t.b);i.f=e,i.b=n,i.c=W(r||[]),t.o=i.toString()}t.i=new As(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.gb.then((function(){t.a.register("authEvent",e,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Co(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Xt(n)}return n.status="ERROR",Xt(n)}))}(t)})),t.l)}function Fs(t){return t.m||(t.v=t.c?yr(t.c,Ls(t.b)):null,t.m=new Aa(t.f,Ai(t.h),t.v)),t.m}function Vs(t,e,n,r,i,o,a,s,u,c,l){return(t=new Ds(t,e,n,r,i)).l=o,t.g=a,t.i=s,t.b=Y(u||null),t.f=c,t.nb(l).toString()}function qs(t){if(this.a=t||i.a.INTERNAL.reactNative&&i.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Xr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Hs(t){this.b=t,this.a={},this.f=k(this.c,this)}Ps.prototype.toString=function(){return this.f?Cn(this.a,"v",this.f):jn(this.a.a,"v"),this.b?Cn(this.a,"eid",this.b):jn(this.a.a,"eid"),this.c.length?Cn(this.a,"fw",this.c.join(",")):jn(this.a.a,"fw"),this.a.toString()},Ds.prototype.nb=function(t){return this.h=t,this},Ds.prototype.toString=function(){var t=In(this.o,"/__/auth/handler");if(Cn(t,"apiKey",this.m),Cn(t,"appName",this.c),Cn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=i.a.app(this.c).auth().ha()}catch(u){n=null}for(var r in e.bb=n,Cn(t,"providerId",this.a.providerId),n=Ir((e=this.a).zb))n[r]=n[r].toString();r=e.Fc,n=Y(n);for(var o=0;o<r.length;o++){var a=r[o];a in n&&delete n[a]}e.eb&&e.bb&&!n[e.eb]&&(n[e.eb]=e.bb),Q(n)||Cn(t,"customParameters",Er(n))}if("function"==typeof this.a.Hb&&(e=this.a.Hb()).length&&Cn(t,"scopes",e.join(",")),this.l?Cn(t,"redirectUrl",this.l):jn(t.a,"redirectUrl"),this.g?Cn(t,"eventId",this.g):jn(t.a,"eventId"),this.i?Cn(t,"v",this.i):jn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&Cn(t,s,this.b[s]);return this.h?Cn(t,"tid",this.h):jn(t.a,"tid"),this.f?Cn(t,"eid",this.f):jn(t.a,"eid"),(s=Ls(this.c)).length&&Cn(t,"fw",s.join(",")),t.toString()},(t=Ms.prototype).Fb=function(t,e,n){var r=new Xr("popup-closed-by-user"),i=new Xr("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){(function(t){var e={type:"webStorageSupport"};return Us(t).then((function(){return function(t,e){return t.gb.then((function(){return new Bt((function(n){t.a.send(e.type,e,n,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&rr(t),e(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(t){return new Bt((function(e){return function n(){hn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return hn(n).then((function(){e(r)}))}))},t.Ob=function(){var t=gr();return!kr(t)&&!Ar(t)},t.Jb=function(){return!1},t.Db=function(t,e,n,r,i,o,a,s){if(!t)return $t(new Xr("popup-blocked"));if(a&&!kr())return this.ia().s((function(e){rr(t),i(e)})),r(),Xt();this.a||(this.a=js(Fs(this)));var u=this;return this.a.then((function(){var e=u.ia().s((function(e){throw rr(t),i(e),e}));return r(),e})).then((function(){bo(n),a||er(Vs(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Eb=function(t,e,n,r){this.a||(this.a=js(Fs(this)));var i=this;return this.a.then((function(){bo(e),er(Vs(i.u,i.f,i.b,t,e,tr(),n,i.c,void 0,i.h,r))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ia=function(){var t=this;return Us(this).then((function(){return t.i.gb})).s((function(){throw t.a=null,new Xr("network-request-failed")}))},t.Rb=function(){return!0},t.Aa=function(t){this.g.push(t)},t.Na=function(t){B(this.g,(function(e){return e==t}))},(t=qs.prototype).get=function(t){return Xt(this.a.getItem(t)).then((function(t){return t&&Tr(t)}))},t.set=function(t,e){return Xt(this.a.setItem(t,Er(e)))},t.S=function(t){return Xt(this.a.removeItem(t))},t.$=function(){},t.ea=function(){};var zs,Bs=[];function Gs(t,e,n){Q(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ws(t){this.a=t}function Ks(t){this.c=t,this.b=!1,this.a=[]}function Qs(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return $t(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Bt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Ys(t,c),e})).s((function(e){throw Ys(t,c),e}))}function Ys(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),B(t.a,(function(t){return t==e}))}}function Js(){if(!$s())throw new Xr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;lr()&&self?(this.l=function(){var t=lr()?self:null;if(F(Bs,(function(n){n.b==t&&(e=n)})),!e){var e=new Hs(t);Bs.push(e)}return e}(),Gs(this.l,"keyChanged",(function(e,n){return ru(t).then((function(e){return 0<e.length&&F(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Gs(this.l,"ping",(function(){return Xt(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Xt().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Xt(null)}().then((function(e){(t.h=e)&&(t.g=new Ks(new Ws(e)),Qs(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Xs(t){return t.m||(t.m=function t(e){return new Bt((function(n,r){var i=e.u.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new Bt((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).s((function(t){r(t)}))}}))}(t)),t.m}function $s(){try{return!!s.indexedDB}catch(ge){return!1}}function Zs(t){return t.objectStore("firebaseLocalStorage")}function tu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function eu(t){return new Bt((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function nu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Qs(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Xt()}function ru(t){return Xs(t).then((function(t){var e=Zs(tu(t,!1));return e.getAll?eu(e.getAll()):new Bt((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function iu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ou(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Xt().then((function(){if($s()){var t=Sr(),r="__sak"+t;return zs||(zs=new Js),(n=zs).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.$((function(t){F(e.a,(function(e){e(t)}))})),t}))}function au(){this.a={},this.type="inMemory"}function su(){if(!function(){var t="Node"==hr();if(!(t=uu()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==hr())throw new Xr("internal-error","The LocalStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=uu()||i.a.INTERNAL.node.localStorage,this.type="localStorage"}function uu(){try{var t=s.localStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function cu(){this.type="nullStorage"}function lu(){if(!function(){var t="Node"==hr();if(!(t=hu()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==hr())throw new Xr("internal-error","The SessionStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=hu()||i.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function hu(){try{var t=s.sessionStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function fu(){var t={};t.Browser=vu,t.Node=yu,t.ReactNative=gu,t.Worker=mu,this.a=t[hr()]}Hs.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];F(r,(function(e){i.push(Xt().then((function(){return e(t.origin,t.data.data)})))})),te(i).then((function(r){var i=[];F(r,(function(t){i.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})})),F(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Ws.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ks.prototype.close=function(){for(;0<this.a.length;)Ys(this,this.a[0]);this.b=!0},(t=Js.prototype).set=function(t,e){var n,r=!1,i=this;return Xs(this).then((function(e){return eu((e=Zs(tu(n=e,!0))).get(t))})).then((function(o){var a=Zs(tu(n,!0));return o?(o.value=e,eu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,eu(a.add(o)))})).then((function(){return i.c[t]=e,nu(i,t)})).ka((function(){r&&i.b--}))},t.get=function(t){return Xs(this).then((function(e){return eu(Zs(tu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.S=function(t){var e=!1,n=this;return Xs(this).then((function(r){return e=!0,n.b++,eu(Zs(tu(r,!0)).delete(t))})).then((function(){return delete n.c[t],nu(n,t)})).ka((function(){e&&n.b--}))},t.$=function(t){0==this.a.length&&function(t){iu(t),function e(){t.f=setTimeout((function(){t.i=ru(t).then((function(e){0<e.length&&F(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ea=function(t){B(this.a,(function(e){return e==t})),0==this.a.length&&iu(this)},(t=ou.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.S=function(t){return this.b.then((function(e){return e.S(t)}))},t.$=function(t){this.a.push(t)},t.ea=function(t){B(this.a,(function(e){return e==t}))},(t=au.prototype).get=function(t){return Xt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Xt()},t.S=function(t){return delete this.a[t],Xt()},t.$=function(){},t.ea=function(){},(t=su.prototype).get=function(t){var e=this;return Xt().then((function(){return Tr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Xt().then((function(){var r=Er(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return Xt().then((function(){e.a.removeItem(t)}))},t.$=function(t){s.window&&Ke(s.window,"storage",t)},t.ea=function(t){s.window&&Je(s.window,"storage",t)},(t=cu.prototype).get=function(){return Xt(null)},t.set=function(){return Xt()},t.S=function(){return Xt()},t.$=function(){},t.ea=function(){},(t=lu.prototype).get=function(t){var e=this;return Xt().then((function(){return Tr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Xt().then((function(){var r=Er(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return Xt().then((function(){e.a.removeItem(t)}))},t.$=function(){},t.ea=function(){};var du,pu,vu={C:su,Ta:lu},yu={C:su,Ta:lu},gu={C:qs,Ta:cu},mu={C:su,Ta:cu},_u={ad:"local",NONE:"none",cd:"session"};function bu(){var t=!(Ar(gr())||!cr()),e=kr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},du||(du=new fu),t=du;try{this.g=!Zn()&&Pr()||!s.indexedDB?new t.a.C:new ou(lr()?new au:new t.a.C)}catch(r){this.g=new au,this.h=!0}try{this.i=new t.a.Ta}catch(r){this.i=new au}this.u=new au,this.f=k(this.Pb,this),this.b={}}function wu(){return pu||(pu=new bu),pu}function Cu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function ku(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Eu(t,e,n){return n=ku(e,n),"local"==e.C&&(t.b[n]=null),Cu(t,e.C).S(n)}function Iu(t){t.c&&(clearInterval(t.c),t.c=null)}function Tu(t){this.a=t,this.b=wu()}(t=bu.prototype).get=function(t,e){return Cu(this,t.C).get(ku(t,e))},t.set=function(t,e,n){var r=ku(t,n),i=this,o=Cu(this,t.C);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.C&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=ku(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),Q(this.a)&&(Cu(this,"local").$(this.f),this.h||(Zn()||!Pr())&&s.indexedDB||!this.l||function(t){Iu(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Me({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ku(t,e),this.a[t]&&(B(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),Q(this.a)&&(Cu(this,"local").ea(this.f),Iu(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Cu(this,"local").ea(this.f):Iu(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.$a(e))},_e&&Ae&&10==Ae&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else F(t,k(this.$a,this))},t.$a=function(t){this.a[t]&&F(this.a[t],(function(t){t()}))};var Su,Au={name:"authEvent",C:"local"};function Nu(){this.a=wu()}function Ou(t,e){this.b=Ru,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0!==Su||(Su=s.Int32Array?new Int32Array(Uu):Uu),this.reset()}T(Ou,(function(){this.b=-1}));for(var Ru=64,xu=Ru-1,Pu=[],Du=0;Du<xu;Du++)Pu[Du]=0;var Lu=G(128,Pu);function Mu(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Su[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function ju(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(u(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Mu(t),i=0);else{if(!y(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Mu(t),i=0)}}t.c=i,t.g+=n}Ou.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):W(this.h)};var Uu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Fu(){Ou.call(this,8,Vu)}T(Fu,Ou);var Vu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function qu(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new Nu,this.g=new Tu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Hu(t){return new Xr("invalid-cordova-configuration",t)}function zu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Bu(t){return t.f||(t.f=t.ia().then((function(){return new Bt((function(e){t.Aa((function n(r){return e(r),t.Na(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Gu(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Hi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Tr(kn(o=En(i),"firebaseError")||null))?$r(o):null)?new wo(r.c,r.b,null,null,o,null,r.R()):new wo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}zu(t,i)}))}var n=new wo("unknown",null,null,null,new Xr("no-auth-event")),r=!1,i=hn(500).then((function(){return Gu(t).then((function(){r||zu(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(mr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Io||(Io=new ko),function(t){var e=Io;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=mr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Gu(t){var e=null;return function(t){return t.b.get(Au,t.a).then((function(t){return Co(t)}))}(t.g).then((function(n){return e=n,Eu((n=t.g).b,Au,n.a)})).then((function(){return e}))}function Wu(t){this.a=t,this.b=wu()}(t=qu.prototype).ia=function(){return this.Da?this.Da:this.Da=(ur(void 0)?sr().then((function(){return new Bt((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):$t(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof mr("universalLinks.subscribe",s))throw Hu("cordova-universal-links-plugin-fix is not installed");if(void 0===mr("BuildInfo.packageName",s))throw Hu("cordova-plugin-buildinfo is not installed");if("function"!=typeof mr("cordova.plugins.browsertab.openUrl",s))throw Hu("cordova-plugin-browsertab is not installed");if("function"!=typeof mr("cordova.InAppBrowser.open",s))throw Hu("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Xr("cordova-not-ready")}))},t.Fb=function(t,e){return e(new Xr("operation-not-supported-in-this-environment")),Xt()},t.Db=function(){return $t(new Xr("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(t,e,n,r){if(this.c)return $t(new Xr("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Xt().then((function(){return bo(e),Bu(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new wo(e,r,null,o,new Xr("no-auth-event"),null,i),u=mr("BuildInfo.packageName",s);if("string"!=typeof u)throw new Xr("invalid-cordova-configuration");var c=mr("BuildInfo.displayName",s),l={};if(gr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!gr().toLowerCase().match(/android/))return $t(new Xr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new Fu;ju(e,t),t=[];var n=8*e.g;ju(e,Lu,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Mu(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return V(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=Vs(t.u,t.i,t.l,e,n,null,r,t.m,l,t.o,i);return t.ia().then((function(){var e=t.h;return t.v.a.set(Au,a.A(),e)})).then((function(){var e=mr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new Xr("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=mr("cordova.plugins.browsertab.openUrl",s)))throw new Xr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=mr("cordova.InAppBrowser.open",s)))throw new Xr("invalid-cordova-configuration");e=gr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Bt((function(t,e){u=function(){var e=mr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),l=function(){Rr()&&c()},o.addEventListener("resume",c=function(){a||(a=hn(2e3).then((function(){e(new Xr("redirect-cancelled-by-user"))})))},!1),gr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(t){return Gu(i).then((function(){throw t}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Na(u),i.c=null}))},t.Aa=function(t){this.b.push(t),Bu(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new wo("unknown",null,null,null,new Xr("no-auth-event")),t(e))}))},t.Na=function(t){B(this.b,(function(e){return e==t}))};var Ku={name:"pendingRedirect",C:"session"};function Qu(t){return Eu(t.b,Ku,t.a)}function Yu(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=k(this.o,this),this.b=new cc,this.w=new pc,this.g=new Wu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Ju(this.B,this.u,this.m,Ti)}function Ju(t,e,n,r){var o=i.a.SDK_VERSION||null;return ur()?new qu(t,e,n,o,r):new Ms(t,e,n,o,r)}function Xu(t){t.f||(t.f=!0,t.a.Aa(t.l));var e=t.a;return t.a.ia().s((function(n){throw t.a==e&&t.reset(),n}))}function $u(t){t.a.Ob()&&Xu(t).s((function(e){var n=new wo("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));ic(e)&&t.o(n)})),t.a.Jb()||lc(t.b)}function Zu(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ku,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Qu(t.g).then((function(){Xu(t).s((function(e){var n=new wo("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));ic(e)&&t.o(n)}))})):$u(t)})).s((function(){$u(t)}))}function tc(t,e){B(t.h,(function(t){return t==e}))}Yu.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=Ju(this.B,this.u,this.m),this.i={}},Yu.prototype.o=function(t){if(!t)throw new Xr("invalid-auth-event");if(6e5<=I()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=I())),e=!0;break}}return lc(this.b),e};var ec=new Or(2e3,1e4),nc=new Or(3e4,6e4);function rc(t,e,n,r,i,o,a){return t.a.Db(e,n,r,(function(){t.f||(t.f=!0,t.a.Aa(t.l))}),(function(){t.reset()}),i,o,a)}function ic(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function oc(t,e,n,r,i){var o;return function(t){return t.b.set(Ku,"pending",t.a)}(t.g).then((function(){return t.a.Eb(e,n,r,i).s((function(e){if(ic(e))throw new Xr("operation-not-supported-in-this-environment");return o=e,Qu(t.g).then((function(){throw o}))})).then((function(){return t.a.Rb()?new Bt((function(){})):Qu(t.g).then((function(){return t.oa()})).then((function(){})).s((function(){}))}))}))}function ac(t,e,n,r,i){return t.a.Fb(r,(function(t){e.ja(n,null,t,i)}),ec.get())}Yu.prototype.oa=function(){return this.b.oa()};var sc={};function uc(t,e,n){var r=e+":"+n;return sc[r]||(sc[r]=new Yu(t,e,n)),sc[r]}function cc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function lc(t){t.g||(t.g=!0,dc(t,!1,null,null))}function hc(t){t.g&&!t.i&&dc(t,!1,null,null)}function fc(t,e){if(t.b=function(){return Xt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function dc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return $t(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):fc(t,n):fc(t,{user:null}),t.f=[],t.c=[]}function pc(){}function vc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function yc(t,e){this.a=e,Ur(this,"verificationId",t)}function gc(t,e,n,r){return new go(t).Wa(e,n).then((function(t){return new yc(t,r)}))}function mc(t){var e=Ii(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Xr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Fr(this,{token:t,expirationTime:xr(1e3*e.exp),authTime:xr(1e3*e.auth_time),issuedAtTime:xr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function _c(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bc(t){this.f=t,this.b=this.a=null,this.c=0}function wc(t,e){var n=e[Oa],r=e.refreshToken;e=Cc(e.expiresIn),t.b=n,t.c=e,t.a=r}function Cc(t){return I()+1e3*parseInt(t,10)}function kc(t,e){this.a=t||null,this.b=e||null,Fr(this,{lastSignInTime:xr(e||null),creationTime:xr(t||null)})}function Ec(t,e,n,r,i,o){Fr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Ic(t,e){for(var n in Le.call(this,t),e)this[n]=e[n]}function Tc(t,e,n){this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=i.a.SDK_VERSION?yr(i.a.SDK_VERSION):null,this.a=new Aa(this.l,Ai(Ti),t),this.b=new bc(this.a),Pc(this,e[Oa]),wc(this.b,e),Ur(this,"refreshToken",this.b.a),Mc(this,n||{}),an.call(this),this.J=!1,this.o&&br()&&(this.i=uc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new _c((function(){return t.G(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-I()-3e5;return 0<e?e:0}))}(this),this.W=k(this.Ja,this);var r=this;this.ga=null,this.xa=function(t){r.ua(t.g)},this.Z=null,this.P=[],this.wa=function(t){Ac(r,t.c)},this.Y=null}function Sc(t,e){t.Z&&Je(t.Z,"languageCodeChanged",t.xa),(t.Z=e)&&Ke(e,"languageCodeChanged",t.xa)}function Ac(t,e){t.P=e,Ma(t.a,i.a.SDK_VERSION?yr(i.a.SDK_VERSION,t.P):null)}function Nc(t,e){t.Y&&Je(t.Y,"frameworkChanged",t.wa),(t.Y=e)&&Ke(e,"frameworkChanged",t.wa)}function Oc(t){try{return i.a.app(t.m).auth()}catch(e){throw new Xr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Rc(t){t.B||t.w.b||(t.w.start(),Je(t,"tokenChanged",t.W),Ke(t,"tokenChanged",t.W))}function xc(t){Je(t,"tokenChanged",t.W),t.w.stop()}function Pc(t,e){t.ma=e,Ur(t,"_lat",e)}function Dc(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return te(e).then((function(){return t}))}function Lc(t){t.i&&!t.J&&(t.J=!0,Zu(t.i,t))}function Mc(t,e){Fr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new kc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function jc(){}function Uc(t){return Xt().then((function(){if(t.B)throw new Xr("app-deleted")}))}function Fc(t){return V(t.providerData,(function(t){return t.providerId}))}function Vc(t,e){e&&(qc(t,e.providerId),t.providerData.push(e))}function qc(t,e){B(t.providerData,(function(t){return t.providerId==e}))}function Hc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ur(t,e,n)}function zc(t,e){t!=e&&(Fr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Ur(t,"metadata",e.metadata?function(t){return new kc(t.a,t.b)}(e.metadata):new kc),F(e.providerData,(function(e){Vc(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Ur(t,"refreshToken",t.b.a))}function Bc(t){return t.G().then((function(e){var n=t.isAnonymous;return function(t,e){return Is(t.a,as,{idToken:e}).then(k(t.zc,t))}(t,e).then((function(){return n||Hc(t,"isAnonymous",!1),e}))}))}function Gc(t,e){e[Oa]&&t.ma!=e[Oa]&&(wc(t.b,e),t.dispatchEvent(new Ic("tokenChanged")),Pc(t,e[Oa]),Hc(t,"refreshToken",t.b.a))}function Wc(t,e){return Bc(t).then((function(){if(H(Fc(t),e))return Dc(t).then((function(){throw new Xr("provider-already-linked")}))}))}function Kc(t,e,n){return Vr({user:t,credential:_o(e),additionalUserInfo:e=Pi(e),operationType:n})}function Qc(t,e){return Gc(t,e),t.reload().then((function(){return t}))}function Yc(t,e,n,r,o){if(!br())return $t(new Xr("operation-not-supported-in-this-environment"));if(t.h&&!o)return $t(t.h);var a=xi(n.providerId),s=Sr(t.uid+":::"),u=null;(!kr()||cr())&&t.o&&n.isOAuthProvider&&(u=Vs(t.o,t.l,t.m,e,n,null,s,i.a.SDK_VERSION||null,null,null,t.tenantId));var c=ir(u,a&&a.sa,a&&a.ra);return r=r().then((function(){if(Xc(t),!o)return t.G().then((function(){}))})).then((function(){return rc(t.i,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Bt((function(n,r){t.ja(e,null,new Xr("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=s,t.c=ac(t.i,t,e,c,s)}))})).then((function(t){return c&&rr(c),t?Vr(t):null})).s((function(t){throw c&&rr(c),t})),$c(t,r,o)}function Jc(t,e,n,r,i){if(!br())return $t(new Xr("operation-not-supported-in-this-environment"));if(t.h&&!i)return $t(t.h);var o=null,a=Sr(t.uid+":::");return r=r().then((function(){if(Xc(t),!i)return t.G().then((function(){}))})).then((function(){return t.ca=a,Dc(t)})).then((function(e){return t.da&&(e=(e=t.da).b.set(el,t.A(),e.a)),e})).then((function(){return oc(t.i,e,n,a,t.tenantId)})).s((function(e){if(o=e,t.da)return nl(t.da);throw o})).then((function(){if(o)throw o})),$c(t,r,i)}function Xc(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new Xr("internal-error");throw new Xr("auth-domain-config-required")}}function $c(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),$t(t.h)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Ic("userInvalidated")),t.h=e),e}))}(t,e,n);return t.I.push(r),r.ka((function(){z(t.I,r)})),r}function Zc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Oa]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-I())/1e3;var r=new Tc(e,n,t);return t.providerData&&F(t.providerData,(function(t){t&&Vc(r,Vr(t))})),t.redirectEventId&&(r.ca=t.redirectEventId),r}function tl(t){this.a=t,this.b=wu()}cc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},cc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(dc(this,!0,null,t.a),Xt()):e.Ba(n,r)?function(t,e,n){n=n.Ba(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.R(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){dc(t,s,e,null)})).s((function(e){dc(t,s,null,e)}))}(this,t,e):$t(new Xr("invalid-auth-event")):(dc(this,!1,null,null),Xt())}else $t(new Xr("invalid-auth-event"))},cc.prototype.oa=function(){var t=this;return new Bt((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Xr("timeout");t.a&&t.a.cancel(),t.a=hn(nc.get()).then((function(){t.b||(t.g=!0,dc(t,!0,null,e))}))}(t))}))},pc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),Xt()):e.Ba(n,r)?function(t,e){var n=t.b,r=t.c;e.Ba(r,n)(t.g,t.f,t.R(),t.i).then((function(t){e.ja(r,t,null,n)})).s((function(t){e.ja(r,null,t,n)}))}(t,e):$t(new Xr("invalid-auth-event"))}else $t(new Xr("invalid-auth-event"))},yc.prototype.confirm=function(t){return t=mo(this.verificationId,t),this.a(t)},_c.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=hn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=s.document,e=null;return Rr()||!t?Xt():new Bt((function(n){e=function(){Rr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},_c.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},bc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},bc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?$t(new Xr("user-token-expired")):t||!this.b||I()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Bt((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ja(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Ss(t)):t.access_token&&t.refresh_token?n(t):r(new Xr("internal-error")):r(new Xr("network-request-failed"))}),"POST",Mn(e).toString(),t.g,t.u.get()):r(new Xr("internal-error"))}))}(t.f,e).then((function(e){return t.b=e.access_token,t.c=Cc(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Xt(null):Xt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},kc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(Ic,Le),T(Tc,an),Tc.prototype.ua=function(t){this.ga=t,La(this.a,t)},Tc.prototype.ha=function(){return this.ga},Tc.prototype.Ca=function(){return W(this.P)},Tc.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Ur(Tc.prototype,"providerId","firebase"),(t=Tc.prototype).reload=function(){var t=this;return $c(this,Uc(this).then((function(){return Bc(t).then((function(){return Dc(t)})).then(jc)})))},t.dc=function(t){return this.G(t).then((function(t){return new mc(t)}))},t.G=function(t){var e=this;return $c(this,Uc(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new Xr("internal-error");return t.accessToken!=e.ma&&(Pc(e,t.accessToken),e.dispatchEvent(new Ic("tokenChanged"))),Hc(e,"refreshToken",t.refreshToken),t.accessToken})))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new Xr("internal-error");Mc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?V(t,(function(t){return new Ec(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Vc(this,e[n]);Hc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(t){return Mr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(t)},t.hb=function(t){var e=this,n=null;return $c(this,t.f(this.a,this.uid).then((function(t){return Gc(e,t),n=Kc(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.rc=function(t){return Mr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(t)},t.fb=function(t){var e=this,n=null;return $c(this,Wc(this,t.providerId).then((function(){return e.G()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Kc(e,t,"link"),Qc(e,t)})).then((function(){return n})))},t.sc=function(t,e){var n=this;return $c(this,Wc(this,"phone").then((function(){return gc(Oc(n),t,e,k(n.fb,n))})))},t.Bc=function(t,e){var n=this;return $c(this,Xt().then((function(){return gc(Oc(n),t,e,k(n.hb,n))})),!0)},t.rb=function(t){var e=this;return $c(this,this.G().then((function(n){return e.a.rb(n,t)})).then((function(t){return Gc(e,t),e.reload()})))},t.Sc=function(t){var e=this;return $c(this,this.G().then((function(n){return t.b(e.a,n)})).then((function(t){return Gc(e,t),e.reload()})))},t.sb=function(t){var e=this;return $c(this,this.G().then((function(n){return e.a.sb(n,t)})).then((function(t){return Gc(e,t),e.reload()})))},t.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Uc(this);var e=this;return $c(this,this.G().then((function(n){return e.a.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Gc(e,t),Hc(e,"displayName",t.displayName||null),Hc(e,"photoURL",t.photoUrl||null),F(e.providerData,(function(t){"password"===t.providerId&&(Ur(t,"displayName",e.displayName),Ur(t,"photoURL",e.photoURL))})),Dc(e)})).then(jc))},t.Qc=function(t){var e=this;return $c(this,Bc(this).then((function(n){return H(Fc(e),t)?function(t,e,n){return Is(t,rs,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return F(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),F(Fc(e),(function(t){n[t]||qc(e,t)})),n[go.PROVIDER_ID]||Ur(e,"phoneNumber",null),Dc(e)})):Dc(e).then((function(){throw new Xr("no-such-provider")}))})))},t.delete=function(){var t=this;return $c(this,this.G().then((function(e){return Is(t.a,ns,{idToken:e})})).then((function(){t.dispatchEvent(new Ic("userDeleted"))}))).then((function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Sc(t,null),Nc(t,null),t.I=[],t.B=!0,xc(t),Ur(t,"refreshToken",null),t.i&&tc(t.i,t)}))},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},t.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?k(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?k(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?k(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?k(this.Cb,this):null},t.tc=function(t){var e=this;return Yc(this,"linkViaPopup",t,(function(){return Wc(e,t.providerId).then((function(){return Dc(e)}))}),!1)},t.Cc=function(t){return Yc(this,"reauthViaPopup",t,(function(){return Xt()}),!0)},t.uc=function(t){var e=this;return Jc(this,"linkViaRedirect",t,(function(){return Wc(e,t.providerId)}),!1)},t.Dc=function(t){return Jc(this,"reauthViaRedirect",t,(function(){return Xt()}),!0)},t.Bb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $c(this,this.G().then((function(n){return Ya(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Kc(i,t,"link"),Qc(i,t)})).then((function(){return o})))},t.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return $c(this,Xt().then((function(){return Bi(Ja(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Kc(i,t,"reauthenticate"),Gc(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.jb=function(t){var e=this,n=null;return $c(this,this.G().then((function(e){return n=e,void 0===t||Q(t)?{}:bi(new li(t))})).then((function(t){return e.a.jb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.toJSON=function(){return this.A()},t.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&X(t,this.metadata.A()),F(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),t};var el={name:"redirectUser",C:"session"};function nl(t){return Eu(t.b,el,t.a)}function rl(t){this.a=t,this.b=wu(),this.c=null,this.f=function(t){var e=al("local"),n=al("session"),r=al("none");return function(t,e,n){var r=ku(e,n),i=Cu(t,e.C);return t.get(e,n).then((function(o){var a=null;try{a=Tr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(ol,t.a).then((function(t){return t?al(t):e}))}))}))})).then((function(e){return t.c=e,il(t,e.C)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(al("local"),this.a,k(this.g,this))}function il(t,e){var n,r=[];for(n in _u)_u[n]!==e&&r.push(Eu(t.b,al(_u[n]),t.a));return r.push(Eu(t.b,ol,t.a)),function(t){return new Bt((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Zt(t[s],E(o,s),a);else e(i)}))}(r)}rl.prototype.g=function(){var t=this,e=al("local");ll(this,(function(){return Xt().then((function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null})).then((function(n){if(n)return il(t,"local").then((function(){t.c=e}))}))}))};var ol={name:"persistence",C:"session"};function al(t){return{name:"authUser",C:t}}function sl(t,e){return ll(t,(function(){return t.b.set(t.c,e.A(),t.a)}))}function ul(t){return ll(t,(function(){return Eu(t.b,t.c,t.a)}))}function cl(t,e){return ll(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Zc(t||{})}))}))}function ll(t,e){return t.f=t.f.then(e,e),t.f}function hl(t){if(this.l=!1,Ur(this,"settings",new vc),Ur(this,"app",t),!_l(this).options||!_l(this).options.apiKey)throw new Xr("invalid-api-key");t=i.a.SDK_VERSION?yr(i.a.SDK_VERSION):null,this.b=new Aa(_l(this).options&&_l(this).options.apiKey,Ai(Ti),t),this.O=[],this.m=[],this.J=[],this.Ub=i.a.INTERNAL.createSubscribe(k(this.oc,this)),this.W=void 0,this.Vb=i.a.INTERNAL.createSubscribe(k(this.pc,this)),gl(this,null),this.h=new rl(_l(this).options.apiKey+":"+_l(this).name),this.w=new tl(_l(this).options.apiKey+":"+_l(this).name),this.Y=kl(this,function(t){var e=_l(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(el,t.a).then((function(t){return t&&e&&(t.authDomain=e),Zc(t||{})}))}(t.w,_l(t).options.authDomain).then((function(e){return(t.B=e)&&(e.da=t.w),nl(t.w)}));return kl(t,e)}(t).then((function(){return cl(t.h,e)})).then((function(e){return e?(e.da=t.w,t.B&&(t.B.ca||null)==(e.ca||null)?e:e.reload().then((function(){return sl(t.h,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:ul(t.h)}))):null})).then((function(e){gl(t,e||null)}));return kl(t,n)}(this)),this.i=kl(this,function(t){return t.Y.then((function(){return vl(t)})).s((function(){})).then((function(){if(!t.l)return t.ma()})).s((function(){})).then((function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(al("local"),e.a,t.ma)}}))}(this)),this.ga=!1,this.ma=k(this.Nc,this),this.ub=k(this.aa,this),this.wa=k(this.bc,this),this.xa=k(this.mc,this),this.Ja=k(this.nc,this),this.a=null,function(t){var e=_l(t).options.authDomain,n=_l(t).options.apiKey;e&&br()&&(t.Tb=t.Y.then((function(){if(!t.l){if(t.a=uc(e,n,_l(t).name),Zu(t.a,t),bl(t)&&Lc(bl(t)),t.B){Lc(t.B);var r=t.B;r.ua(t.ha()),Sc(r,t),Ac(r=t.B,t.I),Nc(r,t),t.B=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=k(this.delete,this),this.INTERNAL.logFramework=k(this.vc,this),this.o=0,an.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.ua(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function fl(t){Le.call(this,"languageCodeChanged"),this.g=t}function dl(t){Le.call(this,"frameworkChanged"),this.c=t}function pl(t){return t.Tb||$t(new Xr("auth-domain-config-required"))}function vl(t){if(!br())return $t(new Xr("operation-not-supported-in-this-environment"));var e=pl(t).then((function(){return t.a.oa()})).then((function(t){return t?Vr(t):null}));return kl(t,e)}function yl(t,e){var n={};return n.apiKey=_l(t).options.apiKey,n.authDomain=_l(t).options.authDomain,n.appName=_l(t).name,t.Y.then((function(){return function(t,e,n,r){var i=new Tc(t,e);return n&&(i.da=n),r&&Ac(i,r),i.reload().then((function(){return i}))}(n,e,t.w,t.Ca())})).then((function(e){return bl(t)&&e.uid==bl(t).uid?(zc(bl(t),e),t.aa(e)):(gl(t,e),Lc(e),t.aa(e))})).then((function(){Cl(t)}))}function gl(t,e){bl(t)&&(function(t,e){B(t.O,(function(t){return t==e}))}(bl(t),t.ub),Je(bl(t),"tokenChanged",t.wa),Je(bl(t),"userDeleted",t.xa),Je(bl(t),"userInvalidated",t.Ja),xc(bl(t))),e&&(e.O.push(t.ub),Ke(e,"tokenChanged",t.wa),Ke(e,"userDeleted",t.xa),Ke(e,"userInvalidated",t.Ja),0<t.o&&Rc(e)),Ur(t,"currentUser",e),e&&(e.ua(t.ha()),Sc(e,t),Ac(e,t.I),Nc(e,t))}function ml(t,e){var n=null,r=null;return kl(t,e.then((function(e){return n=_o(e),r=Pi(e),yl(t,e)})).then((function(){return Vr({user:bl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function _l(t){return t.app}function bl(t){return t.currentUser}function wl(t){return bl(t)&&bl(t)._lat||null}function Cl(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](wl(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](wl(t))}}function kl(t,e){return t.O.push(e),e.ka((function(){z(t.O,e)})),e}function El(){}function Il(){this.a={},this.b=1e12}rl.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Xr("invalid-persistence-type"),n=new Xr("unsupported-persistence-type");t:{for(r in _u)if(_u[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(hr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(t),ll(this,(function(){return t!=n.c.C?n.b.get(n.c,n.a).then((function(r){return e=r,il(n,t)})).then((function(){if(n.c=al(t),e)return n.b.set(n.c,e,n.a)})):Xt()}))},T(hl,an),T(fl,Le),T(dl,Le),(t=hl.prototype).mb=function(t){return kl(this,t=this.h.mb(t))},t.ua=function(t){this.Z===t||this.l||(this.Z=t,La(this.b,this.Z),this.dispatchEvent(new fl(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var t=s.navigator;this.ua(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.I.push(t),Ma(this.b,i.a.SDK_VERSION?yr(i.a.SDK_VERSION,this.I):null),this.dispatchEvent(new dl(this.I))},t.Ca=function(){return W(this.I)},t.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:_l(this).options.apiKey,authDomain:_l(this).options.authDomain,appName:_l(this).name,currentUser:bl(this)&&bl(this).A()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?k(this.ac,this):null},t.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Qa(i.b,t).then((function(t){return o=_o(t),a=Pi(t),t}));return kl(this,t=i.Y.then((function(){return s})).then((function(t){return yl(i,t)})).then((function(){return Vr({user:bl(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},t.Lc=function(t){if(!br())return $t(new Xr("operation-not-supported-in-this-environment"));var e=this,n=xi(t.providerId),r=Sr(),o=null;(!kr()||cr())&&_l(this).options.authDomain&&t.isOAuthProvider&&(o=Vs(_l(this).options.authDomain,_l(this).options.apiKey,_l(this).name,"signInViaPopup",t,null,r,i.a.SDK_VERSION||null,null,null,this.R()));var a=ir(o,n&&n.sa,n&&n.ra);return kl(this,n=pl(this).then((function(n){return rc(n,a,"signInViaPopup",t,r,!!o,e.R())})).then((function(){return new Bt((function(t,n){e.ja("signInViaPopup",null,new Xr("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=r,e.c=ac(e.a,e,"signInViaPopup",a,r)}))})).then((function(t){return a&&rr(a),t?Vr(t):null})).s((function(t){throw a&&rr(a),t})))},t.Mc=function(t){if(!br())return $t(new Xr("operation-not-supported-in-this-environment"));var e=this;return kl(this,pl(this).then((function(){return function(t){return ll(t,(function(){return t.b.set(ol,t.c.C,t.a)}))}(e.h)})).then((function(){return oc(e.a,"signInViaRedirect",t,void 0,e.R())})))},t.oa=function(){var t=this;return vl(this).then((function(e){return t.a&&hc(t.a.b),e})).s((function(e){throw t.a&&hc(t.a.b),e}))},t.Rc=function(t){if(!t)return $t(new Xr("null-user"));if(this.P!=t.tenantId)return $t(new Xr("tenant-id-mismatch"));var e=this,n={};n.apiKey=_l(this).options.apiKey,n.authDomain=_l(this).options.authDomain,n.appName=_l(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[Oa]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-I())/1e3,e=new Tc(e,o),n&&(e.da=n),r&&Ac(e,r),zc(e,t),e}(t,n,e.w,e.Ca());return kl(this,this.i.then((function(){if(_l(e).options.apiKey!=t.l)return r.reload()})).then((function(){return bl(e)&&t.uid==bl(e).uid?(zc(bl(e),t),e.aa(t)):(gl(e,r),Lc(r),e.aa(r))})).then((function(){Cl(e)})))},t.pb=function(){var t=this;return kl(this,this.i.then((function(){return t.a&&hc(t.a.b),bl(t)?(gl(t,null),ul(t.h).then((function(){Cl(t)}))):Xt()})))},t.Nc=function(){var t=this;return cl(this.h,_l(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=bl(t)&&e){n=bl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return zc(bl(t),e),bl(t).G();(bl(t)||e)&&(gl(t,e),e&&(Lc(e),e.da=t.w),t.a&&Zu(t.a,t),Cl(t))}}))},t.aa=function(t){return sl(this.h,t)},t.bc=function(){Cl(this),this.aa(bl(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(bl(e))}))},t.pc=function(t){var e=this;!function(t,e){t.J.push(e),kl(t,t.i.then((function(){!t.l&&H(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(wl(t)))})))}(this,(function(){t.next(bl(e))}))},t.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){g(t)?t(bl(r)):g(t.next)&&t.next(bl(r))})),this.Ub(t,e,n)},t.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),g(t)?t(bl(r)):g(t.next)&&t.next(bl(r))})),this.Vb(t,e,n)},t.cc=function(t){var e=this;return kl(this,this.i.then((function(){return bl(e)?bl(e).G(t).then((function(t){return{accessToken:t}})):null})))},t.Hc=function(t){var e=this;return this.i.then((function(){return ml(e,Is(e.b,bs,{token:t}))})).then((function(t){var n=t.user;return Hc(n,"isAnonymous",!1),e.aa(n),t}))},t.Ic=function(t,e){var n=this;return this.i.then((function(){return ml(n,Is(n.b,ws,{email:t,password:e}))}))},t.Xb=function(t,e){var n=this;return this.i.then((function(){return ml(n,Is(n.b,ts,{email:t,password:e}))}))},t.Sa=function(t){var e=this;return this.i.then((function(){return ml(e,t.na(e.b))}))},t.Gc=function(t){return Mr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(t)},t.ob=function(){var t=this;return this.i.then((function(){var e=bl(t);if(e&&e.isAnonymous){var n=Vr({providerId:null,isNewUser:!1});return Vr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ml(t,t.b.ob()).then((function(e){var n=e.user;return Hc(n,"isAnonymous",!0),t.aa(n),e}))}))},t.getUid=function(){return bl(this)&&bl(this).uid||null},t.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&bl(this)&&Rc(bl(this))},t.Ec=function(t){var e=this;F(this.m,(function(n){n==t&&e.o--})),0>this.o&&(this.o=0),0==this.o&&bl(this)&&xc(bl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),kl(this,this.i.then((function(){e.l||H(e.m,t)&&t(wl(e))})))},t.removeAuthTokenListener=function(t){B(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(al("local"),t.a,this.ma),this.a&&(tc(this.a,this),hc(this.a.b)),Promise.resolve()},t.$b=function(t){return kl(this,function(t,e){return Is(t,es,{identifier:e,continueUri:wr()?tr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.qc=function(t){return!!fo(t)},t.lb=function(t,e){var n=this;return kl(this,Xt().then((function(){var t=new li(e);if(!t.c)throw new Xr("argument-error",di+" must be true when sending sign in link to email");return bi(t)})).then((function(e){return n.b.lb(t,e)})).then((function(){})))},t.Uc=function(t){return this.Ma(t).then((function(t){return t.data.email}))},t.ab=function(t,e){return kl(this,this.b.ab(t,e).then((function(){})))},t.Ma=function(t){return kl(this,this.b.Ma(t).then((function(t){return new Hr(t)})))},t.Ya=function(t){return kl(this,this.b.Ya(t).then((function(){})))},t.kb=function(t,e){var n=this;return kl(this,Xt().then((function(){return void 0===e||Q(e)?{}:bi(new li(e))})).then((function(e){return n.b.kb(t,e)})).then((function(){})))},t.Kc=function(t,e){return kl(this,gc(this,t,e,k(this.Sa,this)))},t.Jc=function(t,e){var n=this;return kl(this,Xt().then((function(){var r=e||tr(),i=ho(t,r);if(!(r=fo(r)))throw new Xr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Xr("tenant-id-mismatch");return n.Sa(i)})))},El.prototype.render=function(){},El.prototype.reset=function(){},El.prototype.getResponse=function(){},El.prototype.execute=function(){};var Tl=null;function Sl(t,e){return(e=Al(e))&&t.a[e]||null}function Al(t){return(t=void 0===t?1e12:t)?t.toString():null}function Nl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=zn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ke(this.f,"click",this.i)}function Ol(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Rl(){}Il.prototype.render=function(t,e){return this.a[this.b.toString()]=new Nl(t,e),this.b++},Il.prototype.reset=function(t){var e=Sl(this,t);t=Al(t),e&&t&&(e.delete(),delete this.a[t])},Il.prototype.getResponse=function(t){return(t=Sl(this,t))?t.getResponse():null},Il.prototype.execute=function(t){(t=Sl(this,t))&&t.execute()},Nl.prototype.getResponse=function(){return Ol(this),this.b},Nl.prototype.execute=function(){Ol(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Nl.prototype.delete=function(){Ol(this),this.g=!0,clearTimeout(this.a),this.a=null,Je(this.f,"click",this.i)},Rl.prototype.g=function(){return Tl||(Tl=new Il),Xt(Tl)},Rl.prototype.c=function(){};var xl=null;function Pl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Dl=new $(et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ll=new Or(3e4,6e4);Pl.prototype.g=function(t){var e=this;return new Bt((function(n,r){var i=setTimeout((function(){r(new Xr("network-request-failed"))}),Ll.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new Xr("internal-error"));delete s[e.a]},Xt(wa(ot(Dl,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new Xr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Pl.prototype.c=function(){this.b--};var Ml=null;function jl(t,e,n,r,i,o,a){if(Ur(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a?(xl||(xl=new Rl),a=xl):(Ml||(Ml=new Pl),a=Ml),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Vl])throw new Xr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ql],!s.document)throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!zn(e)||!this.i&&zn(e).hasChildNodes())throw new Xr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Aa(t,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Ul];this.a[Ul]=function(t){if(Hl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=mr(c,s);"function"==typeof e&&e(t)}};var l=this.a[Fl];this.a[Fl]=function(){if(Hl(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=mr(l,s);"function"==typeof t&&t()}}}var Ul="callback",Fl="expired-callback",Vl="sitekey",ql="size";function Hl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function zl(t,e){return t.h.push(e),e.ka((function(){z(t.h,e)})),e}function Bl(t){if(t.B)throw new Xr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Gl(t,e,n){var r=!1;try{this.b=n||i.a.app()}catch(s){throw new Xr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Xr("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ca()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=i.a.SDK_VERSION?yr(i.a.SDK_VERSION,a):null,jl.call(this,n,t,e,(function(){try{var t=o.b.auth().ha()}catch(e){t=null}return t}),a,Ai(Ti),r)}function Wl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Xr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],0>i||i>=Kl.length)throw new Xr("internal-error","Argument validator received an unsupported number of arguments.");n=Kl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new Xr("argument-error",t+" failed: "+r)}(t=jl.prototype).Da=function(){var t=this;return this.f?this.f:this.f=zl(this,Xt().then((function(){if(wr()&&!lr())return sr();throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.v())})).then((function(e){return t.g=e,Is(t.o,hs,{})})).then((function(e){t.a[Vl]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){Bl(this);var t=this;return zl(this,this.Da().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=zn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!Hn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ut(a.name),'"'),a.type){o.push(' type="',Ut(a.type),'"');var s={};X(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(u(a)?o.className=a:v(a)?o.className=a.join(" "):Bn(o,a)),2<r.length&&Wn(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Bl(this);var t=this;return zl(this,this.render().then((function(e){return new Bt((function(n){var r=t.g.getResponse(e);if(r)n(r);else{t.l.push((function e(r){r&&(function(t,e){B(t.l,(function(t){return t==e}))}(t,e),n(r))})),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Bl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Bl(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=zn(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Gl,jl);var Kl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ql(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:u}}function Yl(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:c}}function Jl(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:m}}function Xl(t,e){return{name:t||"",M:"a function",optional:!!e,N:g}}function $l(t,e){return{name:t||"",M:"null",optional:!!e,N:p}}function Zl(t){return{name:t?t+"Credential":"credential",M:t?"a valid "+t+" credential":"a valid credential",optional:!1,N:function(e){return!!e&&!(!e.na||t&&e.providerId!==t)}}}function th(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&u(t.type)&&g(t.verify))}}}function eh(t,e,n,r){return{name:n||"",M:t.M+" or "+e.M,optional:!!r,N:function(n){return t.N(n)||e.N(n)}}}function nh(t,e){for(var n in e){var r=e[n].name;t[r]=oh(r,t[n],e[n].j)}}function rh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Wl(t,[n],[r],!0),this[e]=r}),r,n,e[n].Za),enumerable:!0})}}function ih(t,e,n,r){t[e]=oh(e,n,r)}function oh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}nh(hl.prototype,{Ya:{name:"applyActionCode",j:[Ql("code")]},Ma:{name:"checkActionCode",j:[Ql("code")]},ab:{name:"confirmPasswordReset",j:[Ql("code"),Ql("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Ql("email"),Ql("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Ql("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Ql("emailLink")]},wc:{name:"onAuthStateChanged",j:[eh(Jl(),Xl(),"nextOrObserver"),Xl("opt_error",!0),Xl("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[eh(Jl(),Xl(),"nextOrObserver"),Xl("opt_error",!0),Xl("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Ql("email"),eh(Jl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Ql("email"),Jl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Ql("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Zl()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[Zl()]},Hc:{name:"signInWithCustomToken",j:[Ql("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Ql("email"),Ql("password")]},Jc:{name:"signInWithEmailLink",j:[Ql("email"),Ql("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Ql("phoneNumber"),th()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[eh({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Tc)}},$l(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ql(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Ql("code")]}}),rh(hl.prototype,{lc:{name:"languageCode",Za:eh(Ql(),$l(),"languageCode")},ti:{name:"tenantId",Za:eh(Ql(),$l(),"tenantId")}}),(hl.Persistence=_u).LOCAL="local",hl.Persistence.SESSION="session",hl.Persistence.NONE="none",nh(Tc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Yl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[Yl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Zl()]},fb:{name:"linkWithCredential",j:[Zl()]},sc:{name:"linkWithPhoneNumber",j:[Ql("phoneNumber"),th()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Zl()]},hb:{name:"reauthenticateWithCredential",j:[Zl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Ql("phoneNumber"),th()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[eh(Jl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ql(null,!0)]},Qc:{name:"unlink",j:[Ql("provider")]},rb:{name:"updateEmail",j:[Ql("email")]},sb:{name:"updatePassword",j:[Ql("password")]},Sc:{name:"updatePhoneNumber",j:[Zl("phone")]},tb:{name:"updateProfile",j:[Jl("profile")]}}),nh(Il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(El.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),nh(Bt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),rh(vc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:Yl("appVerificationDisabledForTesting")}}),nh(yc.prototype,{confirm:{name:"confirm",j:[Ql("verificationCode")]}}),ih(zi,"fromJSON",(function(t){t=u(t)?JSON.parse(t):t;for(var e,n=[Ji,co,vo,Ki],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[eh(Ql(),Jl(),"json")]),ih(lo,"credential",(function(t,e){return new uo(t,e)}),[Ql("email"),Ql("password")]),nh(uo.prototype,{A:{name:"toJSON",j:[Ql(null,!0)]}}),nh(to.prototype,{ya:{name:"addScope",j:[Ql("scope")]},Ga:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ih(to,"credential",eo,[eh(Ql(),Jl(),"token")]),ih(lo,"credentialWithLink",ho,[Ql("email"),Ql("emailLink")]),nh(no.prototype,{ya:{name:"addScope",j:[Ql("scope")]},Ga:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ih(no,"credential",ro,[eh(Ql(),Jl(),"token")]),nh(io.prototype,{ya:{name:"addScope",j:[Ql("scope")]},Ga:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ih(io,"credential",oo,[eh(Ql(),eh(Jl(),$l()),"idToken"),eh(Ql(),$l(),"accessToken",!0)]),nh(ao.prototype,{Ga:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ih(ao,"credential",so,[eh(Ql(),Jl(),"token"),Ql("secret",!0)]),nh(Zi.prototype,{ya:{name:"addScope",j:[Ql("scope")]},credential:{name:"credential",j:[eh(Ql(),eh(Jl(),$l()),"optionsOrIdToken"),eh(Ql(),$l(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),nh(Qi.prototype,{A:{name:"toJSON",j:[Ql(null,!0)]}}),nh(Gi.prototype,{A:{name:"toJSON",j:[Ql(null,!0)]}}),ih(go,"credential",mo,[Ql("verificationId"),Ql("verificationCode")]),nh(go.prototype,{Wa:{name:"verifyPhoneNumber",j:[Ql("phoneNumber"),th()]}}),nh(po.prototype,{A:{name:"toJSON",j:[Ql(null,!0)]}}),nh(Xr.prototype,{toJSON:{name:"toJSON",j:[Ql(null,!0)]}}),nh(So.prototype,{toJSON:{name:"toJSON",j:[Ql(null,!0)]}}),nh(To.prototype,{toJSON:{name:"toJSON",j:[Ql(null,!0)]}}),nh(Gl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ih(ei,"parseLink",ci,[Ql("link")]),function(){if(void 0===i.a||!i.a.INTERNAL||!i.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:zr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:hl,AuthCredential:zi,Error:Xr};ih(t,"EmailAuthProvider",lo,[]),ih(t,"FacebookAuthProvider",to,[]),ih(t,"GithubAuthProvider",no,[]),ih(t,"GoogleAuthProvider",io,[]),ih(t,"TwitterAuthProvider",ao,[]),ih(t,"OAuthProvider",Zi,[Ql("providerId")]),ih(t,"SAMLAuthProvider",$i,[Ql("providerId")]),ih(t,"PhoneAuthProvider",go,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof hl)}}]),ih(t,"RecaptchaVerifier",Gl,[eh(Ql(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Jl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof i.a.app.App)}}]),ih(t,"ActionCodeURL",ei,[]),i.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new hl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),i.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:k((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:k(t.cc,t),addAuthTokenListener:k(t.Wb,t),removeAuthTokenListener:k(t.Ec,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),i.a.registerVersion("@firebase/auth","0.13.6"),i.a.INTERNAL.extendNamespace({User:Tc})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function a(t,e,n){return function(r){return r.lift(new s(t,e,n))}}var s=function(){function t(e,n,r){_classCallCheck(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),u=function(t){function e(t,n,r,a){var s;return _classCallCheck(this,e),(s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t)))._tapNext=i.a,s._tapError=i.a,s._tapComplete=i.a,s._tapError=r||i.a,s._tapComplete=a||i.a,Object(o.a)(n)?(s._context=_assertThisInitialized(s),s._tapNext=n):n&&(s._context=n,s._tapNext=n.next||i.a,s._tapError=n.error||i.a,s._tapComplete=n.complete||i.a),s}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),e}(r.a)},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("mrSG"),a=n("zVF4"),s=n("S+S0"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),p=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}u(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},apps:null,SDK_VERSION:"7.9.2",INTERNAL:{registerComponent:u,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!a.contains(e,t=t||"[DEFAULT]"))throw l.create("no-app",{appName:t});return e[t]}function u(s){var u,c,h=s.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==s.serviceProps&&a.deepExtend(f,s.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(e)),v=p.next();!v.done;v=p.next())e[v.value]._addComponent(s)}catch(y){u={error:y}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(a.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),m.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.5.5",void 0),t.registerVersion("fire-js","")}(_),e.default=_,e.firebase=_},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",(function(){return sr})),n.d(e,"EventType",(function(){return ur})),n.d(e,"WebChannel",(function(){return cr})),n.d(e,"XhrIo",(function(){return lr})),n.d(e,"createWebChannelTransport",(function(){return ar}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function u(t){return"number"==typeof t}function c(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function l(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function f(t){return"array"==h(t)}function d(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function C(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function k(){this.j=this.j,this.i=this.i}k.prototype.j=!1,k.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[v]||(this[v]=++y))},k.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},I=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function S(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var N,O=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function R(t,e){return-1!=t.indexOf(e)}function x(t,e){return t<e?-1:t>e?1:0}t:{var P=a.navigator;if(P){var D=P.userAgent;if(D){N=D;break t}}N=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e,n={};for(e in t)n[e]=t[e];return n}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=l;var V,q,H=R(N,"Opera"),z=R(N,"Trident")||R(N,"MSIE"),B=R(N,"Edge"),G=B||z,W=R(N,"Gecko")&&!(R(N.toLowerCase(),"webkit")&&!R(N,"Edge"))&&!(R(N,"Trident")||R(N,"MSIE"))&&!R(N,"Edge"),K=R(N.toLowerCase(),"webkit")&&!R(N,"Edge");function Q(){var t=a.document;return t?t.documentMode:void 0}t:{var Y="",J=(q=N,W?/rv:([^\);]+)(\)|;)/.exec(q):B?/Edge\/([\d\.]+)/.exec(q):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):K?/WebKit\/(\S+)/.exec(q):H?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(J&&(Y=J?J[1]:""),z){var X=Q();if(null!=X&&X>parseFloat(Y)){V=String(X);break t}}V=Y}var $,Z={};function tt(t){return function(t,e){var n=Z;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=O(String(V)).split("."),r=O(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=x(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||x(0==a[2].length,0==s[2].length)||x(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var et=a.document;$=et&&z?Q()||("CSS1Compat"==et.compatMode?parseInt(V,10):5):void 0;var nt=!z||9<=Number($),rt=z&&!tt("9"),it=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{F(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ia=!1},C(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ct,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ft(t){this.src=t,this.a={},this.b=0}function dt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=pt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),yt={};function gt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Et(r),e&&e[ut]?e.Aa(n,r,p(i)?!!i.capture:!!i,o):mt(e,n,r,!0,i,o)}(t,e,n,r,i);if(f(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=Et(n),t&&t[ut]?t.za(e,n,p(r)?!!r.capture:!!r,i):mt(t,e,n,!1,r,i)}function mt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=Ct(t);if(s||(t[vt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=wt,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _t(t){if(!u(t)&&t&&!t.X){var e=t.src;if(e&&e[ut])dt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ct(e))?(dt(n,t),0==n.b&&(n.src=null,e[vt]=null)):ht(t)}}}function bt(t){return t in yt?yt[t]:yt[t]="on"+t}function wt(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&_t(t),n.call(r,e)}(t,nt?new at(e,this):e=new at(e||c("window.event"),this))}function Ct(t){return(t=t[vt])instanceof ft?t:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Et(t){return"function"==h(t)?t:(t[kt]||(t[kt]=function(e){return t.handleEvent(e)}),t[kt])}function It(){k.call(this),this.c=new ft(this),this.J=this,this.B=null}function Tt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&dt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}C(It,k),It.prototype[ut]=!0,(r=It.prototype).addEventListener=function(t,e,n,r){gt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Et(r),e&&e[ut]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=pt(a=e.a[n],r,i,o))&&(ht(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):e&&(e=Ct(e))&&(n=e.a[n.toString()],e=-1,n&&(e=pt(n,r,i,o)),(r=-1<e?n[e]:null)&&_t(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(s(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;U(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Tt(a,r,!0,t)&&i}if(i=Tt(a=t.a=n,r,!0,t)&&i,i=Tt(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tt(a=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(It.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var St=a.JSON.stringify;function At(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Nt(){this.b=this.a=null}At.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Ot,Rt=new At((function(){return new Pt}),(function(t){t.reset()}));function xt(){var t=jt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pt(){this.next=this.b=this.a=null}function Dt(t){a.setTimeout((function(){throw t}),0)}function Lt(t,e){Ot||function(){var t=a.Promise.resolve(void 0);Ot=function(){t.then(Ut)}}(),Mt||(Ot(),Mt=!0),jt.add(t,e)}Nt.prototype.add=function(t,e){var n=Rt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pt.prototype.reset=function(){this.next=this.b=this.a=null};var Mt=!1,jt=new Nt;function Ut(){for(var t;t=xt();){try{t.a.call(t.b)}catch(n){Dt(n)}var e=Rt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Mt=!1}function Ft(t,e){It.call(this),this.b=t||1,this.a=e||a,this.f=_(this.gb,this),this.g=w()}function Vt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function qt(t,e,n){if("function"==h(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Ht(t,e,n){k.call(this),this.f=null!=n?_(t,n):t,this.c=e,this.b=_(this.$a,this),this.a=[]}function zt(t){t.U=qt(t.b,t.c),t.f.apply(null,t.a)}function Bt(t){k.call(this),this.b=t,this.a={}}C(Ft,It),(r=Ft.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=w()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Vt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=w())},r.G=function(){Ft.N.G.call(this),Vt(this),delete this.a},C(Ht,k),(r=Ht.prototype).ea=!1,r.U=null,r.Ta=function(t){this.a=arguments,this.U?this.ea=!0:zt(this)},r.G=function(){Ht.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,zt(this))},C(Bt,k);var Gt=[];function Wt(t,e,n,r){f(n)||(n&&(Gt[0]=n.toString()),n=Gt);for(var i=0;i<n.length;i++){var o=gt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&_t(t)}),t),t.a={}}function Qt(){}Bt.prototype.G=function(){Bt.N.G.call(this),Kt(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=new It;function Jt(t){ot.call(this,"serverreachability",t)}function Xt(t){Yt.dispatchEvent(new Jt(Yt,t))}function $t(t){ot.call(this,"statevent",t)}function Zt(t){Yt.dispatchEvent(new $t(Yt,t))}function te(t){ot.call(this,"timingevent",t)}function ee(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}C(Jt,ot),C($t,ot),C(te,ot);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},re={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ie(){}function oe(){}ie.prototype.a=null;var ae,se={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ue(){ot.call(this,"d")}function ce(){ot.call(this,"c")}function le(){}function he(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Bt(this),this.O=fe,this.P=new Ft(t=G?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}C(ue,ot),C(ce,ot),C(le,ie),ae=new le;var fe=45e3,de={},pe={};function ve(t,e,n){t.F=1,t.f=Ve(Pe(e)),t.l=n,t.H=!0,ge(t,null)}function ye(t,e,n,r){t.F=1,t.f=Ve(Pe(e)),t.l=null,t.H=n,ge(t,r)}function ge(t,e){t.v=w(),be(t),t.D=Pe(t.f),Fe(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Ht(_(t.Ja,t,t.a),t.J)),Wt(t.I,t.a,"readystatechange",t.cb),e=t.h?M(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Xt(1)}function me(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=_e(t,n);if(i==pe){4==e&&(t.c=4,Zt(14),r=!1);break}if(i==de){t.c=4,Zt(15),r=!1;break}Ie(t,i)}4==e&&0==n.length&&(t.c=1,Zt(16),r=!1),t.b=t.b&&r,r||(Ee(t),ke(t))}function _e(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?pe:(n=Number(e.substring(n,r)),isNaN(n)?de:(r+=1)+n>e.length?pe:(e=e.substr(r,n),t.A=r+n,e))}function be(t){t.R=w()+t.O,we(t,t.O)}function we(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ee(_(t.ab,t),e)}function Ce(t){t.i&&(a.clearTimeout(t.i),t.i=null)}function ke(t){t.g.Ca()||t.m||t.g.na(t)}function Ee(t){Ce(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Vt(t.P),Kt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Ie(t,e){try{t.g.Fa(t,e),Xt(4)}catch(n){}}function Te(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||s(t))I(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(d(t)||s(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(s(t))return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Se(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Se)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t,e){Oe(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ne(t))}function Ne(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Oe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Oe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Oe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=he.prototype).setTimeout=function(t){this.O=t},r.cb=function(t){t=t.target;var e=this.B;e&&3==Pn(t)?e.Ta():this.Ja(t)},r.Ja=function(t){try{if(t==this.a)t:{var e=Pn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!G&&!this.a.aa())){this.m||4!=e||7==n||Xt(8==n||0>=r?3:2),Ce(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Dn(this.a,"X-HTTP-Initial-Response");if(a&&!A(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,Zt(12),Ee(this),ke(this);break t}this.s=!0,Ie(this,s)}this.H?(me(this,e,o),G&&this.b&&3==e&&(Wt(this.I,this.P,"tick",this.bb),this.P.start())):Ie(this,o),4==e&&Ee(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Zt(12)):(this.c=0,Zt(13)),Ee(this),ke(this)}}}catch(u){}},r.bb=function(){if(this.a){var t=Pn(this.a),e=this.a.aa();this.A<e.length&&(Ce(this),me(this,t,e),this.b&&4!=t&&be(this))}},r.cancel=function(){this.m=!0,Ee(this)},r.ab=function(){this.i=null;var t=w();0<=t-this.R?(2!=this.F&&(Xt(3),Zt(17)),Ee(this),this.c=2,ke(this)):we(this,this.R-t)},(r=Se.prototype).C=function(){Ne(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return Ne(this),this.a.concat()},r.get=function(t,e){return Oe(this.b,t)?this.b[t]:e},r.set=function(t,e){Oe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Re=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xe(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof xe?(this.h=void 0!==e?e:t.h,De(this,t.f),this.j=t.j,Le(this,t.b),Me(this,t.i),this.a=t.a,je(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(Re))?(this.h=!!e,De(this,n[1]||"",!0),this.j=qe(n[2]||""),Le(this,n[3]||"",!0),Me(this,n[4]),this.a=qe(n[5]||"",!0),je(this,n[6]||"",!0),this.g=qe(n[7]||"")):(this.h=!!e,this.c=new Ye(null,this.h))}function Pe(t){return new xe(t)}function De(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.b=n?qe(e,!0):e}function Me(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function je(t,e,n){e instanceof Ye?(t.c=e,function(t,e){e&&!t.f&&(Je(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),Ze(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=He(e,Ke)),t.c=new Ye(e,t.h))}function Ue(t,e,n){t.c.set(e,n)}function Fe(t,e,n){f(n)||(n=[String(n)]),Ze(t.c,e,n)}function Ve(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function He(t,e,n){return s(t)?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(He(e,Be,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(He(e,Be,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(He(n,"/"==n.charAt(0)?We:Ge,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",He(n,Qe)),t.join("")},xe.prototype.resolve=function(t){var e=Pe(this),n=!!t.f;n?De(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Le(e,t.b):n=null!=t.i;var r=t.a;if(n)Me(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(R(i,"./")||R(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?je(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Be=/[#\/\?@]/g,Ge=/[#\?:]/g,We=/[#\?]/g,Ke=/[#\?@]/g,Qe=/#/g;function Ye(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Je(t){t.a||(t.a=new Se,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){Je(t),e=en(t,e),Oe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae(t.a,e))}function $e(t,e){return Je(t),e=en(t,e),Oe(t.a.b,e)}function Ze(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),S(n)),t.b+=n.length)}function tn(t){var e=new Ye;return e.c=t.c,t.a&&(e.a=new Se(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)Zt(4),e?(Zt(10),Wn(t.a,t,!1)):(Zt(11),Wn(t.a,t,!0));else{t.b=new he(t,void 0,void 0),t.b.h=t.h,e=Xn(e=t.a,e.Y()?t.f:null,t.i),Zt(4),Fe(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Ue(e,n,r),ye(t.b,e,!1,t.f)}}function on(){this.a=this.b=null}function an(){this.a=new Se}function sn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[v]||(t[v]=++y)):e.charAt(0)+t}function un(t,e){this.b=t,this.a=e}function cn(t){this.g=t||ln,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new an),this.b=null,this.c=[]}(r=Ye.prototype).add=function(t,e){Je(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Je(this),this.a.forEach((function(n,r){I(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.K=function(){Je(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Je(this);var e=[];if(s(t))$e(this,t)&&(e=T(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},r.set=function(t,e){return Je(this),this.c=null,$e(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},C((function(){}),(function(){})),(r=nn.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Dn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Dn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void Yn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Yn(e,2)}else 1==this.M&&(this.g?Zt(6):"11111"==e?(Zt(5),this.g=!0,(!z||10<=Number($))&&(this.c=200,this.b.cancel(),Zt(11),Wn(this.a,this,!0))):(Zt(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Zt(11),Wn(this.a,this,!0)):(Zt(10),Wn(this.a,this,!1)));else{0==this.M?Zt(8):1==this.M&&Zt(9);var t=this.a;t.m=this.c,Yn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},an.prototype.add=function(t){this.a.set(sn(t),t)},an.prototype.C=function(){return this.a.C()};var ln=10;function hn(t,e){!t.a&&(R(e,"spdy")||R(e,"quic")||R(e,"h2"))&&(t.f=t.g,t.a=new an,t.b&&(vn(t,t.b),t.b=null))}function fn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function dn(t){return t.b?1:t.a?t.a.a.c:0}function pn(t,e){return t.b?t=t.b==e:t.a?(e=sn(e),t=Oe(t.a.a.b,e)):t=!1,t}function vn(t,e){t.a?t.a.add(e):t.b=e}function yn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=sn(e),n=Oe(t.a.a.b,n)),n&&Ae(t.a.a,sn(e)))}function gn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return I(t.a.C(),(function(t){e=e.concat(t.j)})),e}return S(t.c)}function mn(){}function _n(){this.a=new mn}function bn(t,e,n){var r=n||"";try{Te(t,(function(t,n){var i=t;p(t)&&(i=St(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}cn.prototype.cancel=function(){this.c=gn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(I(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},mn.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},mn.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var Cn=a.JSON.parse;function kn(t){It.call(this),this.headers=new Se,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=En,this.D=this.F=!1}C(kn,It);var En="",In=/^https?$/i,Tn=["POST","PUT"];function Sn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Nn(t),Rn(t)}function Nn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function On(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Pn(t)||2!=t.T()))if(t.l&&4==Pn(t))qt(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Pn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.A).match(Re)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!In.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<Pn(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.T()+"]",Nn(t)}}finally{Rn(t)}}}function Rn(t,e){if(t.a){xn(t);var n=t.a,r=t.s[0]?l:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function xn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function Pn(t){return t.a?t.a.readyState:0}function Dn(t,e){return t.a?t.a.getResponseHeader(e):null}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Ue(t,e,n),t}function Mn(t){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new cn(t&&t.concurrentRequestLimit),this.ja=new _n,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function jn(t){if(Un(t),3==t.u){var e=t.P++,n=Pe(t.B);Ue(n,"SID",t.H),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Hn(t,n),(e=new he(t,e,void 0)).F=2,e.f=Ve(Pe(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.f.toString(),"")),!n&&a.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=w(),be(e)}Jn(t)}function Un(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(a.clearTimeout(t.l),t.l=null),Kn(t),t.b.cancel(),t.h&&(u(t.h)&&a.clearTimeout(t.h),t.h=null)}function Fn(t,e){t.f.push(new un(t.Qa++,e)),3==t.u&&Vn(t)}function Vn(t){fn(t.b)||t.h||(t.h=!0,Lt(t.Ha,t),t.A=0)}function qn(t,e){var n;n=e?e.W:t.P++;var r=Pe(t.B);Ue(r,"SID",t.H),Ue(r,"RID",n),Ue(r,"AID",t.O),Hn(t,r),t.g&&t.i&&Ln(r,t.g,t.i),n=new he(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=zn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),vn(t.b,n),ve(n,r,e)}function Hn(t,e){t.c&&Te({},(function(t,n){Ue(e,n,t)}))}function zn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?_(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{bn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Bn(t){t.a||t.l||(t.S=1,Lt(t.Ga,t),t.v=0)}function Gn(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(_(t.Ga,t),Qn(t,t.v)),t.v++,0))}function Wn(t,e,n){var r=e.l;r&&hn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Xn(t,null,t.ha),Vn(t)}function Kn(t){null!=t.s&&(a.clearTimeout(t.s),t.s=null)}function Qn(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function Yn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=_(t.eb,t);n||(n=new xe("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||De(n,"https"),Ve(n)),function(t,e){var n=new Qt;if(a.Image){var r=new Image;r.onload=b(wn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=b(wn,n,r,"TestLoadImage: error",!1,e),r.onabort=b(wn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=b(wn,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zt(2);t.u=0,t.c&&t.c.ta(e),Jn(t),Un(t)}function Jn(t){t.u=0,t.m=-1,t.c&&(0==gn(t.b).length&&0==t.f.length||(t.b.c.length=0,S(t.f),t.f.length=0),t.c.sa())}function Xn(t,e,n){var r=function(t){return t instanceof xe?Pe(t):new xe(t,void 0)}(n);if(""!=r.b)e&&Le(r,e+"."+r.b),Me(r,r.i);else{var i=a.location;r=function(t,e,n,r){var i=new xe(null,void 0);return t&&De(i,t),e&&Le(i,e),n&&Me(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&L(t.V,(function(t,e){Ue(r,e,t)})),n=t.I,(e=t.j)&&n&&Ue(r,e,n),Ue(r,"VER",t.wa),Hn(t,r),r}function $n(){}function Zn(){if(z&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function tr(t,e){It.call(this),this.a=new Mn(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){ce.call(this),this.status=1}function rr(t){this.a=t}(r=kn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ae),this.a.onreadystatechange=_(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void An(this,o)}t=n||"";var i=new Se(this.headers);r&&Te(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Sn,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.K()),n=a.FormData&&t instanceof a.FormData,!(0<=E(Tn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.D=function(t){return z&&tt(9)&&u(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_(this.Ba,this)):this.m=qt(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){An(this,o)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Rn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Rn(this,!0)),kn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?On(this):this.Za())},r.Za=function(){On(this)},r.T=function(){try{return 2<Pn(this)?this.a.status:-1}catch(q){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},r.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Cn(e)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Mn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new he(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?U(r=M(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=zn(this,n,e),Ue(i=Pe(this.B),"RID",t),Ue(i,"CVER",22),this.o&&this.j&&Ue(i,"X-HTTP-Session-Id",this.j),Hn(this,i),this.g&&r&&Ln(i,this.g,r),vn(this.b,n),this.W?(Ue(i,"$req",e),Ue(i,"SID","null"),n.S=!0,ve(n,i,null)):ve(n,i,e),this.u=2}}else 3==this.u&&(t?qn(this,t):0==this.f.length||fn(this.b)||qn(this))},r.Ga=function(){this.l=null,this.a=new he(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Pe(this.pa);Ue(t,"RID","rpc"),Ue(t,"SID",this.H),Ue(t,"CI",this.ia?"0":"1"),Ue(t,"AID",this.O),Hn(this,t),Ue(t,"TYPE","xmlhttp"),this.g&&this.i&&Ln(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ye(this.a,t,!0,this.ga)},r.Fa=function(t,e){if(0!=this.u&&(this.a==t||pn(this.b,t)))if(this.m=t.o,!t.s&&pn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(f(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Kn(this),this.a.cancel(),this.a=null}Gn(this),Zt(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(_(this.Ya,this),6e3));if(1>=dn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Yn(this,11)}else if((t.s||this.a==t)&&Kn(this),!A(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Dn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=Dn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ue(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Xn(this,this.Y()?this.ga:null,this.ha),r.s?(yn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ce(r),be(r)),this.a=r):Bn(this),0<this.f.length&&Vn(this)}else"stop"!=r[0]&&"close"!=r[0]||Yn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Yn(this,7):jn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Gn(this),Zt(19))},r.na=function(t){var e=null;if(this.a==t){Kn(this),this.a=null;var n=2}else{if(!pn(this.b,t))return;e=t.j,yn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=w()-t.v,Yt.dispatchEvent(new te(Yt,t.l?t.l.length:0,e,this.A)),Vn(this)):Bn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(dn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=ee(_(t.Ha,t,e),Qn(t,t.A)),t.A++,0)))}(this,t)||2==n&&Gn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Yn(this,5);break;case 4:Yn(this,10);break;case 3:Yn(this,6);break;default:Yn(this,2)}}},r.eb=function(t){Zt(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new kn(this.Ka)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=$n.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},Zn.prototype.a=function(t,e){return new tr(t,e)},C(tr,It),(r=tr.prototype).addEventListener=function(t,e,n,r){tr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){tr.N.removeEventListener.call(this,t,e,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Zt(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Ln(e,t.g,t.i)),(t=t.w).i=n,e=Xn(t.a,null,t.i),Zt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(Fe(e,"MODE","init"),!t.a.o&&t.a.j&&Fe(e,"X-HTTP-Session-Id",t.a.j),t.b=new he(t,void 0,void 0),t.b.h=t.h,ye(t.b,e,!1,null),t.M=0)},r.close=function(){jn(this.a)},r.Wa=function(t){if(s(t)){var e={};e.__data__=t,Fn(this.a,e)}else this.h?((e={}).__data__=St(t),Fn(this.a,e)):Fn(this.a,t)},r.G=function(){this.a.c=null,delete this.f,jn(this.a),delete this.a,tr.N.G.call(this)},C(er,ue),C(nr,ce),C(rr,$n),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(t){this.a.dispatchEvent(new er(t))},rr.prototype.ta=function(t){this.a.dispatchEvent(new nr(t))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=b((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),Zn);Zn.prototype.createWebChannel=Zn.prototype.a,tr.prototype.send=tr.prototype.Wa,tr.prototype.open=tr.prototype.Va,tr.prototype.close=tr.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",oe.EventType=se,se.OPEN="a",se.CLOSE="b",se.ERROR="c",se.MESSAGE="d",It.prototype.listen=It.prototype.za,kn.prototype.listenOnce=kn.prototype.Aa,kn.prototype.getLastError=kn.prototype.Xa,kn.prototype.getLastErrorCode=kn.prototype.ya,kn.prototype.getStatus=kn.prototype.T,kn.prototype.getResponseJson=kn.prototype.Ua,kn.prototype.getResponseText=kn.prototype.aa,kn.prototype.send=kn.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:ne,EventType:re,WebChannel:oe,XhrIo:kn},ar=or.createWebChannelTransport,sr=or.ErrorCode,ur=or.EventType,cr=or.WebChannel,lr=or.XhrIo;e.default=or},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("quSY"),o=n("ngJS");function a(t,e){return new r.a(e?function(n){var r=new i.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:Object(o.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("8Y7J"),i=function t(){_classCallCheck(this,t)},o=n("iqUP"),a=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){o.initializeApp({apiKey:"AIzaSyALw41fzGgRwZtWC0nwSaNPinN96qGVKN8",authDomain:"ng-recipe-book-84c52.firebaseapp.com"})}}]),t}(),s=n("pMnS"),u=function t(){_classCallCheck(this,t)},c=r.mb({encapsulation:0,styles:[[""]],data:{}});function l(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),r.Fb(-1,null,["Welcome to the Recipe Book"]))],null,null)}var h=r.kb("app-home",u,(function(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"app-home",[],null,null,null,l,c)),r.nb(1,49152,null,0,u,[],null,null)],null,null)}),{},{},[]),f=n("s7LF"),d=n("SVse"),p=n("9rNa"),v=n("sPvp"),y=function(){function t(e){_classCallCheck(this,t),this.store=e,this.editMode=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.subscription=this.store.select("shoppingList").subscribe((function(e){e.editedIngredientIndex>-1?(t.editedItem=e.editedIngredient,t.editMode=!0,t.slForm.setValue({name:t.editedItem.name,amount:t.editedItem.amount})):t.editMode=!1}))}},{key:"onSubmit",value:function(t){var e=t.value,n=new p.a(e.name,e.amount);this.store.dispatch(this.editMode?new v.l({ingredient:n}):new v.c(n)),this.editMode=!1,t.reset()}},{key:"onDelete",value:function(){this.store.dispatch(new v.f),this.onClear()}},{key:"onClear",value:function(){this.slForm.reset(),this.editMode=!1}},{key:"ngOnDestroy",value:function(){this.store.dispatch(new v.j),this.subscription.unsubscribe()}}]),t}(),g=n("DQLy"),m=r.mb({encapsulation:0,styles:[[""]],data:{}});function _(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDelete()&&r),r}),null,null)),(t()(),r.Fb(-1,null,["Delete"]))],null,null)}function b(t){return r.Hb(0,[r.Db(402653184,1,{slForm:0}),(t()(),r.ob(1,0,null,null,39,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(2,0,null,null,38,"div",[["class","col-xs-12"]],null,null,null,null,null)),(t()(),r.ob(3,0,null,null,37,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.zb(t,5).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.zb(t,5).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSubmit(r.zb(t,5))&&i),i}),null,null)),r.nb(4,16384,null,0,f.C,[],null,null),r.nb(5,4210688,[[1,4],["f",4]],0,f.s,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.Cb(2048,null,f.b,null,[f.s]),r.nb(7,16384,null,0,f.r,[[4,f.b]],null,null),(t()(),r.ob(8,0,null,null,24,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(9,0,null,null,10,"div",[["class","col-sm-5 form-group"]],null,null,null,null,null)),(t()(),r.ob(10,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(t()(),r.Fb(-1,null,["Name"])),(t()(),r.ob(12,0,null,null,7,"input",[["class","form-control"],["id","name"],["name","name"],["ngModel",""],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.zb(t,13)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.zb(t,13).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.zb(t,13)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.zb(t,13)._compositionEnd(n.target.value)&&i),i}),null,null)),r.nb(13,16384,null,0,f.c,[r.B,r.k,[2,f.a]],null,null),r.nb(14,16384,null,0,f.x,[],{required:[0,"required"]},null),r.Cb(1024,null,f.n,(function(t){return[t]}),[f.x]),r.Cb(1024,null,f.o,(function(t){return[t]}),[f.c]),r.nb(17,671744,null,0,f.t,[[2,f.b],[6,f.n],[8,null],[6,f.o]],{name:[0,"name"],model:[1,"model"]},null),r.Cb(2048,null,f.p,null,[f.t]),r.nb(19,16384,null,0,f.q,[[4,f.p]],null,null),(t()(),r.ob(20,0,null,null,12,"div",[["class","col-sm-2 form-group"]],null,null,null,null,null)),(t()(),r.ob(21,0,null,null,1,"label",[["for","amount"]],null,null,null,null,null)),(t()(),r.Fb(-1,null,["Amount"])),(t()(),r.ob(23,0,null,null,9,"input",[["class","form-control"],["id","amount"],["name","amount"],["ngModel",""],["pattern","^[1-9]+[0-9]*$"],["required",""],["type","number"]],[[1,"required",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.zb(t,24)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.zb(t,24).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.zb(t,24)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.zb(t,24)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r.zb(t,25).onChange(n.target.value)&&i),"input"===e&&(i=!1!==r.zb(t,25).onChange(n.target.value)&&i),"blur"===e&&(i=!1!==r.zb(t,25).onTouched()&&i),i}),null,null)),r.nb(24,16384,null,0,f.c,[r.B,r.k,[2,f.a]],null,null),r.nb(25,16384,null,0,f.u,[r.B,r.k],null,null),r.nb(26,16384,null,0,f.x,[],{required:[0,"required"]},null),r.nb(27,540672,null,0,f.v,[],{pattern:[0,"pattern"]},null),r.Cb(1024,null,f.n,(function(t,e){return[t,e]}),[f.x,f.v]),r.Cb(1024,null,f.o,(function(t,e){return[t,e]}),[f.c,f.u]),r.nb(30,671744,null,0,f.t,[[2,f.b],[6,f.n],[8,null],[6,f.o]],{name:[0,"name"],model:[1,"model"]},null),r.Cb(2048,null,f.p,null,[f.t]),r.nb(32,16384,null,0,f.q,[[4,f.p]],null,null),(t()(),r.ob(33,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(34,0,null,null,6,"div",[["class","col-xs-12"]],null,null,null,null,null)),(t()(),r.ob(35,0,null,null,1,"button",[["class","btn btn-success"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r.Fb(36,null,["",""])),(t()(),r.eb(16777216,null,null,1,null,_)),r.nb(38,16384,null,0,d.j,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.ob(39,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClear()&&r),r}),null,null)),(t()(),r.Fb(-1,null,["Clear"]))],(function(t,e){var n=e.component;t(e,14,0,""),t(e,17,0,"name",""),t(e,26,0,""),t(e,27,0,"^[1-9]+[0-9]*$"),t(e,30,0,"amount",""),t(e,38,0,n.editMode)}),(function(t,e){var n=e.component;t(e,3,0,r.zb(e,7).ngClassUntouched,r.zb(e,7).ngClassTouched,r.zb(e,7).ngClassPristine,r.zb(e,7).ngClassDirty,r.zb(e,7).ngClassValid,r.zb(e,7).ngClassInvalid,r.zb(e,7).ngClassPending),t(e,12,0,r.zb(e,14).required?"":null,r.zb(e,19).ngClassUntouched,r.zb(e,19).ngClassTouched,r.zb(e,19).ngClassPristine,r.zb(e,19).ngClassDirty,r.zb(e,19).ngClassValid,r.zb(e,19).ngClassInvalid,r.zb(e,19).ngClassPending),t(e,23,0,r.zb(e,26).required?"":null,r.zb(e,27).pattern?r.zb(e,27).pattern:null,r.zb(e,32).ngClassUntouched,r.zb(e,32).ngClassTouched,r.zb(e,32).ngClassPristine,r.zb(e,32).ngClassDirty,r.zb(e,32).ngClassValid,r.zb(e,32).ngClassInvalid,r.zb(e,32).ngClassPending),t(e,35,0,!r.zb(e,5).valid),t(e,36,0,n.editMode?"Update":"Add")}))}var w=function(){function t(e){_classCallCheck(this,t),this.store=e}return _createClass(t,[{key:"ngOnInit",value:function(){this.shoppingListState=this.store.select("shoppingList")}},{key:"onEditItem",value:function(t){this.store.dispatch(new v.i(t))}}]),t}(),C=r.mb({encapsulation:0,styles:[[""]],data:{}});function k(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"a",[["class","list-group-item"],["style","cursor: pointer;"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onEditItem(t.context.index)&&r),r}),null,null)),(t()(),r.Fb(1,null,[" "," (",") "]))],null,(function(t,e){t(e,1,0,e.context.$implicit.name,e.context.$implicit.amount)}))}function E(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,7,"div",[["class","col-xs-10"]],null,null,null,null,null)),(t()(),r.ob(2,0,null,null,1,"app-shopping-edit",[],null,null,null,b,m)),r.nb(3,245760,null,0,y,[g.n],null,null),(t()(),r.ob(4,0,null,null,0,"hr",[],null,null,null,null,null)),(t()(),r.ob(5,0,null,null,3,"ul",[["class","list-group"]],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,2,null,k)),r.nb(7,278528,null,0,d.i,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),r.Bb(131072,d.b,[r.h])],(function(t,e){var n=e.component;t(e,3,0),t(e,7,0,r.Gb(e,7,0,r.zb(e,8).transform(n.shoppingListState)).ingredients)}),null)}var I=r.kb("app-shopping-list",w,(function(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"app-shopping-list",[],null,null,null,E,C)),r.nb(1,114688,null,0,w,[g.n],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),T=function t(e){_classCallCheck(this,t),this.payload=e,this.type="TRY_SIGNUP"},S=function t(e){_classCallCheck(this,t),this.payload=e,this.type="TRY_SIGNIN"},A=function t(){_classCallCheck(this,t),this.type="LOGOUT"},N=function(){function t(e){_classCallCheck(this,t),this.store=e}return _createClass(t,[{key:"onSignup",value:function(t){this.store.dispatch(new T({username:t.value.email,password:t.value.password}))}}]),t}(),O=r.mb({encapsulation:0,styles:[[""]],data:{}});function R(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,28,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,27,"div",[["class","col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2"]],null,null,null,null,null)),(t()(),r.ob(2,0,null,null,26,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.zb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.zb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSignup(r.zb(t,4))&&i),i}),null,null)),r.nb(3,16384,null,0,f.C,[],null,null),r.nb(4,4210688,[["f",4]],0,f.s,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.Cb(2048,null,f.b,null,[f.s]),r.nb(6,16384,null,0,f.r,[[4,f.b]],null,null),(t()(),r.ob(7,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.ob(8,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(t()(),r.Fb(-1,null,["Mail"])),(t()(),r.ob(10,0,null,null,5,"input",[["class","form-control"],["id","email"],["name","email"],["ngModel",""],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.zb(t,11)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.zb(t,11).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.zb(t,11)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.zb(t,11)._compositionEnd(n.target.value)&&i),i}),null,null)),r.nb(11,16384,null,0,f.c,[r.B,r.k,[2,f.a]],null,null),r.Cb(1024,null,f.o,(function(t){return[t]}),[f.c]),r.nb(13,671744,null,0,f.t,[[2,f.b],[8,null],[8,null],[6,f.o]],{name:[0,"name"],model:[1,"model"]},null),r.Cb(2048,null,f.p,null,[f.t]),r.nb(15,16384,null,0,f.q,[[4,f.p]],null,null),(t()(),r.ob(16,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.ob(17,0,null,null,1,"label",[["for","password"]],null,null,null,null,null)),(t()(),r.Fb(-1,null,["Password"])),(t()(),r.ob(19,0,null,null,7,"input",[["class","form-control"],["id","password"],["name","password"],["ngModel",""],["type","password"]],[[1,"minlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.zb(t,20)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.zb(t,20).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.zb(t,20)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.zb(t,20)._compositionEnd(n.target.value)&&i),i}),null,null)),r.nb(20,16384,null,0,f.c,[r.B,r.k,[2,f.a]],null,null),r.nb(21,540672,null,0,f.m,[],{minlength:[0,"minlength"]},null),r.Cb(1024,null,f.n,(function(t){return[t]}),[f.m]),r.Cb(1024,null,f.o,(function(t){return[t]}),[f.c]),r.nb(24,671744,null,0,f.t,[[2,f.b],[6,f.n],[8,null],[6,f.o]],{name:[0,"name"],model:[1,"model"]},null),r.Cb(2048,null,f.p,null,[f.t]),r.nb(26,16384,null,0,f.q,[[4,f.p]],null,null),(t()(),r.ob(27,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r.Fb(-1,null,["Sign Up"]))],(function(t,e){t(e,13,0,"email",""),t(e,21,0,6),t(e,24,0,"password","")}),(function(t,e){t(e,2,0,r.zb(e,6).ngClassUntouched,r.zb(e,6).ngClassTouched,r.zb(e,6).ngClassPristine,r.zb(e,6).ngClassDirty,r.zb(e,6).ngClassValid,r.zb(e,6).ngClassInvalid,r.zb(e,6).ngClassPending),t(e,10,0,r.zb(e,15).ngClassUntouched,r.zb(e,15).ngClassTouched,r.zb(e,15).ngClassPristine,r.zb(e,15).ngClassDirty,r.zb(e,15).ngClassValid,r.zb(e,15).ngClassInvalid,r.zb(e,15).ngClassPending),t(e,19,0,r.zb(e,21).minlength?r.zb(e,21).minlength:null,r.zb(e,26).ngClassUntouched,r.zb(e,26).ngClassTouched,r.zb(e,26).ngClassPristine,r.zb(e,26).ngClassDirty,r.zb(e,26).ngClassValid,r.zb(e,26).ngClassInvalid,r.zb(e,26).ngClassPending),t(e,27,0,!r.zb(e,4).valid)}))}var x=r.kb("app-signup",N,(function(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"app-signup",[],null,null,null,R,O)),r.nb(1,49152,null,0,N,[g.n],null,null)],null,null)}),{},{},[]),P=function(){function t(e){_classCallCheck(this,t),this.store=e}return _createClass(t,[{key:"onSignin",value:function(t){this.store.dispatch(new S({username:t.value.email,password:t.value.password}))}}]),t}(),D=r.mb({encapsulation:0,styles:[[""]],data:{}});function L(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,28,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,27,"div",[["class","col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2"]],null,null,null,null,null)),(t()(),r.ob(2,0,null,null,26,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r.zb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.zb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.onSignin(r.zb(t,4))&&i),i}),null,null)),r.nb(3,16384,null,0,f.C,[],null,null),r.nb(4,4210688,[["f",4]],0,f.s,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.Cb(2048,null,f.b,null,[f.s]),r.nb(6,16384,null,0,f.r,[[4,f.b]],null,null),(t()(),r.ob(7,0,null,null,8,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.ob(8,0,null,null,1,"label",[["for","email"]],null,null,null,null,null)),(t()(),r.Fb(-1,null,["Mail"])),(t()(),r.ob(10,0,null,null,5,"input",[["class","form-control"],["id","email"],["name","email"],["ngModel",""],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.zb(t,11)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.zb(t,11).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.zb(t,11)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.zb(t,11)._compositionEnd(n.target.value)&&i),i}),null,null)),r.nb(11,16384,null,0,f.c,[r.B,r.k,[2,f.a]],null,null),r.Cb(1024,null,f.o,(function(t){return[t]}),[f.c]),r.nb(13,671744,null,0,f.t,[[2,f.b],[8,null],[8,null],[6,f.o]],{name:[0,"name"],model:[1,"model"]},null),r.Cb(2048,null,f.p,null,[f.t]),r.nb(15,16384,null,0,f.q,[[4,f.p]],null,null),(t()(),r.ob(16,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.ob(17,0,null,null,1,"label",[["for","password"]],null,null,null,null,null)),(t()(),r.Fb(-1,null,["Password"])),(t()(),r.ob(19,0,null,null,7,"input",[["class","form-control"],["id","password"],["name","password"],["ngModel",""],["type","password"]],[[1,"minlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.zb(t,20)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.zb(t,20).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.zb(t,20)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.zb(t,20)._compositionEnd(n.target.value)&&i),i}),null,null)),r.nb(20,16384,null,0,f.c,[r.B,r.k,[2,f.a]],null,null),r.nb(21,540672,null,0,f.m,[],{minlength:[0,"minlength"]},null),r.Cb(1024,null,f.n,(function(t){return[t]}),[f.m]),r.Cb(1024,null,f.o,(function(t){return[t]}),[f.c]),r.nb(24,671744,null,0,f.t,[[2,f.b],[6,f.n],[8,null],[6,f.o]],{name:[0,"name"],model:[1,"model"]},null),r.Cb(2048,null,f.p,null,[f.t]),r.nb(26,16384,null,0,f.q,[[4,f.p]],null,null),(t()(),r.ob(27,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r.Fb(-1,null,["Sign In"]))],(function(t,e){t(e,13,0,"email",""),t(e,21,0,6),t(e,24,0,"password","")}),(function(t,e){t(e,2,0,r.zb(e,6).ngClassUntouched,r.zb(e,6).ngClassTouched,r.zb(e,6).ngClassPristine,r.zb(e,6).ngClassDirty,r.zb(e,6).ngClassValid,r.zb(e,6).ngClassInvalid,r.zb(e,6).ngClassPending),t(e,10,0,r.zb(e,15).ngClassUntouched,r.zb(e,15).ngClassTouched,r.zb(e,15).ngClassPristine,r.zb(e,15).ngClassDirty,r.zb(e,15).ngClassValid,r.zb(e,15).ngClassInvalid,r.zb(e,15).ngClassPending),t(e,19,0,r.zb(e,21).minlength?r.zb(e,21).minlength:null,r.zb(e,26).ngClassUntouched,r.zb(e,26).ngClassTouched,r.zb(e,26).ngClassPristine,r.zb(e,26).ngClassDirty,r.zb(e,26).ngClassValid,r.zb(e,26).ngClassInvalid,r.zb(e,26).ngClassPending),t(e,27,0,!r.zb(e,4).valid)}))}var M=r.kb("app-signin",P,(function(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"app-signin",[],null,null,null,L,D)),r.nb(1,49152,null,0,P,[g.n],null,null)],null,null)}),{},{},[]),j=n("iInd"),U=n("3V6w"),F=n("g0Sx"),V=function(){function t(e){_classCallCheck(this,t),this.store=e}return _createClass(t,[{key:"ngOnInit",value:function(){this.authState=this.store.select("auth")}},{key:"onSaveData",value:function(){this.store.dispatch(new F.i)}},{key:"onFetchData",value:function(){this.store.dispatch(new F.f)}},{key:"onLogout",value:function(){this.store.dispatch(new A)}}]),t}(),q=r.mb({encapsulation:0,styles:[[""]],data:{}});function H(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,2,"a",[["routerLink","/signup"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.zb(t,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i}),null,null)),r.nb(2,671744,null,0,j.r,[j.o,j.a,d.h],{routerLink:[0,"routerLink"]},null),(t()(),r.Fb(-1,null,["Register"])),(t()(),r.ob(4,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),r.ob(5,0,null,null,2,"a",[["routerLink","/signin"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.zb(t,6).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i}),null,null)),r.nb(6,671744,null,0,j.r,[j.o,j.a,d.h],{routerLink:[0,"routerLink"]},null),(t()(),r.Fb(-1,null,["Login"]))],(function(t,e){t(e,2,0,"/signup"),t(e,6,0,"/signin")}),(function(t,e){t(e,1,0,r.zb(e,2).target,r.zb(e,2).href),t(e,5,0,r.zb(e,6).target,r.zb(e,6).href)}))}function z(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onLogout()&&r),r}),null,null)),(t()(),r.Fb(-1,null,["Logout"]))],null,null)}function B(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,11,"li",[["appDropdown",""],["class","dropdown"]],[[2,"open",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.zb(t,1).toggleOpen()&&i),i}),null,null)),r.nb(1,16384,null,0,U.a,[],null,null),(t()(),r.ob(2,0,null,null,2,"a",[["class","dropdown-toggle"],["role","button"],["style","cursor: pointer;"]],null,null,null,null,null)),(t()(),r.Fb(-1,null,["Manage "])),(t()(),r.ob(4,0,null,null,0,"span",[["class","caret"]],null,null,null,null,null)),(t()(),r.ob(5,0,null,null,6,"ul",[["class","dropdown-menu"]],null,null,null,null,null)),(t()(),r.ob(6,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),r.ob(7,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onSaveData()&&r),r}),null,null)),(t()(),r.Fb(-1,null,["Save Data"])),(t()(),r.ob(9,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),r.ob(10,0,null,null,1,"a",[["style","cursor: pointer;"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onFetchData()&&r),r}),null,null)),(t()(),r.Fb(-1,null,["Fetch Data"]))],null,(function(t,e){t(e,0,0,r.zb(e,1).isOpen)}))}function G(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,32,"nav",[["class","navbar navbar-default"]],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,31,"div",[["class","container-fluid"]],null,null,null,null,null)),(t()(),r.ob(2,0,null,null,3,"div",[["class","navbar-header"]],null,null,null,null,null)),(t()(),r.ob(3,0,null,null,2,"a",[["class","navbar-brand"],["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.zb(t,4).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i}),null,null)),r.nb(4,671744,null,0,j.r,[j.o,j.a,d.h],{routerLink:[0,"routerLink"]},null),(t()(),r.Fb(-1,null,["Recipe Book"])),(t()(),r.ob(6,0,null,null,26,"div",[["class","collapse navbar-collapse"]],null,null,null,null,null)),(t()(),r.ob(7,0,null,null,14,"ul",[["class","nav navbar-nav"]],null,null,null,null,null)),(t()(),r.ob(8,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.nb(9,1720320,null,2,j.q,[j.o,r.k,r.B,[2,j.p],[2,j.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Db(603979776,1,{links:1}),r.Db(603979776,2,{linksWithHrefs:1}),(t()(),r.ob(12,0,null,null,2,"a",[["routerLink","/recipes"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.zb(t,13).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i}),null,null)),r.nb(13,671744,[[2,4]],0,j.r,[j.o,j.a,d.h],{routerLink:[0,"routerLink"]},null),(t()(),r.Fb(-1,null,["Recipes"])),(t()(),r.ob(15,0,null,null,6,"li",[["routerLinkActive","active"]],null,null,null,null,null)),r.nb(16,1720320,null,2,j.q,[j.o,r.k,r.B,[2,j.p],[2,j.r]],{routerLinkActive:[0,"routerLinkActive"]},null),r.Db(603979776,3,{links:1}),r.Db(603979776,4,{linksWithHrefs:1}),(t()(),r.ob(19,0,null,null,2,"a",[["routerLink","/shopping-list"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.zb(t,20).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i}),null,null)),r.nb(20,671744,[[4,4]],0,j.r,[j.o,j.a,d.h],{routerLink:[0,"routerLink"]},null),(t()(),r.Fb(-1,null,["Shopping List"])),(t()(),r.ob(22,0,null,null,10,"ul",[["class","nav navbar-nav navbar-right"]],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,2,null,H)),r.nb(24,16384,null,0,d.j,[r.M,r.J],{ngIf:[0,"ngIf"]},null),r.Bb(131072,d.b,[r.h]),(t()(),r.ob(26,0,null,null,3,"li",[],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,2,null,z)),r.nb(28,16384,null,0,d.j,[r.M,r.J],{ngIf:[0,"ngIf"]},null),r.Bb(131072,d.b,[r.h]),(t()(),r.eb(16777216,null,null,2,null,B)),r.nb(31,16384,null,0,d.j,[r.M,r.J],{ngIf:[0,"ngIf"]},null),r.Bb(131072,d.b,[r.h])],(function(t,e){var n=e.component;t(e,4,0,"/"),t(e,9,0,"active"),t(e,13,0,"/recipes"),t(e,16,0,"active"),t(e,20,0,"/shopping-list"),t(e,24,0,!r.Gb(e,24,0,r.zb(e,25).transform(n.authState)).authenticated),t(e,28,0,r.Gb(e,28,0,r.zb(e,29).transform(n.authState)).authenticated),t(e,31,0,r.Gb(e,31,0,r.zb(e,32).transform(n.authState)).authenticated)}),(function(t,e){t(e,3,0,r.zb(e,4).target,r.zb(e,4).href),t(e,12,0,r.zb(e,13).target,r.zb(e,13).href),t(e,19,0,r.zb(e,20).target,r.zb(e,20).href)}))}var W=r.mb({encapsulation:0,styles:[[""]],data:{}});function K(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"app-header",[],null,null,null,G,q)),r.nb(1,114688,null,0,V,[g.n],null,null),(t()(),r.ob(2,0,null,null,4,"div",[["class","container"]],null,null,null,null,null)),(t()(),r.ob(3,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(4,0,null,null,2,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),r.ob(5,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.nb(6,212992,null,0,j.t,[j.b,r.M,r.j,[8,null],r.h],null,null)],(function(t,e){t(e,1,0),t(e,6,0)}),null)}var Q=r.kb("app-root",a,(function(t){return r.Hb(0,[(t()(),r.ob(0,0,null,null,1,"app-root",[],null,null,null,K,W)),r.nb(1,114688,null,0,a,[],null,null)],(function(t,e){t(e,1,0)}),null)}),{},{},[]),Y=n("cUpR"),J=n("IheW"),X=n("IzEk"),$=n("eIep"),Z=function(){function t(e){_classCallCheck(this,t),this.store=e}return _createClass(t,[{key:"intercept",value:function(t,e){return console.log("Intercepted",t),this.store.select("auth").pipe(Object(X.a)(1),Object($.a)((function(n){var r=t.clone({params:t.params.append("auth",n.token)});return e.handle(r)})))}}]),t}(),tt=n("vkgz"),et=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"intercept",value:function(t,e){return e.handle(t).pipe(Object(tt.a)((function(t){console.log("Logging Interceptor",t)})))}}]),t}(),nt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"handleError",value:function(t){/Loading chunk [\d]+ failed/.test(t.message)&&window.location.reload()}}]),t}(),rt=function t(){_classCallCheck(this,t)},it=n("PCNd"),ot=function t(){_classCallCheck(this,t)},at=function t(){_classCallCheck(this,t)},st=function t(){_classCallCheck(this,t)},ut=function t(){_classCallCheck(this,t)},ct={ingredients:[new p.a("Apples",5),new p.a("Tomatoes",10)],editedIngredient:null,editedIngredientIndex:-1};function lt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v.a:return Object.assign({},t,{ingredients:[].concat(_toConsumableArray(t.ingredients),[e.payload])});case v.b:return Object.assign({},t,{ingredients:[].concat(_toConsumableArray(t.ingredients),_toConsumableArray(e.payload))});case v.k:var n=Object.assign({},t.ingredients[t.editedIngredientIndex],e.payload.ingredient),r=_toConsumableArray(t.ingredients);return r[t.editedIngredientIndex]=n,Object.assign({},t,{ingredients:r,editedIngredient:null,editedIngredientIndex:-1});case v.e:var i=_toConsumableArray(t.ingredients);return i.splice(t.editedIngredientIndex,1),Object.assign({},t,{ingredients:i,editedIngredient:null,editedIngredientIndex:-1});case v.g:var o=Object.assign({},t.ingredients[e.payload]);return Object.assign({},t,{editedIngredient:o,editedIngredientIndex:e.payload});case v.h:return Object.assign({},t,{editedIngredient:null,editedIngredientIndex:-1});default:return t}}var ht={token:null,authenticated:!1};function ft(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SIGNUP":case"SIGNIN":return Object.assign({},t,{authenticated:!0});case"LOGOUT":return Object.assign({},t,{token:null,authenticated:!1});case"SET_TOKEN":return Object.assign({},t,{token:e.payload});default:return t}}var dt,pt=n("Yml6"),vt=n("mrSG"),yt=n("lJxs"),gt=n("5+tZ"),mt=n("Cfvw"),_t=(dt=function t(e,n){var r=this;_classCallCheck(this,t),this.actions$=e,this.router=n,this.authSignup=this.actions$.pipe(Object(pt.f)("TRY_SIGNUP"),Object(yt.a)((function(t){return t.payload})),Object($.a)((function(t){return Object(mt.a)(o.auth().createUserWithEmailAndPassword(t.username,t.password))})),Object($.a)((function(){return Object(mt.a)(o.auth().currentUser.getIdToken())})),Object(gt.a)((function(t){return[{type:"SIGNUP"},{type:"SET_TOKEN",payload:t}]}))),this.authSignin=this.actions$.pipe(Object(pt.f)("TRY_SIGNIN"),Object(yt.a)((function(t){return t.payload})),Object($.a)((function(t){return Object(mt.a)(o.auth().signInWithEmailAndPassword(t.username,t.password))})),Object($.a)((function(){return Object(mt.a)(o.auth().currentUser.getIdToken())})),Object(gt.a)((function(t){return r.router.navigate(["/"]),[{type:"SIGNIN"},{type:"SET_TOKEN",payload:t}]}))),this.authLogout=this.actions$.pipe(Object(pt.f)("LOGOUT"),Object(tt.a)((function(){r.router.navigate(["/"])})))},vt.__decorate([Object(pt.b)()],dt.prototype,"authSignup",void 0),vt.__decorate([Object(pt.b)()],dt.prototype,"authSignin",void 0),vt.__decorate([Object(pt.b)({dispatch:!1})],dt.prototype,"authLogout",void 0),dt),bt=n("zp1y"),wt=function t(){_classCallCheck(this,t)},Ct=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"serialize",value:function(t){return{root:this.serializeRoute(t.root),url:t.url}}},{key:"serializeRoute",value:function(t){var e=this,n=t.children.map((function(t){return e.serializeRoute(t)}));return{params:t.params,paramMap:t.paramMap,data:t.data,url:t.url,outlet:t.outlet,routeConfig:t.routeConfig?{component:t.routeConfig.component,path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet}:null,queryParams:t.queryParams,queryParamMap:t.queryParamMap,fragment:t.fragment,component:t.routeConfig?t.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:n[0],pathFromRoot:void 0,children:n}}}]),t}(),kt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"serialize",value:function(t){return{root:this.serializeRoute(t.root),url:t.url}}},{key:"serializeRoute",value:function(t){var e=this,n=t.children.map((function(t){return e.serializeRoute(t)}));return{params:t.params,data:t.data,url:t.url,outlet:t.outlet,routeConfig:t.routeConfig?{path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet}:null,queryParams:t.queryParams,fragment:t.fragment,firstChild:n[0],children:n}}}]),t}(),Et=function(){var t={PreActivation:1,PostActivation:2};return t[t.PreActivation]="PreActivation",t[t.PostActivation]="PostActivation",t}(),It=new r.o("@ngrx/router-store Internal Configuration"),Tt=new r.o("@ngrx/router-store Configuration");function St(t){return Object.assign({stateKey:"router",serializer:Ct,navigationActionTiming:Et.PreActivation},t)}var At=function(){var t={NONE:1,ROUTER:2,STORE:3};return t[t.NONE]="NONE",t[t.ROUTER]="ROUTER",t[t.STORE]="STORE",t}(),Nt=function(){function t(e,n,r,i,o){_classCallCheck(this,t),this.store=e,this.router=n,this.serializer=r,this.errorHandler=i,this.config=o,this.lastEvent=null,this.trigger=At.NONE,this.stateKey=this.config.stateKey,this.setUpStoreStateListener(),this.setUpRouterEventsListener()}return _createClass(t,[{key:"setUpStoreStateListener",value:function(){var t=this;this.store.pipe(Object(g.y)(this.stateKey),Object(bt.a)(this.store)).subscribe((function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];t.navigateIfNeeded(r,i)}))}},{key:"navigateIfNeeded",value:function(t,e){var n=this;if(t&&t.state&&this.trigger!==At.ROUTER&&!(this.lastEvent instanceof j.g)){var r=t.state.url;this.router.url!==r&&(this.storeState=e,this.trigger=At.STORE,this.router.navigateByUrl(r).catch((function(t){n.errorHandler.handleError(t)})))}}},{key:"setUpRouterEventsListener",value:function(){var t,e=this,n=this.config.navigationActionTiming===Et.PostActivation;this.router.events.pipe(Object(bt.a)(this.store)).subscribe((function(r){var i=_slicedToArray(r,2),o=i[0],a=i[1];e.lastEvent=o,o instanceof j.g?(e.routerState=e.serializer.serialize(e.router.routerState.snapshot),e.trigger!==At.STORE&&(e.storeState=a,e.dispatchRouterRequest(o))):o instanceof j.v?(t=o,n||e.trigger===At.STORE||e.dispatchRouterNavigation(o)):o instanceof j.d?(e.dispatchRouterCancel(o),e.reset()):o instanceof j.f?(e.dispatchRouterError(o),e.reset()):o instanceof j.e&&(e.trigger!==At.STORE&&(n&&e.dispatchRouterNavigation(t),e.dispatchRouterNavigated(o)),e.reset())}))}},{key:"dispatchRouterRequest",value:function(t){this.dispatchRouterAction("@ngrx/router-store/request",{event:t})}},{key:"dispatchRouterNavigation",value:function(t){var e=this.serializer.serialize(t.state);this.dispatchRouterAction("@ngrx/router-store/navigation",{routerState:e,event:new j.v(t.id,t.url,t.urlAfterRedirects,e)})}},{key:"dispatchRouterCancel",value:function(t){this.dispatchRouterAction("@ngrx/router-store/cancel",{storeState:this.storeState,event:t})}},{key:"dispatchRouterError",value:function(t){this.dispatchRouterAction("@ngrx/router-store/error",{storeState:this.storeState,event:new j.f(t.id,t.url,"".concat(t))})}},{key:"dispatchRouterNavigated",value:function(t){var e=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction("@ngrx/router-store/navigated",{event:t,routerState:e})}},{key:"dispatchRouterAction",value:function(t,e){this.trigger=At.ROUTER;try{this.store.dispatch({type:t,payload:Object.assign({routerState:this.routerState},e,{event:1===this.config.routerState?{id:e.event.id,url:e.event.url}:e.event})})}finally{this.trigger=At.NONE}}},{key:"reset",value:function(){this.trigger=At.NONE,this.storeState=null,this.routerState=null}}],[{key:"forRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[{provide:It,useValue:e},{provide:Tt,useFactory:St,deps:[It]},{provide:wt,useClass:e.serializer?e.serializer:1===e.routerState?kt:Ct}]}}}]),t}(),Ot=r.lb(i,[a],(function(t){return r.xb([r.yb(512,r.j,r.X,[[8,[s.a,h,I,x,M,Q]],[3,r.j],r.v]),r.yb(5120,r.s,r.ib,[[3,r.s]]),r.yb(4608,d.l,d.k,[r.s,[2,d.r]]),r.yb(5120,r.fb,r.jb,[r.x]),r.yb(5120,r.q,r.gb,[]),r.yb(5120,r.r,r.hb,[]),r.yb(4608,Y.b,Y.k,[d.d]),r.yb(6144,r.E,null,[Y.b]),r.yb(4608,Y.e,Y.g,[]),r.yb(5120,Y.c,(function(t,e,n,r,i,o,a,s){return[new Y.i(t,e,n),new Y.n(r),new Y.m(i,o,a,s)]}),[d.d,r.x,r.z,d.d,d.d,Y.e,r.Y,[2,Y.f]]),r.yb(4608,Y.d,Y.d,[Y.c,r.x]),r.yb(135680,Y.l,Y.l,[d.d]),r.yb(4608,Y.j,Y.j,[Y.d,Y.l,r.c]),r.yb(6144,r.C,null,[Y.j]),r.yb(6144,Y.o,null,[Y.l]),r.yb(4608,r.K,r.K,[r.x]),r.yb(4608,J.i,J.o,[d.d,r.z,J.m]),r.yb(4608,J.p,J.p,[J.i,J.n]),r.yb(5120,J.a,(function(t,e){return[t,new Z(e),new et]}),[J.p,g.n]),r.yb(4608,J.l,J.l,[]),r.yb(6144,J.j,null,[J.l]),r.yb(4608,J.h,J.h,[J.j]),r.yb(6144,J.b,null,[J.h]),r.yb(4608,J.f,J.k,[J.b,r.p]),r.yb(4608,J.c,J.c,[J.f]),r.yb(5120,j.a,j.E,[j.o]),r.yb(4608,j.i,j.i,[]),r.yb(6144,j.j,null,[j.i]),r.yb(135680,j.u,j.u,[j.o,r.u,r.i,r.p,j.j]),r.yb(4608,j.h,j.h,[]),r.yb(5120,j.J,j.A,[j.o,d.o,j.k]),r.yb(5120,j.l,j.H,[j.F]),r.yb(5120,r.b,(function(t){return[t]}),[j.l]),r.yb(4608,f.A,f.A,[]),r.yb(1073742336,d.c,d.c,[]),r.yb(512,r.l,nt,[]),r.yb(1024,r.w,(function(){return[j.z()]}),[]),r.yb(512,j.F,j.F,[r.p]),r.yb(256,r.c,"learn-app",[]),r.yb(2048,Y.p,null,[r.c]),r.yb(1024,r.d,(function(t,e,n,r,i){return[Y.r(t),j.G(e),Y.q(n,r,i)]}),[[2,r.w],j.F,Y.p,d.d,r.p]),r.yb(512,r.e,r.e,[[2,r.d]]),r.yb(131584,r.g,r.g,[r.x,r.Y,r.p,r.l,r.j,r.e]),r.yb(1073742336,r.f,r.f,[r.g]),r.yb(1073742336,Y.a,Y.a,[[3,Y.a]]),r.yb(1073742336,J.e,J.e,[]),r.yb(1073742336,J.d,J.d,[]),r.yb(1024,j.y,j.C,[[3,j.o]]),r.yb(512,j.x,j.c,[]),r.yb(512,j.b,j.b,[]),r.yb(256,j.k,{preloadingStrategy:j.i},[]),r.yb(1024,d.h,j.B,[d.n,[2,d.a],j.k]),r.yb(512,d.g,d.g,[d.h,d.n]),r.yb(512,r.i,r.i,[]),r.yb(512,r.u,r.H,[r.i,[2,r.I]]),r.yb(1024,j.m,(function(){return[[{path:"",component:u},{path:"recipes",loadChildren:"./recipes/recipes.module#RecipesModule"},{path:"shopping-list",component:w}],[{path:"signup",component:N},{path:"signin",component:P}]]}),[]),r.yb(1024,j.o,j.D,[r.g,j.x,j.b,d.g,r.p,r.u,r.i,j.m,j.k,[2,j.w],[2,j.n]]),r.yb(1073742336,j.s,j.s,[[2,j.y],[2,j.o]]),r.yb(1073742336,rt,rt,[]),r.yb(1073742336,it.a,it.a,[]),r.yb(1073742336,f.z,f.z,[]),r.yb(1073742336,f.l,f.l,[]),r.yb(1073742336,ot,ot,[]),r.yb(1073742336,at,at,[]),r.yb(1073742336,st,st,[]),r.yb(1073742336,ut,ut,[]),r.yb(131584,g.a,g.a,[]),r.yb(2048,g.h,null,[g.a]),r.yb(256,g.D,void 0,[]),r.yb(1024,g.d,g.R,[g.D]),r.yb(256,g.F,{shoppingList:lt,auth:ft},[]),r.yb(2048,g.G,null,[g.F]),r.yb(1024,g.c,g.O,[r.p,g.F,g.G]),r.yb(256,g.E,g.s,[]),r.yb(256,g.M,void 0,[]),r.yb(1024,g.r,g.B,[g.M]),r.yb(1024,g.N,g.U,[g.r]),r.yb(1024,g.e,(function(t,e){return[g.A(t),g.z(e)]}),[g.N,g.N]),r.yb(256,g.q,[],[]),r.yb(1024,g.L,g.S,[g.e,g.q]),r.yb(1024,g.f,g.v,[g.E,g.L]),r.yb(131584,g.g,g.g,[g.h,g.d,g.c,g.f]),r.yb(2048,g.i,null,[g.g]),r.yb(131584,g.k,g.k,[]),r.yb(131584,g.l,g.l,[g.a,g.i,g.k,g.d]),r.yb(2048,g.m,null,[g.l]),r.yb(512,g.n,g.n,[g.m,g.a,g.g]),r.yb(1024,g.C,g.T,[[3,g.n]]),r.yb(1073742336,g.p,g.p,[g.a,g.i,g.k,g.n,[2,g.C]]),r.yb(512,pt.c,pt.c,[r.l,g.n]),r.yb(131584,pt.l,pt.l,[pt.c,g.n]),r.yb(512,pt.a,pt.a,[g.k]),r.yb(512,_t,_t,[pt.a,j.o]),r.yb(1024,pt.j,pt.g,[_t]),r.yb(1024,pt.i,pt.h,[[3,pt.l]]),r.yb(1073742336,pt.e,pt.e,[pt.c,pt.l,g.n,pt.j,[2,g.p],[2,g.o],[2,pt.i]]),r.yb(512,wt,Ct,[]),r.yb(256,It,{},[]),r.yb(1024,Tt,St,[It]),r.yb(1073742336,Nt,Nt,[g.n,j.o,wt,r.l,Tt]),r.yb(1073742336,i,i,[]),r.yb(256,r.W,!0,[]),r.yb(256,J.m,"XSRF-TOKEN",[]),r.yb(256,J.n,"X-XSRF-TOKEN",[])])}));Object(r.Q)(),Y.h().bootstrapModuleFactory(Ot).catch((function(t){return console.error(t)}))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,p.prototype.create),i}return r.__extends(e,t),e}(Error),p=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?v(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new d(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function v(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function g(t){return JSON.parse(t)}var m=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=g(c(o[0])||""),n=g(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},_=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),b=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function w(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=p,e.FirebaseError=d,e.Sha1=_,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new b(t,e);return n.subscribe.bind(n)},e.decode=m,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=C,e.getUA=f,e.isAdmin=function(t){var e=m(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=m(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=m(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=m(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=g,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e,n){var r={"./recipes/recipes.module.ngfactory":["oQBx",5]};function i(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],i=e[0];return n.e(e[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id="zn8P",t.exports=i},zp1y:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("l7GE"),i=n("ZUHj");function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new a(e,n))}}var a=function(){function t(e,n){_classCallCheck(this,t),this.observables=e,this.project=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new s(t,this.observables,this.project))}}]),t}(),s=function(t){function e(t,n,r){var o;_classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).observables=n,o.project=r,o.toRespond=[];var a=n.length;o.values=new Array(a);for(var s=0;s<a;s++)o.toRespond.push(s);for(var u=0;u<a;u++){var c=n[u];o.add(Object(i.a)(_assertThisInitialized(o),c,c,u))}return o}return _inherits(e,t),_createClass(e,[{key:"notifyNext",value:function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(_toConsumableArray(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),e}(r.a)}},[[0,0]]]);